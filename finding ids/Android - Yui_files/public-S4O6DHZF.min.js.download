var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

import{a as tn}from"https://app.gitbook.com/public/app/chunks/chunk-TJKCNZXS.min.js";import{a as Rw,b as Aw,c as Bw,d as tp,e as g1,f as C1,g as S1,h as Ka,i as Q1,j as rk}from"https://app.gitbook.com/public/app/chunks/chunk-DCJGXFVE.min.js";import{a as zc,c as $1}from"https://app.gitbook.com/public/app/chunks/chunk-2LR74NPA.min.js";import{a as LE}from"https://app.gitbook.com/public/app/chunks/chunk-QOHRQ2UE.min.js";import{a as Cw,b as B1}from"https://app.gitbook.com/public/app/chunks/chunk-YN5P2V6E.min.js";import{a as jw}from"https://app.gitbook.com/public/app/chunks/chunk-HJII5GHG.min.js";import{a as hr,b as $c}from"https://app.gitbook.com/public/app/chunks/chunk-OYDBI3XR.min.js";import{a as mp}from"https://app.gitbook.com/public/app/chunks/chunk-QNBNEXGA.min.js";import{a as hy,b as Z1}from"https://app.gitbook.com/public/app/chunks/chunk-5KSDHK6A.min.js";import{a as K1,b as j1,c as U1,d as Y1}from"https://app.gitbook.com/public/app/chunks/chunk-QLKGBZY3.min.js";import{a as ip}from"https://app.gitbook.com/public/app/chunks/chunk-CSAGCRRH.min.js";import{A as py,B as v1,C as fy,D as Kc,a as le,b as ct,c as Gc,d as bu,e as Uw,f as Zm,g as $m,h as Yw,i as Zw,j as $w,k as Qw,l as Jw,m as ep,n as t1,o as o1,p as n1,q as Fa,r as Hc,s as r1,t as i1,u as kn,v as a1,w as Ga,x as Vr,y as s1}from"https://app.gitbook.com/public/app/chunks/chunk-ZNVCREL6.min.js";import{a as ga}from"https://app.gitbook.com/public/app/chunks/chunk-WJ7OF6QP.min.js";import{a as G1,b as H1,c as J1}from"https://app.gitbook.com/public/app/chunks/chunk-RIF6XQGJ.min.js";import{a as u1,b as h1}from"https://app.gitbook.com/public/app/chunks/chunk-4VE3DUB4.min.js";import{a as Lo,b as ku,c as Ye,d as pp,e as ja}from"https://app.gitbook.com/public/app/chunks/chunk-TCEMKN6J.min.js";import{a as rp}from"https://app.gitbook.com/public/app/chunks/chunk-JNIMAYXY.min.js";import{a as Qc,b as ek,c as tk}from"https://app.gitbook.com/public/app/chunks/chunk-WYLLZWEI.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-EK3O3MDC.min.js";import{a as tm,b as $C,c as Iw,d as vu,e as Vs,f as qr,g as wu,h as up,i as b1,k as X1,l as vr,n as ok,o as nk}from"https://app.gitbook.com/public/app/chunks/chunk-KY4E5E52.min.js";import{a as Fe,b as yr,c as yp}from"https://app.gitbook.com/public/app/chunks/chunk-3ZG5XYXP.min.js";import{a as ap,b as gy,c as M1}from"https://app.gitbook.com/public/app/chunks/chunk-JUO5TZPP.min.js";import{a as f1}from"https://app.gitbook.com/public/app/chunks/chunk-MQJMYDJY.min.js";import{a as vp}from"https://app.gitbook.com/public/app/chunks/chunk-KPFMYYCM.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-AOZFPSL5.min.js";import{a as Hm,b as Qm,c as Jm,d as e1}from"https://app.gitbook.com/public/app/chunks/chunk-QCTQUTV6.min.js";import{a as Bi}from"https://app.gitbook.com/public/app/chunks/chunk-UFLTAGL2.min.js";import{a as mt,b as si,c as dp,d as Wi,e as Fs}from"https://app.gitbook.com/public/app/chunks/chunk-VDZKHXYW.min.js";import{a as ci}from"https://app.gitbook.com/public/app/chunks/chunk-DJOI22QU.min.js";import{a as P1}from"https://app.gitbook.com/public/app/chunks/chunk-MW5X4IP2.min.js";import{a as lp,b as ya,c as zi,d as Xa,f as z1,g as W1,i as yy}from"https://app.gitbook.com/public/app/chunks/chunk-5RLVI2FQ.min.js";import{a as so,c as Gw,d as Ai,e as ha}from"https://app.gitbook.com/public/app/chunks/chunk-5VV75V34.min.js";import{a as y1,b as _1,c as I1,d as R1}from"https://app.gitbook.com/public/app/chunks/chunk-CJV2UNWR.min.js";import{a as Zc,c as V1,e as q1,f as F1}from"https://app.gitbook.com/public/app/chunks/chunk-5QAYRBQR.min.js";import{a as sw,b as Su,c as Co}from"https://app.gitbook.com/public/app/chunks/chunk-NLJVMTY4.min.js";import{a as kt,b as sp}from"https://app.gitbook.com/public/app/chunks/chunk-SCIUC6KM.min.js";import{a as Ut,b as np,c as c1,d as l1,e as d1,f as oe,g as m1,h as p1,i as Ha,j as Cu,k as se,l as cp}from"https://app.gitbook.com/public/app/chunks/chunk-YHBMUMWD.min.js";import{a as wn,b as Xc,c as op}from"https://app.gitbook.com/public/app/chunks/chunk-VT3BL5EM.min.js";import{a as Bn,b as K,c as ae,d as Fc,e as Hw,f as Xw,g as co,h as jm,i as Um,j as fa,k as Ym,m as Kw}from"https://app.gitbook.com/public/app/chunks/chunk-VFIDFSHQ.min.js";import{a as va}from"https://app.gitbook.com/public/app/chunks/chunk-KANJRBU7.min.js";import{a as Fw}from"https://app.gitbook.com/public/app/chunks/chunk-L7QF44AJ.min.js";import{f as my}from"https://app.gitbook.com/public/app/chunks/chunk-EXAIYX3Z.min.js";import{a as qn}from"https://app.gitbook.com/public/app/chunks/chunk-VUV75B75.min.js";import{a as li}from"https://app.gitbook.com/public/app/chunks/chunk-WGATJE7R.min.js";import{$ as ly,Aa as Yc,H as ZC,M as Dm,N as pw,O as wt,P as Am,Q as fw,S as gw,U as hw,V as yw,W as ee,_ as Bm,aa as Sw,ca as jc,da as w1,ea as k1,fa as x1,ga as O1,ka as qs,la as Uc,na as fp,oa as gp,pa as Fr,qa as hp,ra as T1,sa as E1,ta as L1,ua as N1,wa as Gs,xa as D1,za as A1}from"https://app.gitbook.com/public/app/chunks/chunk-4EDBK5CA.min.js";import{d as _e}from"https://app.gitbook.com/public/app/chunks/chunk-N44BQ5FH.min.js";import{a as pa}from"https://app.gitbook.com/public/app/chunks/chunk-EN7GU6WW.min.js";import{$a as QC,$b as Aa,Ab as Xh,Ac as CS,Af as dw,Db as nS,Dc as SS,Df as Lm,Eb as Kh,Ec as uu,Fb as jh,Fc as wS,Hc as du,He as ew,Ie as sy,Jc as kS,Je as za,Kc as Ct,Lc as sm,Le as Bc,Me as tw,Ne as As,Ob as om,Pe as ow,Qa as em,Qd as QS,Qe as Mm,Qf as mw,Re as nw,Rf as Nm,Sd as JS,Sf as Wc,Td as ay,Ub as ni,Ud as Rm,Ue as rw,Va as Ii,Vb as rS,Vc as ra,Ve as Tm,Wa as Nr,Wb as lu,Xb as iS,Xc as ia,Yb as aS,Yd as Pm,Zc as xS,a as Rs,ab as JC,b as Fo,bb as eS,c as Ps,d as jC,dd as WS,e as UC,ec as nm,ed as xm,fc as Pc,fd as VS,ff as yu,g as Da,gd as Om,hd as iy,hf as cy,i as Jd,ic as uS,id as qS,j as YC,jb as tS,jc as dS,jd as FS,kd as GS,ld as HS,lf as iw,md as XS,mf as aw,nc as mS,nd as KS,ob as Ms,oc as pS,pb as oa,pc as fS,qb as su,qc as gS,qd as _m,rc as im,rd as fr,sc as hS,sd as Im,tc as yS,td as jS,ub as oS,uc as $h,ud as US,uf as Bs,vc as vS,vd as YS,wc as bS,wd as ZS,wf as Em,xc as am,xd as hu,xf as cw,yb as cu,yc as na,yd as $S,yf as lw,zf as uw}from"https://app.gitbook.com/public/app/chunks/chunk-NBUAWAUE.min.js";import{A as Qe,B as Nw,C as zn,D as S,E as Dw,F as Oe,G as bo,H as Wn,I as Km,K as Va,L as Di,M as qa,N as zw,S as Vw,T as qc,U as Wr,V as qw,W as Vn,Z as A,b as An,e as bw,i as B,j as Li,k as Gm,l as dy,n as Ni,o as Vc,p as Pw,q as Mw,r as Xm,t as Tw,u as gr,v as Wa,w as Ew,x as Eo,y as Lw,z as jt}from"https://app.gitbook.com/public/app/chunks/chunk-JH4FXLD5.min.js";import{a as EE,b as ft,c as Ws,e as Ww}from"https://app.gitbook.com/public/app/chunks/chunk-4HQ2PQWK.min.js";import{c as Rc,f as TE}from"https://app.gitbook.com/public/app/chunks/chunk-256TWNIT.min.js";import{$ as De,$a as vm,A as _S,Aa as io,B as RE,Ba as pu,Bb as zS,Cb as ry,Da as To,Ea as Ls,F as Qh,Fa as fu,G as Tc,Ga as Ba,Ha as dm,Ia as Ti,Ja as Lc,Ka as mm,La as pm,Ma as fm,N as um,Na as gm,O as IS,Oa as ua,P as Jh,Qa as gu,Ra as mr,S as lr,Sa as hm,T as Ri,Ta as ym,U as RS,Ua as oy,V as Dn,Va as Me,W as aa,Wa as da,X as sa,Xa as TS,Y as ur,Ya as St,Z as ri,Za as Nc,_ as PS,_a as ny,aa as ze,ab as Kt,b as Uh,ba as $e,c as Yh,ca as Mo,cb as Ns,da as oo,db as ES,e as sS,ea as Et,eb as LS,f as Zh,fa as no,fb as NS,g as rm,ga as ro,gb as bm,ha as me,hb as Cm,i as Mc,ia as zt,ib as ma,j as Dr,ja as Go,jb as Sm,k as cS,ka as ey,kb as Dc,l as lS,la as MS,lb as DS,ma as ty,mb as wm,na as Ts,nb as km,o as OS,oa as Ec,ob as AS,pa as bn,pb as vo,qa as en,qb as Ac,r as cm,ra as Pi,rb as pr,s as Bt,sa as ca,sb as ot,t as vn,ta as Es,tb as Ds,ua as Ar,ub as BS,va as la,vb as Se,w as he,wa as Mi,wb as PE,xa as Cn,xb as ME,y as mu,ya as Sn,yb as Z,z as Xt,za as dr,zb as ii}from"https://app.gitbook.com/public/app/chunks/chunk-23UZJVBJ.min.js";import{a as st}from"https://app.gitbook.com/public/app/chunks/chunk-GNRHQE6Q.min.js";import{$ as T,A as Ud,Aa as zr,B as qC,Ba as L,C as Yd,Ca as D,D as N,F as Ht,G as Hh,I as Zd,J as Be,K as Lr,L as At,M as FC,N as $d,O as z,P as ti,Q as GC,R as bt,S as HC,T as XC,U as Qd,V as yn,W as qo,X as oi,Y as KC,_ as H,a as WC,aa as p,b as OE,ba as b,c as _E,ca as vw,da as zm,ea as Wm,fa as Vm,ha as qe,ia as qm,ja as ao,ka as Ce,la as U,ma as Br,n as X,oa as ai,p as O,pa as ww,qa as kw,ra as xw,sa as uy,t as Ic,ta as zs,u as VC,ua as Ow,va as _w,wa as Fm,x as v,xa as Ei,ya as I,z as _i}from"https://app.gitbook.com/public/app/chunks/chunk-2A6SRGAQ.min.js";import{a as IE}from"https://app.gitbook.com/public/app/chunks/chunk-PBQPEN4Y.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-PX7C75DT.min.js";import{b as Ne,c as cr,d as ge,f as lm}from"https://app.gitbook.com/public/app/chunks/chunk-TNXFAZBP.min.js";import{c as Ae,d as zC,e as k,f as jd,l as c}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";var Nk=Ae(ky=>{c();Object.defineProperty(ky,"__esModule",{value:!0});var r2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},i2="src/index.js",a2=function(){function e(t,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),Ek=O(),s2=l2(Ek),c2=(z(),jd($d));function l2(e){return e&&e.__esModule?e:{default:e}}function u2(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function d2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tk(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function m2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Lk=function(e){m2(t,e);function t(){var o,n,r,i;d2(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=(n=(r=Tk(this,(o=t.__proto__||Object.getPrototypeOf(t)).call.apply(o,[this].concat(s))),r),r.state={width:1,height:1},r.measure=function(u){r.setState({width:u.nativeEvent.layout.width,height:u.nativeEvent.layout.height}),r.props.onLayout&&r.props.onLayout(u)},r.getAngle=function(){if(r.props.useAngle)return r.props.angle+"deg";var u=Math.atan2(r.state.width*(r.props.end.y-r.props.start.y),r.state.height*(r.props.end.x-r.props.start.x))+Math.PI/2;return u+"rad"},r.getColors=function(){return r.props.colors.map(function(u,d){var m=r.props.locations[d],f="";return m&&(f=" "+m*100+"%"),u+f}).join(",")},n),Tk(r,i)}return a2(t,[{key:"render",value:function(){var n=this.props,r=n.start,i=n.end,a=n.colors,s=n.locations,l=n.useAngle,u=n.angleCenter,d=n.angle,m=n.style,f=n.children,g=u2(n,["start","end","colors","locations","useAngle","angleCenter","angle","style","children"]);return s2.default.createElement(c2.View,r2({},g,{style:[m,{backgroundImage:"linear-gradient("+this.getAngle()+","+this.getColors()+")"}],onLayout:this.measure,__source:{fileName:i2,lineNumber:76}}),f)}}]),t}(Ek.PureComponent);Lk.defaultProps={start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0};ky.default=Lk});var Dy=Ae((pH,Vp)=>{c();var Cx=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function r(a,s){if(!n[a]){n[a]={};for(var l=0;l<a.length;l++)n[a][a.charAt(l)]=l}return n[a][s]}var i={compressToBase64:function(a){if(a==null)return"";var s=i._compress(a,6,function(l){return t.charAt(l)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:i._decompress(a.length,32,function(s){return r(t,a.charAt(s))})},compressToUTF16:function(a){return a==null?"":i._compress(a,15,function(s){return e(s+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:i._decompress(a.length,16384,function(s){return a.charCodeAt(s)-32})},compressToUint8Array:function(a){for(var s=i.compress(a),l=new Uint8Array(s.length*2),u=0,d=s.length;u<d;u++){var m=s.charCodeAt(u);l[u*2]=m>>>8,l[u*2+1]=m%256}return l},decompressFromUint8Array:function(a){if(a==null)return i.decompress(a);for(var s=new Array(a.length/2),l=0,u=s.length;l<u;l++)s[l]=a[l*2]*256+a[l*2+1];var d=[];return s.forEach(function(m){d.push(e(m))}),i.decompress(d.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":i._compress(a,6,function(s){return o.charAt(s)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),i._decompress(a.length,32,function(s){return r(o,a.charAt(s))}))},compress:function(a){return i._compress(a,16,function(s){return e(s)})},_compress:function(a,s,l){if(a==null)return"";var u,d,m={},f={},g="",h="",y="",C=2,x=3,w=2,P=[],R=0,_=0,E;for(E=0;E<a.length;E+=1)if(g=a.charAt(E),Object.prototype.hasOwnProperty.call(m,g)||(m[g]=x++,f[g]=!0),h=y+g,Object.prototype.hasOwnProperty.call(m,h))y=h;else{if(Object.prototype.hasOwnProperty.call(f,y)){if(y.charCodeAt(0)<256){for(u=0;u<w;u++)R=R<<1,_==s-1?(_=0,P.push(l(R)),R=0):_++;for(d=y.charCodeAt(0),u=0;u<8;u++)R=R<<1|d&1,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=d>>1}else{for(d=1,u=0;u<w;u++)R=R<<1|d,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=0;for(d=y.charCodeAt(0),u=0;u<16;u++)R=R<<1|d&1,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=d>>1}C--,C==0&&(C=Math.pow(2,w),w++),delete f[y]}else for(d=m[y],u=0;u<w;u++)R=R<<1|d&1,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=d>>1;C--,C==0&&(C=Math.pow(2,w),w++),m[h]=x++,y=String(g)}if(y!==""){if(Object.prototype.hasOwnProperty.call(f,y)){if(y.charCodeAt(0)<256){for(u=0;u<w;u++)R=R<<1,_==s-1?(_=0,P.push(l(R)),R=0):_++;for(d=y.charCodeAt(0),u=0;u<8;u++)R=R<<1|d&1,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=d>>1}else{for(d=1,u=0;u<w;u++)R=R<<1|d,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=0;for(d=y.charCodeAt(0),u=0;u<16;u++)R=R<<1|d&1,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=d>>1}C--,C==0&&(C=Math.pow(2,w),w++),delete f[y]}else for(d=m[y],u=0;u<w;u++)R=R<<1|d&1,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=d>>1;C--,C==0&&(C=Math.pow(2,w),w++)}for(d=2,u=0;u<w;u++)R=R<<1|d&1,_==s-1?(_=0,P.push(l(R)),R=0):_++,d=d>>1;for(;;)if(R=R<<1,_==s-1){P.push(l(R));break}else _++;return P.join("")},decompress:function(a){return a==null?"":a==""?null:i._decompress(a.length,32768,function(s){return a.charCodeAt(s)})},_decompress:function(a,s,l){var u=[],d,m=4,f=4,g=3,h="",y=[],C,x,w,P,R,_,E,M={val:l(0),position:s,index:1};for(C=0;C<3;C+=1)u[C]=C;for(w=0,R=Math.pow(2,2),_=1;_!=R;)P=M.val&M.position,M.position>>=1,M.position==0&&(M.position=s,M.val=l(M.index++)),w|=(P>0?1:0)*_,_<<=1;switch(d=w){case 0:for(w=0,R=Math.pow(2,8),_=1;_!=R;)P=M.val&M.position,M.position>>=1,M.position==0&&(M.position=s,M.val=l(M.index++)),w|=(P>0?1:0)*_,_<<=1;E=e(w);break;case 1:for(w=0,R=Math.pow(2,16),_=1;_!=R;)P=M.val&M.position,M.position>>=1,M.position==0&&(M.position=s,M.val=l(M.index++)),w|=(P>0?1:0)*_,_<<=1;E=e(w);break;case 2:return""}for(u[3]=E,x=E,y.push(E);;){if(M.index>a)return"";for(w=0,R=Math.pow(2,g),_=1;_!=R;)P=M.val&M.position,M.position>>=1,M.position==0&&(M.position=s,M.val=l(M.index++)),w|=(P>0?1:0)*_,_<<=1;switch(E=w){case 0:for(w=0,R=Math.pow(2,8),_=1;_!=R;)P=M.val&M.position,M.position>>=1,M.position==0&&(M.position=s,M.val=l(M.index++)),w|=(P>0?1:0)*_,_<<=1;u[f++]=e(w),E=f-1,m--;break;case 1:for(w=0,R=Math.pow(2,16),_=1;_!=R;)P=M.val&M.position,M.position>>=1,M.position==0&&(M.position=s,M.val=l(M.index++)),w|=(P>0?1:0)*_,_<<=1;u[f++]=e(w),E=f-1,m--;break;case 2:return y.join("")}if(m==0&&(m=Math.pow(2,g),g++),u[E])h=u[E];else if(E===f)h=x+x.charAt(0);else return null;y.push(h),u[f++]=x+h.charAt(0),m--,x=h,m==0&&(m=Math.pow(2,g),g++)}}};return i}();typeof define=="function"&&define.amd?define(function(){return Cx}):typeof Vp<"u"&&Vp!=null&&(Vp.exports=Cx)});var Wx=Ae((uX,F2)=>{F2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/youtube.raw-KIFNDQS6.svg"});var Vx=Ae((dX,G2)=>{G2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/soundcloud.raw-2NJLH377.svg"});var qx=Ae((mX,H2)=>{H2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/loom.raw-3KUBFJOQ.svg"});var Fx=Ae((pX,X2)=>{X2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/github.raw-G362N2HA.svg"});var Gx=Ae((fX,K2)=>{K2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/github.dark.raw-A2MHFBQG.svg"});var Hx=Ae((gX,j2)=>{j2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/framer.raw-BZOKEAUJ.svg"});var Xx=Ae((hX,U2)=>{U2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/framer.dark.raw-HVTXI7EB.svg"});var Kx=Ae((yX,Y2)=>{Y2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/codepen.raw-PGSLYKJU.svg"});var jx=Ae((vX,Z2)=>{Z2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/codepen.dark.raw-HNDMNQX3.svg"});var Ux=Ae((bX,$2)=>{$2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/dribbble.raw-KBB5DOUQ.svg"});var Yx=Ae((CX,Q2)=>{Q2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/trello.raw-5HIIOOAI.svg"});var Zx=Ae((SX,J2)=>{J2.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/typeform.raw-74VPCTO6.svg"});var $x=Ae((wX,eL)=>{eL.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/typeform.dark.raw-47MGSH5W.svg"});var Qx=Ae((kX,tL)=>{tL.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/google-docs.raw-I6UHVZFS.svg"});var Jx=Ae((xX,oL)=>{oL.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/google-sheets.raw-IGZ6R7IJ.svg"});var eO=Ae((OX,nL)=>{nL.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/google-slides.raw-WGHORNC6.svg"});var tO=Ae((_X,rL)=>{rL.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/google-forms.raw-7C25TP6G.svg"});var U_=Ae((Eee,u9)=>{u9.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var $_=Ae((Lee,Z_)=>{"use strict";c();var mv=U_();Z_.exports=mi;mi.message=mv;mi.code=d9(mv);mi.codes=m9(mv);mi.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};mi.empty={204:!0,205:!0,304:!0};mi.retry={502:!0,503:!0,504:!0};function d9(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n],i=Number(n);t[r.toLowerCase()]=i}),t}function m9(e){return Object.keys(e).map(function(o){return Number(o)})}function p9(e){var t=e.toLowerCase();if(!Object.prototype.hasOwnProperty.call(mi.code,t))throw new Error('invalid status message: "'+e+'"');return mi.code[t]}function Y_(e){if(!Object.prototype.hasOwnProperty.call(mi.message,e))throw new Error("invalid status code: "+e);return mi.message[e]}function mi(e){if(typeof e=="number")return Y_(e);if(typeof e!="string")throw new TypeError("code must be a number or string");var t=parseInt(e,10);return isNaN(t)?p9(e):Y_(t)}});var CR=Ae((gg,bR)=>{c();(function(e,t){typeof define=="function"&&define.amd?define(t):typeof gg=="object"&&typeof gg.nodeName!="string"?bR.exports=t():e.RangeFix=t()})(gg,function(){var e,t={};t.isBroken=function(){var r,i,a,s,l,u,d,m;return e===void 0&&(i=document.createElement("p"),a=document.createElement("span"),s=document.createTextNode("aa"),l=document.createTextNode("aa"),u=document.createElement("img"),u.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),d=document.createRange(),e={},i.appendChild(s),i.appendChild(a),a.appendChild(u),a.appendChild(l),document.body.appendChild(i),d.setStart(s,1),d.setEnd(a,0),e.getClientRects=e.getBoundingClientRect=d.getClientRects().length>1,e.getClientRects||(d.setEnd(l,1),e.getClientRects=e.getBoundingClientRect=d.getClientRects().length===2),e.getBoundingClientRect||(d.setEnd(d.startContainer,d.startOffset),r=d.getBoundingClientRect(),e.getBoundingClientRect=r.top===0&&r.left===0),document.body.removeChild(i),m=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),e.ieZoom=!!m&&m<=10),e};function o(r){var i;return!r||screen.deviceXDPI===screen.logicalXDPI?r:"length"in r?Array.prototype.map.call(r,o):(i=screen.deviceXDPI/screen.logicalXDPI,{top:r.top/i,bottom:r.bottom/i,left:r.left/i,right:r.right/i,width:r.width/i,height:r.height/i})}function n(r,i){var a,s=0,l=1024;if(l>=i.length)return Array.prototype.push.apply(r,i);for(;s<i.length;)a=Array.prototype.push.apply(r,Array.prototype.slice.call(i,s,s+l)),s+=l;return a}return t.getClientRects=function(r){var i,a,s,l,u,d=this.isBroken();if(d.ieZoom)return o(r.getClientRects());if(!d.getClientRects)return r.getClientRects();i=[],s=[],a=r.endContainer,l=r.endOffset,u=document.createRange();function m(f){for(var g=0;f=f.previousSibling;)g++;return g}for(;a!==r.commonAncestorContainer;)u.setStart(a,0),u.setEnd(a,l),n(s,u.getClientRects()),l=m(a),a=a.parentNode;return u=r.cloneRange(),u.setEnd(a,l),n(i,u.getClientRects()),n(i,s),i},t.getBoundingClientRect=function(r){var i,a,s,l,u,d,m=this.getClientRects(r);if(m.length===0)return null;if(u=r.getBoundingClientRect(),d=this.isBroken(),d.ieZoom)return o(u);if(!d.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return m[0];for(i=0,a=m.length;i<a;i++)l=m[i],s?(s.left=Math.min(s.left,l.left),s.top=Math.min(s.top,l.top),s.right=Math.max(s.right,l.right),s.bottom=Math.max(s.bottom,l.bottom)):s={left:l.left,top:l.top,right:l.right,bottom:l.bottom};return s&&(s.width=s.right-s.left,s.height=s.bottom-s.top),s},t})});var b0=Ae((kCe,D3)=>{D3.exports="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/default-page-cover-K4LPTE6Y.png"});var l6=Ae((m6e,c6)=>{"use strict";c();var ND="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";c6.exports=ND});var p6=Ae((f6e,m6)=>{"use strict";c();var DD=l6();function u6(){}function d6(){}d6.resetWarningCache=u6;m6.exports=function(){function e(n,r,i,a,s,l){if(l!==DD){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var o={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:d6,resetWarningCache:u6};return o.PropTypes=o,o}});var g6=Ae((v6e,f6)=>{c();f6.exports=p6()();var h6e,y6e});var w6=Ae(vb=>{"use strict";c();Object.defineProperty(vb,"__esModule",{value:!0});var hb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},AD=function(){function e(t,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),b6=O(),xd=C6(b6),BD=g6(),Io=C6(BD);function C6(e){return e&&e.__esModule?e:{default:e}}function zD(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function WD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h6={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},FD=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],GD=function(t){return FD.forEach(function(o){return delete t[o]}),t},y6=function(t,o){o.style.fontSize=t.fontSize,o.style.fontFamily=t.fontFamily,o.style.fontWeight=t.fontWeight,o.style.fontStyle=t.fontStyle,o.style.letterSpacing=t.letterSpacing,o.style.textTransform=t.textTransform},S6=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,v6=function(){return S6?"_"+Math.random().toString(36).substr(2,12):void 0},yb=function(e){qD(t,e);function t(o){WD(this,t);var n=VD(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o));return n.inputRef=function(r){n.input=r,typeof n.props.inputRef=="function"&&n.props.inputRef(r)},n.placeHolderSizerRef=function(r){n.placeHolderSizer=r},n.sizerRef=function(r){n.sizer=r},n.state={inputWidth:o.minWidth,inputId:o.id||v6()},n}return AD(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var r=n.id;r!==this.props.id&&this.setState({inputId:r||v6()})}},{key:"componentDidUpdate",value:function(n,r){r.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var n=this.input&&window.getComputedStyle(this.input);n&&(y6(n,this.sizer),this.placeHolderSizer&&y6(n,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var n=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?n=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:n=this.sizer.scrollWidth+2;var r=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;n+=r,n<this.props.minWidth&&(n=this.props.minWidth),n!==this.state.inputWidth&&this.setState({inputWidth:n})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var n=this.props.injectStyles;return S6&&n?xd.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var n=[this.props.defaultValue,this.props.value,""].reduce(function(s,l){return s!=null?s:l}),r=hb({},this.props.style);r.display||(r.display="inline-block");var i=hb({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=zD(this.props,[]);return GD(a),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=i,xd.default.createElement("div",{className:this.props.className,style:r},this.renderStyles(),xd.default.createElement("input",hb({},a,{ref:this.inputRef})),xd.default.createElement("div",{ref:this.sizerRef,style:h6},n),this.props.placeholder?xd.default.createElement("div",{ref:this.placeHolderSizerRef,style:h6},this.props.placeholder):null)}}]),t}(b6.Component);yb.propTypes={className:Io.default.string,defaultValue:Io.default.any,extraWidth:Io.default.oneOfType([Io.default.number,Io.default.string]),id:Io.default.string,injectStyles:Io.default.bool,inputClassName:Io.default.string,inputRef:Io.default.func,inputStyle:Io.default.object,minWidth:Io.default.oneOfType([Io.default.number,Io.default.string]),onAutosize:Io.default.func,onChange:Io.default.func,placeholder:Io.default.string,placeholderIsMinWidth:Io.default.bool,style:Io.default.object,value:Io.default.any};yb.defaultProps={minWidth:1,injectStyles:!0};vb.default=yb});var zM=Ae(nC=>{"use strict";c();Object.defineProperty(nC,"__esModule",{value:!0});var iA={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};nC.default={container:iA}});var rC=Ae($l=>{"use strict";c();Object.defineProperty($l,"__esModule",{value:!0});$l.ImageZoomState=$l.ImageZoomProps=void 0;var aA=function(){function e(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.useHardwareTextureAndroid=!0,this.minScale=.6,this.maxScale=10,this.useNativeDriver=!1,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){},this.onStartShouldSetPanResponder=function(){return!0},this.onPanResponderTerminationRequest=function(){return!1}}return e}();$l.ImageZoomProps=aA;var sA=function(){function e(){this.centerX=.5,this.centerY=.5}return e}();$l.ImageZoomState=sA});var VM=Ae(bc=>{"use strict";c();var cA=bc&&bc.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},e(t,o)};return function(t,o){e(t,o);function n(){this.constructor=t}t.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}}(),Bd=bc&&bc.__assign||function(){return Bd=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Bd.apply(this,arguments)};Object.defineProperty(bc,"__esModule",{value:!0});var Ch=O(),Dt=(z(),jd($d)),lA=zM(),WM=rC(),uA=function(e){cA(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.state=new WM.ImageZoomState,o.lastPositionX=null,o.positionX=0,o.animatedPositionX=new Dt.Animated.Value(0),o.lastPositionY=null,o.positionY=0,o.animatedPositionY=new Dt.Animated.Value(0),o.scale=1,o.animatedScale=new Dt.Animated.Value(1),o.zoomLastDistance=null,o.zoomCurrentDistance=0,o.lastTouchStartTime=0,o.horizontalWholeOuterCounter=0,o.swipeDownOffset=0,o.horizontalWholeCounter=0,o.verticalWholeCounter=0,o.centerDiffX=0,o.centerDiffY=0,o.lastClickTime=0,o.doubleClickX=0,o.doubleClickY=0,o.isDoubleClick=!1,o.isLongPress=!1,o.isHorizontalWrap=!1,o.imagePanResponder=Dt.PanResponder.create({onStartShouldSetPanResponder:o.props.onStartShouldSetPanResponder,onPanResponderTerminationRequest:o.props.onPanResponderTerminationRequest,onMoveShouldSetPanResponder:o.props.onMoveShouldSetPanResponder,onPanResponderGrant:function(n){if(o.lastPositionX=null,o.lastPositionY=null,o.zoomLastDistance=null,o.horizontalWholeCounter=0,o.verticalWholeCounter=0,o.lastTouchStartTime=new Date().getTime(),o.isDoubleClick=!1,o.isLongPress=!1,o.isHorizontalWrap=!1,o.singleClickTimeout&&clearTimeout(o.singleClickTimeout),n.nativeEvent.changedTouches.length>1){var r=(n.nativeEvent.changedTouches[0].pageX+n.nativeEvent.changedTouches[1].pageX)/2;o.centerDiffX=r-o.props.cropWidth/2;var i=(n.nativeEvent.changedTouches[0].pageY+n.nativeEvent.changedTouches[1].pageY)/2;o.centerDiffY=i-o.props.cropHeight/2}o.longPressTimeout&&clearTimeout(o.longPressTimeout);var a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;if(o.longPressTimeout=setTimeout(function(){o.isLongPress=!0,o.props.onLongPress&&o.props.onLongPress({locationX:s,locationY:l,pageX:u,pageY:d})},o.props.longPressTime),n.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-o.lastClickTime<(o.props.doubleClickInterval||0)){if(o.lastClickTime=0,o.doubleClickX=n.nativeEvent.changedTouches[0].pageX,o.doubleClickY=n.nativeEvent.changedTouches[0].pageY,o.props.onDoubleClick&&o.props.onDoubleClick({locationX:n.nativeEvent.changedTouches[0].locationX,locationY:n.nativeEvent.changedTouches[0].locationY,pageX:o.doubleClickX,pageY:o.doubleClickY}),clearTimeout(o.longPressTimeout),o.isDoubleClick=!0,o.props.enableDoubleClickZoom){if(o.scale>1||o.scale<1)o.scale=1,o.positionX=0,o.positionY=0;else{var m=o.scale;o.scale=2;var f=o.scale-m;o.positionX=(o.props.cropWidth/2-o.doubleClickX)*f/o.scale,o.positionY=(o.props.cropHeight/2-o.doubleClickY)*f/o.scale}o.imageDidMove("centerOn"),Dt.Animated.parallel([Dt.Animated.timing(o.animatedScale,{toValue:o.scale,duration:100,useNativeDriver:!!o.props.useNativeDriver}),Dt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}),Dt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver})]).start()}}else o.lastClickTime=new Date().getTime()},onPanResponderMove:function(n,r){if(!o.isDoubleClick){if(n.nativeEvent.changedTouches.length<=1){var i=r.dx-(o.lastPositionX||0);o.lastPositionX===null&&(i=0);var a=r.dy-(o.lastPositionY||0);if(o.lastPositionY===null&&(a=0),o.lastPositionX=r.dx,o.lastPositionY=r.dy,o.horizontalWholeCounter+=i,o.verticalWholeCounter+=a,(Math.abs(o.horizontalWholeCounter)>5||Math.abs(o.verticalWholeCounter)>5)&&clearTimeout(o.longPressTimeout),o.props.panToMove){if(o.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(o.isHorizontalWrap=!0),o.props.imageWidth*o.scale>o.props.cropWidth){o.horizontalWholeOuterCounter>0?i<0?o.horizontalWholeOuterCounter>Math.abs(i)?(o.horizontalWholeOuterCounter+=i,i=0):(i+=o.horizontalWholeOuterCounter,o.horizontalWholeOuterCounter=0,o.props.horizontalOuterRangeOffset&&o.props.horizontalOuterRangeOffset(0)):o.horizontalWholeOuterCounter+=i:o.horizontalWholeOuterCounter<0&&(i>0?Math.abs(o.horizontalWholeOuterCounter)>i?(o.horizontalWholeOuterCounter+=i,i=0):(i+=o.horizontalWholeOuterCounter,o.horizontalWholeOuterCounter=0,o.props.horizontalOuterRangeOffset&&o.props.horizontalOuterRangeOffset(0)):o.horizontalWholeOuterCounter+=i),o.positionX+=i/o.scale;var s=(o.props.imageWidth*o.scale-o.props.cropWidth)/2/o.scale;o.positionX<-s?(o.positionX=-s,o.horizontalWholeOuterCounter+=-1/1e10):o.positionX>s&&(o.positionX=s,o.horizontalWholeOuterCounter+=1/1e10),o.animatedPositionX.setValue(o.positionX)}else o.horizontalWholeOuterCounter+=i;o.horizontalWholeOuterCounter>(o.props.maxOverflow||0)?o.horizontalWholeOuterCounter=o.props.maxOverflow||0:o.horizontalWholeOuterCounter<-(o.props.maxOverflow||0)&&(o.horizontalWholeOuterCounter=-(o.props.maxOverflow||0)),o.horizontalWholeOuterCounter!==0&&o.props.horizontalOuterRangeOffset&&o.props.horizontalOuterRangeOffset(o.horizontalWholeOuterCounter)}o.props.imageHeight*o.scale>o.props.cropHeight?(o.positionY+=a/o.scale,o.animatedPositionY.setValue(o.positionY)):o.props.enableSwipeDown&&!o.isHorizontalWrap&&(o.swipeDownOffset+=a,o.swipeDownOffset>0&&(o.positionY+=a/o.scale,o.animatedPositionY.setValue(o.positionY),o.scale=o.scale-a/1e3,o.animatedScale.setValue(o.scale)))}}else if(o.longPressTimeout&&clearTimeout(o.longPressTimeout),o.props.pinchToZoom){var l=void 0,u=void 0;n.nativeEvent.changedTouches[0].locationX>n.nativeEvent.changedTouches[1].locationX?(l=n.nativeEvent.changedTouches[1].pageX,u=n.nativeEvent.changedTouches[0].pageX):(l=n.nativeEvent.changedTouches[0].pageX,u=n.nativeEvent.changedTouches[1].pageX);var d=void 0,m=void 0;n.nativeEvent.changedTouches[0].locationY>n.nativeEvent.changedTouches[1].locationY?(d=n.nativeEvent.changedTouches[1].pageY,m=n.nativeEvent.changedTouches[0].pageY):(d=n.nativeEvent.changedTouches[0].pageY,m=n.nativeEvent.changedTouches[1].pageY);var f=u-l,g=m-d,h=Math.sqrt(f*f+g*g);if(o.zoomCurrentDistance=Number(h.toFixed(1)),o.zoomLastDistance!==null){var y=(o.zoomCurrentDistance-o.zoomLastDistance)/200,C=o.scale+y;C<(o.props.minScale||0)&&(C=o.props.minScale||0),C>(o.props.maxScale||0)&&(C=o.props.maxScale||0);var x=o.scale;o.scale=C,o.animatedScale.setValue(o.scale);var w=o.scale-x;o.positionX-=o.centerDiffX*w/o.scale,o.positionY-=o.centerDiffY*w/o.scale,o.animatedPositionX.setValue(o.positionX),o.animatedPositionY.setValue(o.positionY)}o.zoomLastDistance=o.zoomCurrentDistance}o.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(n,r){if(o.longPressTimeout&&clearTimeout(o.longPressTimeout),!o.isDoubleClick&&!o.isLongPress){var i=Math.sqrt(r.dx*r.dx+r.dy*r.dy),a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;n.nativeEvent.changedTouches.length===1&&i<(o.props.clickDistance||0)?o.singleClickTimeout=setTimeout(function(){o.props.onClick&&o.props.onClick({locationX:s,locationY:l,pageX:u,pageY:d})},o.props.doubleClickInterval):(o.props.responderRelease&&o.props.responderRelease(r.vx,o.scale),o.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}}),o.resetScale=function(){o.positionX=0,o.positionY=0,o.scale=1,o.animatedScale.setValue(1)},o.panResponderReleaseResolve=function(){if(o.props.enableSwipeDown&&o.props.swipeDownThreshold&&o.swipeDownOffset>o.props.swipeDownThreshold){o.props.onSwipeDown&&o.props.onSwipeDown();return}if(o.props.enableCenterFocus&&o.scale<1&&(o.scale=1,Dt.Animated.timing(o.animatedScale,{toValue:o.scale,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.props.imageWidth*o.scale<=o.props.cropWidth&&(o.positionX=0,Dt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.props.imageHeight*o.scale<=o.props.cropHeight&&(o.positionY=0,Dt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.props.imageHeight*o.scale>o.props.cropHeight){var n=(o.props.imageHeight*o.scale-o.props.cropHeight)/2/o.scale;o.positionY<-n?o.positionY=-n:o.positionY>n&&(o.positionY=n),Dt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()}if(o.props.imageWidth*o.scale>o.props.cropWidth){var r=(o.props.imageWidth*o.scale-o.props.cropWidth)/2/o.scale;o.positionX<-r?o.positionX=-r:o.positionX>r&&(o.positionX=r),Dt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()}o.props.enableCenterFocus&&o.scale===1&&(o.positionX=0,o.positionY=0,Dt.Animated.timing(o.animatedPositionX,{toValue:o.positionX,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start(),Dt.Animated.timing(o.animatedPositionY,{toValue:o.positionY,duration:100,useNativeDriver:!!o.props.useNativeDriver}).start()),o.horizontalWholeOuterCounter=0,o.swipeDownOffset=0,o.imageDidMove("onPanResponderRelease")},o}return t.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},t.prototype.componentDidUpdate=function(o){(this.props.centerOn&&!o.centerOn||this.props.centerOn&&o.centerOn&&this.didCenterOnChange(o.centerOn,this.props.centerOn))&&this.centerOn(this.props.centerOn)},t.prototype.imageDidMove=function(o){this.props.onMove&&this.props.onMove({type:o,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},t.prototype.didCenterOnChange=function(o,n){return o.x!==n.x||o.y!==n.y||o.scale!==n.scale},t.prototype.centerOn=function(o){var n=this;this.positionX=o.x,this.positionY=o.y,this.scale=o.scale;var r=o.duration||300;Dt.Animated.parallel([Dt.Animated.timing(this.animatedScale,{toValue:this.scale,duration:r,useNativeDriver:!!this.props.useNativeDriver}),Dt.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:r,useNativeDriver:!!this.props.useNativeDriver}),Dt.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:r,useNativeDriver:!!this.props.useNativeDriver})]).start(function(){n.imageDidMove("centerOn")})},t.prototype.handleLayout=function(o){this.props.layoutChange&&this.props.layoutChange(o)},t.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},t.prototype.render=function(){var o={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},n=Dt.StyleSheet.flatten(this.props.style);return Ch.createElement(Dt.View,{style:Bd(Bd(Bd({},lA.default.container),n),{width:this.props.cropWidth,height:this.props.cropHeight}),...this.imagePanResponder.panHandlers},Ch.createElement(Dt.Animated.View,{style:o,renderToHardwareTextureAndroid:this.props.useHardwareTextureAndroid},Ch.createElement(Dt.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},t.defaultProps=new WM.ImageZoomProps,t}(Ch.Component);bc.default=uA});var qM=Ae(Ss=>{"use strict";c();var dA=Ss&&Ss.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),mA=Ss&&Ss.__exportStar||function(e,t){for(var o in e)o!=="default"&&!t.hasOwnProperty(o)&&dA(t,e,o)};Object.defineProperty(Ss,"__esModule",{value:!0});var pA=VM();Ss.default=pA.default;mA(rC(),Ss)});var iC=Ae(Sh=>{"use strict";c();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.default=function(e,t,o){return{modalContainer:{backgroundColor:o,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:e,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:o},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:e,height:t,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:e,height:t,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:e,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:e,height:t},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};Sh.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var cC=Ae(wh=>{"use strict";c();Object.defineProperty(wh,"__esModule",{value:!0});var aC=O(),sC=(z(),jd($d)),FM=iC(),fA=function(){function e(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.useNativeDriver=!1,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(t,o){return aC.createElement(sC.View,{style:FM.simpleStyle.count},aC.createElement(sC.Text,{style:FM.simpleStyle.countText},t+"/"+o))},this.renderImage=function(t){return aC.createElement(sC.Image,t)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return e}();wh.Props=fA;var gA=function(){function e(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return e}();wh.State=gA});var XM=Ae(Pa=>{"use strict";c();var hA=Pa&&Pa.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])};return function(t,o){e(t,o);function n(){this.constructor=t}t.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}}(),Cc=Pa&&Pa.__assign||Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yA=Pa&&Pa.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(o[n[r]]=e[n[r]]);return o};Object.defineProperty(Pa,"__esModule",{value:!0});var et=O(),be=(z(),jd($d)),GM=qM(),HM=iC(),lC=cC(),vA=function(e){hA(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.state=new lC.State,o.fadeAnim=new be.Animated.Value(0),o.standardPositionX=0,o.positionXNumber=0,o.positionX=new be.Animated.Value(0),o.width=0,o.height=0,o.styles=HM.default(0,0,"transparent"),o.hasLayout=!1,o.loadedIndex=new Map,o.handleLongPressWithIndex=new Map,o.imageRefs=[],o.resetImageByIndex=function(n){o.imageRefs[n]&&o.imageRefs[n].reset()},o.preloadImage=function(n){n<o.state.imageSizes.length&&o.loadImage(n+1)},o.handleHorizontalOuterRangeOffset=function(n){n===void 0&&(n=0),o.positionXNumber=o.standardPositionX+n,o.positionX.setValue(o.positionXNumber);var r=be.I18nManager.isRTL?-n:n;r<0?(o.state.currentShowIndex||0<o.props.imageUrls.length-1)&&o.loadImage((o.state.currentShowIndex||0)+1):r>0&&(o.state.currentShowIndex||0>0)&&o.loadImage((o.state.currentShowIndex||0)-1)},o.handleResponderRelease=function(n){n===void 0&&(n=0);var r=be.I18nManager.isRTL?-n:n,i=be.I18nManager.isRTL?o.positionXNumber-o.standardPositionX<-(o.props.flipThreshold||0):o.positionXNumber-o.standardPositionX>(o.props.flipThreshold||0),a=be.I18nManager.isRTL?o.positionXNumber-o.standardPositionX>(o.props.flipThreshold||0):o.positionXNumber-o.standardPositionX<-(o.props.flipThreshold||0);if(r>.7){o.goBack.call(o),(o.state.currentShowIndex||0>0)&&o.loadImage((o.state.currentShowIndex||0)-1);return}else if(r<-.7){o.goNext.call(o),(o.state.currentShowIndex||0<o.props.imageUrls.length-1)&&o.loadImage((o.state.currentShowIndex||0)+1);return}if(i)o.goBack.call(o);else if(a){o.goNext.call(o);return}else{o.resetPosition.call(o);return}},o.goBack=function(){if(o.state.currentShowIndex===0){o.resetPosition.call(o);return}o.positionXNumber=be.I18nManager.isRTL?o.standardPositionX-o.width:o.standardPositionX+o.width,o.standardPositionX=o.positionXNumber,be.Animated.timing(o.positionX,{toValue:o.positionXNumber,duration:o.props.pageAnimateTime,useNativeDriver:!!o.props.useNativeDriver}).start();var n=(o.state.currentShowIndex||0)-1;o.setState({currentShowIndex:n},function(){o.props.onChange&&o.props.onChange(o.state.currentShowIndex)})},o.goNext=function(){if(o.state.currentShowIndex===o.props.imageUrls.length-1){o.resetPosition.call(o);return}o.positionXNumber=be.I18nManager.isRTL?o.standardPositionX+o.width:o.standardPositionX-o.width,o.standardPositionX=o.positionXNumber,be.Animated.timing(o.positionX,{toValue:o.positionXNumber,duration:o.props.pageAnimateTime,useNativeDriver:!!o.props.useNativeDriver}).start();var n=(o.state.currentShowIndex||0)+1;o.setState({currentShowIndex:n},function(){o.props.onChange&&o.props.onChange(o.state.currentShowIndex)})},o.handleLongPress=function(n){o.props.saveToLocalByLongPress&&o.setState({isShowMenu:!0}),o.props.onLongPress&&o.props.onLongPress(n)},o.handleClick=function(){o.props.onClick&&o.props.onClick(o.handleCancel,o.state.currentShowIndex)},o.handleDoubleClick=function(){o.props.onDoubleClick&&o.props.onDoubleClick(o.handleCancel)},o.handleCancel=function(){o.hasLayout=!1,o.props.onCancel&&o.props.onCancel()},o.handleLayout=function(n){n.nativeEvent.layout.width!==o.width&&(o.hasLayout=!0,o.width=n.nativeEvent.layout.width,o.height=n.nativeEvent.layout.height,o.styles=HM.default(o.width,o.height,o.props.backgroundColor||"transparent"),o.forceUpdate(),o.jumpToCurrentImage())},o.saveToLocal=function(){o.props.onSave?o.props.onSave(o.props.imageUrls[o.state.currentShowIndex||0].url):(be.CameraRoll.saveToCameraRoll(o.props.imageUrls[o.state.currentShowIndex||0].url),o.props.onSaveToCamera(o.state.currentShowIndex)),o.setState({isShowMenu:!1})},o.handleLeaveMenu=function(){o.setState({isShowMenu:!1})},o.handleSwipeDown=function(){o.props.onSwipeDown&&o.props.onSwipeDown(),o.handleCancel()},o}return t.prototype.componentDidMount=function(){this.init(this.props)},t.getDerivedStateFromProps=function(o,n){return o.index!==n.prevIndexProp?{currentShowIndex:o.index,prevIndexProp:o.index}:null},t.prototype.componentDidUpdate=function(o,n){o.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),be.Animated.timing(this.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!this.props.useNativeDriver}).start())},t.prototype.init=function(o){var n=this;if(o.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new lC.State);var r=[];o.imageUrls.forEach(function(i){r.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:o.index,prevIndexProp:o.index||0,imageSizes:r},function(){n.loadImage(o.index||0),n.jumpToCurrentImage(),be.Animated.timing(n.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!o.useNativeDriver}).start()})},t.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(be.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},t.prototype.loadImage=function(o){var n=this;if(this.state.imageSizes[o]&&!this.loadedIndex.has(o)){this.loadedIndex.set(o,!0);var r=this.props.imageUrls[o],i=Cc({},this.state.imageSizes[o]),a=function(){if(!(n.state.imageSizes[o]&&n.state.imageSizes[o].status!=="loading")){var u=n.state.imageSizes.slice();u[o]=i,n.setState({imageSizes:u})}};if(this.state.imageSizes[o].status!=="success"){if(this.state.imageSizes[o].width>0&&this.state.imageSizes[o].height>0){i.status="success",a();return}var s=!1,l=!1;if((!r.url||r.url.startsWith("file:"))&&(l=!0),r.width&&r.height){this.props.enablePreload&&l===!1&&be.Image.prefetch(r.url),i.width=r.width,i.height=r.height,i.status="success",a();return}be.Image.getSize(r.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=be.Image.resolveAssetSource(r.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch(d){i.status="fail",a()}})}}},t.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,be.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150,useNativeDriver:!!this.props.useNativeDriver}).start()},t.prototype.getContent=function(){var o=this,n=this.width,r=this.height,i=this.props.imageUrls.map(function(a,s){if((o.state.currentShowIndex||0)>s+1||(o.state.currentShowIndex||0)<s-1)return et.createElement(be.View,{key:s,style:{width:n,height:r}});o.handleLongPressWithIndex.has(s)||o.handleLongPressWithIndex.set(s,o.handleLongPress.bind(o,a));var l=o.state.imageSizes[s]&&o.state.imageSizes[s].width,u=o.state.imageSizes[s]&&o.state.imageSizes[s].height,d=o.state.imageSizes[s];if(!d||!d.status)return et.createElement(be.View,{key:s,style:{width:n,height:r}});if(l>n){var m=n/l;l*=m,u*=m}if(u>r){var f=r/u;l*=f,u*=f}var g=function(h){var y=h.children,C=yA(h,["children"]);return et.createElement(GM.default,{cropWidth:o.width,cropHeight:o.height,maxOverflow:o.props.maxOverflow,horizontalOuterRangeOffset:o.handleHorizontalOuterRangeOffset,responderRelease:o.handleResponderRelease,onMove:o.props.onMove,onLongPress:o.handleLongPressWithIndex.get(s),onClick:o.handleClick,onDoubleClick:o.handleDoubleClick,enableSwipeDown:o.props.enableSwipeDown,swipeDownThreshold:o.props.swipeDownThreshold,onSwipeDown:o.handleSwipeDown,pinchToZoom:o.props.enableImageZoom,enableDoubleClickZoom:o.props.enableImageZoom,doubleClickInterval:o.props.doubleClickInterval,...C},y)};switch(d.status){case"loading":return et.createElement(g,{key:s,style:Cc({},o.styles.modalContainer,o.styles.loadingContainer),imageWidth:n,imageHeight:r},et.createElement(be.View,{style:o.styles.loadingContainer},o.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=Cc({},o.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=Cc({uri:a.url},a.props.source)),o.props.enablePreload&&o.preloadImage(o.state.currentShowIndex||0),et.createElement(GM.default,{key:s,ref:function(h){return o.imageRefs[s]=h},cropWidth:o.width,cropHeight:o.height,maxOverflow:o.props.maxOverflow,horizontalOuterRangeOffset:o.handleHorizontalOuterRangeOffset,responderRelease:o.handleResponderRelease,onMove:o.props.onMove,onLongPress:o.handleLongPressWithIndex.get(s),onClick:o.handleClick,onDoubleClick:o.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:o.props.enableSwipeDown,swipeDownThreshold:o.props.swipeDownThreshold,onSwipeDown:o.handleSwipeDown,panToMove:!o.state.isShowMenu,pinchToZoom:o.props.enableImageZoom&&!o.state.isShowMenu,enableDoubleClickZoom:o.props.enableImageZoom&&!o.state.isShowMenu,doubleClickInterval:o.props.doubleClickInterval,minScale:o.props.minScale,maxScale:o.props.maxScale},o.props.renderImage(a.props));case"fail":return et.createElement(g,{key:s,style:o.styles.modalContainer,imageWidth:o.props.failImageSource?o.props.failImageSource.width:n,imageHeight:o.props.failImageSource?o.props.failImageSource.height:r},o.props.failImageSource&&o.props.renderImage({source:{uri:o.props.failImageSource.url},style:{width:o.props.failImageSource.width,height:o.props.failImageSource.height}}))}});return et.createElement(be.Animated.View,{style:{zIndex:9}},et.createElement(be.Animated.View,{style:Cc({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),et.createElement(be.View,{style:this.styles.arrowLeftContainer},et.createElement(be.TouchableWithoutFeedback,{onPress:this.goBack},et.createElement(be.View,null,this.props.renderArrowLeft()))),et.createElement(be.View,{style:this.styles.arrowRightContainer},et.createElement(be.TouchableWithoutFeedback,{onPress:this.goNext},et.createElement(be.View,null,this.props.renderArrowRight()))),et.createElement(be.Animated.View,{style:Cc({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&et.createElement(be.View,{style:this.styles.watchOrigin},et.createElement(be.TouchableOpacity,{style:this.styles.watchOriginTouchable},et.createElement(be.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),et.createElement(be.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},t.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?et.createElement(be.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):et.createElement(be.View,{style:this.styles.menuContainer},et.createElement(be.View,{style:this.styles.menuShadow}),et.createElement(be.View,{style:this.styles.menuContent},et.createElement(be.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},et.createElement(be.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),et.createElement(be.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},et.createElement(be.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},t.prototype.render=function(){var o=null;return o=et.createElement(be.View,null,this.getContent(),this.getMenu()),et.createElement(be.View,{onLayout:this.handleLayout,style:Cc({flex:1,overflow:"hidden"},this.props.style)},o)},t.defaultProps=new lC.Props,t}(et.Component);Pa.default=vA});var jM=Ae(zd=>{"use strict";c();Object.defineProperty(zd,"__esModule",{value:!0});var KM=XM();zd.ImageViewer=KM.default;var bA=cC();zd.ImageViewerPropsDefine=bA.Props;zd.default=KM.default});c();c();(function(){"use strict";var e="ListFormat"in Intl;function t(q,J){if(!(q instanceof J))throw new TypeError("Cannot call a class as a function")}function o(q,J){for(var j=0;j<J.length;j++){var Q=J[j];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,Q.key,Q)}}function n(q,J,j){return J&&o(q.prototype,J),j&&o(q,j),q}var r=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function s(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(j){return typeof j}:s=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},s(q)}function l(q){return typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?l=function(j){return s(j)}:l=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":s(j)},l(q)}function u(q){if(q==null)throw new TypeError("Argument ".concat(q," cannot be converted to an Object"));return typeof q=="boolean"?new Boolean(q):typeof q=="number"?new Number(q):typeof q=="string"?new String(q):l(q)==="symbol"?new Object(q):q}var d;function m(q){d=q}function f(){return d}function g(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var h=new WeakMap,y={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function C(q,J,j){var Q=h.get(q);Q==null&&(Q=Object.create(null),h.set(q,Q)),Q[J]=j}function x(q,J){var j=h.get(q);if(j==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return j[J]}function w(q,J){var j=h.get(q);return j!=null&&J in j}var P=/-u(?:-[0-9a-z]{2,8})+/gi;function R(q){return q.replace(P,"")}function _(q,J){for(var j=J;;){if(q.includes(j))return j;var Q=j.lastIndexOf("-");if(Q===-1)return;Q>=2&&j.charAt(Q-2)==="-"&&(Q-=2),j=j.slice(0,Q)}}function E(q,J){var j=[],Q=!0,ye=!1,de=void 0;try{for(var Pe=J[Symbol.iterator](),Ee;!(Q=(Ee=Pe.next()).done);Q=!0){var pt=Ee.value,dt=R(pt),to=_(q,dt);to!==void 0&&j.push(pt)}}catch(gn){ye=!0,de=gn}finally{try{!Q&&Pe.return!=null&&Pe.return()}finally{if(ye)throw de}}return j}function M(q,J){return E(q,J)}function W(q){return typeof q=="string"||l(q)==="symbol"}function G(q,J){if(l(q)!=="object")throw new TypeError("Given argument ".concat(q," must be of type Object"));if(!W(J))throw new TypeError("Given argument ".concat(J," must be a PropertyKey"));return q[J]}function V(q){return!!q}function F(q){return q+""}function Y(q,J,j,Q,ye){var de=G(q,J);if(de!==void 0){if(j!=="boolean"&&j!=="string")throw new TypeError("Expected type ".concat(j," to be 'boolean' or 'string"));if(j==="boolean"&&(de=V(de)),j==="string"&&(de=F(de)),Q!==void 0&&!Q.includes(de))throw new RangeError("Value ".concat(de," out of range for options property ").concat(J));return de}else return ye}function $(q,J,j){var Q;return j!==void 0?(j=u(j),Q=Y(j,"localeMatcher","string",a,"best fit")):Q="best fit",Q==="best fit"?M(q,J):E(q,J)}function te(q){var J=q.availableLocales,j=q.requestedLocales,Q=Object.create(null),ye=!0,de=!1,Pe=void 0;try{for(var Ee=j[Symbol.iterator](),pt;!(ye=(pt=Ee.next()).done);ye=!0){var dt=pt.value,to=R(dt),gn=_(J,to);if(gn!==void 0){if(Q.locale=gn,dt!==to){var ar=dt.match(P);Q.extension=ar==null?"":ar[0]}return Q}}}catch(_c){de=!0,Pe=_c}finally{try{!ye&&Ee.return!=null&&Ee.return()}finally{if(de)throw Pe}}var hn=g();return Q.locale=hn,Q}function fe(q){return te(q)}function tt(q,J,j,Q,ye){var de=j.localeMatcher,Pe=de==="lookup"?te({availableLocales:q,requestedLocales:J}):fe({availableLocales:q,requestedLocales:J}),Ee=Pe.locale,pt=Object.create(null);pt.dataLocale=Ee;var dt="-u";if(dt.length>2){var to=String.prototype.indexOf.call(Ee,"-x-");if(to===-1)Ee="".concat(Ee).concat(dt);else{var gn=Ee.slice(0,to),ar=Ee.slice(to);Ee="".concat(gn).concat(dt).concat(ar)}Ee=Intl.getCanonicalLocales(Ee)[0]}return pt.locale=Ee,pt}function Gt(q){if(Array.isArray(q)){for(var J=0,j=new Array(q.length);J<q.length;J++)j[J]=q[J];return j}}function Po(q){if(Symbol.iterator in Object(q)||Object.prototype.toString.call(q)==="[object Arguments]")return Array.from(q)}function Ln(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function xi(q){return Gt(q)||Po(q)||Ln()}function Oi(q){if(q===void 0)return[];var J=xi(q);if(J.some(function(j){return typeof j!="string"}))throw new TypeError("All List items must be strings");return J}function at(q){return Object.prototype.toString.call(q)==="[object Object]"}function Wo(q){return Array.isArray(q)||at(q)}function eo(q,J){for(var j=[],Q=String.prototype.indexOf.call(q,"{",0),ye=0,de=q.length;q[Q]!==void 0;){var Pe=String.prototype.indexOf.call(q,"}",Q);if(Pe<=Q)throw new TypeError("Expected endIndex: ".concat(Pe," to be greater than beginIndex: ").concat(Q));if(Q>ye){var Ee=q.slice(ye,Q);j.push({type:"literal",value:Ee})}var pt=q.slice(Q+1,Pe);if(J[Number(pt)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(pt));var dt=J[Number(pt)];if(Wo(dt.value)){var to=!0,gn=!1,ar=void 0;try{for(var hn=dt.value[Symbol.iterator](),_c;!(to=(_c=hn.next()).done);to=!0){var au=_c.value;j.push(au)}}catch(Hd){gn=!0,ar=Hd}finally{try{!to&&hn.return!=null&&hn.return()}finally{if(gn)throw ar}}}else j.push(dt);ye=Pe+1,Q=String.prototype.indexOf.call(q,"{",ye)}if(ye<de){var Gh=q.slice(ye,de);j.push({type:"literal",value:Gh})}return j}function Tt(q,J){var j,Q=J.length;if(Q===0)return[];if(Q===2){j=x(q,"templatePair");var ye={type:"element",value:J[0]},de={type:"element",value:J[1]},Pe={0:ye,1:de};return eo(j,Pe)}for(var Ee={type:"element",value:J[Q-1]},pt=[Ee],dt=Q-2;dt>=0;){dt===0?j=x(q,"templateStart"):dt<Q-2?j=x(q,"templateMiddle"):j=x(q,"templateEnd");var to={type:"element",value:J[dt]},gn={type:"element",value:pt},ar={0:to,1:gn};pt=eo(j,ar),dt--}return pt}function _s(q,J){var j=Tt(q,J),Q="",ye=!0,de=!1,Pe=void 0;try{for(var Ee=j[Symbol.iterator](),pt;!(ye=(pt=Ee.next()).done);ye=!0){var dt=pt.value;Q+=dt.value}}catch(to){de=!0,Pe=to}finally{try{!ye&&Ee.return!=null&&Ee.return()}finally{if(de)throw Pe}}return Q}function Is(q,J){return Tt(q,J)}var Nn=function(){function q(){t(this,q);var J=arguments[0],j=arguments[1];if((this instanceof q?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var Q=Intl.getCanonicalLocales(J);j=j===void 0?Object.create(null):u(j);var ye=Object.create(null),de=Y(j,"localeMatcher","string",a,"best fit");ye.localeMatcher=de;var Pe=Y(j,"type","string",r,"conjunction");C(this,"type",Pe);var Ee=Y(j,"style","string",i,"long");C(this,"style",Ee);var pt=y.localeData,dt=tt(y.availableLocales,Q,ye),to=dt.dataLocale,gn=pt[to],ar=gn.formats[Pe],hn=ar[Ee];C(this,"templatePair",hn.Pair),C(this,"templateStart",hn.Start),C(this,"templateMiddle",hn.Middle),C(this,"templateEnd",hn.End),C(this,"locale",dt.locale),C(this,"initializedListFormat",this)}return n(q,[{key:"format",value:function(j){var Q=this;if(!(Q instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!w(Q,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var ye=Oi(j);return _s(Q,ye)}},{key:"formatToParts",value:function(j){var Q=this;if(!(Q instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!w(Q,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var ye=Oi(j);return Is(Q,ye)}},{key:"resolvedOptions",value:function(){var j=this;if(!(j instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!w(j,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var Q=x(this,"locale"),ye=x(this,"type"),de=x(this,"style");return{locale:Q,type:ye,style:de}}}],[{key:"supportedLocalesOf",value:function(j){var Q=arguments[1],ye=y.availableLocales,de=Intl.getCanonicalLocales(j);return $(ye,de,Q)}},{key:"__addLocaleData",value:function(j){var Q=j.data,ye=j.locale,de=f();de==null&&m(ye),y.localeData[ye]=Q,y.availableLocales.includes(ye)||y.availableLocales.push(ye)}}]),q}();Object.defineProperty(Nn.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function Er(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=Nn}e||Er()})();c();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});z();c();c();var NE=new zc(Em,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"name",weight:.7},{name:"keywords",weight:.3}]});function bp(e){return NE.search(e).map(t=>t.item)}c();function ik(e){let{r:t,g:o,b:n}=kw(e);return Math.sqrt(.299*(t*t)+.587*(o*o)+.114*(n*n))}function Vi(e){return ik(e)>150?"light":"dark"}function Cp(e){let t=ik(e);return t>240?"lightest":t>215?"light":t>190?"semiLight":t>165?"medium":t>140?"semiDark":t>115?"dark":"darkest"}c();var Jc=k(O()),Sp=k(EE());function ak(e=2e3){let[t,o]=Jc.useState(!1),n=Jc.useRef(null);return Jc.useEffect(()=>(!t&&typeof window<"u"&&(n.current=setTimeout(()=>(0,Sp.unstable_runWithPriority)(Sp.unstable_IdlePriority,()=>o(!0)),e)),()=>{n.current&&clearTimeout(n.current)}),[]),t}c();var sk=k(O());function ck(){let e=sk.useRef();return Vc(()=>{e.current=window},[]),e}c();var el=k(O());function lk(){let e=el.useRef(new WeakMap);return el.useCallback(t=>(e.current.has(t)||e.current.set(t,el.createRef()),e.current.get(t)),[])}c();var uk=k(O());function wp(e,t){let o=ft(e);uk.default.useEffect(()=>{let n=()=>o.current(),r=window.setTimeout(n,t);return()=>window.clearTimeout(r)},[t])}c();var xu=k(O());c();var dk=k(O());function kp(e,t=500){let o=dk.useRef(0);return n=>o.current&&Date.now()-o.current<t?(e(n),o.current=0,!0):(o.current=Date.now(),!1)}c();var mk=k(O());function pk(e,t){let{scope:o=document,exact:n=!1}=t||{},r=ft(e);mk.useEffect(()=>{if(!e)return;let i=a=>{var l;(n?a.target===o:o.contains(a.target))&&a.key==="Tab"&&(a.defaultPrevented||a.preventDefault(),(l=r.current)==null||l.call(r,a.shiftKey))};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[r,!!e,o,n])}function fk(e){let{anchor:t,children:o,wrapper:n,onClose:r,...i}=e,a=xu.useRef(null);return Va({...i,onClose:r},a),xu.createElement(Di,{ref:a,opened:i.opened,anchor:t,wrapper:n},xu.createElement(Km.Provider,{value:r},o))}c();var qi=k(O());z();function xp(e,t={}){let o=qi.createContext(null);function n(i){let{children:a,...s}=i,l=typeof e=="object"?e:e(i),[u,d]=qi.useState(l),[m,f]=qi.useState(!1),g=h=>{let{layout:y}=h.nativeEvent;(!u||t.width!==!1&&y.width!==u.width||t.height!==!1&&y.height!==u.height)&&(d(y),f(!0))};return qi.createElement(o.Provider,{value:{ready:m,dimensions:u}},qi.createElement(v,{...s,onLayout:g},a))}function r(){let i=qi.useContext(o);if(!i||!i.dimensions)throw new Error("Dimensions not available");return[i.dimensions,i.ready]}return{View:n,useDimensions:r}}c();var Hs=k(O());z();c();var Op=k(O());z();var DE=K.createResponsiveComponent(Be);function gk(e){let[,t]=I(zE),{close:o}=co(),n=qc()==="mobile",r=e.closeable||n,i=()=>{e.onClose&&e.onClose(),o(e.id)},a=Wa({mount:AE,unmount:BE});return Op.createElement(v,{ref:a},Op.createElement(DE,{mobileStyle:t.toastMobile,desktopStyle:t.toastDesktop,onPress:()=>{e.onOpen&&e.onOpen(),r&&i()}},Op.createElement(qn,{...e,onClose:r?i:void 0,style:t.alert,mainBackground:!0})))}var AE={duration:gr.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},BE={duration:gr.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},zE=D.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:p.small},toastMobile:{width:"100%",minWidth:0},alert:e=>({...e.shadows.pop,borderColor:e.colors.border.main})});function yk(e){let t=yn(Xw),o=yn(Hw),n=Hs.useRef(null),r=VE[t];return Hs.createElement(Wn,{ref:n},Hs.createElement(K.View,{style:[WE.toaster],mobileStyle:r.mobile,desktopStyle:r.desktop},Hs.createElement(Ew,null,o.map(i=>Hs.createElement(gk,{...i,key:i.id})))))}var WE=X.create({toaster:{position:"fixed",zIndex:200}}),VE={"bottom-right":X.create({desktop:{bottom:p.medium,right:p.medium},mobile:{bottom:p.medium,right:p.medium,left:p.medium}}),"bottom-right-with-bar":X.create({desktop:{bottom:p.xxlarge,right:p.medium},mobile:{bottom:p.xxlarge+p.xlarge+p.medium,right:p.medium,left:p.medium}})};c();var br=k(O());z();var qE=B.createInteractiveComponent(wn);function Fi(e){let{icon:t,title:o,subtitle:n,details:r,style:i,buttons:a=[],...s}=e,[,l]=I(L);return br.createElement(ga,{style:[b.alignCenter,p.Padding.medium,i],...s},t?br.createElement(FE,{icon:t}):null,br.createElement(v,{style:[b.flex1]},br.createElement(v,{style:[b.directionRow,b.alignCenter]},br.createElement(qE.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary,descendantOf:ga.interactiveHandle},o),n?br.createElement(wn,{style:[l.Label,l.textMuted,p.Margin.mediumLeft]},n):null),r?br.createElement(v,null,br.createElement(N,{style:[l.Label,l.textMid]},r)):null),a.length>0?br.createElement(v,{style:[b.directionRow,b.alignCenter,p.Margin.mediumLeft]},a.map((u,d)=>u?br.createElement(v,{style:[p.Margin.smallLeft],key:d},u):null)):null)}function FE(e){let{icon:t}=e,[,o]=I(L),n=B.useInteractiveComponent(t);return br.createElement(v,{style:[p.Margin.mediumRight]},br.createElement(n.Child,{size:T.S,style:[o.textMuted],hoverStyle:o.primary}))}c();async function vk(e){let t=()=>{let n=e;for(;n&&(n=n.parentElement,!(n===document.querySelector("body")||n!=null&&n.hasAttribute("data-virtualparent"))););return n},o;return new Promise(n=>{let r=t();if(!r||!r.firstChild)return;let i=()=>{o.disconnect(),n()},a=!1;o=new IntersectionObserver(l=>{let[u]=l;u.isIntersecting&&requestAnimationFrame(()=>{i(),a=!0})},{rootMargin:"-50% 0% -50% 0%"});let s=()=>{tp(r,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"}),setTimeout(()=>{a||s()},500)};s(),o.observe(r)})}c();var wy=k(O());c();var Wt=k(O());z();c();var Je=k(O());z();c();var we=k(O());z();var bk=we.forwardRef(function(t,o){let{command:n,query:r,active:i,executeCommand:a,onHoverIn:s}=t,[l,u]=I(L),[,d]=I(GE),[m,f]=Bn(!1),g=u.text,h=u.textMid,y=u.primary,C=l.colors.background.main;i&&(g=u.textStandout,h=u.textMid,C=l.colors.background.muted);let x=[u.Bold],w=we.useCallback(()=>{let _=a(n);_ instanceof Promise&&f(()=>_)},[n,a]),P=we.useCallback(()=>s(n),[n,s]),R=B.useInteractiveState({onHoverIn:P});return we.createElement(An,{ref:o,component:Be,...R.events,onMouseDown:_=>{_.preventDefault()},onPress:w,backgroundColor:C,style:[b.directionRow,b.alignCenter,d.commandItem,p.Margin.smallHorizontal,p.Padding.xsmallVertical,p.Padding.smallHorizontal,{height:vy(n)}]},m?we.createElement(v,{style:[p.Padding.mediumRight]},we.createElement(Oe,{size:T.ICON_M})):n.icon?we.createElement(v,{style:[p.Padding.mediumRight]},we.createElement(we.Suspense,{fallback:we.createElement(v,{style:{width:T.ICON_M,height:T.ICON_M}})},we.createElement(n.icon,{size:T.ICON_M,style:y}))):null,we.createElement(v,{style:b.flex1},we.createElement(v,{style:b.directionRow},we.createElement(v,{style:b.flex1},n.title?we.createElement(v,null,we.createElement(N,{style:[u.Label,g,n.subtitle?u.Bold:u.Medium],numberOfLines:1},we.createElement(ap,{query:r,text:n.title,highlight:x}))):null,n.subtitle?we.createElement(v,null,we.createElement(N,{style:[u.Caption,h],numberOfLines:1},we.createElement(ap,{query:r,text:n.subtitle,highlight:x}))):null)),n.body?we.createElement(v,{style:[d.commandBody,p.Padding.smallLeft,p.Margin.smallTop]},n.body.map((_,E)=>we.createElement(v,{key:E},we.createElement(N,{style:[u.Caption,u.textMid],numberOfLines:1},we.createElement(ap,{query:r,text:_,highlight:x}))))):null),n.label?we.createElement(v,null,we.createElement(Fw,{size:"medium",kind:n.label.kind,icon:n.label.icon},n.label.title)):we.createElement(we.Fragment,null,n.descendant?we.createElement(v,{style:[p.Padding.mediumLeft]},we.createElement(S.ChevronRight,{size:T.ICON_S,style:[u.textMuted]})):null,n.type===1?we.createElement(v,{style:[p.Padding.mediumLeft]},we.createElement(Bi,{value:n.selected,onValueChange:w,size:T.ICON_S})):null,n.type===0?we.createElement(v,{style:[p.Padding.mediumLeft]},we.createElement(ip,{value:n.selected,onValueChange:w,size:T.ICON_S})):null,n.type===2?we.createElement(v,{style:[p.Padding.mediumLeft]},we.createElement(rp,{value:n.enabled,onValueChange:()=>{}})):null))});function vy(e){let t=0;return t+=2*p.small,t+=Math.max(e.title&&qe.Label.lineHeight||0,e.icon?T.ICON_M:0,typeof e.selected=="boolean"||typeof e.enabled=="boolean"?T.ICON_S:0),e.subtitle&&(t+=qe.Caption.lineHeight||0),e.body&&(t+=p.small,t+=e.body.length*(qe.Caption.lineHeight||0)),t}var GE=D.create({commandItem:e=>({borderRadius:e.radiuses.medium}),commandBody:e=>({borderLeftWidth:1,borderLeftColor:e.colors.border.mid})});c();function _p({getItemHeight:e,getItemSeparatorHeight:t=()=>0,getSectionSeparatorHeight:o=()=>0,getSectionHeaderHeight:n=()=>0,getSectionFooterHeight:r=()=>0,listHeaderHeight:i=0,stickySectionHeadersEnabled:a}){return(s,l)=>{let u=0,d=typeof i=="function"?i():i,m=0,f=s.length;for(let g=0;g<f&&(m<l||g===0);g++){let h=s[g],y=s[g].data,C=y.length,x=s[g-1],w=s[g+1],P={section:h,index:g},R=o({section:h,index:g,leadingItem:void 0,trailingItem:y[0],leadingSection:x,trailingSection:w});d+=u+R+(a&&g===1?n({section:s[0],index:0}):0),u=a&&g===0?0:n(P),g!==0&&m++;for(let _=0;_<C&&(m<l||g===0&&_===0);_++){d+=u;let E=y[_],M=_>0&&_<C-1?t({item:E,section:h,index:_,leadingItem:y[_-1],trailingItem:y[_+1],leadingSection:x,trailingSection:w}):0;u=e({item:E,section:h,index:_})+M,m++}if(m<l&&(d+=o({section:h,index:g,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:x,trailingSection:w})),m<l){let _=o({section:h,index:g,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:x,trailingSection:w});d+=u+_,u=r(P),m++}}return{index:l,length:u,offset:d}}}function Ck(e){var G;let{computed:{listId:t,items:o,sections:n,areMoreLoading:r},withKeyboardInteractions:i,palette:a,setPalette:s,setTopPalette:l}=e,u=qc(),d=Je.useRef(null),m=lk(),f=Je.useCallback(async V=>{let F=await m1(a,V);F?s(F):l(null)},[s,l]),g=Je.useCallback(V=>{s(F=>{if(!F)return null;let Y=m(V),$=p1(F,V,Y);return $||(F.descendant?{...F,descendant:void 0}:F)})},[s,m]),h=Je.useCallback(()=>{s(V=>V!=null&&V.parent?null:V)},[s]),y=Je.useCallback(V=>{let F=-1;return{sectionIndex:n.findIndex($=>(F=$.data.findIndex(te=>te.key===V),F>=0)),itemIndex:F,viewPosition:.5}},[n]),C=Je.useCallback(V=>{var F;return(F=d.current)==null?void 0:F.scrollToLocation(y(V.key))},[y]),x=g1({active:i,items:o,onSelect:f,onOpen:g,onClose:h,scrollTo:C}),w=n.length>1,P=Je.useCallback(V=>{x.hoverItem(V),g(V)},[x.hoverItem,g]),R=Je.useMemo(()=>_p({getItemHeight:({item:V})=>vy(V),getSectionSeparatorHeight:({section:V,leadingItem:F,leadingSection:Y,trailingItem:$,trailingSection:te})=>Y&&!F&&!V.group.title?2*(p.small-1)+1:te&&!$?T.S/4:0,getSectionHeaderHeight:({section:V})=>w&&V.group.title?T.S:0}),[w]),_=Je.useMemo(()=>w?({section:V})=>V.group.title?Je.createElement(XE,{group:V.group}):null:void 0,[w]),E=Je.useCallback(V=>Je.createElement(KE,{...V}),[]),M=Je.useCallback(({item:V})=>{var F;return Je.createElement(bk,{ref:m(V),active:u==="desktop"&&V.key===((F=x.cursor.current)==null?void 0:F.key),command:V,query:a.query.text,executeCommand:f,onHoverIn:P})},[f,m,(G=x.cursor.current)==null?void 0:G.key,P,u,a.query.text]),W=r;if(!W&&o.length===0){let V=a.placeholder||(Cu(a)?null:"No items found");return V?Je.createElement(HE,{placeholder:V}):null}return Je.createElement(v,{style:[b.flex1]},Je.createElement(Yd,{key:t,ref:d,sections:n,extraData:x.cursor,getItemLayout:R,renderItem:M,SectionSeparatorComponent:E,renderSectionHeader:_,contentContainerStyle:[p.Padding.smallVertical]}),W?Je.createElement(v,{style:[b.directionRow,b.justifyContentCenter,p.Padding.medium]},Je.createElement(Oe,{size:T.ICON_L})):null)}function HE(e){let{placeholder:t}=e,[,o]=I(L);return Je.createElement(v,{style:[p.Padding.smallHorizontal,p.Padding.mediumVertical]},Je.createElement(v,{style:[p.Padding.mediumHorizontal]},Je.createElement(N,{style:[o.Caption,o.textMuted]},t)))}function XE(e){let{group:t}=e,[,o]=I(L);return Je.createElement(v,{style:[jE.paletteGroupHeader,b.directionRow,b.alignCenter,p.Padding.smallHorizontal]},Je.createElement(v,{style:[p.Padding.smallHorizontal]},Je.createElement(N,{style:[o.GroupTitle,o.textMuted]},t.title)))}function KE(e){let{leadingSection:t,section:o,leadingItem:n,trailingSection:r,trailingItem:i}=e,[,a]=I(UE);return t&&!n&&!o.group.title?Je.createElement(v,{style:a.paletteDividerUntitled}):(r&&!i&&(v,a.paletteDividerFooter),null)}var jE=X.create({paletteGroupHeader:{height:T.S}}),UE=D.create({paletteDividerUntitled:(e,t)=>({marginTop:p.small-1,marginBottom:p.small-1,borderTopColor:t.color==="light"?e.colors.border.mid:e.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:T.S/4}});c();var tl=k(O());z();function Sk(e){let{error:t}=e,[,o]=I(L);return console.error(t),tl.createElement(v,{style:[b.directionRow,b.alignCenter,p.Padding.smallVertical,p.Padding.mediumHorizontal]},tl.createElement(v,{style:[p.Padding.mediumRight,p.Padding.xsmallTop]},tl.createElement(S.Warning,{size:T.ICON_S,style:o.danger})),tl.createElement(v,{style:[b.flex1,b.directionRow,b.alignCenter]},tl.createElement(N,{style:[o.danger,o.Label]},Ii(t))))}c();var Fn=k(O());z();var wk=Fn.forwardRef(function(t,o){let{palette:n,setPalette:r,withItems:i,placement:a}=t,[,s]=I(YE),[l,u]=I(L),[d,m]=Li(n.query.text,[n]),f=h=>{m(h),r(y=>!n||!y?n:Ha({...y,descendant:void 0},h))},g=h=>{(h.nativeEvent.key==="Escape"||h.nativeEvent.key==="Backspace"&&n.query.text.length===0)&&r(null)};return Fn.createElement(v,{style:i&&s.paletteInputWrapperWithBottomBorder},Fn.createElement(v,{style:[b.directionRow,b.alignCenter]},n.parent&&a==="right"?Fn.createElement(v,{style:[p.Padding.smallLeft]},Fn.createElement(S.ChevronLeft,{size:T.ICON_M,style:u.textMuted})):null,Fn.createElement(v,{style:[b.flex1,b.directionRow,b.alignCenter,s.paletteInput,p.Margin.small]},Fn.createElement(v,{style:[b.flex1]},Fn.createElement(Lr,{ref:o,value:d,placeholder:n.search,placeholderTextColor:l.colors.text.muted,onChangeText:f,onKeyPress:g,style:[u.Caption,u.text,p.Padding.mediumHorizontal,p.Padding.smallVertical]})),Fn.createElement(K.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[p.Margin.smallHorizontal]},Fn.createElement(A,{icon:S.X,size:"large",onPress:()=>r(null)}))),n.parent&&a==="left"?Fn.createElement(v,{style:[p.Padding.smallRight]},Fn.createElement(S.ChevronRight,{size:T.ICON_M,style:u.textMuted})):null))}),YE=D.create({paletteInputWrapperWithBottomBorder:(e,t)=>({borderBottomColor:t.color==="light"?e.colors.border.mid:e.colors.sidebar.itemBorder,borderBottomWidth:1}),paletteInput:e=>({backgroundColor:e.colors.background.muted,borderRadius:e.radiuses.large})});c();var ol=k(O());function kk(e){let[t,o]=ol.useState(!1),n=Ws(()=>new WeakMap),r=ol.useRef(null);return ol.useMemo(()=>{let i=[],a=[],s;e.groups.forEach(d=>{let m;try{m=ZE(e,d)}catch(f){s=f;return}if(m instanceof Promise){let f=n.current.get(d);f&&i.push(f),a.push(m)}else m&&(n.current.set(d,m),i.push(m))});let l=i.filter(d=>d.data.length>0).sort((d,m)=>d.priority>m.priority?-1:d.priority<m.priority?1:0),u=l.reduce((d,m)=>(d.push(...m.data),d),[]);if(a.length>0){o(!0);let d=r.current=Promise.all(a);d.then(()=>{d===r.current&&(o(!1),r.current=null)}).catch(m=>em(new Error(m)))}return{listId:Date.now(),items:u,sections:l,areMoreLoading:t,error:s}},[e.groups,e.query,t,n])}function ZE(e,t){try{let o=typeof t.commands=="function"?t.commands(e):t.commands,n=typeof t.commands!="function"||t.commands.length===0,r=t.priority||5;if(n){let i=$E(e.query.text,o);r=i.reduce((a,s)=>typeof s.score<"u"?Math.max((1-s.score)*10,a):a,r),o=i.map(a=>a.item)}return{group:t,priority:r,data:o}}catch(o){if(o instanceof Promise)return o;throw o}}function $E(e,t){return e?new zc(t,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(e):t.map(n=>({item:n,score:void 0}))}c();var Sy=k(lm()),Mp=k(O());var by=204,Ip=246,Cy=384,QE=630,Rp=180,Pp=355;function xk(e,t,o){let n=Mp.useMemo(()=>e2(t,o),[t.position,!!t.parent,o]),r=Mp.useCallback(l=>JE(l,t.position),[t.position]),[i,a,s]=Mw(e,r,n);return[i,a,s]}function JE(e,t){let o,n=(t==null?void 0:t.width)||"medium";switch(n){case"small":o={width:by,maxWidth:by,minWidth:by,minHeight:0,height:Rp,maxHeight:Pp};break;case"medium":o={width:Ip,maxWidth:Ip,minWidth:Ip,minHeight:0,height:Rp,maxHeight:Pp};break;case"large":o={width:Cy,maxWidth:Cy,minWidth:Cy,minHeight:0,height:Rp,maxHeight:Pp};break;case"anchor":let r=Math.max(Ip,e.width),i=(0,Sy.default)(e.width,r,QE);o={width:(0,Sy.default)(e.width,r,i),maxWidth:i,minWidth:r,minHeight:0,height:Rp,maxHeight:Pp};break;default:Ne(n)}return o}function e2(e,t){var n,r;let o={cover:(n=e.position)==null?void 0:n.cover,spacingWithAnchor:p.small};return e.parent?(o.offset={top:-p.small},o.spacingWithAnchor=p.medium,o.allowedPlacements=t==="left"?["left","right"]:["right","left"]):((r=e.position)==null?void 0:r.width)==="anchor"&&(o.allowedPlacements=["bottom","top"]),o}var t2=K.createResponsiveComponent(An);function Ok(e){let{paletteState:{palette:t},setPaletteState:o}=e,n=Wt.useRef(null),[,r]=I(Ik),i=()=>o(null),a=Wa(gr.fade),s=Pw("OUTSIDE_CLICK");return Va({opened:!0,closeOnEsc:!Cu(t),closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:i},n),Rw(),Wt.createElement(Wn,{ref:n},Wt.createElement(At,{onPressIn:()=>{s&&i()}},Wt.createElement(v,{ref:a,style:[r.paletteBackdrop]},Wt.createElement(_k,{...e,setTopPaletteState:o}))))}function _k(e){let{paletteState:{palette:t,anchorRef:o},setPaletteState:n,setTopPaletteState:r,parentPlacement:i}=e,[a,s]=xk(o,t,i),l=Wa(gr.slideToL[s]);return Wt.createElement(Wt.Fragment,null,Wt.createElement(o2,{ref:l,palette:t,setPalette:m=>{n(f=>{if(!f)return null;let g=typeof m=="function"?m(f.palette):m;return g?{...f,palette:g}:null})},setTopPalette:m=>{r(f=>{if(!f)return null;let g=typeof m=="function"?m(f.palette):m;return g?{...f,palette:g}:null})},positionStyle:a,placement:s}),t.descendant?Wt.createElement(_k,{paletteState:t.descendant,setTopPaletteState:r,setPaletteState:m=>{n(f=>f?{...f,palette:{...f.palette,descendant:(typeof m=="function"?m(f.palette.descendant||null):m)||void 0}}:null)},parentPlacement:s}):null)}var o2=Wt.forwardRef(function(t,o){let{palette:n,setPalette:r,setTopPalette:i,positionStyle:a,placement:s}=t,l=Wt.useRef(null),[u,d]=I(Ik),m=kk(n),f=!n.descendant;return Wt.useEffect(()=>{if(n.descendant)return;let g=l.current;g&&(document.activeElement===g||(g.select(),g.focus()))},[n]),Wt.createElement(At,{onPress:g=>g.preventDefault()},Wt.createElement(t2,{ref:o,backgroundColor:u.colors.background.main,style:[d.palette],mobileStyle:d.paletteMobile,desktopStyle:[d.paletteInline,a],onStartShouldSetResponder:()=>!0},Cu(n)?Wt.createElement(wk,{ref:l,palette:n,setPalette:r,withItems:m.items.length>0,placement:s}):null,m.error?Wt.createElement(Sk,{error:m.error}):Wt.createElement(Ck,{computed:m,palette:n,withKeyboardInteractions:f,setPalette:r,setTopPalette:i})))}),Ik=D.create({paletteBackdrop:e=>({flexDirection:"row",alignItems:"flex-start",justifyContent:"center",position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:100,backgroundColor:"transparent"}),palette:e=>({borderRadius:e.radiuses.xlarge,borderColor:e.colors.border.main,borderWidth:1,overflow:"hidden",...e.shadows.pop}),paletteMobile:{position:"absolute",marginTop:0,top:p.small,left:p.small,right:p.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute"}});function Rk(e){let[t,o]=qo(d1);return wy.createElement(Xm,null,t?wy.createElement(Ok,{paletteState:t,setPaletteState:o}):null)}c();var Pk=k(O());var n2=[Bs["1f44d"],Bs["1f389"],Bs["1f604"],Bs["1f602"],Bs["1f44f"],Bs["1f44e"]];function nl(e,t={}){let{withSearch:o=!0,max:n=5}=t;return oe({search:o?"Select an emoji\u2026":void 0,groups:[{key:"emojis",commands:r=>(r.query.text?bp(r.query.text):n2).slice(0,n).map(a=>({key:a.code,title:a.shortname,icon:s=>Pk.createElement(Co,{...s,code:a.code}),trigger:()=>e(a.code)}))}]})}c();var Ua=k(O());z();var ba=Ua.forwardRef(function(t,o){let{displayMode:n="inline",value:r,style:i,placeholder:a,readOnly:s,onChangeText:l,...u}=t,[d]=I(),m=!s&&l,f=Ua.useMemo(()=>m&&n==="inline"?np(r||a||"",X.flatten([i])):0,[n,r,a,i,m]);if(!m){let g=Ua.createElement(N,{style:[i],selectable:!0},r);return n==="inline"?g:Ua.createElement(v,{style:Mk.inputModeBlock},g)}return Ua.createElement(Lr,{ref:o,placeholderTextColor:d.colors.text.muted,...u,value:r,onChangeText:l,placeholder:a,style:[i,n==="inline"?{width:f}:Mk.inputModeBlock]})}),Mk=X.create({inputModeBlock:{width:"100%"}});c();var Tp=[{key:"blue",color:H.primary.base,title:"Blue"},{key:"purple",color:H.violet.base,title:"Purple"},{key:"orange",color:H.orange.base,title:"Orange"},{key:"red",color:H.scarlet.base,title:"Red"},{key:"yellow",color:H.YELLOW,title:"Yellow"},{key:"green",color:H.green.base,title:"Green"}],Ep=[{key:"blue",color:H.primary.xlight,title:"Blue"},{key:"purple",color:H.violet.xlight,title:"Purple"},{key:"orange",color:H.orange.xlight,title:"Orange"},{key:"red",color:H.scarlet.xlight,title:"Red"},{key:"yellow",color:H.YELLOW_XXLIGHT,title:"Yellow"},{key:"green",color:H.green.xlight,title:"Green"}],Eq=[H.primary.light,H.violet.light,H.fuchsia.light,H.scarlet.light,H.orange.light,H.green.light];c();var We=k(O());z();c();var Dk=9,xy=Em.reduce((e,t)=>{let o=e.find(r=>r.key===t.category);if(!o)return console.warn("Unknown emoji category","emoji"),e;(!o.data.length||o.data[o.data.length-1].emojis.length===Dk)&&o.data.push({key:"",emojis:[]});let n=o.data[o.data.length-1];return n.key+=t.code,n.emojis.push(t),e},[{key:"people",title:"People",Icon:S.EmojiReaction,data:[]},{key:"nature",title:"Nature",Icon:S.RoleEditor,data:[]},{key:"food",title:"Food",Icon:S.Food,data:[]},{key:"activity",title:"Activity",Icon:S.Music,data:[]},{key:"travel",title:"Travel",Icon:S.EmojiBike,data:[]},{key:"objects",title:"Objects",Icon:S.EmojiWatch,data:[]},{key:"symbols",title:"Symbols",Icon:S.HeartOutlined,data:[]},{key:"flags",title:"Flags",Icon:S.EmojiFlag,data:[]}]);function Ak(e){let t=bp(e);return{key:"search",title:"Results",data:p2(t,Dk),Icon:S.Search}}function p2(e,t){let o=e.length;if(o===0)return[];let n=Math.ceil(o/t);return Array.from({length:n},(r,i)=>{let a=i*t,s=e.slice(a,a+t);return{key:s.map(l=>l.code).join("-"),emojis:s}})}function Np(e){let{onPick:t,onRemove:o}=e,[n,r]=We.useState(""),[i,a]=We.useState(""),s=We.useRef(null);We.useEffect(()=>{let u=requestAnimationFrame(()=>{s.current&&s.current.focus()});return()=>{cancelAnimationFrame(u)}},[s]);let l=u=>{r(u),a(u)};return We.createElement(v,{style:Ou.emojiPicker},We.createElement(v,{style:[Ou.emojiPickerSearch,b.directionRow]},We.createElement(Ut,{kind:"search",size:"medium",ref:s,icon:S.Search,placeholder:"Search",value:n,onChangeText:l,cleareable:!0,style:b.flex1}),o?We.createElement(A,{icon:S.Trashcan,onPress:o,title:"Remove Emoji",size:"medium",kind:"secondary",style:p.Margin.smallLeft}):null),We.createElement(h2,{query:i,onPick:t}))}var f2=_p({getItemHeight:()=>Lp,getSectionHeaderHeight:()=>Bk,stickySectionHeadersEnabled:!0}),g2=({section:e})=>We.createElement(y2,{category:e}),h2=We.memo(function(t){let{query:o,onPick:n}=t,r=We.useRef(null),i=o?[Ak(o)]:xy,a=l=>{r.current&&r.current.scrollToLocation({sectionIndex:l,itemIndex:0})},s=We.useCallback(({item:l})=>We.createElement(v2,{row:l,onPick:n}),[n]);return We.createElement(We.Fragment,null,!o&&We.createElement(v,{style:Ou.emojiPickerCategories},xy.map((l,u)=>We.createElement(A,{key:l.key,icon:l.Icon,onPress:()=>{a(u)}}))),We.createElement(Yd,{ref:r,sections:i,stickySectionHeadersEnabled:!0,renderItem:s,renderSectionHeader:g2,getItemLayout:f2}))}),y2=We.memo(function(t){let{category:o}=t,[,n]=I(zk),[,r]=I(L);return We.createElement(v,{style:[n.emojiCategoryHeader]},We.createElement(N,{style:[r.GroupTitle,r.text]},o.title))},(e,t)=>e.category.title===t.category.title),v2=We.memo(function(t){let{row:o,onPick:n}=t;return We.createElement(v,{style:Ou.emojiRow},o.emojis.map(r=>We.createElement(b2,{key:r.code,code:r.code,onPick:n})))},(e,t)=>e.row.key===t.row.key&&e.onPick===t.onPick),b2=We.memo(function(t){let{code:o,onPick:n}=t,[,r]=I(zk);return We.createElement(B.TouchableOpacity,{onPress:()=>n(o),style:[Ou.emojiItem],activeStyle:r.emojiItemHovered},We.createElement(Co,{code:o,size:24}))}),Lp=40,Bk=26,zk=D.create({emojiCategoryHeader:e=>({height:Bk,backgroundColor:e.colors.background.main,paddingLeft:p.medium,paddingRight:p.medium,paddingTop:p.small,paddingBottom:p.small}),emojiItemHovered:e=>({backgroundColor:e.colors.itemHover})}),Ou=X.create({emojiPicker:{display:"flex",width:376,height:314},emojiPickerSearch:{padding:p.small},emojiPickerCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:p.small,paddingBottom:0,paddingTop:0},emojiRow:{display:"flex",flexDirection:"row",paddingLeft:p.small,paddingRight:p.small},emojiItem:{width:Lp,height:Lp,borderRadius:Lp,display:"flex",alignItems:"center",justifyContent:"center",outlineStyle:"none"}});c();var _u=k(O());c();var Ca=JSON.parse('{"container":"container_UPXwU","darkestParentBackground":"darkestParentBackground_8TVPV","darkParentBackground":"darkParentBackground_ziFwB","semiDarkParentBackground":"semiDarkParentBackground_wgu6B","mediumParentBackground":"mediumParentBackground_BIBSL","semiLightParentBackground":"semiLightParentBackground_Yx9Vw","lightParentBackground":"lightParentBackground_INb4a","lightestParentBackground":"lightestParentBackground_FL4je","toggle":"toggle_siihR","toggleLightMode":"toggleLightMode_-FLG4","toggleDarkMode":"toggleDarkMode_uS4t3","toggleSwitch":"toggleSwitch_NtUzX","toggleButton":"toggleButton_ePBfn","toggleIcon":"toggleIcon_-vIfn"}');function Wk(e){let{onValueChange:t,value:o=!1,backgroundColor:n,mode:r="switch",accesibilityLabel:i="Switch to dark mode"}=e,a=()=>{t()},s=r==="switch"?o?S.ThemeDark.CSS:S.ThemeLight.CSS:o?S.ThemeLight.CSS:S.ThemeDark.CSS,l=Cp(n);return r==="switch"?_u.default.createElement(ae,{as:"button",type:"button",role:"switch","aria-label":i,"aria-checked":o,onClick:a,style:[Ca.container,Ca[`${l}ParentBackground`]]},_u.default.createElement(ae,{style:[Ca.toggle,Ca.toggleSwitch,U.backgroundColor.main,U.margin.xsmall,o?Ca.toggleDarkMode:Ca.toggleLightMode]},_u.default.createElement(s,{style:[Ca.toggleIcon,U.padding.xsmall]}))):_u.default.createElement(Fc,{label:i,role:"switch",iconOnly:!0,leadingIcon:s,rounded:!0,style:Ca.toggleButton,kind:"muted",onClick:a,"aria-checked":o,"aria-label":i,preventFocusOnPress:!0})}c();var rl=k(O());function Vk(e){let{children:t,...o}=e;return rl.createElement(Ow,null,rl.createElement(Vw,null,rl.createElement(Aw,null,rl.createElement(Rk,{...o}),rl.createElement(yk,null),t)))}c();var il=k(O());c();var Ya=JSON.parse('{"buttonTabs":"buttonTabs_ihLP4","buttonTabsItem":"buttonTabsItem_9vRT7","buttonTabsItemActive":"buttonTabsItemActive_PnjM4","buttonTabsItemIcon":"buttonTabsItemIcon_wUvLo","buttonTabsItemText":"buttonTabsItemText_Oa-uN","buttonTabsSizeMedium":"buttonTabsSizeMedium_Cra41","buttonTabsItemDisabled":"buttonTabsItemDisabled_XW4rD"}');function qk(e){let{tabs:t,activeTab:o,onPress:n,size:r="medium"}=e;return il.createElement(ae,{style:[Ya.buttonTabs,r==="medium"&&Ya.buttonTabsSizeMedium]},t.map(i=>{let a=o===i.key,s=i.icon;return il.createElement(Vn,{key:i.key,tooltip:i.tooltip},(l,u)=>il.createElement(S1,{ref:u,onPress:()=>{i.disabled||n(i.key)},style:[Ya.buttonTabsItem,{[Ya.buttonTabsItemActive]:a,[Ya.buttonTabsItemDisabled]:i.disabled}],...l.domEvents},s?il.createElement(s,{style:Ya.buttonTabsItemIcon}):null,i.label?il.createElement(pa,{style:[Ya.buttonTabsItemText]},i.label):null))}))}c();var Dp=k(O());var Fk=st("auth"),Oy=Cw(e=>{let{customToken:t,waitUserReady:o=!0}=e;if(typeof window>"u")throw new Error("initializeAuth should not be called during SSR");return!t&&!o?{customToken:t}:new Nr("auth.initialize").wrap(async()=>{if(t)try{Fk.info("authenticating with custom token before subscribing to auth"),await Rs.auth().signInWithCustomToken(t)}catch(r){Fk.critical("Error during auth with custom token",r)}return o!==!1&&await new Promise((r,i)=>{let a=Rs.auth().onAuthStateChanged(()=>{a(),r()},i)}),{customToken:t}})});function Gk(e){return Oy.readAsync(e)}function Ap(e){let{children:t}=e;if(typeof window<"u"){if(Oy.state==="unstarted")throw new Error("initializeAuth should have been called before useWaitFirebaseAuth");Oy.read({})}return Dp.createElement(Dp.Fragment,null,t)}c();c();VC();var al;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(al||(al={}));var Hk=function(e){return e};var Xk="beforeunload";var C2="popstate";function Uk(e){e===void 0&&(e={});var t=e,o=t.window,n=o===void 0?document.defaultView:o,r=n.history;function i(){var M=n.location,W=M.pathname,G=M.search,V=M.hash,F=r.state||{};return[F.idx,Hk({pathname:W,search:G,hash:V,state:F.usr||null,key:F.key||"default"})]}var a=null;function s(){if(a)g.call(a),a=null;else{var M=al.Pop,W=i(),G=W[0],V=W[1];if(g.length){if(G!=null){var F=d-G;F&&(a={action:M,location:V,retry:function(){_(F*-1)}},_(F))}}else w(M)}}n.addEventListener(C2,s);var l=al.Pop,u=i(),d=u[0],m=u[1],f=jk(),g=jk();d==null&&(d=0,r.replaceState(Ic({},r.state,{idx:d}),""));function h(M){return typeof M=="string"?M:_y(M)}function y(M,W){return W===void 0&&(W=null),Hk(Ic({pathname:m.pathname,hash:"",search:""},typeof M=="string"?Iy(M):M,{state:W,key:S2()}))}function C(M,W){return[{usr:M.state,key:M.key,idx:W},h(M)]}function x(M,W,G){return!g.length||(g.call({action:M,location:W,retry:G}),!1)}function w(M){l=M;var W=i();d=W[0],m=W[1],f.call({action:l,location:m})}function P(M,W){var G=al.Push,V=y(M,W);function F(){P(M,W)}if(x(G,V,F)){var Y=C(V,d+1),$=Y[0],te=Y[1];try{r.pushState($,"",te)}catch(fe){n.location.assign(te)}w(G)}}function R(M,W){var G=al.Replace,V=y(M,W);function F(){R(M,W)}if(x(G,V,F)){var Y=C(V,d),$=Y[0],te=Y[1];r.replaceState($,"",te),w(G)}}function _(M){r.go(M)}var E={get action(){return l},get location(){return m},createHref:h,push:P,replace:R,go:_,back:function(){_(-1)},forward:function(){_(1)},listen:function(W){return f.push(W)},block:function(W){var G=g.push(W);return g.length===1&&n.addEventListener(Xk,Kk),function(){G(),g.length||n.removeEventListener(Xk,Kk)}}};return E}function Kk(e){e.preventDefault(),e.returnValue=""}function jk(){var e=[];return{get length(){return e.length},push:function(o){return e.push(o),function(){e=e.filter(function(n){return n!==o})}},call:function(o){e.forEach(function(n){return n&&n(o)})}}}function S2(){return Math.random().toString(36).substr(2,8)}function _y(e){var t=e.pathname,o=t===void 0?"/":t,n=e.search,r=n===void 0?"":n,i=e.hash,a=i===void 0?"":i;return r&&r!=="?"&&(o+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(o+=a.charAt(0)==="#"?a:"#"+a),o}function Iy(e){var t={};if(e){var o=e.indexOf("#");o>=0&&(t.hash=e.substr(o),e=e.substr(0,o));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var Ry=st("history");function Yk(){let e=Uk(),t=[],o=!1,n=()=>{let i=t.shift();return i?(i(),!1):!0},r=i=>{o?t.push(i):i()};return{get location(){return e.location},listen:i=>e.listen(a=>{i({location:a.location,action:a.action})}),push:i=>{let{state:a,...s}=i;r(()=>{Ry.info("push",s,a),e.push(s,a)})},replace:i=>{let{state:a,...s}=i;r(()=>{Ry.info("replace",s,a),e.replace(s,a)})},go:i=>{r(()=>{Ry.info("go",i),e.go(i)})},transaction:i=>{if(o)i();else{let a=e.listen(()=>{n()&&a()});o=!0,i(),o=!1,n()&&a()}}}}c();function $k(e){let{basename:t="",location:o="/",context:n}=e,r=(a,s)=>{n.action=s,n.location=w2(t,Zk(a)),n.url=_y(n.location)};return{staticContext:n,location:k2(t,Zk(Iy(o))),push:a=>{r(a,"PUSH")},replace:a=>{r(a,"REPLACE")},go:()=>{},listen:()=>()=>{},transaction:a=>{a()}}}function Qk(e){return e.charAt(0)==="/"?e:`/${e}`}function w2(e,t){return e?{...t,pathname:Qk(e)+t.pathname}:t}function k2(e,t){if(!e||!t.pathname)return t;let o=Qk(e);return t.pathname.indexOf(o)!==0?t:{...t,pathname:t.pathname.substr(o.length)}}function Zk(e){let t={hash:"",search:"",pathname:"",...e,key:"",state:void 0};return t.search&&t.search.charAt(0)!=="?"&&(t.search=`?${t.search}`),t.hash&&t.hash.charAt(0)!=="#"&&(t.hash=`#${t.hash}`),t}c();var Xs=k(O()),Jk=k(Ww());function Py(e){let{history:t,children:o}=e,n=Xs.useMemo(()=>t||Yk(),[t]),r=Xs.useMemo(()=>({getCurrentValue:()=>n.location,subscribe:a=>n.listen(a)}),[n]),i=(0,Jk.useSubscription)(r);return Xs.createElement(_1.Provider,{value:n},Xs.createElement(I1.Provider,{value:i},o))}function ex(e){let{children:t,...o}=e,n=$k(o);return Xs.createElement(Py,{history:n},t)}c();var My=k(O());function tx(e,t){var l,u;let{navigate:o}=_e(),n=Wi(),r=QS(e),i=(0,My.useCallback)(d=>o({screen:{sideSheet:{type:e,tab:d}}},{replace:!0}),[o,e]),a=(0,My.useCallback)(()=>o({screen:{sideSheet:void 0}}),[o]),s=(l="sideSheet"in n.screen&&n.screen.sideSheet&&"tab"in n.screen.sideSheet&&n.screen.sideSheet.tab?n.screen.sideSheet.tab:t)!=null?l:r[0];return{opened:"sideSheet"in n.screen&&((u=n.screen.sideSheet)==null?void 0:u.type)===e,selectedTab:s,changeSelectedTab:i,close:a}}c();var x2=bt({key:"firestoreReacheable",default:!0,effects:[e=>{typeof window>"u"||fetch("https://web.archive.org/web/20230609172921/https://firestore.googleapis.com/$discovery/rest").catch(()=>{e.setSelf(!1)})}]});function ox(){return yn(x2)}c();function O2(e){var t;return e.themePreset?H.PRIMARY:(t=e.primaryColor)!=null?t:H.PRIMARY}function _2(e,t,o){let n=H.WHITE,r=H.darkModeGreyScale.dark;switch(e){case"default":return t==="dark"?r:n;case"bold":return o;case"contrast":return t==="dark"?n:r;case"custom":return H.fuchsia.light;default:Ne(e)}}function I2(e,t,o){switch(e){case"default":case"contrast":return t;case"bold":case"custom":return Vi(o)==="light"?H.lightModeText.base:H.darkModeText.base;default:Ne(e)}}function nx(e){return rS(e.headerTheme,e.themeMode)==="none"}function R2(e,t){var g;let{primaryColor:o,headerBackgroundColor:n,headerLinksColor:r}=((g=e.themeCustomizations)==null?void 0:g[t])||{},a=nx(e)?"default":ni(e),s=O2(e),l=o!=null?o:s,u=_2(a,t,l),d=n!=null?n:u,m=I2(a,l,d),f=r!=null?r:m;return{primaryColor:l,headerBackgroundColor:d,headerLinksColor:f}}function P2(e,t){var i,a,s;let o=(i=t!=null?t:e.themeMode)!=null?i:lu,{headerLogoURL:n,footerLogoURL:r}=((a=e.themeCustomizations)==null?void 0:a[o])||{};return{headerLogoURL:n!=null?n:e.logoURL,footerLogoURL:r!=null?r:(s=e.footer)==null?void 0:s.logoURL}}function Bp(e,t){var n;let o=(n=t!=null?t:e.themeMode)!=null?n:lu;return{...R2(e,o),...P2(e,o),headerDisabled:nx(e)}}c();var rx=k(O());var M2=st("app:events"),T2=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function E2(){let e=document.cookie?document.cookie.split("; "):[],t={};for(let o=0;o<e.length;o++){let n=e[o].split("="),r=n.slice(1).join("=");try{let i=decodeURIComponent(n[0]);t[i]=T2(r)}catch(i){M2.warning(`Couldn't parse cookie ${e[o]}. Error: `,i)}}return t}function ix(e,t){return rx.useEffect(()=>{L2(e,t)},[e.key,t]),null}async function L2(e,t){if(!e.integrations||!t)return;let o=await yw(),n=E2(),r=window.location.href,i=document.referrer,a=window.navigator.userAgent;(await jc()).analytics.trackViewInSpaceById(e.key,{pageId:t,visitor:{anonymousId:o,cookies:n,userAgent:a},url:r,referrer:i})}c();function ax(e,t){let o=t.type==="space"&&typeof t.changeRequest=="string"?t.changeRequest:void 0;return G1(e,o)}c();var sx=k(O());function Ty(e){let t=Ey(e);return lx(e),t}function cx(e,t){let o=sx.useRef(new Map),[n,r]=ux([e,o.current.get(t)||null]);if(lx([e]),!n)return null;switch(n.state){case"live":case"cached":return o.current.set(t,e),n.result;case"failed":throw n.error;case"pending":if(r&&r.state==="live")return r.result;throw n.pending;default:Ne(n)}}function lx(e){let t=gp(e.map(o=>o?Om(o.spaceKey,o.sheetKey):null));L1(e.map((o,n)=>{if(!o)return[];let r=t[n],i=r==null?void 0:r.result,a=(i==null?void 0:i.chunks)||[];return[Om(o.spaceKey,o.sheetKey),...a.map(s=>iy(o.spaceKey,o.sheetKey,s))]}).flat())}function ux(e){return e.map(t=>{if(!t)return null;let[o]=gp([Om(t.spaceKey,t.sheetKey)]);if(o.state==="failed"||o.state==="pending"||!o.result||!o.result.chunks)return o;let n=gp(o.result.chunks.map(s=>iy(t.spaceKey,t.sheetKey,s))),r=[],i=[];if(n.forEach(s=>{if(s.state==="pending")r.push(s.pending);else{if(s.state==="failed")throw s.error;if(s.result)i.push(s.result);else throw new Error("Chunk not found")}}),r.length>0)return{state:"pending",pending:Promise.all(r).then(()=>null)};let a=GS({sheet:o.result,chunks:i});return{state:o.state,result:a}})}function N2(e){return ux(e).map(o=>{if(!o)return null;if(o.state==="pending")throw o==null?void 0:o.pending;return o})}function Ey(e){return N2(e).map(o=>{if((o==null?void 0:o.state)==="failed")throw o.error;return o?o.result:null})}c();var dx=k(O());function zp(e){let t=rw(e),[o]=Fr([t]);return dx.useEffect(()=>{!o&&e&&tS(t,{url:e})},[o,e]),[o||{url:e}]}c();var mx=k(O());function px(e){let t=e?new URL(e).hostname:null,[o]=T1([t?dw(t):null]);return mx.useMemo(()=>{if(!o||!e)return;let n=Wc(Nm(o),e);if(!n)return;let r=o.find(i=>i.name===n.integrationKey);if(r)return{integration:r,block:n.block}},[o,e])}c();var fx=k(O());var Ly=bt({key:"hoveredCommentNodeAtom",default:null}),ZG=XC({key:"newCommentValueAtom",default:()=>zS("","comment")});function gx(){let e=oi(Ly);return fx.useMemo(()=>({highlight:(t,o={highlighting:!0,postButton:!0})=>{let n=t?pr.getOriginalKey(t):null;e(r=>n?(r&&r.node===n&&r.postButton&&(o.postButton=r.postButton),{node:n,...o}):null)}}),[e])}c();var yx=k(O());var hx=bt({key:"filesManagerAtom",default:null});function xt(){let e=oi(hx),t=KC();return yx.useMemo(()=>({prompt:o=>new Promise(n=>{e({options:o,onComplete:n})}),isOpen:()=>{let{isModified:o}=t(hx);return o}}),[e])}c();var vx=k(O());var Ny=bt({key:"mediaGalleryState",default:{medias:[],currentIndex:0}});function sl(){let e=oi(Ny);return vx.useMemo(()=>({open:(t,o=0)=>{e({medias:t,currentIndex:o})}}),[e])}c();var Iu=bt({key:"mobileToCOpenedAtom",default:!1});c();var Wp=k(O());function bx(e){var r,i;let t=Wp.useContext(Lo),o=t.preview||t.mode!=="public-content"||!((r=e==null?void 0:e.intercom)!=null&&r.enabled)||(i=e==null?void 0:e.intercom)==null?void 0:i.appID,n=ak();return ai(a=>{n&&o&&a.writeAsync({type:"script",src:`https://web.archive.org/web/20230609172921/https://widget.intercom.io/widget/${o}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:o})}})}),Wp.useEffect(()=>()=>{window.Intercom&&(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}c();var kx=k(Dy()),xx=k(O());c();var Sx=st("contentkit:remote");function qp(e){return Br({getValue:async t=>{Sx.info("fetch",t);let o=await e(t);return Sx.info("got response",o),o}})}c();var Ay=k(IE()),Ot=k(O());var Fp=st("contentkit:lifecycle"),By=Ot.forwardRef(function(t,o){let{mode:n,remote:r,input:i,security:a,onPropsChange:s,onAction:l}=t,[u,d]=Ot.useState(i),[m,f]=Ot.useState(null),{result:g,error:h}=A2(r,n,u),[y,C]=Li((g==null?void 0:g.state)||{},[g]),x=async R=>{let _={...u,...g?{props:s?g.props:u.props,state:g.state}:{},...R,state:{...u.state,...g==null?void 0:g.state,...y,...R.state}};Fp.debug("transition to",_),await r.readAsync(_),d(_)},w=async(R,_=!0)=>{let E=j1(y,R);switch(Fp.debug("dispatch action",E),_&&await(l==null?void 0:l(E)),E.action){case"@ui.modal.open":let M={integrationId:i.integrationId,componentId:E.componentId,props:E.props,context:i.context,action:E};await r.readAsync(M),f({mode:"modal",input:M});break;case"@ui.modal.close":break;case"@ui.url.open":lp(E.url);break;case"@editor.node.updateProps":Fp.info("update props",E.props),s==null||s(E.props);break;default:await x({action:E});break}};Ot.useImperativeHandle(o,()=>({dispatchAction:w})),Ot.useEffect(()=>{g&&(0,Ay.default)(g.props)!==(0,Ay.default)(u.props)&&(Fp.debug("props have changed",g.props),s==null||s(g.props))},[u,g]);let P=async R=>{switch(R.action){case"@ui.modal.close":x({action:R}),f(null);break}};if(h)switch(n){case"block":return Ot.createElement(qn,{kind:"danger",details:"Oops! unexpected error while rendering this block"});case"modal":return null;default:Ne(n)}return Ot.createElement(Ot.Fragment,null,Ot.createElement(D2,{element:g.element,dispatchAction:w},Ot.createElement(Y1,{element:g.element,localState:y,setLocalState:C,dispatchAction:w,security:a})),Ot.createElement(Ot.Suspense,{fallback:null},Ot.createElement(Xm,null,m?Ot.createElement(By,{remote:r,mode:m.mode,input:m.input,onAction:P,security:a}):null)))});function D2(e){let{element:t,dispatchAction:o,children:n}=e;switch(t.type){case"block":return Ot.createElement(Ot.Fragment,null,n);case"modal":return Ot.createElement(kt,{onClose:()=>{o({action:"@ui.modal.close",returnValue:t.returnValue||{}})},...U1(t.size)},n);default:Ne(t)}}function A2(e,t,o){let{result:n,error:r}=e.readSafe(o);return n?n.element.type!==t?{error:new Error(`Unexpected mode, expected ${t}, got ${n.element.type}`)}:{result:n}:{error:r||new Error("Unknown error")}}var B2=2e3,wx=Br({getValue:async e=>{let t=await jc(),o={spaceId:e.spaceId,componentId:e.componentId,action:e.action,props:e.props,state:e.state,context:e.context},n=JSON.stringify(o),r=kx.default.compressToEncodedURIComponent(n);return(await(r.length<B2?t.integrations.renderIntegrationUiWithGet(e.integrationId,{request:r}):t.integrations.renderIntegrationUiWithPost(e.integrationId,o))).data}});function Ox(e){let{spaceId:t}=e;return xx.useMemo(()=>qp(o=>{let n=wx.readCacheState({...o,spaceId:t});return n.result?n.result:wx.readAsync({...o,spaceId:t})}),[t])}c();var Ru=k(O());var zy=Ru.default.createContext(()=>({getCurrentValue:()=>[],subscribe:()=>()=>{}})),Ks=new Map;function _x(e){let{withComments:t,spaceKey:o,pageKey:n,changeRequestKey:r,children:i}=e,a={space:o,page:n,changeRequest:r||null},[s]=Fr([t?QC(VS(a),JC("resolved","==",null),eS("postedAt","asc")):null]);Ru.default.useEffect(()=>{let u=(s||[]).reduce((d,m)=>{var f;return m.node?{...d,[m.node]:[...(f=d[m.node])!=null?f:[],m]}:d},{});Object.entries(u).forEach(([d,m])=>{let f=m||[],g=Ks.get(d),[h,y]=g||[[],[]];z2(f,h)||(Ks.set(d,[f,y]),y.forEach(C=>C()))})},[s]);let l=Ru.default.useCallback(u=>({getCurrentValue:()=>{let d=Ks.get(u);return d?d[0]:[]},subscribe:d=>{let m=Ks.get(u),[f,g]=m||[[],[]];return Ks.set(u,[f,[...g,d]]),()=>{let h=Ks.get(u),[y,C]=h||[[],[]],x=C.filter(w=>w!==d);Ks.set(u,[y,x])}}}),[]);return Ru.default.createElement(zy.Provider,{value:l},i)}function z2(e,t){return e.length!==t.length?!1:e.every(o=>{let n=t.find(r=>o.key===r.key);return n?W2(o,n):!1})}function W2(e,t){return!(e.key!==t.key||e.resolved!==t.resolved||Xh(e.replies)!==Xh(t.replies))}c();var Wy=1024,Ix=Wy*1024;function Pu(e){return e>Ix?`${(e/Ix).toFixed(0)}MB`:e>Wy?`${(e/Wy).toFixed(0)}KB`:`${e}B`}function Rx(e){return za(e)?"Image":Bc(e)?"Code":e.contentType==="application/pdf"?"PDF":e.contentType.startsWith("text/")?"Text":"Binary"}c();var Gp=k(O());function Mx(e){var n,r,i;let t=(0,Gp.useContext)(Lo);V2(t,e),Ws(()=>Tx(t,e));let o=Ws(()=>Px(t,e));(0,Gp.useEffect)(()=>(o.current=Px(t,e),()=>{o.current&&window.gtag("config",o.current,{update:!0,groups:"not_tracking_views"})}),[(n=e==null?void 0:e.googleAnalytics)==null?void 0:n.enabled,(r=e==null?void 0:e.googleAnalytics)==null?void 0:r.trackingPrivateViews,(i=e==null?void 0:e.googleAnalytics)==null?void 0:i.trackingID,t])}function Vy(e){var t;return!!((t=e.googleAnalytics)!=null&&t.enabled&&typeof e.googleAnalytics.trackingID=="string")}function V2(e,t){ai(o=>{var n;qy(e,t)||o.writeSafe({type:"script",src:`https://web.archive.org/web/20230609172921/https://www.googletagmanager.com/gtag/js?l=dataLayer&id=${(n=t==null?void 0:t.googleAnalytics)==null?void 0:n.trackingID}`})})}function Tx(e,t){qy(e,t)||typeof window>"u"||window!=null&&window.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(...o){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",t.googleAnalytics.trackingID))}function Px(e,t){var n;if(qy(e,t)||typeof window>"u")return;window!=null&&window.gtag||Tx(e,t),window.gtag("config",t.googleAnalytics.trackingID,{send_page_view:!1,anonymize_ip:!0,groups:"tracking_views"});let o=Bm()==="rejected";return window.gtag("consent","default",{ad_storage:o?"denied":"granted",analytics_storage:o?"denied":"granted"}),(n=t==null?void 0:t.googleAnalytics)==null?void 0:n.trackingID}function qy(e,t){var o;return!t||!t.googleAnalytics||!Vy(t)||e.preview||e.mode!=="public-content"&&!((o=t==null?void 0:t.googleAnalytics)!=null&&o.trackingPrivateViews)}c();c();var Ze=k(O());z();c();var Zn=k(O());c();var cl=k(O());z();function Ex(e){let{node:t,editor:o}=e,{readOnly:n}=o,[,r]=I(q2),i=()=>{o.change(a=>{a.unwrapInlineByKey(t.key)})};return cl.createElement(tn,{preferredAlignment:"start",kind:"large"},cl.createElement(v,{style:[r.annotationPopover,p.Padding.mediumHorizontal,p.Padding.mediumVertical]},cl.createElement(kn,{fragment:Ti}),n?null:cl.createElement(v,{style:[r.toolbar]},cl.createElement(A,{size:"small",kind:"secondary",icon:S.Trashcan,title:"Remove annotation",onPress:i}))))}var q2=D.create({annotationPopover:{maxHeight:300},toolbar:{position:"absolute",top:p.medium,right:p.medium}});c();var jn=k(O());z();c();var Tu=4,Eu=p.medium,Lu=4,Nu=p.xlarge+p.small,Fy=p.large,js=-p.large,Mu={[zt]:-(Eu+Tu/2),[Mo]:-(Nu+Lu/2),[en]:-Fy},Gy={[zt]:Mu[zt],[Mo]:Mu[Mo],[en]:Mu[en]},Hp=T.ICON_XS,Du=js-T.BUTTON_S-p.small-Hp/2,Lx=p.large+4,Nx=p.large+8,Dx=p.large+8,Ax=28,Bx=32,zx=34,ui=p.small;c();var nn=k(O());c();var oO=[{key:"youtube",title:"Youtube",icon:Wx()},{key:"soundcloud",title:"Soundcloud",icon:Vx()},{key:"loom",title:"Loom",icon:qx()},{key:"github",title:"GitHub Gist",icon:Fx(),iconDark:Gx()},{key:"framer",title:"Framer",icon:Hx(),iconDark:Xx()},{key:"codepen",title:"Codepen",icon:Kx(),iconDark:jx()},{key:"dribbble",title:"Dribbble",icon:Ux()},{key:"trello",title:"Trello",icon:Yx()},{key:"typeform",title:"Typeform",icon:Zx(),iconDark:$x()},{key:"google-docs",title:"Google Docs",icon:Qx()},{key:"google-sheets",title:"Google Sheets",icon:Jx()},{key:"google-slides",title:"Google Slides",icon:eO()},{key:"google-form",title:"Google Forms",icon:tO()}];c();var Gi=k(O());z();c();var Sa=k(O());var wa=xp(e=>e.isPDF?{width:793.92,height:1123.2}:{width:750,height:500},{height:!1}),Hy={contentReferenceContext:{},uploadFiles:()=>{throw new Error("uploadFiles is not implemented, it should be passed as a prop to the ContentEditor component")},updateFile:()=>{throw new Error("updateFile is not implemented, it should be passed as a prop to the ContentEditor component")},logAnalyticsEvent:()=>{},blockLayoutComponent:({children:e})=>Sa.createElement(Sa.Fragment,null,e),integrationBlocksRemote:qp(()=>{throw new Error("not implemented")}),getIntegrationsBlocks:()=>({})},ne=Sa.createContext(Hy),Gr=Sa.createContext({sections:Dc(),active:null,selected:null,setActive:()=>{}}),Za=Sa.createContext("left"),Gn=Sa.createContext("root");function nO(e){let{onInsert:t,onClose:o}=e,{logAnalyticsEvent:n}=Gi.useContext(ne),[r,i]=Gi.useState(""),a=Dr(r),s=()=>{if(!a)return;let l=rm(r);t(bm.createEmbedBlock(l)),n({type:"edit_page_document_insert_block",from:"embed",blockType:Dn,embedHostname:new URL(l).hostname})};return Gi.createElement(kt,{title:"Embed a URL",subtitle:"Insert a URL to embed a live preview. Works with YouTube, Google Drive, Vimeo, and more.",onClose:o,footer:Gi.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},Gi.createElement(A,{kind:"secondary",onPress:o,style:p.Margin.smallRight},"Cancel"),Gi.createElement(A,{kind:"primary",disabled:!a,onPress:s},"Insert"))},Gi.createElement(Ut,{autoFocus:!0,label:"URL",value:r,onChangeText:i,onSubmit:s,placeholder:"Paste a URL or type it",feedback:a||!r?{type:"none"}:{type:"danger"}}))}c();var lt=k(O());z();c();var Ky=k(O());c();var di=Br({getValue:async([e,t,o])=>{let n=[];return!e||!nw(e,t)?[null,n,!1]:await su(async()=>[await ow(e,t,{getDocument:i=>(n.some(a=>oa(a)===oa(i))||n.push(i),qs.readAsync(i)),getCollection:i=>(n.some(a=>oa(i)===oa(a))||n.push(i),qs.readAsync(i))}),n,!1],[null,n,!0])},toJS(e){return[e[0],e[1].map(Kh),e[2]]},fromJS(e){return[e[0],e[1].map(jh),e[2]]}}),Xp=Br({getValue:async([e,t])=>{let o=[];return await su(async()=>[await Mm(e,t,{getDocument:r=>(o.some(i=>oa(i)===oa(r))||o.push(r),qs.readAsync(r)),getCollection:r=>(o.some(i=>oa(r)===oa(i))||o.push(r),qs.readAsync(r))}),o,!1],[null,o,!0])},toJS(e){return[e[0],e[1].map(Kh),e[2]]},fromJS(e){return[e[0],e[1].map(jh),e[2]]}});c();var Hi=k(O());c();var rO=Jm("0dc87861cc2f97f4b8aa90517de6c6f7d7add292c36eff9ffb4a127ad3126faa",()=>import("https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent.legacy-5ZISSC3X.min.js"));function iO(e){let{content:t}=e,{selectedTab:o,changeSelectedTab:n,opened:r,close:i}=tx("share");return Hi.createElement(mt,null,r?Hi.createElement(kt,{size:"xlarge",onClose:i},Hi.createElement(Hi.Suspense,{fallback:Hi.createElement(h1,{sidebar:Hi.createElement(bo,{size:"large"})},Hi.createElement(bo,{size:"large"}))},Hi.createElement(rO,{tab:o||J1(t),onChangeTab:n,...e}))):null)}c();var Kp=k(O());function $a(){let{navigate:e,getNavigationURL:t,getNavigationLinkProps:o}=_e();return Kp.useMemo(()=>{let r=(l,u)=>{let d=Ct(l,u);if(d!==null)return t({current:Xy(d)})},i=(l,u)=>{let d=Ct(l,u);if(d!==null)return o({current:Xy(d)})},a=(l,u={})=>{let{replace:d=!1}=u;e({current:Xy(l,u)},{replace:d})};return{getNavigationHref:r,getNavigationProps:i,navigateToPagePath:a,navigateToPage:(l,u,d)=>{let m=Ct(l,u);m!==null&&a(m,d)}}},[e])}function Xy(e,t={}){let{preserveSideSheet:o=!1,preserveComments:n=!0,sideSheet:r}=t;return i=>{var a;return{page:e,...!o&&!r?{sideSheet:void 0}:{},...r?{sideSheet:r}:{},comments:n&&i.type==="space"&&((a=i.sideSheet)==null?void 0:a.type)==="comments"?{...i.sideSheet,node:void 0}:void 0}}}function aO(e){let{to:t}=e;return Kp.createElement(mp,{to:{screen:{page:t,sideSheet:void 0}}})}function on(e,t,o={}){let{document:n,...r}=t,{space:i,revision:a}=t,{withSearch:s=!0,accept:l=["url","user","anchor","page","space","collection","file"],position:u}=o,d=[];return l.includes("url")&&d.push({key:"url",commands:m=>{let{text:f}=m.query;if(!f||!Mc(f))return[];let g=Pm(f);if(g){let[h]=Xp.read([g,r]),[y]=di.read([h,r]);if(h&&y)return[{key:f,title:y.text,icon:S.ArrowUpRight,trigger:()=>{e(h)}}]}return[{key:f,title:`Link to "${f}"`,icon:S.Link,trigger:()=>{e({kind:"url",url:f})}}]}}),l.includes("anchor")&&n&&d.push({key:"anchors",commands:()=>cO(n,{},e)}),l.includes("page")&&i&&a&&d.push(sO(i,a,e,{accept:l,withSearch:s,targetCurrentSpace:!0})),l.includes("space")&&d.push({key:"spaces",commands:m=>Gs.read({query:m.query.text,types:["spaces"]}).map(g=>{if(g.index!=="spaces")return null;let h=g.object.objectID,[y]=Uc([ia(h)]);return y?{key:h,icon:({size:C})=>Ky.createElement(vp,{space:g.object,size:C}),title:g.object.title,trigger:()=>{e({kind:"space",space:h})},descendant:l.includes("page")?()=>oe({search:s?"Select page\u2026":void 0,groups:[sO(h,y.revision,e,{accept:l,withSearch:s,targetCurrentSpace:h===i})]}):void 0}:null}).filter(ge)}),l.includes("collection")&&d.push({key:"collections",commands:m=>Gs.read({query:m.query.text,types:["collections"]}).map(g=>g.index!=="collections"?null:{key:g.object.objectID,title:g.object.title,trigger:()=>{e({kind:"collection",collection:g.object.objectID})}}).filter(ge)}),l.includes("user")&&d.push({key:"users",commands:m=>Gs.read({query:m.query.text,hitsPerPage:8,types:["users"]}).map(g=>g.index!=="users"?null:{key:g.object.objectID,icon:({size:h})=>Ky.createElement(va,{user:g.object,size:h}),title:g.object.displayName,subtitle:g.object.email,trigger:()=>{e({kind:"user",user:g.object.objectID})}}).filter(ge)}),oe({search:s?"Type url or reference\u2026":void 0,groups:d,position:u})}function iL(e,t,o,n){return oe({search:"Select page or heading\u2026",groups:[{key:"page",commands:[{key:"pick",title:`Link to "${t.title}"`,icon:S.Page,trigger:()=>{o({kind:"page",page:t.key,space:n.targetCurrentSpace?void 0:e})}}]},{key:"anchors",commands:()=>aL(e,t,{page:t.key,space:n.targetCurrentSpace?void 0:e},o)}]})}function sO(e,t,o,n){let{accept:r,withSearch:i,targetCurrentSpace:a}=n;return{key:"space",commands:()=>{let s=F1({space:e,revision:t});return s?Object.values(s.pages).filter(l=>l.kind!=="link").map(l=>({key:l.key,title:l.title,subtitle:Ct(s,l.key),icon:l.kind==="group"?S.AddPageGroup:S.Page,trigger:()=>{o({kind:"page",page:l.key,space:n.targetCurrentSpace?void 0:e})},descendant:r&&r.includes("anchor")&&l.kind==="sheet"?()=>({...iL(e,l,o,{targetCurrentSpace:a}),...i?{}:{search:void 0}}):void 0})):[]}}}function aL(e,t,o,n){if(!t.sheet)return[];let[r]=Ey([{spaceKey:e,sheetKey:t.sheet}]);if(!r)return[];let{document:i}=xm(r.body);return cO(i,o,n)}function cO(e,t,o){return km(e).filter(r=>!!r.anchor).map(r=>{let i=(()=>{switch(r.type){case De:return S.Heading1;case ze:return S.Heading2;case $e:return S.Heading3;case Go:return S.Swagger;case Pi:return S.BlockExpandable;case en:case bn:return S.Tabs;case null:return S.Hash;default:Ne(r.type)}})();return{key:r.key,icon:i,title:r.title,trigger:()=>{o({kind:"anchor",anchor:r.anchor,...t})}}})}c();var ul=k(O());c();var Us=k(O());z();function ll(e){let{file:t,size:o=T.ICON_M}=e,[,n]=I(cL);return Us.createElement(v,{style:[n.fileTileIcon,{width:o,height:o}]},t&&za(t)?Us.createElement(Eo,{style:n.fileTilePreview,source:{uri:li(t.downloadURL,{width:o})},accessibilityLabel:t.name}):Us.createElement(sL,{file:t,size:o*.65}))}function sL(e){let{file:t,...o}=e;return t?Bc(t)?Us.createElement(S.Swagger,{...o}):Us.createElement(S.Paperclip,{...o}):Us.createElement(S.Trashcan,{...o})}var cL=D.create({fileTileIcon:e=>({backgroundColor:e.colors.background.muted,color:e.colors.text.muted,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:T.RADIUS_M}),fileTilePreview:{width:"100%",height:"100%",resizeMode:"cover",borderRadius:T.RADIUS_M,objectFit:"contain"}});function jy(e,t={}){let{navigate:o,getNavigationURL:n}=_e(),[r,i]=ul.useState(""),a=e.map(d=>[d,t,r]),s=di.readMultiple(a),l=di.readCacheUpdatesKey(a),u=E1(s.map(d=>d[1]).flat());return ul.useEffect(()=>{i(u)},[u]),ul.useMemo(()=>s.map(([d,m,f],g)=>{let h=e[g];return d?{title:d.text,icon:lL(h,d),secondaryIcon:uL(h,d),secondaryIconDescription:dL(h,d),href:typeof d.target=="string"?d.target:n({screen:d.target}),open:()=>{typeof d.target=="string"?lp(d.target):o({screen:d.target})},resolution:d}:{title:f?"Access denied":"Broken link",icon:void 0,href:"",open:()=>{}}}),[l,n,o])}function Hn(e,t={}){return jy(e?[e]:[],t)[0]||{title:"Broken link",icon:null,href:"",open:()=>{}}}function lL(e,t){var o,n,r,i;if(e.kind==="url")return S.ExternalLink;if((o=t.extra)!=null&&o.user)return Qe(va,{user:t.extra.user});if((n=t.extra)!=null&&n.file)return Qe(ll,{file:t.extra.file});if((r=t.extra)!=null&&r.space)return Qe(vp,{space:t.extra.space});if((i=t.extra)!=null&&i.page&&t.extra.page.emoji)return Qe(Co,{code:t.extra.page.emoji})}function uL(e,t){switch(e.kind){case"user":return S.AtSign;case"anchor":return S.Hash;case"page":return S.Page;case"space":return S.Space;case"collection":return S.Collection;case"url":return S.ExternalLink}}function dL(e,t){switch(e.kind){case"user":return"User mention";case"anchor":return"Link to a page's anchor";case"page":return"Link to a page";case"space":return"Link to a space";case"collection":return"Link to a acollection";case"url":return"External URL"}}function Up(e){let{label:t,labelDescription:o,value:n,onChangeValue:r,placeholder:i,context:a={},accept:s,size:l="large",disabled:u=!1}=e,[d,m]=lt.useState(!1),[f,g]=lt.useState(!1),[h,y]=lt.useState(""),C=lt.useRef(null),x=lt.useRef(null),[,w]=I(pL),P=se(C);lt.useEffect(()=>{if(!h||!d||d&&!f){P.close();return}P.opened?P.typeQuery(h):P.open(Ha(on(E=>{r(E),g(!1),x.current&&x.current.blur()},a,{withSearch:!1,position:{width:"anchor"},accept:s}),h))},[h,d]),lt.useEffect(()=>{d&&x.current&&x.current.focus()},[d]);let R=E=>{y(E),g(!0)},_=()=>{h||(g(!1),r()),Mc(h)&&(r({kind:"url",url:h}),g(!1)),m(!1)};return lt.createElement(v,null,t?lt.createElement(v,{style:p.Margin.smallBottom},lt.createElement(Xc,null,t),o?lt.createElement(v,{style:p.Margin.xsmallTop},lt.createElement(op,null,o)):null):null,d||!n?lt.createElement(Ut,{testID:"contentRef.input",ref:x,wrapperRef:C,size:l,value:h,onChangeText:R,onBlur:_,onFocus:()=>m(!0),placeholder:i,disabled:u}):lt.createElement(Be,{testID:"contentRef.fakeInput",onPress:()=>m(!0),style:[w.input,l1[l],b.directionRow,b.alignCenter]},lt.createElement(lt.Suspense,{fallback:lt.createElement(Oe,{size:T.ICON_S})},lt.createElement(mL,{value:n,context:a,size:l}))))}function mL(e){let{value:t,context:o,size:n}=e,[,r]=I(L),i=Hn(t,o);return lt.createElement(v,{style:[b.flex1,b.directionRow,b.alignCenter]},i.icon?lt.createElement(v,{style:[p.Margin.smallRight]},lt.createElement(i.icon,{size:T.ICON_S,style:r.textMuted})):null,lt.createElement(v,{style:[b.flex1]},lt.createElement(wn,{style:[c1[n],r.text],testID:"contentRef.resolvedTitle"},i.title)))}var pL=D.create({input:e=>({backgroundColor:e.colors.background.main,borderWidth:1,borderColor:e.colors.border.main})});c();var Yp=k(O());var Au=Yp.forwardRef(function(t,o){let{contentRef:n,space:r,revision:i,style:a,kind:s="default",...l}=t,u=Hn(n,{space:i.space,revision:i.key});return Yp.createElement(zi,{ref:o,url:u.href,onPress:d=>{d.nativeEvent.metaKey||d.nativeEvent.ctrlKey||(d.preventDefault(),u.open())},kind:s,sameWebTab:!1,style:[ao.Body,ao.SemiBold,a],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:t.title,...l},t.title)});c();async function lO(e,t={}){let[o]=await di.readAsync([e,t]);return{uri:o==null?void 0:o.target}}function Zp(e,t={}){var r,i,a,s;let o=Hn(e,t);if(!o.href)return null;let n=(i=(r=o.resolution)==null?void 0:r.extra)==null?void 0:i.file;return{uri:o.href,width:(a=n==null?void 0:n.dimensions)==null?void 0:a.width,height:(s=n==null?void 0:n.dimensions)==null?void 0:s.height}}c();function Qa(e,t){return{href:e.href,onPress:o=>{if(t&&t(o),o){if(o.isDefaultPrevented()||o.nativeEvent.metaKey||o.nativeEvent.ctrlKey)return;o.preventDefault()}e.open()}}}c();var Uy=k(O());function uO(e){let{block:t,style:o,size:n=T.ICON_M}=e;return t.icon?Uy.createElement(Eo,{source:{uri:li(t.icon,{width:n})},style:[{width:n,height:n,borderRadius:n/8}]}):Uy.createElement(S.Integrations,{size:n,style:o})}c();c();var Kn=k(O());c();var yl=k(O());c();var lo=k(O());z();c();var $p=k(O());z();function dO(e){let{description:t,readOnly:o,blockProps:n}=e,{node:r}=n;return!t||o&&"fragment"in t&&mr(r.fragments.get(t.fragment))?null:$p.createElement(v,{style:p.Margin.mediumTop},"text"in t?$p.createElement(Kc,{markdown:t.text}):$p.createElement(kn,{fragment:t.fragment}))}c();var Bu=k(O());z();c();var Ys={get:H.primary.base,post:H.green.base,put:H.orange.base,options:H.violet.base,head:H.orange.base,delete:H.scarlet.base,patch:H.orange.base,connect:H.orange.base,trace:H.orange.base};var fL=K.createResponsiveComponent(An);function Qp(e){let{readOnly:t,method:o,setMethod:n}=e,[,r]=I(L),[,i]=I(gL),a=Bu.default.useRef(null),s=se(a),l=oe({groups:[{key:"methods",commands:Qc.map(m=>({key:m,title:m.toUpperCase(),trigger:()=>{n&&n(m)}}))}]}),u=()=>{s.open(l)},d=Bu.default.createElement(fL,{style:i.badge,backgroundColor:Ys[o]||H.orange.base,mobileStyle:[i.mobileMethodBadge],desktopStyle:[i.httpMethodBadge]},Bu.default.createElement(K.Text,{desktopStyle:[r.GroupTitle,r.Bold],mobileStyle:[r.MobileCaption,r.Bold],style:[r.textInsideColor,r.Bold,r.Uppercase]},o));return t?d:Bu.default.createElement(Be,{ref:a,onPress:u},d)}var gL=D.create({badge:{width:"fit-content"},httpMethodBadge:{borderRadius:T.XS,height:T.XS,paddingHorizontal:p.small,justifyContent:"center"},mobileMethodBadge:{borderRadius:T.XXS,height:T.XXS,paddingHorizontal:p.small,justifyContent:"center"}});var mO=K.createResponsiveComponent(B.View),hL=K.createResponsiveComponent(B.View.Child);function pO(e){let{readOnly:t,blockProps:o,baseUrl:n,summary:r,path:i,method:a,description:s,opened:l,setOpened:u}=e,{node:d,editor:m}=o,[,f]=I(L),g=lo.default.useRef(),h=lo.default.useRef(),y=lo.default.useRef();function C(){u(!l)}let x=B.useInteractiveComponent(l?S.ChevronDown:S.ChevronRight);return lo.default.createElement(v,{style:[b.directionColumn,b.flex1,p.Padding.smallBottom]},lo.default.createElement(K.View,{style:[b.alignCenter,p.Padding.medium,b.wrap],mobileStyle:b.flex1,desktopStyle:b.directionRow},lo.default.createElement(B.TouchableOpacity,{style:p.Padding.mediumRight,onPress:C},lo.default.createElement(x.Child,{size:T.ICON_M,style:f.textMuted,activeStyle:f.primary})),lo.default.createElement(v,{style:[p.Margin.mediumRight]},lo.default.createElement(Qp,{readOnly:t,method:a,setMethod:w=>{m.change(P=>{Se.setMethod(P,d.key,w)})}})),lo.default.createElement(mO,{style:[b.wrap],mobileStyle:[b.flex1]},lo.default.createElement(hr,{ref:g,component:ba,value:n,placeholder:"https://web.archive.org/web/20230609172921/https://api.gitbook.com/v1",onChangeText:w=>{m.change(P=>{Se.setBaseUrl(P,d.key,w)})},style:[f.Label,f.textMuted,Jp.breakWord],selectTextOnFocus:!0,readOnly:t,onSubmitEditing:()=>{h.current&&h.current.focus()}})),lo.default.createElement(mO,{style:[b.directionRow],mobileStyle:[Jp.mobileEndpoint,p.Padding.xsmallTop]},lo.default.createElement(hr,{ref:h,component:ba,value:i,placeholder:"/users",onChangeText:w=>{m.change(P=>{Se.setPath(P,d.key,w)})},style:[f.Label,f.text,f.Bold,Jp.breakWord],selectTextOnFocus:!0,readOnly:e.readOnly,onSubmitEditing:()=>{y.current&&y.current.focus()}}),lo.default.createElement(hL,{style:[p.Margin.xsmallLeft,Ce.hidden],hoverStyle:[Ce.visible],mobileStyle:{display:"none"}},lo.default.createElement(Um,{size:"xsmall",content:`${n}${i}`})))),lo.default.createElement(v,{style:Jp.headerBody},lo.default.createElement(v,null,lo.default.createElement(hr,{ref:y,component:ba,value:r,placeholder:"Operation summary",onChangeText:w=>{m.change(P=>{Se.setSummary(P,d.key,w)})},style:[f.Heading3,f.text],readOnly:t,displayMode:"block",onSubmitEditing:()=>{m.change(w=>{if(l&&s&&"fragment"in s){let P=d.fragments.get(s.fragment);P&&w.collapseToStartOf(P)}else St(w,d);w.focus()})}})),l?lo.default.createElement(dO,{readOnly:t,description:s,blockProps:o}):null))}var Jp=X.create({breakWord:{wordWrap:"anywhere"},mobileEndpoint:{paddingLeft:p.medium+T.ICON_M,flexBasis:"100%",flexGrow:1},headerBody:{paddingLeft:p.medium+T.ICON_M+p.medium}});c();var Zu=k(O());z();c();var zu=k(O());z();function fO(e){let{blockProps:t}=e,{editor:o,node:n}=t,r=zu.useRef(null),i=se(r),a=oe({groups:[{key:"parameters",commands:Yy.map(({location:l,title:u,description:d})=>({key:l,title:u,subtitle:d,trigger:()=>{o.change(m=>{Se.addParameter(m,n.key,l)})}}))}]}),s=()=>{i.open(a)};return zu.createElement(v,null,zu.createElement(A,{ref:r,title:"Add Parameter",icon:i.opened?S.X:S.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}var Yy=[{location:"path",title:"Path",description:"Params in the URL path"},{location:"query",title:"Query",description:"Params in the query string"},{location:"header",title:"Header",description:"Params sent in headers"},{location:"cookie",title:"Cookie",description:"Params set via cookie"},{location:"body",title:"Body",description:"Params passed in body"}];c();var Yu=k(O());z();c();var uo=k(O());z();c();var Xo=k(O());c();var gO=k(O(),1),ef=(0,gO.createContext)({dragDropManager:void 0});c();var n_=k(LE(),1);c();c();_E();function Hr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var hO=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Zy=function(){return Math.random().toString(36).substring(7).split("").join(".")},yO={INIT:"@@redux/INIT"+Zy(),REPLACE:"@@redux/REPLACE"+Zy(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Zy()}};function yL(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function $y(e,t,o){var n;if(typeof t=="function"&&typeof o=="function"||typeof o=="function"&&typeof arguments[3]=="function")throw new Error(Hr(0));if(typeof t=="function"&&typeof o>"u"&&(o=t,t=void 0),typeof o<"u"){if(typeof o!="function")throw new Error(Hr(1));return o($y)(e,t)}if(typeof e!="function")throw new Error(Hr(2));var r=e,i=t,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function d(){if(l)throw new Error(Hr(3));return i}function m(y){if(typeof y!="function")throw new Error(Hr(4));if(l)throw new Error(Hr(5));var C=!0;return u(),s.push(y),function(){if(C){if(l)throw new Error(Hr(6));C=!1,u();var w=s.indexOf(y);s.splice(w,1),a=null}}}function f(y){if(!yL(y))throw new Error(Hr(7));if(typeof y.type>"u")throw new Error(Hr(8));if(l)throw new Error(Hr(9));try{l=!0,i=r(i,y)}finally{l=!1}for(var C=a=s,x=0;x<C.length;x++){var w=C[x];w()}return y}function g(y){if(typeof y!="function")throw new Error(Hr(10));r=y,f({type:yO.REPLACE})}function h(){var y,C=m;return y={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Hr(11));function P(){w.next&&w.next(d())}P();var R=C(P);return{unsubscribe:R}}},y[hO]=function(){return this},y}return f({type:yO.INIT}),n={dispatch:f,subscribe:m,getState:d,replaceReducer:g},n[hO]=h,n}c();c();c();c();function re(e,t,...o){if(vL()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(t.replace(/%s/g,function(){return o[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function vL(){return typeof process<"u"&&!0}c();function vO(e,t,o){return t.split(".").reduce((n,r)=>n&&n[r]?n[r]:o||null,e)}function bO(e,t){return e.filter(o=>o!==t)}function tf(e){return typeof e=="object"}function CO(e,t){let o=new Map,n=i=>{o.set(i,o.has(i)?o.get(i)+1:1)};e.forEach(n),t.forEach(n);let r=[];return o.forEach((i,a)=>{i===1&&r.push(a)}),r}function SO(e,t){return e.filter(o=>t.indexOf(o)>-1)}c();c();var dl="dnd-core/INIT_COORDS",Ja="dnd-core/BEGIN_DRAG",ml="dnd-core/PUBLISH_DRAG_SOURCE",es="dnd-core/HOVER",ts="dnd-core/DROP",os="dnd-core/END_DRAG";function Qy(e,t){return{type:dl,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var bL={type:dl,payload:{clientOffset:null,sourceClientOffset:null}};function wO(e){return function(o=[],n={publishSource:!0}){let{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,s=e.getMonitor(),l=e.getRegistry();e.dispatch(Qy(i)),CL(o,s,l);let u=kL(o,s);if(u==null){e.dispatch(bL);return}let d=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");SL(a),d=a(u)}e.dispatch(Qy(i,d));let f=l.getSource(u).beginDrag(s,u);if(f==null)return;wL(f),l.pinSource(u);let g=l.getSourceType(u);return{type:Ja,payload:{itemType:g,item:f,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!r}}}}function CL(e,t,o){re(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){re(o.getSource(n),"Expected sourceIds to be registered.")})}function SL(e){re(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function wL(e){re(tf(e),"Item must be an object.")}function kL(e,t){let o=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){o=e[n];break}return o}c();function xL(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function OL(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){xL(e,r,o[r])})}return e}function kO(e){return function(o={}){let n=e.getMonitor(),r=e.getRegistry();_L(n),PL(n).forEach((a,s)=>{let l=IL(a,s,r,n),u={type:ts,payload:{dropResult:OL({},o,l)}};e.dispatch(u)})}}function _L(e){re(e.isDragging(),"Cannot call drop while not dragging."),re(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function IL(e,t,o,n){let r=o.getTarget(e),i=r?r.drop(n,e):void 0;return RL(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function RL(e){re(typeof e>"u"||tf(e),"Drop result must either be an object or undefined.")}function PL(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}c();function xO(e){return function(){let o=e.getMonitor(),n=e.getRegistry();ML(o);let r=o.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(o,r),n.unpinSource()),{type:os}}}function ML(e){re(e.isDragging(),"Cannot call endDrag while not dragging.")}c();c();function Wu(e,t){return t===null?e===null:Array.isArray(e)?e.some(o=>o===t):e===t}function OO(e){return function(o,{clientOffset:n}={}){TL(o);let r=o.slice(0),i=e.getMonitor(),a=e.getRegistry(),s=i.getItemType();return LL(r,a,s),EL(r,i,a),NL(r,i,a),{type:es,payload:{targetIds:r,clientOffset:n||null}}}}function TL(e){re(Array.isArray(e),"Expected targetIds to be an array.")}function EL(e,t,o){re(t.isDragging(),"Cannot call hover while not dragging."),re(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){let r=e[n];re(e.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");let i=o.getTarget(r);re(i,"Expected targetIds to be registered.")}}function LL(e,t,o){for(let n=e.length-1;n>=0;n--){let r=e[n],i=t.getTargetType(r);Wu(i,o)||e.splice(n,1)}}function NL(e,t,o){e.forEach(function(n){o.getTarget(n).hover(t,n)})}c();function _O(e){return function(){if(e.getMonitor().isDragging())return{type:ml}}}function IO(e){return{beginDrag:wO(e),publishDragSource:_O(e),hover:OO(e),drop:kO(e),endDrag:xO(e)}}var of=class{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let t=this,{dispatch:o}=this.store;function n(i){return(...a)=>{let s=i.apply(t,a);typeof s<"u"&&o(s)}}let r=IO(this);return Object.keys(r).reduce((i,a)=>{let s=r[a];return i[a]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,o){this.isSetUp=!1,this.handleRefCountChange=()=>{let n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=o,t.subscribe(this.handleRefCountChange)}};c();c();function DL(e,t){return{x:e.x+t.x,y:e.y+t.y}}function RO(e,t){return{x:e.x-t.x,y:e.y-t.y}}function PO(e){let{clientOffset:t,initialClientOffset:o,initialSourceClientOffset:n}=e;return!t||!o||!n?null:RO(DL(t,n),o)}function MO(e){let{clientOffset:t,initialClientOffset:o}=e;return!t||!o?null:RO(t,o)}c();var pl=[],nf=[];pl.__IS_NONE__=!0;nf.__IS_ALL__=!0;function TO(e,t){return e===pl?!1:e===nf||typeof t>"u"?!0:SO(t,e).length>0}var rf=class{subscribeToStateChange(t,o={}){let{handlerIds:n}=o;re(typeof t=="function","listener must be a function."),re(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId,i=()=>{let a=this.store.getState(),s=a.stateId;try{s===r||s===r+1&&!TO(a.dirtyHandlerIds,n)||t()}finally{r=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){re(typeof t=="function","listener must be a function.");let o=this.store.getState().dragOffset,n=()=>{let r=this.store.getState().dragOffset;r!==o&&(o=r,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;let o=this.registry.getSource(t);return re(o,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:o.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;let o=this.registry.getTarget(t);if(re(o,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;let n=this.registry.getTargetType(t),r=this.getItemType();return Wu(n,r)&&o.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;let o=this.registry.getSource(t,!0);if(re(o,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;let n=this.registry.getSourceType(t),r=this.getItemType();return n!==r?!1:o.isDragging(this,t)}isOverTarget(t,o={shallow:!1}){if(!t)return!1;let{shallow:n}=o;if(!this.isDragging())return!1;let r=this.registry.getTargetType(t),i=this.getItemType();if(i&&!Wu(r,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let s=a.indexOf(t);return n?s===a.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return PO(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return MO(this.store.getState().dragOffset)}constructor(t,o){this.store=t,this.registry=o}};c();c();c();c();c();var EO=typeof window<"u"?window:self,LO=EO.MutationObserver||EO.WebKitMutationObserver;function Jy(e){return function(){let o=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(o),clearInterval(n),e()}}}function AL(e){let t=1,o=new LO(e),n=document.createTextNode("");return o.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var NO=typeof LO=="function"?AL:Jy;var af=class{enqueueTask(t){let{queue:o,requestFlush:n}=this;o.length||(n(),this.flushing=!0),o[o.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let o=this.index;if(this.index++,t[o].call(),this.index>this.capacity){for(let n=0,r=t.length-this.index;n<r;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=NO(this.flush),this.requestErrorThrow=Jy(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};c();c();var sf=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,o){this.onError=t,this.release=o,this.task=null}};var cf=class{create(t){let o=this.freeTasks,n=o.length?o.pop():new sf(this.onError,r=>o[o.length]=r);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var DO=new af,BL=new cf(DO.registerPendingError);function AO(e){DO.enqueueTask(BL.create(e))}c();c();var Vu="dnd-core/ADD_SOURCE",qu="dnd-core/ADD_TARGET",Fu="dnd-core/REMOVE_SOURCE",Zs="dnd-core/REMOVE_TARGET";function BO(e){return{type:Vu,payload:{sourceId:e}}}function zO(e){return{type:qu,payload:{targetId:e}}}function WO(e){return{type:Fu,payload:{sourceId:e}}}function VO(e){return{type:Zs,payload:{targetId:e}}}c();function qO(e){re(typeof e.canDrag=="function","Expected canDrag to be a function."),re(typeof e.beginDrag=="function","Expected beginDrag to be a function."),re(typeof e.endDrag=="function","Expected endDrag to be a function.")}function FO(e){re(typeof e.canDrop=="function","Expected canDrop to be a function."),re(typeof e.hover=="function","Expected hover to be a function."),re(typeof e.drop=="function","Expected beginDrag to be a function.")}function lf(e,t){if(t&&Array.isArray(e)){e.forEach(o=>lf(o,!1));return}re(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}c();var Cr;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Cr||(Cr={}));c();var zL=0;function GO(){return zL++}function WL(e){let t=GO().toString();switch(e){case Cr.SOURCE:return`S${t}`;case Cr.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function HO(e){switch(e[0]){case"S":return Cr.SOURCE;case"T":return Cr.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function XO(e,t){let o=e.entries(),n=!1;do{let{done:r,value:[,i]}=o.next();if(i===t)return!0;n=!!r}while(!n);return!1}var uf=class{addSource(t,o){lf(t),qO(o);let n=this.addHandler(Cr.SOURCE,t,o);return this.store.dispatch(BO(n)),n}addTarget(t,o){lf(t,!0),FO(o);let n=this.addHandler(Cr.TARGET,t,o);return this.store.dispatch(zO(n)),n}containsHandler(t){return XO(this.dragSources,t)||XO(this.dropTargets,t)}getSource(t,o=!1){return re(this.isSourceId(t),"Expected a valid source ID."),o&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return re(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return re(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return re(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return HO(t)===Cr.SOURCE}isTargetId(t){return HO(t)===Cr.TARGET}removeSource(t){re(this.getSource(t),"Expected an existing source."),this.store.dispatch(WO(t)),AO(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){re(this.getTarget(t),"Expected an existing target."),this.store.dispatch(VO(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){let o=this.getSource(t);re(o,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=o}unpinSource(){re(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,o,n){let r=WL(t);return this.types.set(r,o),t===Cr.SOURCE?this.dragSources.set(r,n):t===Cr.TARGET&&this.dropTargets.set(r,n),r}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}};c();c();c();var VL=(e,t)=>e===t;function KO(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function jO(e,t,o=VL){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!o(e[n],t[n]))return!1;return!0}function UO(e=pl,t){switch(t.type){case es:break;case Vu:case qu:case Zs:case Fu:return pl;case Ja:case ml:case os:case ts:default:return nf}let{targetIds:o=[],prevTargetIds:n=[]}=t.payload,r=CO(o,n);if(!(r.length>0||!jO(o,n)))return pl;let a=n[n.length-1],s=o[o.length-1];return a!==s&&(a&&r.push(a),s&&r.push(s)),r}c();function qL(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function FL(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){qL(e,r,o[r])})}return e}var YO={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function ZO(e=YO,t){let{payload:o}=t;switch(t.type){case dl:case Ja:return{initialSourceClientOffset:o.sourceClientOffset,initialClientOffset:o.clientOffset,clientOffset:o.clientOffset};case es:return KO(e.clientOffset,o.clientOffset)?e:FL({},e,{clientOffset:o.clientOffset});case os:case ts:return YO;default:return e}}c();function GL(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function fl(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){GL(e,r,o[r])})}return e}var HL={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function $O(e=HL,t){let{payload:o}=t;switch(t.type){case Ja:return fl({},e,{itemType:o.itemType,item:o.item,sourceId:o.sourceId,isSourcePublic:o.isSourcePublic,dropResult:null,didDrop:!1});case ml:return fl({},e,{isSourcePublic:!0});case es:return fl({},e,{targetIds:o.targetIds});case Zs:return e.targetIds.indexOf(o.targetId)===-1?e:fl({},e,{targetIds:bO(e.targetIds,o.targetId)});case ts:return fl({},e,{dropResult:o.dropResult,didDrop:!0,targetIds:[]});case os:return fl({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}c();function QO(e=0,t){switch(t.type){case Vu:case qu:return e+1;case Fu:case Zs:return e-1;default:return e}}c();function JO(e=0){return e+1}function XL(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function KL(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){XL(e,r,o[r])})}return e}function e_(e={},t){return{dirtyHandlerIds:UO(e.dirtyHandlerIds,{type:t.type,payload:KL({},t.payload,{prevTargetIds:vO(e,"dragOperation.targetIds",[])})}),dragOffset:ZO(e.dragOffset,t),refCount:QO(e.refCount,t),dragOperation:$O(e.dragOperation,t),stateId:JO(e.stateId)}}function t_(e,t=void 0,o={},n=!1){let r=jL(n),i=new rf(r,new uf(r)),a=new of(r,i),s=e(a,t,o);return a.receiveBackend(s),a}function jL(e){let t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return $y(e_,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var mf=k(O(),1);function UL(e,t){if(e==null)return{};var o=YL(e,t),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function YL(e,t){if(e==null)return{};var o={},n=Object.keys(e),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}var o_=0,df=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),r_=(0,mf.memo)(function(t){var{children:o}=t,n=UL(t,["children"]);let[r,i]=ZL(n);return(0,mf.useEffect)(()=>{if(i){let a=i_();return++o_,()=>{--o_===0&&(a[df]=null)}}},[]),(0,n_.jsx)(ef.Provider,{value:r,children:o})});function ZL(e){if("manager"in e)return[{dragDropManager:e.manager},!1];let t=$L(e.backend,e.context,e.options,e.debugMode),o=!e.context;return[t,o]}function $L(e,t=i_(),o,n){let r=t;return r[df]||(r[df]={dragDropManager:t_(e,t,o,n)}),r[df]}function i_(){return window}c();c();c();c();var a_=k(TE(),1),ff=k(O(),1);c();var pf=k(O(),1),Sr=typeof window<"u"?pf.useLayoutEffect:pf.useEffect;function s_(e,t,o){let[n,r]=(0,ff.useState)(()=>t(e)),i=(0,ff.useCallback)(()=>{let a=t(e);(0,a_.default)(n,a)||(r(a),o&&o())},[n,e,o]);return Sr(i),[n,i]}function c_(e,t,o){let[n,r]=s_(e,t,o);return Sr(function(){let a=e.getHandlerId();if(a!=null)return e.subscribeToStateChange(r,{handlerIds:[a]})},[e,r]),n}function gf(e,t,o){return c_(t,e||(()=>({})),()=>o.reconnect())}c();var l_=k(O(),1);function hf(e,t){let o=[...t||[]];return t==null&&typeof e!="function"&&o.push(e),(0,l_.useMemo)(()=>typeof e=="function"?e():e,o)}c();var ev=k(O(),1);function u_(e){return(0,ev.useMemo)(()=>e.hooks.dragSource(),[e])}function d_(e){return(0,ev.useMemo)(()=>e.hooks.dragPreview(),[e])}c();var h_=k(O(),1);c();var tv=!1,ov=!1,yf=class{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){re(!tv,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return tv=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{tv=!1}}isDragging(){if(!this.sourceId)return!1;re(!ov,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ov=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{ov=!1}}subscribeToStateChange(t,o){return this.internalMonitor.subscribeToStateChange(t,o)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,o){return this.internalMonitor.isOverTarget(t,o)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}};c();var nv=!1,vf=class{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,o){return this.internalMonitor.subscribeToStateChange(t,o)}canDrop(){if(!this.targetId)return!1;re(!nv,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return nv=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{nv=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}};c();function m_(e,t,o){let n=o.getRegistry(),r=n.addTarget(e,t);return[r,()=>n.removeTarget(r)]}function p_(e,t,o){let n=o.getRegistry(),r=n.addSource(e,t);return[r,()=>n.removeSource(r)]}c();c();function Gu(e,t,o,n){let r=o?o.call(n,e,t):void 0;if(r!==void 0)return!!r;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;let i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;let s=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<i.length;l++){let u=i[l];if(!s(u))return!1;let d=e[u],m=t[u];if(r=o?o.call(n,d,m,u):void 0,r===!1||r===void 0&&d!==m)return!1}return!0}c();function Hu(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}c();var Xu=k(O(),1);function QL(e){if(typeof e.type=="string")return;let t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function JL(e){return(t=null,o=null)=>{if(!(0,Xu.isValidElement)(t)){let i=t;return e(i,o),i}let n=t;return QL(n),e9(n,o?i=>e(i,o):e)}}function bf(e){let t={};return Object.keys(e).forEach(o=>{let n=e[o];if(o.endsWith("Ref"))t[o]=e[o];else{let r=JL(n);t[o]=()=>r}}),t}function f_(e,t){typeof e=="function"?e(t):e.current=t}function e9(e,t){let o=e.ref;return re(typeof o!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),o?(0,Xu.cloneElement)(e,{ref:n=>{f_(o,n),f_(t,n)}}):(0,Xu.cloneElement)(e,{ref:t})}var Cf=class{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){let t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){let t=this.dragSource,o=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return o&&this.disconnectDragSource(),this.handlerId?t?(o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),o):(this.lastConnectedDragSource=t,o):o}reconnectDragPreview(t=!1){let o=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!o){this.lastConnectedDragPreview=o;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=o,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,o,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Gu(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Gu(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=bf({dragSource:(o,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Hu(o)?this.dragSourceRef=o:this.dragSourceNode=o,this.reconnectDragSource()},dragPreview:(o,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Hu(o)?this.dragPreviewRef=o:this.dragPreviewNode=o,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}};c();var Sf=class{get connectTarget(){return this.dropTarget}reconnect(){let t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();let o=this.dropTarget;if(this.handlerId){if(!o){this.lastConnectedDropTarget=o;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=o,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,o,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Gu(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=bf({dropTarget:(o,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Hu(o)?this.dropTargetRef=o:this.dropTargetNode=o,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}};c();var g_=k(O(),1);function Xr(){let{dragDropManager:e}=(0,g_.useContext)(ef);return re(e!=null,"Expected drag drop context"),e}function y_(e,t){let o=Xr(),n=(0,h_.useMemo)(()=>new Cf(o.getBackend()),[o]);return Sr(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),Sr(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}c();var v_=k(O(),1);function b_(){let e=Xr();return(0,v_.useMemo)(()=>new yf(e),[e])}c();c();var kf=k(O(),1);c();var wf=class{beginDrag(){let t=this.spec,o=this.monitor,n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(o):n={},n!=null?n:null}canDrag(){let t=this.spec,o=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(o):!0}isDragging(t,o){let n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):o===t.getSourceId()}endDrag(){let t=this.spec,o=this.monitor,n=this.connector,{end:r}=t;r&&r(o.getItem(),o),n.reconnect()}constructor(t,o,n){this.spec=t,this.monitor=o,this.connector=n}};function C_(e,t,o){let n=(0,kf.useMemo)(()=>new wf(e,t,o),[t,o]);return(0,kf.useEffect)(()=>{n.spec=e},[e]),n}c();var S_=k(O(),1);function w_(e){return(0,S_.useMemo)(()=>{let t=e.type;return re(t!=null,"spec.type must be defined"),t},[e])}function k_(e,t,o){let n=Xr(),r=C_(e,t,o),i=w_(e);Sr(function(){if(i!=null){let[s,l]=p_(i,r,n);return t.receiveHandlerId(s),o.receiveHandlerId(s),l}},[n,t,o,r,i])}function gl(e,t){let o=hf(e,t);re(!o.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=b_(),r=y_(o.options,o.previewOptions);return k_(o,n,r),[gf(o.collect,n,r),u_(r),d_(r)]}c();c();var x_=k(O(),1);function O_(e){return(0,x_.useMemo)(()=>e.hooks.dropTarget(),[e])}c();var __=k(O(),1);function I_(e){let t=Xr(),o=(0,__.useMemo)(()=>new Sf(t.getBackend()),[t]);return Sr(()=>(o.dropTargetOptions=e||null,o.reconnect(),()=>o.disconnectDropTarget()),[e]),o}c();var R_=k(O(),1);function P_(){let e=Xr();return(0,R_.useMemo)(()=>new vf(e),[e])}c();c();var M_=k(O(),1);function T_(e){let{accept:t}=e;return(0,M_.useMemo)(()=>(re(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}c();var Of=k(O(),1);c();var xf=class{canDrop(){let t=this.spec,o=this.monitor;return t.canDrop?t.canDrop(o.getItem(),o):!0}hover(){let t=this.spec,o=this.monitor;t.hover&&t.hover(o.getItem(),o)}drop(){let t=this.spec,o=this.monitor;if(t.drop)return t.drop(o.getItem(),o)}constructor(t,o){this.spec=t,this.monitor=o}};function E_(e,t){let o=(0,Of.useMemo)(()=>new xf(e,t),[t]);return(0,Of.useEffect)(()=>{o.spec=e},[e]),o}function L_(e,t,o){let n=Xr(),r=E_(e,t),i=T_(e);Sr(function(){let[s,l]=m_(i,r,n);return t.receiveHandlerId(s),o.receiveHandlerId(s),l},[n,t,r,o,i.map(a=>a.toString()).join("|")])}function wr(e,t){let o=hf(e,t),n=P_(),r=I_(o.options);return L_(o,n,r),[gf(o.collect,n,r),O_(r)]}z();c();var q_=k(O());c();c();c();c();function rv(e){let t=null;return()=>(t==null&&(t=e()),t)}function N_(e,t){return e.filter(o=>o!==t)}function D_(e,t){let o=new Set,n=i=>o.add(i);e.forEach(n),t.forEach(n);let r=[];return o.forEach(i=>r.push(i)),r}var _f=class{enter(t){let o=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(t));return this.entered=D_(this.entered.filter(n),[t]),o===0&&this.entered.length>0}leave(t){let o=this.entered.length;return this.entered=N_(this.entered.filter(this.isNodeInDocument),t),o>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}};c();c();var If=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){let o={};Object.keys(this.config.exposeProperties).forEach(n=>{let r=this.config.exposeProperties[n];r!=null&&(o[n]={value:r(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,o)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,o){return o===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}};c();var Ku={};zC(Ku,{FILE:()=>iv,HTML:()=>cv,TEXT:()=>sv,URL:()=>av});c();var iv="__NATIVE_FILE__",av="__NATIVE_URL__",sv="__NATIVE_TEXT__",cv="__NATIVE_HTML__";c();function Rf(e,t,o){let n=t.reduce((r,i)=>r||e.getData(i),"");return n!=null?n:o}var Pf={[iv]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[cv]:{exposeProperties:{html:(e,t)=>Rf(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[av]:{exposeProperties:{urls:(e,t)=>Rf(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[sv]:{exposeProperties:{text:(e,t)=>Rf(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function A_(e,t){let o=Pf[e];if(!o)throw new Error(`native type ${e} has no configuration`);let n=new If(o);return n.loadDataTransfer(t),n}function Mf(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(Pf).filter(o=>{let n=Pf[o];return n!=null&&n.matchesTypes?n.matchesTypes.some(r=>t.indexOf(r)>-1):!1})[0]||null}c();c();var B_=rv(()=>/firefox/i.test(navigator.userAgent)),lv=rv(()=>!!window.safari);c();var ju=class{interpolate(t){let{xs:o,ys:n,c1s:r,c2s:i,c3s:a}=this,s=o.length-1;if(t===o[s])return n[s];let l=0,u=a.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));let g=o[d];if(g<t)l=d+1;else if(g>t)u=d-1;else return n[d]}s=Math.max(0,u);let m=t-o[s],f=m*m;return n[s]+r[s]*m+i[s]*f+a[s]*m*f}constructor(t,o){let{length:n}=t,r=[];for(let h=0;h<n;h++)r.push(h);r.sort((h,y)=>t[h]<t[y]?-1:1);let i=[],a=[],s=[],l,u;for(let h=0;h<n-1;h++)l=t[h+1]-t[h],u=o[h+1]-o[h],a.push(l),i.push(u),s.push(u/l);let d=[s[0]];for(let h=0;h<a.length-1;h++){let y=s[h],C=s[h+1];if(y*C<=0)d.push(0);else{l=a[h];let x=a[h+1],w=l+x;d.push(3*w/((w+x)/y+(w+l)/C))}}d.push(s[s.length-1]);let m=[],f=[],g;for(let h=0;h<d.length-1;h++){g=s[h];let y=d[h],C=1/a[h],x=y+d[h+1]-g-g;m.push((g-y-x)*C),f.push(x*C*C)}this.xs=t,this.ys=o,this.c1s=d,this.c2s=m,this.c3s=f}};var t9=1;function uv(e){let t=e.nodeType===t9?e:e.parentElement;if(!t)return null;let{top:o,left:n}=t.getBoundingClientRect();return{x:n,y:o}}function Uu(e){return{x:e.clientX,y:e.clientY}}function o9(e){var t;return e.nodeName==="IMG"&&(B_()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function n9(e,t,o,n){let r=e?t.width:o,i=e?t.height:n;return lv()&&e&&(i/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:i}}function z_(e,t,o,n,r){let i=o9(t),s=uv(i?e:t),l={x:o.x-s.x,y:o.y-s.y},{offsetWidth:u,offsetHeight:d}=e,{anchorX:m,anchorY:f}=n,{dragPreviewWidth:g,dragPreviewHeight:h}=n9(i,t,u,d),y=()=>{let E=new ju([0,.5,1],[l.y,l.y/d*h,l.y+h-d]).interpolate(f);return lv()&&i&&(E+=(window.devicePixelRatio-1)*h),E},C=()=>new ju([0,.5,1],[l.x,l.x/u*g,l.x+g-u]).interpolate(m),{offsetX:x,offsetY:w}=r,P=x===0||x,R=w===0||w;return{x:P?x:C(),y:R?w:y()}}c();var Tf=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,o){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=o}};function r9(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function W_(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){r9(e,r,o[r])})}return e}var Ef=class{profile(){var t,o;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((o=this.dragOverTargetIds)===null||o===void 0?void 0:o.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){let t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var o;(o=this.window)===null||o===void 0||o.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,o,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,o),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,o,n){this.sourceNodes.set(t,o),this.sourceNodeOptions.set(t,n);let r=a=>this.handleDragStart(a,t),i=a=>this.handleSelectStart(a);return o.setAttribute("draggable","true"),o.addEventListener("dragstart",r),o.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),o.removeEventListener("dragstart",r),o.removeEventListener("selectstart",i),o.setAttribute("draggable","false")}}connectDropTarget(t,o){let n=a=>this.handleDragEnter(a,t),r=a=>this.handleDragOver(a,t),i=a=>this.handleDrop(a,t);return o.addEventListener("dragenter",n),o.addEventListener("dragover",r),o.addEventListener("drop",i),()=>{o.removeEventListener("dragenter",n),o.removeEventListener("dragover",r),o.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let t=this.monitor.getSourceId(),o=this.sourceNodeOptions.get(t);return W_({dropEffect:this.altKeyPressed?"copy":"move"},o||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let t=this.monitor.getSourceId(),o=this.sourcePreviewNodeOptions.get(t);return W_({anchorX:.5,anchorY:.5,captureDraggingState:!1},o||{})}isDraggingNativeItem(){let t=this.monitor.getItemType();return Object.keys(Ku).some(o=>Ku[o]===t)}beginDragNativeItem(t,o){this.clearCurrentDragSourceNode(),this.currentNativeSource=A_(t,o),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;let o=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},o)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,o){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(o))}handleDragEnter(t,o){this.dragEnterTargetIds.unshift(o)}handleDragOver(t,o){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(o)}handleDrop(t,o){this.dropTargetIds.unshift(o)}constructor(t,o,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{let i=this.sourceNodes.get(r);return i&&uv(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{let r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;let{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;let a=Uu(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});let{dataTransfer:s}=r,l=Mf(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){let d=this.monitor.getSourceId(),m=this.sourceNodes.get(d),f=this.sourcePreviewNodes.get(d)||m;if(f){let{anchorX:g,anchorY:h,offsetX:y,offsetY:C}=this.getCurrentSourcePreviewNodeOptions(),P=z_(m,f,a,{anchorX:g,anchorY:h},{offsetX:y,offsetY:C});s.setDragImage(f,P.x,P.y)}}try{s==null||s.setData("application/json",{})}catch(d){}this.setCurrentDragSourceNode(r.target);let{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(s&&!s.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;let{dataTransfer:s}=r,l=Mf(s);l&&this.beginDragNativeItem(l,s)},this.handleTopDragEnter=r=>{let{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Uu(r)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{let{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=Uu(r),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;r.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}else Mf(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{let{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Uu(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{let i=r.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(r.preventDefault(),i.dragDrop()))},this.options=new Tf(o,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new _f(this.isNodeInDocument)}};c();var Lf;function dv(){return Lf||(Lf=new Image,Lf.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Lf}var V_=function(t,o,n){return new Ef(t,o,n)};function F_(e){return q_.createElement(r_,{backend:V_},e.children)}c();function G_(e){switch(e.type){case"space":return{kind:"space",space:e.id};case"collection":return{kind:"collection",collection:e.id};case"page":return{kind:"page",space:e.space,page:e.id};case"block":case"tab":case"swagger-response":case"swagger-parameter":throw new Error(`Invalid DND item "${e.type}"`);default:Ne(e)}}c();var H_=k(O());function Xi(e,t){let[o,n,r]=gl(e,t);return(0,H_.useEffect)(()=>{r(dv(),{captureDraggingState:!0})},[r]),[o,n,r]}var X_=B.createInteractiveHandle("swagger-row");function Nf(e){var V,F;let{dragItem:t,columns:o,isLast:n,children:r,palette:i,onDropBefore:a,onDropAfter:s,onInsertBefore:l,onInsertAfter:u,readOnly:d,opened:m,setOpened:f,node:g,ancestors:h}=e,[,y]=I(i9),C=hl({node:g,ancestors:h}),[{dragging:x},w]=Xi({type:t.type,item:t,canDrag:()=>!e.readOnly,collect:Y=>({dragging:Y.isDragging()})}),[P,R]=wr({accept:t.type,drop:(Y,$)=>{$.didDrop()||a(Y)},canDrop:Y=>t.id!==Y.id&&t.blockKey===Y.blockKey,collect:Y=>({highlighted:Y.isOver()&&Y.canDrop()})}),[_,E]=wr({accept:t.type,drop:(Y,$)=>{$.didDrop()||s(Y)},canDrop:Y=>t.id!==Y.id&&t.blockKey===Y.blockKey,collect:Y=>({highlighted:Y.isOver()&&Y.canDrop()})}),M=Xo.useRef(null),W=Ni(M,w),G=se(M);return Xo.createElement(v,null,Xo.createElement(v,null,Xo.createElement(B.View,{handle:X_,style:[b.directionRow,b.alignCenter,p.Padding.largeRight,x?Ce.translucent:Ce.visible]},d?null:Xo.createElement(K.View,{style:[b.justifyContentCenter,(V=C.controlsButton)==null?void 0:V.style],mobileStyle:"hidden"},Xo.createElement(B.View.Child,{descendantOf:X_,activeStyle:Ce.visible,inactiveStyle:G.opened?{}:Ce.hidden},Xo.createElement(A,{ref:W,icon:S.GrabberVertical,size:(F=C.controlsButton)==null?void 0:F.size,rounded:!0,kind:"secondary",title:`Click for options.
Drag to move.`,onPress:()=>{G.open(i())}}))),Xo.createElement(K.View,{style:[b.flex1,b.directionRow],mobileStyle:[b.wrap,b.alignStart,p.Padding.smallVertical],desktopStyle:[b.alignStart,p.Padding.mediumVertical]},o.map((Y,$)=>Xo.createElement(K.View,{key:$,style:[p.Padding.smallRight],desktopStyle:[Y.desktopSize],mobileStyle:[y.columnResetWidth,Y.mobileSize]},Y.content))),r&&f?Xo.createElement(v,{style:[p.Margin.mediumLeft]},Xo.createElement(A,{icon:m?S.ChevronDown:S.ChevronRight,onPress:()=>f(!m)})):null),m?Xo.createElement(v,null,r):null,n?null:Xo.createElement(v,{style:y.borderLine})),d?null:Xo.createElement(bu,{ref:R,position:"top",dropHovered:P.highlighted,button:{kind:"secondary",icon:S.Plus,onPress:l}}),n&&!d?Xo.createElement(bu,{ref:E,position:"bottom",dropHovered:_.highlighted,button:{kind:"secondary",icon:S.Plus,onPress:u}}):null)}var i9=D.create({borderLine:e=>({height:1,backgroundColor:e.colors.border.muted}),controlButtonWrapper:{position:"absolute",top:0,bottom:0,left:-T.BUTTON_S/2,width:T.BUTTON_S},columnResetWidth:{width:"auto"}});c();var $s=k(O());z();function Df(e){let{title:t,button:o,children:n}=e,[,r]=I(L);return $s.createElement(v,{style:p.Margin.largeTop},$s.createElement(v,{style:[b.directionRow,b.alignCenter,p.Padding.mediumBottom]},$s.createElement(v,{style:b.flex1},$s.createElement(N,{style:[r.Heading3,r.text]},t)),o?$s.createElement(v,{style:p.Padding.smallHorizontal},o):null),$s.createElement(v,null,n))}function Af(e){let{readOnly:t,blockProps:o,parameter:n,isLast:r,beforeOrderIndex:i,afterOrderIndex:a}=e,{node:s,editor:l}=o,[,u]=I(L),d=uo.useRef(),m={id:n.key,type:"swagger-parameter",blockKey:s.key,previewLabel:"Move parameter"},{name:f="",type:g="",required:h,description:y,properties:C={},items:x}=n.value,[,w]=I(c9),[P,R]=uo.useState(!1),_=Object.keys(C).length,E=_>0||!!x,M=s.fragments.get(n.key),W=$=>{l.change(te=>{Se.setParameterName(te,s.key,n.key,$)})},G=$=>{l.change(te=>{Se.setParameterType(te,s.key,n.key,$)})},V=$=>{l.change(te=>{Se.setParameterRequired(te,s.key,n.key,$)})},F=()=>{l.change($=>{Se.removeParameter($,s.key,n.key)})},Y=g==="object"&&_>0?Object.entries(C).map(([$,te],fe)=>uo.createElement(Af,{key:$,...e,isLast:fe===_-1,parameter:{key:$,value:te}})):g==="array"&&x?uo.createElement(Af,{...e,isLast:!0,parameter:{key:"items",value:x}}):null;return uo.createElement(Nf,{...E?{opened:P,setOpened:R}:{},...o,readOnly:e.readOnly,dragItem:m,isLast:r,palette:()=>oe({groups:[{key:"edit-parameter",commands:[{key:"delete-parameter",title:"Delete",icon:S.Trashcan,trigger:F}]}]}),columns:[{content:t?uo.createElement(N,{selectable:!0,style:[u.Code,u.textMid]},f,h?uo.createElement(N,{style:[u.danger]},"*"):null):uo.createElement(ba,{placeholder:"id",onChangeText:W,value:f,style:[u.Code,u.textMid],selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{d.current&&d.current.focus()}}),desktopSize:w.parameterColumnNameDesktop,mobileSize:w.parameterColumnNameMobile},{content:uo.createElement(ba,{ref:d,placeholder:"String",onChangeText:G,value:g,style:[u.Label,u.textMid],readOnly:t,selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{l.change($=>{M&&$.collapseToStartOf(M).focus()})}}),desktopSize:w.parameterColumnTypeDesktop,mobileSize:w.parameterColumnTypeMobile},{content:uo.createElement(uo.Fragment,null,y?uo.createElement(N,{style:[u.Label,u.textMid]},y):M?uo.createElement(Gn.Provider,{value:"swaggerParameter"},uo.createElement(kn,{fragment:n.key})):null),desktopSize:b.flex1,mobileSize:!y&&(!M||M.isEmpty)?w.parameterDescriptionEmptyColumnMobile:null},t?null:{content:uo.createElement(y1,{value:h?"required":"optional",items:[{label:"Required",value:"required"},{label:"Optional",value:"optional"}],onValueChange:$=>V($==="required")})}].filter(ge),onInsertBefore:()=>{l.change($=>{Se.addParameter($,s.key,n.value.in,{before:i,after:n.value.orderIndex})})},onDropBefore:$=>{l.change(te=>{Se.moveParameter(te,s.key,$.id,n.value.in,{before:i,after:n.value.orderIndex})})},onInsertAfter:()=>{l.change($=>{Se.addParameter($,s.key,n.value.in,{before:n.value.orderIndex,after:a})})},onDropAfter:$=>{l.change(te=>{Se.moveParameter(te,s.key,$.id,n.value.in,{after:a,before:n.value.orderIndex})})}},Y&&uo.createElement(v,{style:[w.borderTop]},Y))}var c9=D.create({parameterColumnNameDesktop:{width:200},parameterColumnNameMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%",marginBottom:p.small},parameterColumnTypeDesktop:{width:90},parameterColumnTypeMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%"},parameterDescriptionEmptyColumnMobile:{display:"none"},borderTop:e=>({borderTopWidth:1,borderTopColor:e.colors.border.muted})});function K_(e){let{parametersGroup:t,location:o,isLast:n,...r}=e,[,i]=I(L),a=Yy.find(({location:s})=>s===o);return Yu.createElement(v,{style:p.Margin.smallTop},Yu.createElement(v,null,Yu.createElement(N,{style:[i.Label,i.Bold,i.text]},a.title)),t.map((s,l)=>{let u=t[l-1],d=t[l+1],m=l===t.length-1;return Yu.createElement(Af,{key:s.key,...r,parameter:s,isLast:m,beforeOrderIndex:u==null?void 0:u.value.orderIndex,afterOrderIndex:d==null?void 0:d.value.orderIndex})}))}function j_(e){let{parameters:t,readOnly:o,blockProps:n}=e,r=l9(t),i=Object.keys(r).length,a=Se.SORTED_PARAMETERS_LOCATIONS.filter(s=>!!r[s]);return Zu.createElement(Df,{title:"Parameters",button:e.readOnly?null:Zu.createElement(fO,{blockProps:n})},a.length>0?a.map((s,l)=>{let u=r[s];return Zu.createElement(K_,{key:s,readOnly:o,blockProps:n,location:s,parametersGroup:u,isLast:l===i-1})}):Zu.createElement(N,null,"No parameters"))}function l9(e){return e.reduce((t,o)=>{let n=t[o.value.in]||[];return t[o.value.in]=[...n,o],t},{})}c();var $u=k(O());z();c();var Bf=k($_());var f9={2:H.green.base,3:H.primary.base,4:H.orange.base,5:H.scarlet.base},g9=Object.entries(Bf.message).map(([e,t])=>({code:e,message:t})),h9=new zc(g9,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"code",weight:.6},{name:"message",weight:.4}]});function pv(e){return f9[Math.floor(e/100)]||H.lightModeGreyScale.dark}function y9(e){return h9.search(e).map(t=>t.item)}function fv({code:e,message:t}){let o=t||Bf.message[e];return o?`${e}: ${o}`:`${e}`}function J_(e){let[t,o]=e.split(": ");return{code:Number(t),message:o}}var Q_=[200,201,204,400,401,403,404,500].map(e=>{let t=String(e),o=Bf.message[t];return{code:t,message:o}});function zf(e,t){let o={key:"responses",commands:r=>(r.query.text?y9(r.query.text):Q_).slice(0,Q_.length).map(a=>{let s=fv(a);return{key:a.code,title:s,icon:Qe(S.Dot,{style:{color:pv(parseInt(a.code,10))}}),trigger:()=>{e(s)}}})},n=t?[{key:"edit-response",commands:[{key:"delete-response",title:"Delete response",icon:S.Trashcan,trigger:()=>{t()}}]},o]:[o];return oe({search:"Type status code\u2026",groups:n})}function eI(e){let{blockProps:t}=e,{node:o,editor:n}=t,r=$u.useRef(null),i=se(r),a=zf(l=>{n.change(u=>{Se.addResponse(u,o.key,l)})}),s=()=>{i.open(a)};return $u.createElement(v,null,$u.createElement(A,{ref:r,title:"Add Response",icon:i.opened?S.X:S.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}c();var Ko=k(O());z();c();var ka=k(O());z();c();var Qs=k(O());function tI(e){let{examples:t}=e,o=Object.keys(t),n=Qs.useRef(null),r=se(n),[i,a]=Qs.useState(o[0]);return i?Qs.createElement(n1,{code:t[i],syntax:v9(i),showToolbar:r.opened,toolbar:o.length>1?Qs.createElement(A,{kind:"secondary",size:"small",ref:n,rightIcon:S.ChevronDown,onPress:()=>{r.open(oe({groups:[{key:"media-types",commands:o.map(s=>({key:s,title:s,trigger:()=>{a(s)}}))}]}))}},i):null}):null}function v9(e){return e.includes("json")?"js":e.includes("xml")?"xml":"js"}c();var ke=k(O());z();function oI(e){let[,t]=I(aI);return ke.createElement(_i,{style:[t.container],horizontal:!0},ke.createElement(gv,{...e,isRoot:!0}))}function gv(e){let{schema:t}=e;if(t.type){let o=t.description||t.title;switch(t.type){case"object":return ke.createElement(nI,{name:"",properties:t.properties,requiredProperties:t.required,description:o,...e});case"array":return ke.createElement(rI,{name:"",items:t.items,description:o,...e});default:return ke.createElement(iI,{name:"",type:t.type,description:o,...e})}}else return t.anyOf?ke.createElement(Wf,{type:"anyOf",options:t.anyOf}):t.oneOf?ke.createElement(Wf,{type:"oneOf",options:t.oneOf}):t.allOf?ke.createElement(Wf,{type:"allOf",options:t.allOf}):null}function nI(e){let{name:t,isRequired:o=!1,isRoot:n=!1,properties:r={},requiredProperties:i=[],description:a=""}=e,[s,l]=ke.useState(!1);return ke.createElement(qf,{name:t,type:"object",expandable:{expanded:s,setExpanded:l},required:o,isRoot:n,description:a},s?Object.entries(r).map(([u,d])=>{switch(d.type){case"object":let m=d.anyOf||d.oneOf||d.allOf;return m?ke.createElement(Wf,{key:u,name:u,description:d.description||d.title,type:d.anyOf?"anyOf":d.oneOff?"oneOf":"allOf",options:m}):ke.createElement(nI,{key:u,name:u,properties:d.properties,requiredProperties:d.required,isRequired:i.includes(u),description:d.description});case"array":return ke.createElement(rI,{key:u,name:u,items:d.items,isRequired:i.includes(u),description:d.description});default:return ke.createElement(iI,{key:u,name:u,type:d.type,isRequired:i.includes(u),description:d.description})}}):null)}function rI(e){let{name:t,isRequired:o=!1,isRoot:n=!1,items:r={},description:i=""}=e,[a,s]=ke.useState(!1);return ke.createElement(qf,{name:t,type:`array[${r.type||""}]`,expandable:{expanded:a,setExpanded:s},description:i,required:o,isRoot:n},a?ke.createElement(gv,{schema:r}):null)}var Vf=T.ICON_S;function Wf(e){let{name:t,type:o,options:n=[],isRoot:r=!1,description:i="",isRequired:a=!1}=e,[s,l]=ke.useState(!1);return ke.createElement(qf,{type:t?o:"",name:t||o,expandable:{expanded:s,setExpanded:l},description:i,isRoot:r,required:a,specialKeyword:!0},s?n.map((u,d)=>ke.createElement(gv,{key:d,schema:u})):null)}function iI(e){let{name:t,type:o,isRequired:n=!1,isRoot:r=!1,description:i=""}=e;return ke.createElement(qf,{name:t,type:o,isRoot:r,required:n,description:i})}function qf(e){let{name:t,type:o,description:n,required:r,isRoot:i,expandable:a,specialKeyword:s,children:l}=e,[,u]=I(L),[,d]=I(aI),m=[u.Body,u.Bold,u.text],f=[p.Margin.xsmallLeft];return ke.createElement(v,{style:[b.directionColumn,i?null:p.Margin.mediumTop]},ke.createElement(v,{style:[b.directionRow,b.alignCenter]},ke.createElement(Be,{onPress:a?()=>a.setExpanded(g=>!g):void 0},a?a.expanded?ke.createElement(S.ChevronDown,{size:Vf,style:[u.textMuted]}):ke.createElement(S.ChevronRight,{size:Vf,style:[u.textMuted]}):ke.createElement(v,{style:[d.placeholderIconWidth,d.placeHolderIconHeight]})),ke.createElement(v,{style:[b.directionRow,f]},t?ke.createElement(v,{style:[p.Margin.mediumRight]},s?ke.createElement(N,{style:m},t):ke.createElement(N,{selectable:!0,style:m},t,r?ke.createElement(N,{style:[u.danger,d.textFontCode]},"*"):null)):null,o?ke.createElement(N,{style:[u.Body,u.primary,d.textFontCode]},o):null)),ke.createElement(v,{style:[b.directionRow]},ke.createElement(v,{style:d.placeholderIconWidth},a!=null&&a.expanded?ke.createElement(v,{style:d.verticalLine}):null),ke.createElement(v,{style:[b.directionColumn,f,p.Padding.mediumRight,d.descriptionWidth]},n?ke.createElement(v,{style:[p.Margin.xsmallTop]},ke.createElement(Kc,{markdown:n,kind:"secondary"})):null,l)))}var aI=D.create({container:e=>({backgroundColor:e.colors.background.muted,padding:p.medium,borderRadius:e.radiuses.medium}),textFontCode:{fontFamily:zm},placeholderIconWidth:{width:Vf},placeHolderIconHeight:{height:Vf},verticalLine:e=>({width:1,height:"100%",backgroundColor:e.colors.border.main,marginHorizontal:"auto"}),descriptionWidth:{maxWidth:600}});function Ff(e){let{examples:t,schema:o}=e,[n,r]=ka.useState("example");return ka.createElement(v,null,ka.createElement(Xa,null,ka.createElement(Xa.Tab,{active:n==="example",onPress:()=>r("example")},"Example"),o?ka.createElement(Xa.Tab,{active:n==="schema",onPress:()=>r("schema")},"Schema"):null),n==="example"?ka.createElement(tI,{examples:t||{}}):null,n==="schema"&&o?ka.createElement(oI,{schema:o}):null)}function cI(e){let{response:t,isLast:o,beforeOrderIndex:n,afterOrderIndex:r,blockProps:i}=e,{node:a,editor:s}=i,[,l]=I(L),[u,d]=Ko.useState(!1),m={id:t.key,type:"swagger-response",blockKey:a.key,previewLabel:"Move response"},{status:f,description:g}=t.value,h="Response description",{code:y}=J_(f),C=a.fragments.get(t.key),x=C?mr(C):!1,w=t.value.examples||{},P=t.value.schema,R=!e.readOnly||C&&!x||Object.keys(w).length>0||typeof P<"u",_=E=>{s.change(M=>{Se.setResponseDescription(M,a.key,t.key,E)})};return Ko.createElement(Nf,{...i,readOnly:e.readOnly,dragItem:m,isLast:o,opened:u,setOpened:d,palette:()=>zf(E=>{s.change(M=>{Se.setResponseStatus(M,a.key,t.key,E)})},()=>{s.change(E=>{Se.removeResponse(E,a.key,t.key)})}),columns:[{content:Ko.createElement(v,{style:[b.directionRow,b.alignCenter]},Ko.createElement(v,{style:[p.Margin.smallRight]},Ko.createElement(S.Dot,{style:{color:pv(y)},size:T.ICON_M})),Ko.createElement(v,{style:b.flex1},Ko.createElement(N,{style:[l.Label,l.Bold,l.text]},f))),desktopSize:sI.responseColumnStatusDesktop,mobileSize:sI.responseColumnStatusMobile},{content:Ko.createElement(hr,{component:ba,placeholder:e.readOnly?void 0:h,onChangeText:_,value:g,style:[l.Label,l.textMid],readOnly:e.readOnly,displayMode:"block",onSubmitEditing:()=>{s.change(E=>{u&&C?E.collapseToStartOf(C):St(E,a),E.focus()})}}),desktopSize:b.flex1}],onDropAfter:E=>{s.change(M=>{Se.moveResponse(M,a.key,E.id,{before:t.value.orderIndex,after:r})})},onDropBefore:E=>{s.change(M=>{Se.moveResponse(M,a.key,E.id,{before:n,after:t.value.orderIndex})})},onInsertBefore:()=>{s.change(E=>{Se.addResponse(E,a.key,parseInt(t.value.status,10)-1,{before:n,after:t.value.orderIndex})})},onInsertAfter:()=>{s.change(E=>{Se.addResponse(E,a.key,parseInt(t.value.status,10)+1,{before:t.value.orderIndex,after:r})})}},R?Ko.createElement(v,{style:[b.flex1,p.Margin.mediumVertical]},C?Ko.createElement(Ko.Fragment,null,Ko.createElement(Gn.Provider,{value:"swaggerResponse"},Ko.createElement(kn,{fragment:t.key}))):Ko.createElement(Ff,{examples:w,schema:P})):null)}var sI=X.create({responseColumnStatusDesktop:{width:290},responseColumnStatusMobile:{flexBasis:"100%",flexGrow:1,flexShrink:0}});c();var Qu=k(O());z();function lI(e){let{readOnly:t,responses:o,blockProps:n}=e;return Qu.createElement(Df,{title:"Responses",button:t?null:Qu.createElement(eI,{blockProps:n})},Qu.createElement(v,{style:o.length>0&&p.Padding.mediumBottom},o.map((r,i)=>{let a=o[i-1],s=o[i+1];return Qu.createElement(cI,{key:r.key,...e,response:r,isLast:i===o.length-1,beforeOrderIndex:a==null?void 0:a.value.orderIndex,afterOrderIndex:s==null?void 0:s.value.orderIndex})})))}c();var mo=k(O());z();c();c();c();var uI=Qm("429837f8b383ed2c4f85d02026ce73e42335b6233c1dc303af2b0f50fedfe256",()=>import("https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/chunks/parseSwaggerFile.lazy-VGZ3GVL4.min.js"));var dI=uI;var Js=Br({getValue:async e=>{let t=(await dI.load()).default;return await t(e)},toJS:e=>C9(e),fromJS:e=>S9(e)});function Ju(e,t){if(!e)return null;t||(t={path:Object.keys(e.paths)[0],method:"get"},t.method=Object.keys(e.paths[t.path])[0]);let o=e.paths[t.path],n=o==null?void 0:o[t.method];if(!n)return null;let r=Object.keys(e.paths).indexOf(t.path),i=Qc.indexOf(t.method);return i=i>-1?i:Qc.length,{operation:n,path:t.path,httpMethod:t.method,index:r*Qc.length+i}}function C9(e){return JSON.parse(JSON.stringify(e,ek()))}function S9(e){return JSON.parse(JSON.stringify(e),tk())}function ed(e){let{onClose:t,data:o,multi:n,buttonText:r,onSelect:i,onRequestChangeSource:a}=e;if(!("ref"in o))throw new Error("SwaggerConfigurationOperation used with a manual API block, only OpenAPI is supported");let{contentReferenceContext:s}=mo.default.useContext(ne),[l]=di.read([o.ref,s]);if(typeof(l==null?void 0:l.target)!="string")throw new Error("SwaggerConfigurationOperation only handles refs with target as string");if(!Zc(s.space&&s.revision?{space:s.space,revision:s.revision}:null))throw new Error("No revision present for OpenAPI configuration modal");let{result:d}=Js.readSafe(l.target),m=(d==null?void 0:d.paths)||{},f=Object.keys(m).reduce((w,P)=>{let R=m[P];return w.concat(Object.keys(R).map(_=>({path:P,method:_})))},[]),g=Ju(d,o.method&&o.path?{method:o.method,path:o.path}:void 0),[h,y]=mo.default.useState(g?{[g.index]:{path:g.path,method:g.httpMethod}}:{}),C=()=>{let w=Object.keys(h).map(Number).sort((P,R)=>P-R);i(w.map(P=>h[P])),t()},x=(w,P,R)=>{if(!n){y({[P]:w});return}if(R&&y({...h,[P]:w}),!R){let _={...h};delete _[P],y(_)}};return mo.default.createElement(kt,{onClose:t,title:"Choose API operation",footer:mo.default.createElement(v,{style:[b.directionRow,b.justifySpaceBetween]},mo.default.createElement(v,{style:[b.directionRow,b.justifyContentStart]},mo.default.createElement(A,{size:"large",kind:"secondary",onPress:()=>{a()}},"Change API source")),mo.default.createElement(v,{style:[b.directionRow,b.flex1,b.justifyContentEnd]},mo.default.createElement(A,{size:"large",kind:"primary",onPress:()=>{C()}},typeof r=="string"?r:r(Object.keys(h).length))))},mo.default.createElement(Ud,{data:f,renderItem:({item:w})=>{let P=Ju(d,w);if(!P)return null;let R=!!h[P.index];return mo.default.createElement(w9,{key:P.index,index:P.index,item:w,operation:P.operation,multi:n,selected:R,onSelect:x})}}))}function w9(e){let{item:t,selected:o,onSelect:n,operation:r,index:i,multi:a}=e,[,s]=I(L);return mo.default.createElement(ha,{style:p.Padding.smallHorizontal,onPress:()=>n(t,i,a?!o:!0),layout:"wide",title:mo.default.createElement(v,{style:[b.directionRow,b.flex1,b.alignCenter]},mo.default.createElement(v,{style:[{minWidth:T.L},p.Margin.smallRight]},mo.default.createElement(Qp,{readOnly:!0,method:t.method})),mo.default.createElement(v,{style:[b.flex1]},mo.default.createElement(N,{style:[s.Code,s.text,k9.apiPath]},t.path),mo.default.createElement(N,{style:[s.Caption,s.textMuted]},r==null?void 0:r.summary))),buttons:[a?mo.default.createElement(Bi,{value:o,onValueChange:l=>n(t,i,l)}):mo.default.createElement(ip,{value:o,onValueChange:()=>n(t,i,!0)})]})}var k9=X.create({apiPath:{fontSize:Wm.xsmall,wordWrap:"anywhere"}});function mI(e,t){let o=Ga(),[n,r]=yl.useState(null),i=xt(),[a,s]=yl.useState(t),l=Kr(o,e),u=m=>{let g=o.value.document.assertBlock(m).data.toFrozenObject();return[{key:"swagger",commands:[{key:"pickSource",title:"Choose OpenAPI source\u2026",icon:S.Paperclip,trigger:()=>{i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([h])=>{h&&(s({ref:h}),r("swagger"))})}},a&&"ref"in a?{key:"pickMethod",title:"Choose API operation",icon:S.Swagger,trigger:()=>{r("swagger")}}:null,{key:"defaultExpanded",icon:S.ChevronsVertical,type:2,enabled:!!g.expanded,title:"Expanded",trigger:()=>(o.change(h=>{g.expanded?h.setDataByKey(m,["expanded"],!1):h.setDataByKey(m,["expanded"],!0)}),nt(o,m,u(m)))}].filter(ge)},...l?[l]:[]]};return[nt(o,e,u(e)),yl.createElement(mt,null,n==="swagger"?yl.createElement(ed,{data:a,buttonText:"Update Block",onRequestChangeSource:()=>{r(null),i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([m])=>{m&&s({ref:m}),r("swagger")})},onSelect:([m])=>{o.change(f=>{f.setNodeByKey(e,{data:{...a,method:m==null?void 0:m.method,path:m==null?void 0:m.path}})})},onClose:()=>r(null)}):null)]}c();var Hf=k(O());c();var kr=k(O());z();function Gf(e){let{opened:t,setOpened:o,readOnly:n,parameters:r,header:i,requestBody:a,responses:s,blockProps:l,description:u}=e,[,d]=I(L);return kr.default.createElement(kr.default.Fragment,null,kr.default.createElement(pO,{blockProps:l,readOnly:n,opened:t,setOpened:o,description:u.description,...i}),kr.default.createElement(v,{style:x9.operationBody},t?kr.default.createElement(kr.default.Fragment,null,kr.default.createElement(j_,{blockProps:l,readOnly:n,...r}),a?kr.default.createElement(v,{style:p.Margin.largeTop},kr.default.createElement(v,null,kr.default.createElement(N,{style:[d.Label,d.Bold,d.text]},"Body")),kr.default.createElement(Ff,{examples:a.examples,schema:a.schema})):null,kr.default.createElement(lI,{blockProps:l,readOnly:n,...s})):null))}var x9=X.create({operationBody:{padding:p.medium,paddingLeft:p.medium+T.ICON_M+p.medium,paddingTop:0}});function pI(e){let{blockProps:t,data:o,opened:n,setOpened:r}=e,{editor:i}=t;if("ref"in o)throw new Error("trying to render a swagger block that is refering to a swagger file");let{readOnly:a}=i,{baseUrl:s,method:l,path:u,summary:d}=o,{parameters:m={},responses:f={}}=o,g=Hf.default.useMemo(()=>Se.defaultParameterSortedKeys(m).map(C=>({key:C,value:m[C]})),[m]),h=Hf.default.useMemo(()=>Se.defaultResponseSortedKeys(f).map(C=>({key:C,value:f[C]})),[f]);return Hf.default.createElement(Gf,{blockProps:t,readOnly:a,opened:n,setOpened:r,header:{baseUrl:s,method:l,summary:d,path:u},parameters:{parameters:g},description:{description:{fragment:"description"}},responses:{responses:h}})}c();var ns=k(O());function fI(e){var C;let{blockProps:t,data:o,opened:n,setOpened:r,readOnly:i}=e;if(!("ref"in o))throw new Error("trying to render a swagger block that is not refering to a swagger file");let s=po(o.ref).href,{result:l,error:u}=Js.readSafe(s),d=Ju(l,o.path&&o.method?{path:o.path,method:o.method}:void 0),{operation:m,path:f,httpMethod:g}=d||{operation:{parameters:[],responses:[],summary:"",description:""},httpMethod:"",path:""},h=ns.default.useMemo(()=>m.parameters.sort(({in:x},{in:w})=>Se.SORTED_PARAMETERS_LOCATIONS.indexOf(x)<Se.SORTED_PARAMETERS_LOCATIONS.indexOf(w)?-1:1).reduce((x,w,P)=>{let R=x[P-1],_=Yh(R?{before:R.value.orderIndex}:{});return x.push({key:Ms(),value:{...w,orderIndex:_}}),x},[]),[m.parameters]),y=ns.default.useMemo(()=>m.responses.sort(({status:x},{status:w})=>x<w?-1:1).reduce((x,w,P)=>{let R=x[P-1],_=Yh(R?{before:R.value.orderIndex}:{});return x.push({key:Ms(),value:{...w,status:fv({code:w.status}),orderIndex:_}}),x},[]),[m.responses]);if(u)return i?ns.default.createElement(td,null):ns.default.createElement(qn,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:Ii(u)});if(!d){if(i)return ns.default.createElement(td,null);let x=o.method&&o.path?`${(C=o.method)==null?void 0:C.toUpperCase()} "${o.path}"`:"";return ns.default.createElement(qn,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:`Could not find the operation ${x} in the OpenAPI file.`})}return ns.default.createElement(Gf,{blockProps:t,readOnly:!0,opened:n,setOpened:r,header:{baseUrl:(l==null?void 0:l.baseUrl)||"",method:g,summary:m.summary||"",path:f},parameters:{parameters:h},requestBody:m.requestBody,responses:{responses:y},description:{description:m.description?{text:m.description}:void 0}})}function gI(e){let{node:t,isFocused:o,editor:n}=e,r=t.data.toFrozenObject(),[i,a]=mI(t.key,r),[s,l]=I(O9),{sections:u}=Kn.default.useContext(Gr),{current:d}=Hm(),m=u.get(t.key),f=Ye(),[g,h]=Kn.default.useState(f||o||!!r.expanded);Kn.default.useEffect(()=>{d&&r.expanded&&h(!0)},[r.expanded]);let y=Kn.default.createElement(An,{style:[l.blockSwagger,g&&l.blockSwaggerOpened],backgroundColor:s.colors.background.main,nativeID:m},Kn.default.createElement(Kn.default.Suspense,{fallback:Kn.default.createElement(bo,{size:"small"})},"ref"in r?Kn.default.createElement(fI,{readOnly:n==null?void 0:n.readOnly,blockProps:e,data:r,opened:g,setOpened:h}):Kn.default.createElement(pI,{blockProps:e,data:r,opened:g,setOpened:h})));return Kn.default.createElement(Kn.default.Fragment,null,a,Kn.default.createElement(ve,{palette:i,...e},!("ref"in r)&&g?y:Kn.default.createElement(Vt,{...e},y)))}var O9=D.create({blockSwagger:e=>({borderRadius:e.radiuses.large,borderColor:e.colors.border.mid,borderWidth:1}),blockSwaggerOpened:e=>({...e.shadows.spread})});c();var hI=k(O());var _9=bt({key:"lastSwaggerReference",default:{}});function yI(e,t){let[o,n]=qo(_9),r=Zc(t.space&&t.revision?{space:t.space,revision:t.revision}:null),i=r?o[r.space]:null,a=hI.default.useCallback(u=>{r&&n({...o,[r.space]:u})},[r==null?void 0:r.space,n]);if((i==null?void 0:i.kind)==="url")return[i,a];if((i==null?void 0:i.kind)==="file"&&r!=null&&r.files[i.file])return[i,a];let s=Se.getProbableRef(e.value.document);if(s)return[s,a];let l=Object.values((r==null?void 0:r.files)||{}).filter(u=>Bc(u)).sort((u,d)=>{var g,h;let m=(g=cu(u.edits))==null?void 0:g.updatedAt.toMillis();return(((h=cu(d.edits))==null?void 0:h.updatedAt.toMillis())||0)-(m||0)});return[l.length?{kind:"file",file:l[0].key}:null,a]}function Xf(e,t,o,n="replace"){let[r,i]=nn.useState(null),a=xt(),s=Yc(),{contentReferenceContext:l,getIntegrationsBlocks:u,logAnalyticsEvent:d}=nn.useContext(ne),m=ft(l),f=Ei(),[g,h]=yI(e,l),y=nn.useCallback(()=>{i(null)},[]),C=nn.useCallback((R,_="end")=>{y(),vl(e,o.key,R,n,_)},[y,e,o.key,n]),x=nn.useCallback((R,_="end")=>{y();let E;R.forEach((M,W)=>{vl(e,E||o.key,M,W===0?n:"after",_),E=M.key})},[y,e,t.key,o.key,n]),w=nn.useCallback(R=>{let{blockType:_,...E}=R;d({type:"edit_page_document_insert_block",from:"palette",blockType:_,...E})},[d]),P=nn.useMemo(()=>{let R=(_,E=()=>!0)=>Object.entries(_).map(([M,W])=>E(M)?W.map(G=>({key:`${M}.${G.id}`,title:G.title,icon:Qe(uO,{block:G}),trigger:()=>{G.urlUnfurl&&G.urlUnfurl.length>0?i("embed"):(C(Ac.createIntegrationBlock(M,G.id)),w({blockType:Mi,integration:M,integrationBlock:G.id}))}})):[]).flat();return oe({search:"Insert block\u2026",groups:[{key:"texts",commands:[Me(t,me)?{key:"paragraph",title:"Paragraph",icon:S.Paragraph,trigger:()=>{C(Xt.create({type:me})),w({blockType:me})}}:null].filter(ge)},{key:"headings",commands:[Me(t,De)?{key:"heading_1",title:"Heading 1",icon:S.Heading1,keywords:["h1","Title 1","Header 1"],trigger:()=>{C(Xt.create({type:De})),w({blockType:De})}}:null,Me(t,ze)?{key:"heading_2",title:"Heading 2",icon:S.Heading2,keywords:["h2","Title 2","Header 2"],trigger:()=>{C(Xt.create({type:ze})),w({blockType:ze})}}:null,Me(t,$e)?{key:"heading_3",title:"Heading 3",keywords:["h3","Title 3","Header 3"],icon:S.Heading3,trigger:()=>{C(Xt.create({type:$e})),w({blockType:$e})}}:null].filter(ge)},{key:"lists",commands:[Me(t,oo)?{key:"list_ul",title:"Unordered list",keywords:["ul","Bullet list","Dot list"],icon:S.ListUnordered,trigger:()=>{C(ot.createList(oo)),w({blockType:oo})}}:null,Me(t,Et)?{key:"list_ol",title:"Ordered list",keywords:["ol","Numbered List"],icon:S.ListOrdered,trigger:()=>{C(ot.createList(Et)),w({blockType:Et})}}:null,Me(t,no)?{key:"list_tasks",title:"Task list",keywords:["Checkbox","Checklist","Tick","Todo list"],icon:S.ListTasks,trigger:()=>{C(ot.createList(no)),w({blockType:no})}}:null].filter(ge)},{key:"panels",commands:[Me(t,Mo)?{key:"hint",title:"Hint",keywords:["Info","Alert","Callout"],icon:S.InfoCircle,trigger:()=>{C(AS.create()),w({blockType:Mo})}}:null,Me(t,zt)?{key:"quote",title:"Quote",keywords:["Blockquote","Citation"],icon:S.Quote,trigger:()=>{C(BS.create()),w({blockType:zt})}}:null,Me(t,lr)?{key:"code",title:"Code Block",keywords:["Syntax","Snippet"],icon:S.Code,trigger:()=>{C(Kt.createCodeBlock("// Some code")),w({blockType:lr})}}:null].filter(ge)},{key:"others",commands:[Me(t,sa)?{key:"files",title:"Insert files\u2026",keywords:["Assets","Upload"],icon:S.Files,trigger:()=>{a.prompt({title:"Select files"}).then(_=>{let E=_.map(M=>M.kind==="file"?Sm.createFileBlock(M):null).filter(ge);x(E,"end"),w({blockType:sa,files:E.length})})}}:null,Me(t,ur)?{key:"images",title:"Insert images\u2026",keywords:["Photo","Picture","JPEG","jpg","png","GIF"],icon:S.Image,trigger:()=>{a.prompt({title:"Select images",accept:"images",acceptURL:!0}).then(_=>{C(Xt.create({type:ur,isVoid:!0,nodes:_.map(E=>vo.createImageBlock(E))})),w({blockType:ur,images:_.length})})}}:null,Me(t,Dn)?{key:"embed",title:"Embed a url\u2026",keywords:["music","video","audio","design","iframe"],icon:S.ExternalLink,trigger:()=>{i("embed")}}:null,Me(t,Ar)?{key:"table",title:"Table",keywords:["Spreadsheet"],icon:S.Table,trigger:()=>{C(Z.createTable()),w({blockType:Ar,tableView:"grid"})}}:null,Me(t,Ar)?{key:"table-cards",title:"Cards",keywords:["Grid"],icon:S.Cards,trigger:()=>{C(Z.createTable({view:"cards"})),w({blockType:Ar,tableView:"cards"})}}:null,Me(t,bn)?{key:"tabs",title:"Tabs",icon:S.Tabs,trigger:()=>{C(ii.createTabs(),"start"),w({blockType:bn})}}:null,Me(t,Pi)?{key:"expandable",title:"Expandable",keywords:["collapsible","toggle"],icon:S.BlockExpandable,trigger:()=>{C(ma.createExpandableBlock(),(_,E)=>{_.collapseToStartOf(ma.getTitleFragment(E)).focus()}),w({blockType:Pi})}}:null,Me(t,aa)?{key:"drawing",title:"Drawing",keywords:["sketch","draw","excalidraw"],icon:S.EditDrawing,trigger:()=>{C(NS.createDrawingBlock()),w({blockType:aa})}}:null,Me(t,Ts)?{key:"math",title:"Math & TeX",keywords:["Formula"],icon:S.MathTeX,trigger:()=>{C(Ds.createMathBlock()),w({blockType:Ts})}}:null,Me(t,Go)?{key:"api-method",title:"API Method",icon:S.Swagger,keywords:["api"],trigger:()=>{C(Se.createBlock()),w({blockType:Go})}}:null,Me(t,Go)?{key:"swagger",title:"OpenAPI",icon:S.Swagger,keywords:["api","swagger"],trigger:()=>{g?i({ref:g}):a.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([_])=>{_&&(h(_),i({ref:_}))})}}:null,Me(t,la)?{key:"content-ref",title:"Page Link",icon:S.PageLink,keywords:["references"],trigger:()=>on(_=>{C(Ns.createContentRefBlock(_)),w({blockType:la,contentRefKind:_.kind})},m.current,{accept:["page","space","collection"]})}:null].filter(ge)},Me(t,Mi)?{key:"integrations",commands:()=>{let _=u();return R(_)}}:null,Me(t,Mi)?{key:"integrations",commands:()=>{let _=u(),[E]=Uc([uw()]),M=Nm(E);return R(M,W=>!_[W])}}:null,Me(t,Dn)?{key:"embeds",commands:oO.map(_=>({key:_.key,title:_.title,icon:({size:E})=>nn.createElement(Eo,{source:{uri:(f.color==="dark"?_.iconDark:null)||_.icon},style:{width:E,height:E}}),trigger:()=>{i("embed")}}))}:null].filter(ge)})},[C,s.uid,m,e,f.color,u]);return[nn.createElement(mt,null,r==="embed"?nn.createElement(nO,{onInsert:C,onClose:y}):r&&"ref"in r?nn.createElement(ed,{onClose:y,data:r,multi:!0,buttonText:R=>`Insert ${R} blocks`,onRequestChangeSource:()=>{i(null),a.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([R])=>{R&&i({ref:R})})},onSelect:R=>{w({blockType:Go,swaggerOperations:R.map.length,swaggerSource:r.ref.kind}),x(R.map(_=>Se.createBlockWithRef(r.ref,_.path,_.method))),y()}}):null),P]}function vl(e,t,o,n,r){e.change(i=>{let a=e.value.document.getParent(t);if(!a)return;let s=a.getChildIndex(t);if(s<0)return;if(n==="replace")o.object==="block"?i.replaceNodeByKey(t,o):i.replaceWithDocumentByKey(t,o);else{let u=n==="after"?s+1:s;o.object==="block"?i.insertNodeByKey(a.key,u,o):i.insertDocumentByKey(a.key,u,o)}let l=i.value.document.getNode(o.object==="block"?o.key:o.nodes.first().key);l&&(Bt(i.value.selection)?r==="start"?i.collapseToStartOf(l).focus():r==="end"?i.collapseToEndOf(l).focus():r(i,l):i.selectBlock(_S.create({anchorBlock:l.key,focusBlock:l.key})))})}var I9=B.createInteractiveComponent(le);function R9(e,t){return e.position===t.position&&e.highlighted===t.highlighted&&e.parent.key===t.parent.key&&e.parent.object===t.parent.object&&e.parent.type===t.parent.type&&e.node.key===t.node.key&&e.node.type===t.node.type&&e.editor===t.editor}var hv=jn.memo(function(t){let{editor:o,highlighted:n=!1,parent:r,node:i,position:a,style:s}=t,l=jn.useRef(null),[u,d]=Xf(o,r,i,a),m=se(l),[,f]=I(P9),g=n||m.opened,h=!n,y=g?Ce.visible:Ce.translucent;return jn.createElement(jn.Fragment,null,u,jn.createElement(I9,{style:[s,f.blockInsertion],editable:!1},jn.createElement(At,{onPress:()=>m.open(d)},jn.createElement(B.View,{style:[f.blockInsertionLineContainer,g?y:Ce.hidden],activeStyle:y},jn.createElement(v,{style:[f.blockInsertionLine,n&&f.blockInsertionLineDropping]}),jn.createElement(v,{style:[f.blockInsertionButtonContainer,b.directionRow,b.alignCenter,b.justifyContentEnd,h?Ce.visible:Ce.hidden]},jn.createElement(Ym,{ref:l,icon:S.Plus,size:"xsmall",kind:"secondary",rounded:!0,onPress:()=>m.open(d),animatedAngle:45,active:m.opened}))))))},R9),vI=3,bI=2,CI=ui*2,P9=D.create({blockInsertion:{position:"absolute",display:"flex",justifyContent:"center",height:CI},blockInsertionButtonContainer:{position:"absolute",left:"50%",marginLeft:-p.small},blockInsertionLineContainer:{position:"absolute",flexDirection:"row",alignItems:"center",left:0,top:0,right:0,height:CI,cursor:"pointer",transition:`opacity ease ${gr.TRANSITION_DURATION_SHORT}ms`},blockInsertionLine:e=>({position:"absolute",height:bI,left:0,right:0,borderRadius:bI,backgroundColor:e.colors.border.mid}),blockInsertionLineDropping:e=>({position:"absolute",height:vI,left:0,right:0,borderRadius:vI,backgroundColor:e.colors.primary.main})});c();var rs=k(O());c();function nt(e,t,o=[]){return oe({groups:[...o,{key:"block",commands:[{key:"delete",title:"Delete",icon:S.Trashcan,trigger:()=>{e.change(n=>{if(vn(n.value.selection))return n.deleteBlockRangeForward();n.removeNodeByKey(t).focus()})}}]}]})}var SI=rs.memo(function(t){let{editor:o,nodeKey:n,visible:r,style:i,size:a="small",shortcutsActive:s,palette:l,dragHandleRef:u,icon:d=S.GrabberVertical,animatedAngle:m=0,isDragging:f=!1}=t,[,g]=I(M9),h=Bw(),y=rs.useRef(!1),C=rs.useRef(null),x=se(C,{onClose:()=>{o.change(R=>{R.focus()})}}),w=()=>{y.current=!!h.current,x.open((typeof l=="function"?l():l)||nt(o,n)),o.change(R=>{let _=R.value.document.getNode(n);_&&Bt(R.value.selection)&&!R.value.selection.hasEdgeIn(_)&&R.collapseToStartOf(_),R.blur()})};yr(s?{[Fe.EDITOR_PALETTE]:w}:{},"editor-selection-collapsed",[s,x,l,o,n]);let P=r||x.opened;return rs.createElement(le,{editable:!1,ref:u,style:[i,P?Ce.visible:Ce.hidden],"data-hide-on-drag":!0},rs.createElement(Ym,{ref:C,rounded:!0,active:x.opened,icon:d,kind:"secondary",size:a,style:[g.button,f&&g.grabbing],title:`Click for options.
Drag to move.`,onPress:()=>w(),animatedAngle:m,disabled:f}))}),M9=D.create({grabbing:{cursor:"grabbing"},button:e=>({backgroundColor:e.colors.background.main})});c();var Ke=k(O());z();c();var bl=k(O());z();c();z();var ec={added:H.green.base,deleted:H.scarlet.base,modified:H.primary.base},Kf=X.create({added:{color:ec.added},deleted:{color:ec.deleted},modified:{color:ec.modified}});function Uf(e){let{diff:t,style:o,size:n,highlighted:r}=e,[,i]=I(T9),a=B.useInteractiveState(),s=t.type==="added"?S.DiffAdded:t.type==="deleted"?S.DiffRemoved:S.DiffModified;return bl.createElement(le,{editable:!1,style:o,...a.events,"data-hide-on-drag":!0},bl.createElement(Vn,{tooltip:`This block has been ${t.type} in this change request`,preferredPlacement:"top"},(l,u)=>bl.createElement(B.TouchableOpacity,{ref:u,style:[jf.diffContainer,r||a.hovered?jf.diffContainerHighlighted:null],...l.events},bl.createElement(s,{style:[jf.diffIcon,Kf[t.type]],size:n}),bl.createElement(le,{style:[jf.diffLine,i.bodyColor]}))))}var jf=X.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5},diffContainerHighlighted:{opacity:1},diffIcon:{flexShrink:0},diffLine:{width:1,flexGrow:1,flexShrink:1,marginTop:p.xsmall}}),T9=D.create({bodyColor:(e,t)=>({backgroundColor:t.color==="dark"?H.darkModeText.xdark:H.lightModeText.xlight})});c();var wI=k(O());c();var Yf=JSON.parse('{"halo":"halo_oiCij","ready":"ready_81z1f","show":"show_byjur"}');function yv(e){let{isSelected:t=!1,isBlockSelection:o=!1}=e;return wI.default.createElement(ae,{style:[Yf.halo,{[Yf.ready]:o,[Yf.show]:t}],as:"span",contentEditable:!1})}yv.displayName="BlockSelectionHalo";c();var _I=k(O());z();c();c();var Cl=p.medium;function E9(e,t){return t.nodes.find(o=>o.type===Lc&&o.nodes.some(n=>n.key===e.key))||e}function jr(e,t,o){let n=t.getChildIndex(o?E9(e,t).key:e.key),r=n===0,i=n===t.nodes.size-1,a=(()=>{switch(t.type){case Mo:return{paddingTop:r?p.medium:p.xsmall,paddingBottom:i?p.medium:p.xsmall};case zt:return{paddingTop:p.xsmall,paddingBottom:p.xsmall};case ro:{if(!ua.includes(e==null?void 0:e.type))return{paddingTop:0,paddingBottom:0};let l={paddingTop:p.small,paddingBottom:p.small};return r&&(l.paddingTop=0),i&&(l.paddingBottom=0),l}case ca:return{paddingTop:p.medium,paddingBottom:p.medium}}return{}})();return{...(()=>{switch(e.type){case De:return{paddingTop:p.large,paddingBottom:p.small};case ze:return{paddingTop:p.large,paddingBottom:p.small};case $e:return{paddingTop:p.large,paddingBottom:p.small};case me:return{paddingTop:p.small,paddingBottom:p.small};case Et:case oo:case no:return{paddingTop:p.medium,paddingBottom:p.medium};case Mo:return{paddingTop:p.medium,paddingBottom:p.medium};case lr:return{paddingTop:p.medium,paddingBottom:p.medium};case ro:return{paddingTop:r?0:p.xsmall,paddingBottom:i?0:p.xsmall};default:return{paddingTop:Cl,paddingBottom:Cl}}})(),...a}}c();var kI=k(lm());z();var is=100,Zf=40,od=800;function $f(e,t,o=!1){if(!e.useNewSizing)return L9(e,t,o);let n=new Map,r=0;e.columns.forEach(d=>{var m;r+=((m=e.columnWidths)==null?void 0:m[d])||0});let i=Math.max(t-r,0),a=e.columns.length-Object.keys(e.columnWidths||{}).length,s=a===0?0:Math.floor(i/a),l=a===0?0:i-s*a,u=0;return e.columns.forEach(d=>{var y,C;let m=typeof((y=e.columnWidths)==null?void 0:y[d])>"u",f=((C=e.columnWidths)==null?void 0:C[d])||0,g=m?s:f;d===e.columns[e.columns.length-1]&&(g+=l),g=(0,kI.default)(g,m?is:Zf,od),u+=g;let h=new Ht.Value(0);h.setOffset(g),n.set(d,{controller:h,animated:Ht.diffClamp(h,o?0:m?is:Zf,od),width:g})}),{widths:n,totalWidth:u}}function L9(e,t,o=!1){let i=new Map,a=0;e.columns.forEach(l=>{var d;let u=((d=e.columnWidths)==null?void 0:d[l])||200;a+=u,i.set(l,u)});let s=1;return(a<t||o)&&(s=t/a,a=t),i.forEach((l,u)=>{let d=new Ht.Value(0);d.setOffset(l*s),i.set(u,{controller:d,animated:Ht.diffClamp(d,o?0:150,od),width:l*s})}),{widths:i,totalWidth:a}}function tc(e,t,o){let{blockSpacing:n={paddingTop:0,paddingBottom:0},contentSize:r=750}=o||{};if((e==null?void 0:e.object)!=="block")throw new Error(`invalid node passed to "getBlockEstimatedHeight" ${e.object}#${e.type} with parent ${e.object}#${t?t.type:"no-parent"}`);switch(e.type){case Ar:return n.paddingTop+n.paddingBottom+D9(e,r);case bn:return n.paddingTop+n.paddingBottom+tc(e.nodes.first(),e);case me:case ze:case $e:case De:{let a=n.paddingTop+n.paddingBottom+nd(e.text,{lineHeight:xn(e),fontSize:Qf(e),contentWidth:r});return e.type===De&&t.object==="document"&&t.getChildIndex(e.key)!==0?a+p.medium+p.large+1:a}case Ri:return nd(e.text,{lineHeight:xn(e),fontSize:Qf(e),contentWidth:r});case ur:case Dn:case ri:case Go:case aa:case Mi:return n.paddingTop+n.paddingBottom+200;case Ts:case sa:case la:return n.paddingTop+n.paddingBottom+100;case Pi:return n.paddingTop+n.paddingBottom+xn(e);default:let i=N9(e,r);return n.paddingTop+n.paddingBottom+e.nodes.reduce((a,s)=>{let l=jr(s,e),u=s.object==="block"?tc(s,e,{contentSize:i}):nd(s.text,{contentWidth:i});return a+u+l.paddingTop+l.paddingBottom},0)}}function N9(e,t){switch(e.type){case zt:return t-Eu-Tu;case Mo:return t-Nu-Lu;default:return t}}function xn(e){if(!e)return qe.Body.lineHeight;switch(e.type){case ro:return xn(e.nodes.first());case De:return qe.Heading1.lineHeight;case ze:return qe.Heading2.lineHeight;case $e:return qe.Heading3.lineHeight;case lr:return qe.Code.lineHeight+2*p.small;case Ri:return qe.Code.lineHeight;case bn:return qe.Label.lineHeight+2*p.small;case Ar:return qe.Label.lineHeight+2*p.small;case Pi:return p.medium*2+qe.Heading3.lineHeight;case me:default:return qe.Body.lineHeight}}function Qf(e){if(!e)return qe.Body.fontSize;switch(e.type){case ro:return xn(e.nodes.first());case De:return qe.Heading1.fontSize;case ze:return qe.Heading2.fontSize;case $e:return qe.Heading3.fontSize;case Ri:return qe.Code.fontSize;case me:default:return qe.Body.fontSize}}function D9(e,t){let o=Z.getTableData(e);switch(o.view.type){case"grid":{let{widths:n}=$f(o.view,t,!1),r=B9(o,n),i=Object.keys(o.records).reduce((a,s,l)=>{let u=vv(e,s,n);return a+u},0);return r+i}case"cards":{let n=Object.keys(o.records).length,r=o.view.cardSize==="large"?2:3,i=(750-r*p.medium)/r,a=A9(e,o,i),s=Math.ceil(n/r);return s*a+(s-1)*p.medium}default:Ne(o.view)}}function vv(e,t,o){if(!e)return 0;let n=Z.getTableData(e),r=n.records[t];return n.view.columns.reduce((i,a)=>{let s=r.values[a],l=n.definition[a],u=OI(s,l,xI(l.id,o),e);return u>i?u:i},p.medium)}function A9(e,t,o){let n=Object.values(t.records)[0];if(!n)return 0;let r=t.view.type==="cards"&&t.view.coverDefinition?135:0;return t.view.columns.reduce((i,a)=>{let s=n.values[a],l=t.definition[a],u=OI(s,l,o,e);return i+u},2*p.small+r)}function B9(e,t){return e.view.type!=="grid"||e.view.hideHeader?0:Object.keys(e.definition).reduce((o,n)=>{let r=xI(n,t),i=e.definition[n].title,a=nd(i,{contentWidth:r});return a>o?a:o},p.medium)}function xI(e,t){var n;return(((n=t.get(e))==null?void 0:n.width)||is)-p.medium*2}function OI(e,t,o,n){return(()=>{switch(t.type){case"text":let i=n.fragments.get(String(e));return i?i.nodes.reduce((u,d)=>u+tc(d,n,{contentSize:o}),0):0;case"number":return nd(String(e),{contentWidth:o});case"files":case"users":let a=Array.isArray(e)?e.length:1,s=t.type==="files"?W9:z9;return(a<=1?1:Math.max(1,Math.ceil(s*a/o)))*qe.Body.lineHeight;case"checkbox":case"rating":case"select":default:return qe.Body.lineHeight}})()+p.small*2+1}function nd(e,t){let{lineHeight:o=qe.Body.lineHeight,contentWidth:n=750}=t||{},r=bv(e,t),i=Math.max(1,Math.ceil(r/n));return o*i}function bv(e="",t){let{fontSize:o=qe.Body.fontSize}=t||{};return o*.5*e.length}var z9=bv("Steven Smithson")+p.large+p.small*2,W9=bv("this_is_a_file_of_mine.json")+p.large+p.small*2;function hl(e){let{ancestors:t,node:o,diff:n,isBlockSelection:r=!1,isPDF:i=!1}=e,a=t.last(),s=a.type,l=a.getChildIndex(o.key),u=l===0,d=l===a.nodes.size-1,m=o.data.get("fullWidth"),f=typeof m=="boolean"&&m===!0;return _I.default.useMemo(()=>{let g=a.object==="document",h=a.object==="document"&&pr.isConflictKey(o.key),y=xn(o),C=jr(o,a,typeof n=="boolean");h&&(C.paddingTop+=p.medium);let x=F9(o,t,r),w=G9(o,t),P=q9(o,a),R=x?H9(o,t)-x.width/2:0;return{blockStyle:K9(C.paddingTop,C.paddingBottom,i),diffLine:n?{style:{position:"absolute",left:X9(o,t),top:(typeof n!="boolean"?C.paddingTop:0)+(y-Hp)/2,bottom:C.paddingBottom+p.small},size:Hp}:void 0,diffBefore:typeof n!="boolean"&&(n!=null&&n.deletedBlocksBefore)?{style:rd.diffDeletedBeforeLine,size:T.ICON_XS}:void 0,diffAfter:typeof n!="boolean"&&(n!=null&&n.deletedBlocksAfter)?{style:rd.diffDeletedAfterLine,size:T.ICON_XS}:void 0,controlsButton:x?{style:{top:(y-x.height)/2},hitArea:{width:Math.abs(R),height:"100%",paddingTop:C.paddingTop,paddingBottom:C.paddingBottom,left:R,top:0},size:x.buttonSize}:void 0,rightGutterComponent:w?{size:w.buttonSize,style:[rd.rightGutterComponent,{top:C.paddingTop+(y-w.height)/2}]}:void 0,beforeLine:P.before?{style:P.before}:void 0,afterLine:P.after?{style:P.after}:void 0,renderMode:g?f?"full-width":"centered":"unstyled"}},[o.type,a.object,s,u,d,i,n,r,f])}var II={shouldNodeComponentUpdate(e,t){if(e.node.object==="inline"||t.node.object==="inline")return null;let o=jr(e.node,e.parent),n=jr(t.node,t.parent);return o.paddingTop!==n.paddingTop||o.paddingBottom!==n.paddingBottom?!0:null}};function V9(e,t){if(en===e.type)return{before:!1,after:!1};if(t.object==="document"&&mr(t))return{before:!1,after:!1};if(pr.hasBlockConflictFrom(e,"head"))return{before:!1,after:!0};if(pr.hasBlockConflictFrom(e,"base"))return{before:!0,after:!1};let o=t.getChildIndex(e.key),n=t.nodes.size,r=!0,i=o===n-1;if(e.type===ro){let a=ot.isList(e.nodes.last());return{before:r,after:i&&!a}}return t.type===ro?{before:r&&o!==0,after:i&&o!==n-1}:{before:r,after:i}}function q9(e,t){let o=V9(e,t),n=null,r=null;return o.before&&(n=[rd.insertionLine,{top:-ui}]),o.after&&(r=[rd.insertionLine,{bottom:-ui}]),{before:n,after:r}}function F9(e,t,o){let n=t.last();return en===e.type||!o&&ua.includes(e.type)||Xt.isBlock(n)&&n.type===ro&&e.type!==ur?null:t.size===1||t.size===2&&Xt.isBlock(n)&&ot.isList(n)?{buttonSize:"small",width:T.BUTTON_S,height:T.BUTTON_S}:{buttonSize:"xsmall",width:T.BUTTON_XS,height:T.BUTTON_XS}}function G9(e,t){return en===e.type||ua.includes(e.type)?null:{buttonSize:"small",width:T.BUTTON_S,height:T.BUTTON_S}}function H9(e,t){let o=t.last(),n=t.get(t.size-2);if(e.type===ro){if(!n||(n==null?void 0:n.object)==="document")return js;if(Xt.isBlock(n)&&n.type===ro)switch(o.type){case oo:return-(p.small+6);case Et:return-(p.small+8);case no:return-(p.small+T.ICON_M/2);default:return js}o=n,n=t.get(t.size-3)}return n&&Xt.isBlock(n)&&Gy[n.type]?Gy[n.type]:(Xt.isBlock(o)?Mu[o.type]:0)||js}function X9(e,t){let o=t.last(),n=t.get(t.size-2),r=t.some(l=>l.type===bn)?-p.large:0,i=t.some(l=>l.type===Mo)?Du+10:0,a=t.some(l=>l.type===zt)?-20:0,s=t.filter(l=>ua.includes((l==null?void 0:l.type)||"")).size;if(s>0){let l=(r?r-2:0)+i+a+Du,u=s-1,d;switch(ua.includes((n==null?void 0:n.type)||"")?d=n==null?void 0:n.type:(d=o.type,u--),d){case oo:return l-Lx-Ax*u;case Et:return l-Nx-Bx*u;case no:return l-Dx-zx*u;default:return Du}}return a+i+r+Du}var rd=X.create({block:{paddingVertical:Cl},defaultTopPadding:{paddingTop:Cl},defaultBottomPadding:{paddingBottom:Cl},insertionLine:{height:ui,left:0,right:0},diffDeletedBeforeLine:{top:-ui,left:js-T.BUTTON_S-p.small-T.ICON_XS/2},diffDeletedAfterLine:{bottom:-ui,left:js-T.BUTTON_S-p.small-T.ICON_XS/2},rightGutterComponent:{position:"absolute",right:-p.xlarge,minWidth:p.xlarge}});function K9(e,t,o){let n={0:"none",[p.xsmall]:"xsmall",[p.small]:"small",[p.medium]:"medium",[p.large]:"large",[p.xlarge]:"xlarge",[p.xxlarge]:"xxlarge"},r=[U.padding.mediumVertical],i={};if(o)return{inlineStyle:{paddingTop:e,paddingBottom:t},style:[]};let a=n[e],s=n[t];return a&&r.push(U.padding[`${a}Top`]),s&&r.push(U.padding[`${s}Bottom`]),!a&&e!==0&&(i.paddingTop=e),!s&&t!==0&&(i.paddingBottom=t),{inlineStyle:i,style:r}}c();var id=JSON.parse('{"block":"block_UxARL","hitArea":"hitArea_Rr7uN"}');c();var Sl=k(O());var RI=Sl.default.createContext({current:new Map});function PI(e){let{original:t,modified:o,children:n}=e,r=Sl.default.useRef(new Map),i=Sl.default.useMemo(()=>t===void 0?new Map:LS(t||Tc.create(),o),[t,o]);return r.current=i,Sl.default.createElement(RI.Provider,{value:r},n)}function MI(e){let t=Sl.default.useContext(RI);return t.current instanceof Map?t.current.get(e.key):t.current}c();var jo=k(O());z();function LI(e){let{hasConflictHead:t,hasConflictBase:o,children:n}=e,[,r]=I(j9);return!t&&!o?jo.createElement(jo.Fragment,null,n):jo.createElement(v,{style:r.container},jo.createElement(v,{style:[r.highlighting,o?r.highlightingMain:r.highlightingCurrent]},o&&!t&&jo.createElement(jo.Fragment,null,jo.createElement(v,{style:[r.verticalLine,{bottom:0,top:-(p.small+T.BUTTON_S/2)}]}),jo.createElement(v,{style:[r.horizontalLine,{top:-(p.small+T.BUTTON_S/2)}]})),!o&&t&&jo.createElement(jo.Fragment,null,jo.createElement(v,{style:[r.verticalLine,{bottom:-(p.small+T.BUTTON_S/2),top:0}]}),jo.createElement(v,{style:[r.horizontalLine,{top:0}]}),jo.createElement(v,{style:[r.horizontalLine,{bottom:-(p.small+T.BUTTON_S/2)}]}),jo.createElement(v,{style:[r.conflictBadge,{top:-my.medium/2}]},jo.createElement(so,{kind:"secondary",icon:S.Conflict})))),n)}var TI=p.medium+my.medium/2,EI=2,j9=D.create({container:{position:"relative",pointerEvent:"none"},highlighting:{position:"absolute",inset:0},highlightingMain:e=>({backgroundColor:uy(e.colors.merge.muted,.5)}),highlightingCurrent:e=>({backgroundColor:uy(e.colors.primary.muted,.5)}),conflictBadge:{position:"absolute",left:p.medium},verticalLine:e=>({position:"absolute",left:TI,width:EI,backgroundColor:e.colors.border.main}),horizontalLine:e=>({position:"absolute",left:TI,height:EI,width:140,backgroundColor:e.colors.border.main})});c();var Un=k(O());function DI(e){let{node:t,editor:o,children:n}=e,{blockLayoutComponent:r}=Un.useContext(ne),i=pr.hasBlockConflictFrom(t,"base"),a=pr.hasBlockConflictFrom(t,"head");return Un.createElement(Un.Fragment,null,i?Un.createElement(r,{renderMode:"centered"},Un.createElement(NI,{node:t,editor:o,style:[p.Margin.smallBottom,p.Margin.mediumTop]})):null,Un.createElement(LI,{hasConflictBase:i,hasConflictHead:a},n),a?Un.createElement(r,{renderMode:"centered"},Un.createElement(NI,{node:t,editor:o,style:[p.Margin.smallTop,p.Margin.mediumBottom]})):null)}function NI(e){let{node:t,editor:o,style:n}=e,[,r]=I(L),i=()=>{o.change(a=>{pr.pickConflict(a,t.key)})};return Un.createElement(le,{editable:!1,style:[b.directionRow,n]},pr.isConflictKeyFrom(t.key,"base")?Un.createElement(A,{icon:Qe(S.Check,{style:[r.merge]}),rounded:!0,size:"small",kind:"secondary",style:[p.Margin.mediumRight],title:"Pick recent edits made on the main content",tooltipPreferredPlacement:"top",onPress:i},"Keep primary"):Un.createElement(A,{icon:Qe(S.Check,{style:[r.primary]}),rounded:!0,size:"small",kind:"secondary",title:"Pick edits made on this change request",tooltipPreferredPlacement:"bottom",onPress:i},"Keep changed"))}var BI=bt({key:"hoveredBlocks",default:[]}),U9=HC({key:"selectedHoveredBlocks",get:({get:e})=>{let t=e(BI);return t.length?t[t.length-1]:void 0}});function ve(e){let{tag:t,contentProps:o={},commandIcon:n,commandIconAnimatedAngle:r,palette:i,...a}=e,{node:s,parent:l,ancestors:u,editor:d,attributes:m,isFocused:f,children:g,isSelectedBlock:h,isBlockSelection:y}=a,{readOnly:C}=d,x=MI(s),w=Ye(),P=oi(BI),R=yn(U9),_=hl({isPDF:w,node:s,ancestors:u,diff:x,isBlockSelection:y}),{blockLayoutComponent:E,rightGutterComponent:M,logAnalyticsEvent:W,onBlockHover:G}=Ke.useContext(ne),V=B.useInteractiveState({onHoverIn:()=>{ua.includes(s.type)||P($=>[...$,s.key]),G==null||G(s.key)},onHoverOut:()=>{P($=>$.filter(te=>te!==s.key)),G==null||G(null)}}),F=V.hovered&&R?s.key===R:!1,Y=Ke.createElement(le,{"data-block-content":s.key,...o,style:[b.flex1,o.style]},C?null:Ke.createElement(yv,{isBlockSelection:y,isSelected:h}),g);return C?Ke.createElement(E,{node:s==null?void 0:s.key,renderMode:_.renderMode,interactive:V},Ke.createElement(wa.View,{isPDF:w},Ke.createElement(ae,{as:t,...m,...V.domEvents,style:[id.block,(l.object!=="block"||l.type!==Lc)&&_.blockStyle.style],inlineStyle:_.blockStyle.inlineStyle},Y,M&&_.rightGutterComponent?Ke.createElement(M,{nodeKey:s.key,visible:F,shortcutsActive:f,buttonSize:_.rightGutterComponent.size,style:_.rightGutterComponent.style,readOnly:C}):null))):Ke.createElement(Z9,{interactive:V,layout:_,isPDF:w,isHovered:F,BlockLayoutComponent:E,RightGutterComponent:M,logAnalyticsEvent:W,diff:x,...e},Y)}function Y9(e,t){if(!(t!=null&&t.current))return;let o=t.current.getBoundingClientRect(),n=.5*(o.bottom-o.top),r=e.getClientOffset();return r?r.y-o.top<n?"before":"after":void 0}function Z9(e){let{tag:t,commandIcon:o,commandIconAnimatedAngle:n,palette:r,interactive:i,layout:a,isPDF:s,isHovered:l,BlockLayoutComponent:u,RightGutterComponent:d,logAnalyticsEvent:m,diff:f,...g}=e,{node:h,parent:y,editor:C,attributes:x,isFocused:w,children:P,isSelectedBlock:R,isBlockSelection:_}=g,{readOnly:E}=C,M=_&&C.value.selection.isExpanded,W=Ke.useMemo(()=>M?{type:"block-range",item:{type:"block-range",id:h.key,previewLabel:"Move blocks"}}:{type:"block",item:{type:"block",id:h.key,blockType:h.type,previewLabel:"Move block"}},[M,h.key,h.type]),[{dragging:G},V]=Xi({...W,canDrag:()=>!E,collect:at=>({dragging:at.isDragging()||R&&at.getItemType()==="block-range"})}),[F,Y]=Ke.useState(),$=Ke.useRef(null),te=y.nodes.last()===h,[fe,tt]=wr({accept:["block","block-range","page","space","collection"],drop:(at,Wo)=>{Wo.didDrop()||C.change(eo=>{if(at.type==="block-range")eo.moveBlockRangeSelectionTo(h.key,F==="after"?1:0),m({type:"edit_page_document_move_block_range",method:"dnd",rangeSize:eo.value.blocks.size});else if(at.type==="block"){F==="before"?eo.moveBeforeNodeByKey(at.id,h.key):eo.moveAfterNodeByKey(at.id,h.key);let Tt=C.value.document.getParent(at.id);m({type:"edit_page_document_move_block",blockType:at.blockType,method:"dnd",toParent:y.object==="block"?y.type:y.object,fromParent:(Tt==null?void 0:Tt.object)==="block"?Tt==null?void 0:Tt.type:Tt==null?void 0:Tt.object})}else{let Tt=Ns.createContentRefBlock(G_(at));F==="before"?eo.insertNodeBeforeByKey(h.key,Tt):eo.insertNodeAfterByKey(h.key,Tt)}})},canDrop:at=>!(!Me(y,at.type==="block"?at.blockType:la)||at.type==="block"&&at.id===h.key||at.type==="block-range"&&C.value.blocks.find(Wo=>Wo.key===h.key)),hover:(at,Wo)=>{if(!Wo.canDrop())return;let eo=Y9(Wo,$);F!==eo&&Y(eo)},collect:at=>({highlighted:at.isOver({shallow:!0})&&at.canDrop()})}),{rightGutter:Gt,controls:Po,diff:Ln,insertion:xi}=$9({isBlockSelection:_,isDragging:G,isSelectedBlock:R,readOnly:E,value:C.value}),Oi=tt($);return Ke.createElement(DI,{node:h,editor:C},Ke.createElement(u,{node:h==null?void 0:h.key,renderMode:a.renderMode,interactive:i},Ke.createElement(wa.View,{isPDF:s},Ke.createElement(ae,{as:t,...x,style:[id.block,U.flex.row,G&&U.opacity.translucent,a.blockStyle.style,Yw,{[Zm]:fe.highlighted&&(!te||te&&F==="before"),[$m]:fe.highlighted&&te&&F==="after"}],inlineStyle:a.blockStyle.inlineStyle,ref:Oi},Ln&&f&&a.diffLine&&f.type!=="unmodified"?Ke.createElement(Uf,{diff:f,highlighted:l,...a.diffLine}):null,Po&&a.controlsButton?Ke.createElement(le,{style:[a.controlsButton.hitArea,ad.hitArea]},Ke.createElement(SI,{editor:C,nodeKey:h.key,visible:l,shortcutsActive:w,palette:M?void 0:r,size:a.controlsButton.size,dragHandleRef:V,icon:o,animatedAngle:n,style:[a.controlsButton.style,ad.hideTransition],isDragging:G})):null,P,Gt&&d&&a.rightGutterComponent?Ke.createElement(d,{nodeKey:h.key,visible:l,shortcutsActive:w,buttonSize:a.rightGutterComponent.size,style:[a.rightGutterComponent.style,ad.hideTransition],readOnly:E}):null,a.diffBefore?Ke.createElement(AI,{style:a.diffBefore.style,size:a.diffBefore.size}):null,xi&&a.beforeLine?Ke.createElement(hv,{editor:C,parent:y,node:h,position:"before",...a.beforeLine}):null,a.diffAfter?Ke.createElement(AI,{style:a.diffAfter.style,size:a.diffAfter.size}):null,xi&&a.afterLine?Ke.createElement(hv,{editor:C,parent:y,node:h,position:"after",...a.afterLine}):null))))}function AI(e){let{style:t,size:o}=e;return Ke.createElement(le,{editable:!1,style:[t,ad.diffRemoved],"data-hide-on-drag":!0},Ke.createElement(Vn,{tooltip:"A block has been removed in this change request",preferredPlacement:"top"},(n,r)=>Ke.createElement(B.TouchableOpacity,{ref:r,style:ad.diffContainer,...n.events},Ke.createElement(S.DiffRemoved,{size:o,style:[Kf.deleted]}))))}function $9(e){let{isDragging:t,isBlockSelection:o,isSelectedBlock:n,readOnly:r,value:i}=e,{selection:a}=i;return Ke.useMemo(()=>r?{controls:!1,diff:!1,insertion:!1,rightGutter:!0}:o?{controls:n,diff:!0,insertion:!1,rightGutter:!1}:{controls:!a.isExpanded,diff:!0,insertion:!0,rightGutter:!a.isExpanded},[a.isExpanded,t,o,n,r])}var ad=X.create({block:{position:"relative"},diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5},diffRemoved:{paddingTop:(ui*2-T.ICON_XS)/2,height:ui*2,position:"absolute"},hideTransition:{transition:"opacity 0.2s ease-in-out"},hitArea:{position:"absolute",backgroundColor:"transparent"}});c();var rt=k(O());c();var Jf=JSON.parse('{"placeholder":"placeholder_HCCie","instructions":"instructions_YvYKU","shortcuts":"shortcuts_v-WHU"}');var oc={instructions:{message:(e,t,o)=>rt.createElement(rt.Fragment,null,"Type ",e," for commands, ",t," for inline commands",o,"."),embed:" or paste a link to embed content"},imagePrompt:{title:"Select images"},image:{label:"Insert image"},code:{label:"Insert code block",placeholder:"// Some code"},list:{label:"Insert unordered list"}};function zI(e){let{node:t,parent:o,editor:n,children:r,placeholder:i}=e,{selection:a}=n.value,s=he.isTextRange(a)&&a.hasOnlyNodeFocused(t),l=xt(),{logAnalyticsEvent:u}=rt.useContext(ne),d=Me(o,Dn),[m,f]=Xf(n,o,t),g=rt.useMemo(()=>[{key:"image",label:oc.image.label,icon:S.BlockImage.CSS,trigger(){l.prompt({title:oc.imagePrompt.title,accept:"images",acceptURL:!0}).then(h=>{h.length!==0&&(vl(n,t.key,Xt.create({type:ur,isVoid:!0,nodes:h.map(y=>vo.createImageBlock(y))}),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:ur,images:h.length}))})}},{key:"code",label:oc.code.label,icon:S.Code.CSS,trigger(){vl(n,t.key,Kt.createCodeBlock(oc.code.placeholder),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:lr})}},{key:"list-unordered",label:oc.list.label,icon:S.ListUnordered.CSS,trigger(){vl(n,t.key,ot.createList(oo),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:oo})}}],[n,t.key]);return rt.createElement(rt.Fragment,null,m,rt.createElement(ve,{...e,palette:f,commandIcon:S.Plus,commandIconAnimatedAngle:45},rt.createElement(ae,{as:"p",contentEditable:!1,style:[Jf.placeholder,U.text.base,U.text.body,U.textColor.muted,U.flex.row,U.flex.alignCenter,U.flex.justifySpaceBetween,s||i?U.opacity.visible:U.opacity.hidden]},s?rt.createElement(rt.Fragment,null,rt.createElement(pa,{style:[Jf.instructions]},oc.instructions.message(rt.createElement(qr,{style:[U.flex.inline],size:"medium",shortcut:Fe.EDITOR_PALETTE}),rt.createElement(qr,{style:[U.flex.inline],size:"medium",shortcut:Fe.EDITOR_INLINE_PALETTE}),d?oc.instructions.embed:"")),(g==null?void 0:g.length)>0?rt.createElement(Q9,{blocks:g,editor:n,node:t}):null):rt.createElement(rt.Fragment,null,ym(o)?i:null)),r))}function Q9(e){var l;let{blocks:t,editor:o,node:n}=e,[r,i]=rt.useState(0),a=rt.useRef(r),s=rt.useRef(null);return pk(u=>{var d;!s.current||u||(d=s.current)==null||d.focus()},{scope:(l=o.elementRef)==null?void 0:l.current,exact:!0}),rt.useEffect(()=>{var u;(a==null?void 0:a.current)!==r&&((u=s.current)==null||u.focus(),a.current=r)},[r]),rt.useEffect(()=>()=>{var u;(u=s==null?void 0:s.current)==null||u.blur()},[]),rt.createElement(ae,{as:"span",role:"toolbar","aria-orientation":"horizontal",style:[Jf.shortcuts,U.flex.row,U.flex.alignEnd]},t.map(({trigger:u,label:d,icon:m},f)=>rt.createElement(Fc,{ref:f===r?s:void 0,label:d,tooltipTitle:d,iconOnly:!0,leadingIcon:m,kind:"muted",size:"small",onPress:()=>u==null?void 0:u(),preventFocusOnPress:!0,tabIndex:f===r?0:-1,key:`${n.key}_${f}`,onKeyDown:g=>{var h,y;(g.key==="Tab"||g.key==="Escape")&&((y=(h=o.elementRef)==null?void 0:h.current)==null||y.focus(),g.preventDefault()),g.key==="ArrowLeft"&&(i(C=>Math.max(0,C-1)),g.preventDefault()),g.key==="ArrowRight"&&(i(C=>Math.min(t.length-1,C+1)),g.preventDefault())}})))}c();var WI=k(O());function Kr(e,t){let{logAnalyticsEvent:o}=WI.useContext(ne);if(!B1("FULL_WIDTH_BLOCKS"))return null;let r=e.value.document.assertBlock(t),i=r.data.get("fullWidth");return{key:"layout-width",commands:[typeof i=="boolean"&&i===!0?{key:"default",title:"Default width",icon:S.DefaultWidth,trigger:()=>{e.change(s=>{s.setDataByKey(t,["fullWidth"],!1)}),o({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"full",toValue:"default"})}}:{key:"full",title:"Full width",icon:S.FullWidth,trigger:()=>{e.change(s=>{s.setDataByKey(t,["fullWidth"],!0)}),o({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"default",toValue:"full"})}}]}}c();var VI=k(O());function tg(e,t){return VI.useMemo(()=>J9(e.value.document,t),[e,t])}function J9(e,t){let o=e.getPath(t);return o?o[0]<eN(e):!1}var eg=new WeakMap;function eN(e){if(eg.has(e))return eg.get(e);let t=800,o=0;for(let n=0;n<e.nodes.size;n++){let r=e.nodes.get(n);if(!r)break;if(o+=tc(r,e,{blockSpacing:{paddingTop:p.medium,paddingBottom:p.medium}}),o>t)return eg.set(e,n),n}return eg.set(e,e.nodes.size),e.nodes.size}c();var og=k(O());z();function wl(e){let{style:t}=e,[,o]=I(L);return og.default.createElement(Gc,{style:t},og.default.createElement(N,{style:[o.Label,o.textMuted]},"Exit with"," ",og.default.createElement(qr,{kind:"muted",shortcut:Fe.EDITOR_EXIT_BLOCK})))}c();var kl=k(O());z();var xl=kl.forwardRef(function(t,o){let{node:n,children:r,editor:i,isFocused:a,isSelected:s,attributes:l,onPress:u,style:d}=t,{readOnly:m}=i,f=B.useInteractiveState(),[,g]=I(tN);return m?u?kl.createElement(Be,{style:[g.frameInlineVoid],onPress:u},r):kl.createElement(v,{style:[g.frameInlineVoid]},r):kl.createElement(Be,{ref:o,...l,...f.events,style:[g.frameInlineVoid,f.hovered&&g.frameEditableHovered,s&&g.frameSelected,a&&g.frameFocused,d],onPress:h=>{i.change(y=>{Bt(y.value.selection)?y.collapseToStartOf(n).focus():y.selectText(he.fromBlockRange(y.value.selection,y.value.document)).collapseToStartOf(n).focus()}),u&&u(h)}},r)}),tN=D.create({frameInlineVoid:e=>({borderWidth:2,borderColor:"transparent",borderRadius:e.radiuses.medium,textAlignVertical:"middle"}),frameEditableHovered:e=>({borderColor:e.colors.primary.muted}),frameSelected:e=>({borderColor:e.colors.primary.muted}),frameFocused:e=>({borderColor:e.colors.primary.main})});c();var _t=k(O());z();var Vt=_t.forwardRef(function(t,o){let{onPress:n,onSelect:r=()=>{s.change(m=>{Bt(m.value.selection)&&m.collapseToStartOf(i).focus()})},node:i,children:a,editor:s,isFocused:l,selectable:u=!0}=t,{readOnly:d}=s;return _t.createElement(Cv,{ref:o,onPress:n,readOnly:d,selected:l,selectable:u,onSelect:r},a)}),Cv=_t.forwardRef(function(t,o){let{onPress:n,selected:r,readOnly:i=!1,selectable:a=!0,style:s,children:l,onSelect:u}=t,d=B.useInteractiveState({hoverDelayIn:50}),[,m]=I(oN);if(i)return _t.createElement(_t.Fragment,null,l);let f=h=>{h.stopPropagation(),u()},g=_t.createElement(v,{ref:o,style:s},l,_t.createElement(v,{style:[m.frameBorder,m.frameBorderRight,d.hovered&&m.frameBorderHovered,r&&m.frameBorderRightSelected],pointerEvents:"none"}),_t.createElement(v,{style:[m.frameBorder,m.frameBorderLeft,d.hovered&&m.frameBorderHovered,r&&m.frameBorderLeftSelected],pointerEvents:"none"}),_t.createElement(v,{style:[m.frameBorder,m.frameBorderTop,d.hovered&&m.frameBorderHovered,r&&m.frameBorderTopSelected],pointerEvents:"none"}),_t.createElement(v,{style:[m.frameBorder,m.frameBorderBottom,d.hovered&&m.frameBorderHovered,r&&m.frameBorderBottomSelected],pointerEvents:"none"}),a?_t.createElement(_t.Fragment,null,_t.createElement(At,{onPress:f},_t.createElement(v,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderRight]})),_t.createElement(At,{onPress:f},_t.createElement(v,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderLeft]})),_t.createElement(At,{onPress:f},_t.createElement(v,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderTop]})),_t.createElement(At,{onPress:f},_t.createElement(v,{...d.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderBottom]}))):null);return n?_t.createElement(Be,{onPress:n},g):g}),ng=18,ut=8,as=4,rg=2,oN=D.create({frameBorder:{position:"absolute"},hoverableFrameBorder:{position:"absolute",cursor:"pointer"},frameBorderHovered:e=>({backgroundColor:e.colors.primary.muted}),hoverableFrameBorderTop:{top:-ut/2,left:-ut/2,right:-ut/2,height:ng},frameBorderTop:{top:-ut/2,left:-ut/2,right:-ut/2,height:ut,borderTopLeftRadius:as,borderTopRightRadius:as},frameBorderTopSelected:e=>({backgroundColor:"transparent",borderTopColor:e.colors.primary.main,borderTopWidth:rg}),hoverableFrameBorderBottom:{bottom:-ut/2,left:-ut/2,right:-ut/2,height:ng},frameBorderBottom:{bottom:-ut/2,left:-ut/2,right:-ut/2,height:ut,borderBottomLeftRadius:as,borderBottomRightRadius:as},frameBorderBottomSelected:e=>({backgroundColor:"transparent",borderBottomColor:e.colors.primary.main,borderBottomWidth:rg}),hoverableFrameBorderLeft:{top:-ut/2,bottom:-ut/2,left:-ut/2,width:ng},frameBorderLeft:{top:-ut/2,bottom:-ut/2,left:-ut/2,width:ut,borderBottomLeftRadius:as,borderTopLeftRadius:as},frameBorderLeftSelected:e=>({backgroundColor:"transparent",borderLeftColor:e.colors.primary.main,borderLeftWidth:rg}),hoverableFrameBorderRight:{top:-ut/2,bottom:-ut/2,right:-ut/2,width:ng},frameBorderRight:{top:-ut/2,bottom:-ut/2,right:-ut/2,width:ut,borderTopRightRadius:as,borderBottomRightRadius:as},frameBorderRightSelected:e=>({backgroundColor:"transparent",borderRightColor:e.colors.primary.main,borderRightWidth:rg})});c();var ig=k(O());function ag(e,t){let[,o]=I(L),[,n]=I(nN),{navigateToHash:r}=_e(),{sections:i,active:a,setActive:s}=ig.default.useContext(Gr),l=B.useInteractiveState(),u=i.get(e.key),d=()=>{u&&s(a!==u?u:null)},m=()=>{u&&(r(u,{scroll:!0}),d())},f={accessibilityRole:"presentation"};return{anchorElement:ig.default.createElement(B.Text,{href:`#${u}`,onPress:m,style:[n.anchorLink,p.Margin.smallLeft,a===u||l.focused||l.hovered?Ce.visible:Ce.hidden],inactiveStyle:o.textMuted,activeStyle:o.primary,accessibilityLabel:t.accessibilityLabel},ig.default.createElement(S.Hash,{size:t.anchorIconSize||T.ICON_S,...f})),anchoredBlockId:u,anchoredBlockInteractiveState:l,onAnchoredBlockPress:()=>{t.onBlockPress&&t.onBlockPress(),d()}}}var nN=D.create({anchorLink:{display:"inline-flex",alignItems:"center"}});c();var FI=k(O());function GI(e){let{notify:t,notifyProgress:o,notifyOrUpdate:n,close:r}=co(),{logAnalyticsEvent:i}=e;return FI.useMemo(()=>{function a(u){em(u),t({kind:"danger",title:"Error while pasting content",icon:S.Alert,details:Ii(u,"Please try again or contact support if the problem persists.")})}function s(u){n({id:"upload-files",title:`Uploading ${u} file${u!==1?"s":""}\u2026`,details:"This might take a moment.",kind:"default",timeout:0,closeable:!1,icon:Oe})}function l(u,d,m){let f=Hc(u),g=0,h=async(y,C)=>{var x;if(Mc(y))return{kind:"url",url:y};if(lS(y)){let w=await(await fetch(y)).blob(),P=(x=y.split(";")[0])==null?void 0:x.split("/")[1],R=(C==null?void 0:C.fileName)||`unknown.${P}`,_=new File([w],R);return g+=1,s(g),(await e.uploadFiles([_]))[0]}return null};if(f.type==="html"&&f.html!==null)return v1(f.html,{...py,resolveFile:h}).then(({document:y})=>TS(y)&&f.text?fy(f.text).then(({document:C})=>({document:C,type:"text"})):{document:y,type:"html"}).then(({document:y,type:C})=>{m.change(w=>{w.insertDocument(y)}),r("upload-files");let x=qI(C==="html"?f.html:f.text,C);i(sd(u,C,{document:y,sourceIncludes:x}))}).catch(y=>{a(y)}),!0;if(f.type==="text"&&f.text!==null)return fy(f.text,{...py,resolveFile:h}).then(({document:y})=>{m.change(x=>{x.insertDocument(y)}),r("upload-files");let C=qI(f.text,"text");i(sd(u,"text",{document:y,sourceIncludes:C}))}).catch(y=>{a(y)}),!0;if(f.type==="files"&&typeof f.files<"u"){if(!f.files||f.files.length===0)return;o(e.uploadFiles(f.files),{title:`Uploading ${f.files.length} files\u2026`,details:"This might take a moment.",kind:"default"}).then(y=>{if(!f.files)return;if(y.length===0){t({kind:"danger",title:"Some files failed to upload, please try again",icon:S.Alert});return}let C=f.files.every(x=>za(x));m.change(x=>{if(C){let w=vo.createImagesBlock(y),{startBlock:P}=x.value;if(Me(P,w.type)){oy(x,vo.createImagesBlock(y));return}if(!gm.includes(P.type)){t({kind:"info",title:"Cannot insert an image here",icon:S.InfoCircle});return}y.reduce((_,E)=>_.insertInline(vo.createImageInline(E)),x);return}y.forEach(w=>{if(w.kind!=="file")return;let P=Sm.createFileBlock(w);if(Me(x.value.document.getParent(x.value.startBlock.key),P.type)){oy(x,P);return}t({kind:"info",title:"Cannot insert a file here",icon:S.InfoCircle})})}),i(sd(u,"files",{uploadedFiles:y==null?void 0:y.length,sourceIncludes:["file"]}))}).catch(y=>{a(y)})}}return{onPaste:l,onDrop:l}},[t,o])}function qI(e,t){let o=[];switch(t){case"text":e.includes("![")&&o.push("image"),e.match(/\|\s*\:?---/)&&o.push("table");break;case"html":e.includes("<img")&&o.push("image"),e.includes("<table")&&o.push("table");break}return o}function sd(e,t,{document:o=void 0,uploadedFiles:n=0,sourceIncludes:r=[]}={}){let i=e.clipboardData,a=new Set,s=0;return o&&o.forEachDescendant(l=>{s+=1,l.type&&a.add(l.type)}),{type:"edit_paste_content",paste:e.type,sourceTypes:[...(i==null?void 0:i.types)||[]],sourceIncludes:[...new Set(r)],transformType:t,transformSize:s,uploadedFiles:n,transformNodes:[...a]}}c();var Sv=k(Vr());var HI={onKeyDown:rN};function rN(e,t){if((0,Sv.default)("enter",e)||(0,Sv.default)("shift+enter",e)){let{value:o}=t,{startBlock:n,startInline:r,startText:i}=o;if(r&&r.isVoid&&i){let a=o.document.getNextText(i.key);return a?(t.collapseToStartOf(a),t):void 0}if(n&&n.isVoid)return St(t),t}}c();var wv=k(O()),sg="selectionHighlighting",XI={renderMark:iN};function iN(e){let{mark:t}=e;switch(t.type){case sg:return wv.createElement(aN,{...e})}}function aN(e){let{attributes:t,children:o}=e;return wv.createElement("span",{...t,style:{backgroundColor:"Highlight",color:"HighlightText"}},o)}c();function KI(e){e.value.decorations.forEach(t=>{var o;(o=t.marks)!=null&&o.some(n=>n.type===sg)&&e.removeValueDecoration(t)})}function cg(e,t=e.value.selection){he.isTextRange(t)&&e.setValueDecoration(he.create({anchorKey:t.anchorKey,anchorOffset:t.anchorOffset,focusKey:t.focusKey,focusOffset:t.focusOffset,marks:[{type:sg,data:{}}],isAtomic:!0}))}c();var jI=k(O());function po(e){let{contentReferenceContext:t}=jI.useContext(ne);return Hn(e,t)}c();var UI={shouldNodeComponentUpdate:sN};function sN(e,t){let o=e.parent.nodes.size-1,n=e.parent.getChildIndex(e.node.key),r=t.parent.getChildIndex(e.node.key);return(n===o||r===o)&&r!==n?!0:null}c();var Ol=k(O());z();function Yn(e){let[,t]=I(cN),[,o]=I(L);return Ol.createElement(v,{style:[t.blockLoading,p.Padding.largeHorizontal,p.Padding.mediumVertical,b.directionRow,b.alignCenter]},Ol.createElement(v,null,Ol.createElement(Oe,{size:T.ICON_M})),Ol.createElement(v,{style:[p.Margin.mediumLeft]},Ol.createElement(N,{style:[o.Caption,o.textMid]},"Loading...")))}var cN=D.create({blockLoading:e=>({backgroundColor:e.colors.background.muted,borderRadius:e.radiuses.large})});c();var ZI=k(O());c();var Ur=k(O());var YI={en:{something_wrong:"Something went wrong.",reload:"Reload",let_us_know:"Let us know what happened",we_have_been_notified:"Our team has been notified. If you'd like to help, you can describe what happened below.",search:"Search",search_ask:"Ask",search_placeholder:"Search content\u2026",search_placeholder_ask:"Ask a question\u2026",search_blankslate:"Type something to search",search_blankslate_ai:"We'll answer the question with an AI model trained on the content.",search_blankslate_recent_searches:"Recent searches",search_blankslate_recent_questions:"Recently asked",search_blankslate_recommended_questions:"You might be interested in",search_blankslate_query:'No results for "${1}"',search_answer_sources:"Answer based on ${1} sources",search_answer_copy:"Copy answer",search_answer_feedback_upvote:"Mark as useful",search_answer_feedback_downvote:"Mark as not relevant",search_answer_feedback_title:"Thanks for your feedback!",search_answer_feedback_details:"This will help us improve the answering engine.",search_answer_loading:"Analysing the content to answer your question\u2026",search_answer_loading_wait:"It might take a few more seconds.",search_answer_none_title:"No answer found for your question.",search_answer_none_details:"It can indicate that no content is relevant to your question or answer cannot be evaluated with enough confidence.",search_answer_error_title:"Unexpected error",search_answer_error_details:"Something went wrong. Please try again later.",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"Page not found",back_to_home:"Back to front page",page_not_found_long:"Sorry, but the page you were looking for could not be found.",outline:"On this page",last_modified:"Last modified ${1}",was_it_helpful:"Was this page helpful?",poor_content:"Poor content",ok_content:"OK content",excellent_content:"Excellent content",powered_by:"Powered By ${1}",previous:"Previous",next:"Next",export_pdf:"Export as PDF",copy_link:"Copy link",edit_on_github:"Edit on ${1}",page_articles_section:"Here are the articles in this section:",main:"Main",cookie_policy:"cookie policy",cookie_prompt:"This site uses cookies to deliver its service and to analyse traffic. By browsing this site, you accept the ${1}.",cookies:"Cookies",reject_all:"Reject all",theme_change_appearance:"Change appearance",new_page:"New page",untitled_page:"Untitled page",page_description:"Page description (optional)",connection_lost:"Connection lost",network_troubleshooting:"Network troubleshooting",device_offline:"Your device might be offline, or GitBook might be experiencing issues.",missing_content_title:"Oops, something is missing.",missing_content_description:"We could not find the original source to display this content.",table_of_contents:"Table of contents",page_outline:"Page outline"},fr:{something_wrong:"Il y a eu un probl\xE8me.",reload:"Actualiser",let_us_know:"Dites-nous ce qui s'est pass\xE9",we_have_been_notified:"Notre \xE9quipe a \xE9t\xE9 inform\xE9e. Si vous souhaitez nous aider, vous pouvez d\xE9crire ce qui s'est pass\xE9 ci-dessous.",search:"Rechercher",search_ask:"Poser une question",search_placeholder:"Rechercher dans le contenu\u2026",search_placeholder_ask:"Poser une question\u2026",search_blankslate:"Tapez quelque chose pour rechercher",search_blankslate_ai:"Nous r\xE9pondrons \xE0 la question avec un mod\xE8le d'IA entra\xEEn\xE9 sur le contenu.",search_blankslate_recent_searches:"Recherches r\xE9centes",search_blankslate_recent_questions:"Questions r\xE9centes",search_blankslate_recommended_questions:"Vous pourriez \xEAtre int\xE9ress\xE9 par",search_blankslate_query:'Aucun r\xE9sultat pour "${1}"',search_answer_sources:"R\xE9ponse bas\xE9e sur ${1} sources",search_answer_copy:"Copier la r\xE9ponse",search_answer_feedback_upvote:"Marquer comme utile",search_answer_feedback_downvote:"Marquer comme non pertinent",search_answer_feedback_title:"Merci pour votre retour !",search_answer_feedback_details:"Cela nous aidera \xE0 am\xE9liorer le moteur de r\xE9ponse.",search_answer_loading:"Analyse du contenu pour r\xE9pondre \xE0 votre question\u2026",search_answer_loading_wait:"Cela peut prendre quelques secondes suppl\xE9mentaires.",search_answer_none_title:"Aucune r\xE9ponse trouv\xE9e pour votre question.",search_answer_none_details:"Cela peut indiquer qu'aucun contenu n'est pertinent pour votre question ou que la r\xE9ponse ne peut pas \xEAtre \xE9valu\xE9e avec suffisamment de confiance.",search_answer_error_title:"Erreur inattendue",search_answer_error_details:"Une erreur s'est produite. Veuillez r\xE9essayer plus tard.",search_goto_section:"Aller \xE0 la section",search_goto_page:"Aller \xE0 la page",page_not_found:"Page non trouv\xE9e",back_to_home:"Retour \xE0 la page d'accueil",page_not_found_long:"D\xE9sol\xE9, mais la page que vous cherchiez n'a pas pu \xEAtre trouv\xE9e.",outline:"Sommaire",last_modified:"Derni\xE8re mise \xE0 jour ${1}",was_it_helpful:"Cette page vous a t-elle aid\xE9e ?",poor_content:"Contenu m\xE9diocre",ok_content:"Contenu OK",excellent_content:"Contenu excellent",powered_by:"Propuls\xE9 par ${1}",previous:"Pr\xE9c\xE9dent",next:"Suivant",export_pdf:"Exporter en PDF",copy_link:"Copier le lien",edit_on_github:"\xC9diter sur ${1}",page_articles_section:"Voici les articles de cette section :",main:"Principale",cookie_policy:"politique en mati\xE8re de cookies",cookie_prompt:"Ce site utilise des cookies pour fournir son service et analyser le trafic. En naviguant sur ce site, vous acceptez le ${1}.",cookies:"Cookies",reject_all:"Rejeter tout",theme_change_appearance:"Changer l\u2019apparence",connection_lost:"Hors connexion",network_troubleshooting:"D\xE9pannage r\xE9seau",device_offline:"Votre appareil est hors-ligne, ou GitBook rencontre des probl\xE8mes.",missing_content_title:"Oups, il manque quelque chose.",missing_content_description:"Nous n'avons pas pu trouver la source d'origine pour afficher ce contenu.",table_of_contents:"Table des mati\xE8res",page_outline:"Sommaire de la page"},es:{something_wrong:"Algo sali\xF3 mal.",reload:"Recarga",let_us_know:"Cu\xE9ntanos lo que ha sucedido",we_have_been_notified:"Nuestro equipo ha sido notificado. Si quieres ayudar, puedes describir lo sucedido a continuaci\xF3n.",search:"Buscar",search_ask:"Hacer una pregunta",search_placeholder:"Buscar en el contenido\u2026",search_placeholder_ask:"Hacer una pregunta\u2026",search_blankslate:"Escribe algo para buscar",search_blankslate_ai:"Responderemos a la pregunta con un modelo de IA entrenado en el contenido.",search_blankslate_recent_searches:"B\xFAsquedas recientes",search_blankslate_recent_questions:"Preguntas recientes",search_blankslate_recommended_questions:"Quiz\xE1s te interese",search_blankslate_query:'No se encontraron resultados para "${1}"',search_answer_sources:"Respuesta basada en ${1} fuentes",search_answer_copy:"Copiar respuesta",search_answer_feedback_upvote:"Marcar como \xFAtil",search_answer_feedback_downvote:"Marcar como no relevante",search_answer_feedback_title:"\xA1Gracias por tu retroalimentaci\xF3n!",search_answer_feedback_details:"Esto nos ayudar\xE1 a mejorar el motor de respuesta.",search_answer_loading:"Analizando el contenido para responder tu pregunta\u2026",search_answer_loading_wait:"Esto puede tomar unos segundos m\xE1s.",search_answer_none_title:"No se encontr\xF3 respuesta para tu pregunta.",search_answer_none_details:"Esto puede indicar que no hay contenido relevante para tu pregunta o que la respuesta no se puede evaluar con suficiente confianza.",search_answer_error_title:"Error inesperado",search_answer_error_details:"Ha ocurrido un error. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",search_goto_section:"Ir a la secci\xF3n",search_goto_page:"Ir a la p\xE1gina",page_not_found:"P\xE1gina no encontrada",back_to_home:"Volver a la primera p\xE1gina",page_not_found_long:"Lo sentimos, pero no se ha podido encontrar la p\xE1gina que buscaba.",outline:"Esquema",last_modified:"\xDAltima actualizaci\xF3n ${1}",was_it_helpful:"\xBFTe ha sido \xFAtil esta p\xE1gina?",poor_content:"Contenido mediocre",ok_content:"Contenido OK",excellent_content:"Contenido excelente",powered_by:"Accionado por ${1}",previous:"Anterior",next:"Pr\xF3ximo",export_pdf:"Exportar como PDF",copy_link:"Copiar enlace",edit_on_github:"Editar en ${1}",page_articles_section:"Aqu\xED est\xE1n los art\xEDculos de esta secci\xF3n:",main:"Principal",cookie_policy:"pol\xEDtica de cookies",cookie_prompt:"Este sitio utiliza cookies para prestar su servicio y analizar el tr\xE1fico. Al navegar por este sitio, usted acepta la ${1}.",cookies:"Cookies",reject_all:"Rechazar todo",theme_change_appearance:"Cambiar apariencia",connection_lost:"Desconectado",network_troubleshooting:"Resoluci\xF3n de problemas de red",device_offline:"Su dispositivo puede estar desconectado, o GitBook esta experimentando problemas.",missing_content_title:"Ups, algo falta.",missing_content_description:"No pudimos encontrar la fuente original para mostrar este contenido.",table_of_contents:"Tabla de contenido",page_outline:"\xCDndice de p\xE1gina"},zh:{something_wrong:"\u51FA\u4E86\u70B9\u95EE\u9898\u3002",reload:"\u91CD\u88C5",let_us_know:"\u8BA9\u6211\u4EEC\u77E5\u9053\u53D1\u751F\u4E86\u4EC0\u4E48\u4E8B",we_have_been_notified:"\u6211\u4EEC\u7684\u56E2\u961F\u5DF2\u7ECF\u63A5\u5230\u901A\u77E5\u3002\u5982\u679C\u4F60\u60F3\u5E2E\u5FD9\uFF0C\u4F60\u53EF\u4EE5\u5728\u4E0B\u9762\u63CF\u8FF0\u53D1\u751F\u4E86\u4EC0\u4E48\u3002",search:"\u641C\u7D22",search_ask:"\u63D0\u95EE",search_placeholder:"\u641C\u7D22\u5185\u5BB9\u2026",search_placeholder_ask:"\u63D0\u95EE\u2026",search_blankslate:"\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22",search_blankslate_ai:"\u6211\u4EEC\u5C06\u7528\u8BAD\u7EC3\u8FC7\u7684 AI \u6A21\u578B\u6765\u56DE\u7B54\u4F60\u7684\u95EE\u9898\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u641C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u63D0\u95EE",search_blankslate_recommended_questions:"\u4F60\u53EF\u80FD\u611F\u5174\u8DA3\u7684\u95EE\u9898",search_blankslate_query:'\u6CA1\u6709\u627E\u5230\u4E0E "${1}" \u76F8\u5173\u7684\u5185\u5BB9',search_answer_sources:"\u56DE\u7B54\u57FA\u4E8E ${1} \u6765\u6E90",search_answer_copy:"\u590D\u5236\u56DE\u7B54",search_answer_feedback_upvote:"\u6807\u8BB0\u4E3A\u6709\u7528",search_answer_feedback_downvote:"\u6807\u8BB0\u4E3A\u65E0\u7528",search_answer_feedback_title:"\u611F\u8C22\u60A8\u7684\u53CD\u9988\uFF01",search_answer_feedback_details:"\u8FD9\u5C06\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB\u56DE\u7B54\u5F15\u64CE\u3002",search_answer_loading:"\u6B63\u5728\u5206\u6790\u5185\u5BB9\u4EE5\u56DE\u7B54\u60A8\u7684\u95EE\u9898\u2026",search_answer_loading_wait:"\u8FD9\u53EF\u80FD\u9700\u8981\u51E0\u79D2\u949F\u3002",search_answer_none_title:"\u6CA1\u6709\u627E\u5230\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u56DE\u7B54\u3002",search_answer_none_details:"\u8FD9\u53EF\u80FD\u662F\u7531\u4E8E\u6CA1\u6709\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u6216\u8005\u56DE\u7B54\u4E0D\u80FD\u88AB\u5145\u5206\u4FE1\u4EFB\u3002",search_answer_error_title:"\u610F\u5916\u9519\u8BEF",search_answer_error_details:"\u53D1\u751F\u4E86\u4E00\u4E2A\u9519\u8BEF\u3002\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002",search_goto_section:"\u8DF3\u8F6C\u5230\u7AE0\u8282",search_goto_page:"\u8DF3\u8F6C\u5230\u9875\u9762",page_not_found:"\u672A\u627E\u5230\u7F51\u9875",back_to_home:"\u8FD4\u56DE\u9996\u9875",page_not_found_long:"\u62B1\u6B49\uFF0C\u60A8\u8981\u627E\u7684\u9875\u9762\u65E0\u6CD5\u627E\u5230\u3002",outline:"\u5927\u7EB2",last_modified:"\u6700\u8FD1\u66F4\u65B0 ${1}",was_it_helpful:"\u6B64\u9875\u9762\u662F\u5426\u6709\u5E2E\u52A9\uFF1F",poor_content:"\u5185\u5BB9\u5DEE",ok_content:"\u597D\u7684\u5185\u5BB9",excellent_content:"\u4F18\u79C0\u7684\u5185\u5BB9",powered_by:"\u7531 ${1} \u63D0\u4F9B\u652F\u6301",previous:"\u4EE5\u524D",next:"\u4E0B\u4E00\u4E2A",export_pdf:"\u5BFC\u51FA\u4E3APDF",copy_link:"\u590D\u5236\u94FE\u63A5",edit_on_github:"\u5728 ${1} \u4E0A\u7F16\u8F91",page_articles_section:"\u4EE5\u4E0B\u662F\u672C\u8282\u4E2D\u7684\u6587\u7AE0\uFF1A",main:"\u4E3B\u8981",cookie_policy:"cookie\u653F\u7B56",cookie_prompt:"\u672C\u7F51\u7AD9\u4F7F\u7528cookies\u6765\u63D0\u4F9B\u670D\u52A1\u548C\u5206\u6790\u6D41\u91CF\u3002\u901A\u8FC7\u6D4F\u89C8\u672C\u7F51\u7AD9\uFF0C\u60A8\u63A5\u53D7\u6211\u4EEC\u7684${1}\u3002",cookies:"Cookies",reject_all:"\u62D2\u7EDD\u6240\u6709",theme_change_appearance:"\u6539\u53D8\u5916\u89C2",connection_lost:"\u8FDE\u63A5\u4E22\u5931",network_troubleshooting:"\u7F51\u7EDC\u6545\u969C\u6392\u9664",device_offline:"\u60A8\u7684\u8BBE\u5907\u53EF\u80FD\u5904\u4E8E\u79BB\u7EBF\u72B6\u6001\uFF0C\u6216\u8005 GitBook \u53EF\u80FD\u9047\u5230\u95EE\u9898\u3002",missing_content_title:"\u54CE\u5440\uFF0C\u6709\u4E9B\u4E1C\u897F\u4E22\u5931\u4E86\u3002",missing_content_description:"\u6211\u4EEC\u65E0\u6CD5\u627E\u5230\u539F\u59CB\u6765\u6E90\u4EE5\u663E\u793A\u6B64\u5185\u5BB9\u3002",table_of_contents:"\u76EE\u5F55",page_outline:"\u9875\u9762\u5927\u7EB2"},ja:{something_wrong:"\u4F55\u304B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",reload:"\u30EA\u30ED\u30FC\u30C9",let_us_know:"\u4F55\u304C\u8D77\u3053\u3063\u305F\u306E\u304B\u3092\u6559\u3048\u3066\u304F\u3060\u3055\u3044",we_have_been_notified:"\u79C1\u305F\u3061\u306E\u30C1\u30FC\u30E0\u306F\u901A\u77E5\u3092\u53D7\u3051\u307E\u3057\u305F\u3002\u3054\u5354\u529B\u3044\u305F\u3060\u3051\u308B\u5834\u5408\u306F\u3001\u4F55\u304C\u8D77\u3053\u3063\u305F\u304B\u3092\u4EE5\u4E0B\u306B\u3054\u8A18\u5165\u304F\u3060\u3055\u3044\u3002",search:"\u691C\u7D22",search_ask:"\u8CEA\u554F\u3059\u308B",search_placeholder:"\u691C\u7D22\u2026",search_placeholder_ask:"\u8CEA\u554F\u2026",search_blankslate:"\u30AD\u30FC\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u691C\u7D22",search_blankslate_ai:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u306F\u3001AI\u30E2\u30C7\u30EB\u306B\u3088\u3063\u3066\u884C\u308F\u308C\u307E\u3059\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u306E\u691C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u306E\u8CEA\u554F",search_blankslate_recommended_questions:"\u304A\u3059\u3059\u3081\u306E\u8CEA\u554F",search_blankslate_query:'"${1}" \u306B\u95A2\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F',search_answer_sources:"\u56DE\u7B54\u306F ${1} \u304B\u3089\u306E\u60C5\u5831\u3092\u5143\u306B\u3057\u3066\u3044\u307E\u3059",search_answer_copy:"\u56DE\u7B54\u3092\u30B3\u30D4\u30FC",search_answer_feedback_upvote:"\u5F79\u306B\u7ACB\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_downvote:"\u5F79\u306B\u7ACB\u305F\u306A\u304B\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_title:"\u30D5\u30A3\u30FC\u30C9\u30D0\u30C3\u30AF\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3059\uFF01",search_answer_feedback_details:"\u3053\u308C\u306B\u3088\u308A\u3001\u56DE\u7B54\u30A8\u30F3\u30B8\u30F3\u3092\u6539\u5584\u3067\u304D\u307E\u3059\u3002",search_answer_loading:"\u8CEA\u554F\u306B\u56DE\u7B54\u3059\u308B\u305F\u3081\u306B\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u5206\u6790\u3057\u3066\u3044\u307E\u3059\u2026",search_answer_loading_wait:"\u3053\u308C\u306B\u306F\u6570\u79D2\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002",search_answer_none_title:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",search_answer_none_details:"\u3053\u308C\u306F\u3001\u8CEA\u554F\u306B\u95A2\u9023\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u304C\u306A\u3044\u304B\u3001\u56DE\u7B54\u304C\u4FE1\u983C\u3067\u304D\u306A\u3044\u305F\u3081\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",search_answer_error_title:"\u30A8\u30E9\u30FC",search_answer_error_details:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"\u30DA\u30FC\u30B8\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",back_to_home:"\u30D5\u30ED\u30F3\u30C8\u30DA\u30FC\u30B8\u306B\u623B\u308B",page_not_found_long:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u304A\u63A2\u3057\u306E\u30DA\u30FC\u30B8\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",outline:"\u6982\u8981",last_modified:"\u6700\u7D42\u66F4\u65B0 ${1}",was_it_helpful:"\u3053\u306E\u30DA\u30FC\u30B8\u306F\u5F79\u306B\u7ACB\u3061\u307E\u3057\u305F\u304B\uFF1F",poor_content:"\u60AA\u3044\u5185\u5BB9",ok_content:"OK\u30B3\u30F3\u30C6\u30F3\u30C4",excellent_content:"\u512A\u308C\u305F\u5185\u5BB9",powered_by:"${1} \u4E0A\u3067\u52D5\u4F5C\u3057\u3066\u3044\u307E\u3059",previous:"\u524D",next:"\u6B21",export_pdf:"PDF\u306B\u51FA\u529B",copy_link:"\u30EA\u30F3\u30AF\u306E\u30B3\u30D4\u30FC",edit_on_github:"${1}\u3067\u7DE8\u96C6",page_articles_section:"\u3053\u306E\u30BB\u30AF\u30B7\u30E7\u30F3\u306E\u8A18\u4E8B\u306F\u6B21\u306E\u3068\u304A\u308A\u3067\u3059:",main:"\u4E00\u6B21",cookie_policy:"\u30AF\u30C3\u30AD\u30FC\u30DD\u30EA\u30B7\u30FC",cookie_prompt:"\u3053\u306E\u30B5\u30A4\u30C8\u3067\u306F\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u63D0\u4F9B\u3084\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u306E\u5206\u6790\u306E\u305F\u3081\u306B\u30AF\u30C3\u30AD\u30FC\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30B5\u30A4\u30C8\u3092\u95B2\u89A7\u3059\u308B\u3053\u3068\u3067\u3001\u304A\u5BA2\u69D8\u306F\u5F53\u793E\u306E${1}\u306B\u540C\u610F\u3057\u305F\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002",cookies:"\u30AF\u30C3\u30AD\u30FC",reject_all:"\u5168\u3066\u3092\u62D2\u5426\u3059\u308B",theme_change_appearance:"\u5916\u89B3\u3092\u5909\u66F4\u3059\u308B",connection_lost:"\u63A5\u7D9A\u5207\u65AD",network_troubleshooting:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u30C8\u30E9\u30D6\u30EB\u30B7\u30E5\u30FC\u30C6\u30A3\u30F3\u30B0",device_offline:"\u30C7\u30D0\u30A4\u30B9\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u3067\u3042\u308B\u304B\u3001GitBook\u3067\u554F\u984C\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",missing_content_title:"\u304A\u3063\u3068\u3001\u4F55\u304B\u304C\u5931\u308F\u308C\u3066\u3044\u307E\u3059\u3002",missing_content_description:"\u3053\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8868\u793A\u3059\u308B\u305F\u3081\u306E\u5143\u306E\u30BD\u30FC\u30B9\u3092\u898B\u3064\u3051\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",table_of_contents:"\u76EE\u6B21",page_outline:"\u30DA\u30FC\u30B8\u6982\u8981"}};function ce(){let{locale:e}=Ur.useContext(Lo),t=YI[e];return Ur.useCallback((o,...n)=>{let r=t[o]||YI.en[o],i=[],a=r;return n.forEach((s,l)=>{if(typeof s=="string")a=a.replace(`\${${l+1}}`,s);else{let[u,d]=a.split(`\${${l+1}}`);i.push(Ur.createElement(Ur.Fragment,{key:`string-${l}`},u)),i.push(Ur.createElement(Ur.Fragment,{key:`arg-${l}`},s)),a=d}}),i.length?Ur.createElement(Ur.Fragment,null,i,a):a},[e])}function td(){let e=ce();return ZI.createElement(qn,{kind:"default",title:e("missing_content_title"),details:e("missing_content_description")})}c();var lg=k(O());var lN=B.createInteractiveComponent(ct),$I=lg.forwardRef(function(t,o){let{active:n=!1,children:r,onPress:i,style:a,...s}=t,[,l]=I(uN);return lg.createElement(lN,{ref:o,...s,style:[a,n&&l.active],activeStyle:l.active,onMouseDown:u=>{u.preventDefault(),i()}},r)}),uN=D.create({active:e=>({borderRadius:e.radiuses.medium,paddingHorizontal:p.xsmall,backgroundColor:"rgba(35, 131, 226, 0.14)",marginHorizontal:-p.xsmall,zIndex:-1,cursor:"pointer"})});function QI(e){let{editor:t,node:o,children:n,attributes:r,isFocused:i}=e,[,a]=I(dN),{readOnly:s}=t,l=o.getFragmentByKey(Ti),{selection:u}=t.value,d=Bt(u)&&!!u.hasAnchorIn(l),m=i&&d,[f,g]=Zn.useState(!1),h=Bt(u)&&(f||m),y=Zn.useCallback(()=>{s||t.change(P=>{let R=o.getFragmentByKey(Ti);R&&(Bt(P.value.selection)?P.collapseToEndOf(R).focus():P.selectText(he.fromBlockRange(P.value.selection,P.value.document)).collapseToEndOf(R).focus())})},[s,t,o.key]),C=Zn.useCallback(()=>{s||t.change(P=>{let R=P.value.document.getDescendant(o.key);if(R&&R.isInline()){let _=R.getFragmentByKey(Ti);_&&Bt(P.value.selection)&&P.value.selection.hasEdgeIn(_)&&P.collapseToEndOf(R)}})},[s,t,o.key]);Zn.useEffect(()=>{s||(h?y():C())},[h,s,y,C]),Zn.useEffect(()=>{s||!d&&f&&g(!1)},[d,f,s]);let x=()=>{y(),g(!0)},w=Zn.useCallback(()=>{g(!1)},[]);return Zn.createElement(Km.Provider,{value:w},Zn.createElement(Di,{closeOnClick:!1,closeOnEsc:!0,closeOnScroll:!1,closeOnClickInNestedPortals:!1,closeOnOutsideClick:!0,opened:h,anchor:({ref:P})=>Zn.createElement($I,{ref:P,style:a.annotationText,...r,onPress:x,active:h},n)},Zn.createElement(Ex,{node:o,editor:t})))}var dN=D.create({annotationText:e=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:2,textDecorationColor:e.colors.text.muted})});c();var kv=k(Vr());var JI={onKeyDown:(e,t,o)=>{if(!vn(t.value.selection)&&((0,kv.default)("mod+enter",e)||(0,kv.default)("esc",e))){let{value:n}=t,{startBlock:r,document:i}=n;if(!r)return;let a=i.getFragmentParent(r.key);if((a==null?void 0:a.object)!=="fragment"||a.type!==Ti)return;let s=i.getParent(a.key);return s?(t.collapseToEndOf(s),t):void 0}}};c();var fo=k(O());z();function eR(e){let{editor:t,node:o,children:n}=e,{readOnly:r}=t,i=o.data.toFrozenObject(),a=Ye(),s=ep(i.syntax||"text"),l=typeof i.title=="string",u=fo.useRef(null),d=se(u),m=fo.useRef(null),f=se(m),g=(C,x)=>{t.change(w=>{w.insertDataByKey(o.key,["title"],C)})},h=()=>Kt.getCodeText(o),y=pN(o.key);return fo.createElement(ve,{...e,palette:y},fo.createElement(Jw,{overflow:i.overflow||RS,lineNumbers:!!i.lineNumbers,header:l?fo.createElement(mN,{title:i.title,isEditable:!r,onTitleChange:g}):null,showToolbar:d.opened||f.opened,toolbar:a?null:fo.createElement(fo.Fragment,null,r?null:fo.createElement(A,{ref:u,active:d.opened,kind:"secondary",size:"small",style:p.Margin.xsmallRight,rightIcon:S.ChevronDown,onPress:()=>{d.open(tR(t,o.key))}},s.title),fo.createElement(Um,{kind:"secondary",size:"small",content:h}),r?null:fo.createElement(A,{ref:m,icon:S.MoreVertical,kind:"secondary",size:"small",style:p.Margin.xsmallLeft,title:"More options",onPress:()=>{f.open(y)}}))},n))}function mN(e){let{title:t,isEditable:o,onTitleChange:n}=e,[r,i]=fo.useState(t),[a,s]=I(L);fo.useEffect(()=>{i(t)},[t]);let l=d=>{n(r||"",d)},u=[s.Body,s.textMuted];return fo.createElement(Gc,{style:[b.directionRow,b.alignCenter,p.Padding.mediumLeft]},o?fo.createElement(Lr,{value:r,placeholder:"Enter a filename",placeholderTextColor:a.colors.text.muted,onChangeText:d=>i(d),style:u,onBlur:l}):fo.createElement(N,{style:u},t))}function pN(e){let t=Ga(),o=Kr(t,e),n=r=>{let i=t.value.document.assertBlock(r),a=i.data.toFrozenObject(),s=typeof a.title=="string";return[{key:"code",commands:[{key:"syntax",title:"Set syntax\u2026",icon:S.Code,descendant:()=>tR(t,i.key)}]},{key:"code-options",commands:[{key:"with-line-numbers",icon:S.CodeLineNumbers,type:2,enabled:!!a.lineNumbers,title:"With line numbers",trigger:()=>(t.change(l=>{a.lineNumbers?l.removeDataPathByKey(i.key,["lineNumbers"]):l.setDataByKey(i.key,["lineNumbers"],!0)}),nt(t,i.key,n(i.key)))},{key:"with-title",icon:S.CodeCaption,type:2,enabled:s,title:"With caption",trigger:()=>(t.change(l=>{s?l.removeDataPathByKey(i.key,["title"]):l.insertDataByKey(i.key,["title"],"")}),nt(t,i.key,n(i.key)))},{key:"with-wrap",icon:S.CodeWrap,type:2,enabled:a.overflow==="wrap",title:"Wrap code",trigger:()=>(t.change(l=>{a.overflow==="wrap"?l.removeDataPathByKey(i.key,["overflow"]):l.setDataByKey(i.key,["overflow"],"wrap")}),nt(t,i.key,n(i.key)))}]},...o?[o]:[]]};return nt(t,e,n(e))}function tR(e,t){let o=e.value.document.assertBlock(t),n=o.data.get("syntax");return oe({search:"Select a syntax\u2026",groups:[{key:"syntaxes",commands:t1().map(r=>({type:1,key:r.key,selected:n===r.key,title:r.title,trigger:()=>{e.change(i=>{i.setDataByKey(o.key,["syntax"],r.key)})}}))}]})}c();var oR=k(O());function nR(e){let{node:t,parent:o,children:n,editor:r}=e,{diff:i,highlighted:a}=t.data.toFrozenObject(),s=()=>{r.change(l=>{l.setDataByKey(t.key,["highlighted"],!a)})};return oR.createElement($w,{number:o.getChildIndex(t.key)+1,highlighting:i==="added"||i==="deleted"||i==="modified"?i:a?"highlighted":void 0,onPressGutter:r.readOnly?void 0:s},n)}c();var nc=k(Vr());var fN=(0,nc.isKeyHotkey)("mod+a"),gN=(0,nc.isKeyHotkey)("shift+tab"),hN=(0,nc.isKeyHotkey)("tab"),yN=(0,nc.isKeyHotkey)("mod+enter"),vN=(0,nc.isKeyHotkey)("enter"),bN=(0,nc.isKeyHotkey)("backspace"),rR={onKeyDown:CN,onPaste:SN};function CN(e,t,o){let{value:n}=t;if(vn(n.selection))return;let r=Kt.getCurrentCode(n);if(r){if(fN(e))return wN(r,e,t,o);if(gN(e))return xN(r,e,t,o);if(hN(e))return kN(r,e,t,o);if(yN(e))return _N(r,e,t,o);if(vN(e))return ON(r,e,t,o);if(bN(e))return IN(r,e,t,o)}}function SN(e,t,o){let{value:n}=t;if(vn(n.selection))return;let r=Kt.getCurrentCode(t.value),{endBlock:i}=n;if(!r||!i||!r.hasDescendant(i.key))return;let a=Hc(e),s;a.type==="fragment"&&a.fragment?s=a.fragment.getTexts().map(d=>d.text).join(`
`):s=a.text||"";let l=Kt.createCodeBlock(s).blockNodes,u=Tc.create({nodes:l});return t.insertDocument(u)}function wN(e,t,o,n){t.preventDefault();let r=e.getFirstText(),i=e.getLastText();if(!(!r||!i))return o.collapseToStartOf(r).extendToEndOf(i)}function kN(e,t,o,n){let{value:r}=o;t.preventDefault(),t.stopPropagation();let{isCollapsed:i}=r,a=Kt.getIndent(Kt.getCodeText(e));return i?o.insertText(a).focus():Kt.indentLines(o,a)}function xN(e,t,o,n){t.preventDefault(),t.stopPropagation();let r=Kt.getIndent(Kt.getCodeText(e));return Kt.dedentLines(o,r)}function ON(e,t,o,n){let{value:r}=o;if(!r.isCollapsed)return;t.preventDefault();let{startBlock:i}=r;if(!i)return;let a=i.text,s=Kt.getIndent(a,"");return o.splitBlock().insertText(s).focus()}function _N(e,t,o,n){let{value:r}=o;if(r.isCollapsed)return t.preventDefault(),St(o,e),o}function IN(e,t,o,n){let{value:r}=o;if(r.isExpanded)return;let{startOffset:i,startText:a}=r,s=r.startBlock;if(!s)return;let l=Kt.getIndent(Kt.getCodeText(e));if(s.text.slice(0,i).endsWith(l))return t.preventDefault(),o.deleteBackward(l.length).focus();let d=i===0&&e.getFirstText()===a,m=e.nodes.size===1&&s.text.length===0;if(d&&m)return t.preventDefault(),o.setBlocks(me,{normalize:!1}).unwrapNodeByKey(s.key)}c();var Ki=k(O());z();function ug(e){let{url:t,readOnly:o}=e,[n]=zp(t),{data:r}=n,i=px(o?null:t),a=i?Ki.createElement(RN,{...i}):null;if(!r)return Ki.createElement(Yn,null);if(r.type==="rich"&&r.html){let s=Ki.createElement("div",{dangerouslySetInnerHTML:{__html:r.html}});return a?Ki.createElement(v,null,s,Ki.createElement(v,{style:PN.overlayInstallButton},a)):s}return Ki.createElement(Fi,{href:t,title:r.title,details:r.site,icon:r.icon?Qe(zn,{source:{uri:r.icon}}):void 0,onPress:s=>{s.preventDefault(),ya(t)},buttons:a?[a]:[]})}function RN(e){let{integration:t}=e,{navigate:o}=_e(),{logAnalyticsEvent:n}=Ki.useContext(ne),r=i=>{i.stopPropagation(),i.preventDefault(),n({type:"edit_open_integration",integration:t.name,reason:"embed"}),o({overlay:{type:"integrations",integration:t.name}})};return Ki.createElement(A,{kind:"secondary",size:"medium",icon:Qe($c,{integration:t}),title:`Install the ${t.title} integration to supercharge this block`,tooltipPreferredPlacement:"left",onPress:r},"Install ",t.title)}var PN=X.create({overlayInstallButton:{position:"absolute",bottom:p.medium,right:p.medium}});c();var So=k(O());c();var ss=k(O());z();function cs(e){let{node:t,editor:o,isSelected:n}=e,{readOnly:r}=o,[,i]=I(L),a=B.useInteractiveState(),s=t.fragments.get(PS),l=s==null?void 0:s.isEmpty;return s?(n||a.hovered)&&!r||!l?ss.createElement(v,{style:[iR.editableCaption,p.Padding.smallTop],...a.events},l?ss.createElement(v,{style:[X.absoluteFill,b.alignCenter,b.justifyContentCenter,p.Padding.smallTop]},ss.createElement(N,{style:[i.Italic,i.Body,i.textMuted]},"Write a caption")):null,ss.createElement(Gn.Provider,{value:"caption"},ss.createElement(Za.Provider,{value:"center"},ss.createElement(kn,{fragment:"caption"})))):r?null:ss.createElement(v,{style:[p.Padding.smallTop,iR.blankPlaceHolder],...a.events}):null}var iR=X.create({editableCaption:{position:"relative",textAlign:"center"},blankPlaceHolder:{height:p.small+Vm.xsmall}});c();var No=k(O());c();var ls=k(O());function dg(e){let{children:t}=e,[o,n]=ls.useState(!1);return ls.useEffect(()=>{n(!0)},[]),o?ls.createElement(ls.Fragment,null,t):null}c();var mg=k(O());function aR(e){let{children:t,statusCode:o}=e,n=R1();return n.staticContext&&(n.staticContext.statusCode=o),mg.createElement(mg.Fragment,null,t)}var pg=No.forwardRef(function(t,o){let{data:n,readOnly:r,onDataChange:i}=t,{integrationBlocksRemote:a}=No.useContext(ne),s=No.useRef(null),{color:l}=Ei(),u={integrationId:n.integration,componentId:n.block,props:n.props,action:n.action,context:{type:"document",editable:!r,theme:l}},[d,m]=K1(async f=>{var g;return(g=s.current)==null?void 0:g.dispatchAction(f)});return No.useImperativeHandle(o,()=>({getPaletteGroups:()=>{let{result:f}=a.readCacheState(u);return f&&f.element.type==="block"?d(f.element):[]}})),No.createElement(No.Fragment,null,m,No.createElement(No.Suspense,{fallback:No.createElement(Yn,null)},No.createElement(dg,null,No.createElement(By,{ref:s,mode:"block",remote:a,input:u,security:{firstPartyDomains:[Da.integrations.domain]},onPropsChange:f=>{r||i({...n,action:void 0,props:f})}}))))});function sR(e){let{node:t,editor:o}=e,{readOnly:n}=o,r=t.data.toFrozenObject(),{getIntegrationsBlocks:i}=So.useContext(ne),a=i(),s=So.useMemo(()=>{let d=Wc(a,r.url);return d?Ac.createIntegrationBlockDataForLinkUnfurl(d.integrationKey,d.block.id,r.url):null},[a,r.url]),l=Kr(o,t.key),u=()=>nt(o,t.key,l?[l]:[]);return s?So.createElement(ve,{palette:u,...e},So.createElement(Vt,{...e},So.createElement(So.Suspense,{fallback:So.createElement(Yn,null)},So.createElement(pg,{data:s,readOnly:n,onDataChange:d=>{o.change(m=>{m.setNodeByKey(t.key,{type:Mi,data:d})})}})))):So.createElement(ve,{palette:u,...e},So.createElement(Vt,{...e},So.createElement(So.Suspense,{fallback:So.createElement(Yn,null)},So.createElement(ug,{url:r.url,readOnly:n}))),So.createElement(cs,{...e}))}c();var qt=k(O());c();var _l=k(O());function cR(e){let{integrationName:t}=e,[{result:o}]=hp([Lm(t)]);return o?_l.createElement(MN,{integration:o}):_l.createElement(qn,{kind:"default",title:`Integration ${t} no longer exist or has been unpublished.`})}function MN(e){let{integration:t}=e,o=jt($c,{integration:t},[t]),{navigate:n}=_e(),{logAnalyticsEvent:r}=_l.useContext(ne);return _l.createElement(qn,{kind:"default",icon:o,title:`Integration ${t.title} is not configured. Install it to get started.`,actions:[{label:"Install",onPress:()=>{r({type:"edit_open_integration",integration:t.name,reason:"empty"}),n({overlay:{type:"integrations",integration:t.name}})}}]})}function lR(e){let{node:t,editor:o}=e,{readOnly:n}=o,r=qt.useRef(null),{getIntegrationsBlocks:i}=qt.useContext(ne),{navigate:a}=_e(),s=i(),l=t.data.toFrozenObject(),u=Kr(o,t.key),d=()=>{var f;return nt(o,t.key,[...((f=r==null?void 0:r.current)==null?void 0:f.getPaletteGroups())||[],{key:"integration",commands:()=>{let[{result:g}]=fp([Lm(l.integration)]);return g?[{key:"integration.settings",icon:Qe($c,{integration:g}),title:`Configure ${g.title}`,trigger:()=>{a({overlay:{type:"integrations",integration:g.name}})}}]:[]}},...u?[u]:[]])};return qt.useMemo(()=>mw(s,l.integration,l.block),[s,l.integration,l.block])?qt.createElement(ve,{...e,palette:d},qt.createElement(Vt,{...e},qt.createElement(qt.Suspense,{fallback:qt.createElement(Yn,null)},qt.createElement(pg,{ref:r,data:l,readOnly:n,onDataChange:f=>{o.change(g=>{g.setNodeByKey(t.key,{data:f})})}})))):qt.createElement(ve,{...e,palette:d},qt.createElement(Vt,{...e},qt.createElement(qt.Suspense,{fallback:qt.createElement(Yn,null)},l.url?qt.createElement(ug,{url:l.url,readOnly:n}):n?qt.createElement(td,null):qt.createElement(cR,{integrationName:l.integration}))))}c();var fg=k(Vr()),uR=k(O());function dR(e){return uR.useMemo(()=>({onKeyDown:(t,o)=>{let{value:n}=o;if(!n.isCollapsed||!(0,fg.default)("enter",t))return;let{startBlock:r,selection:i}=n;if(!he.isTextRange(i)||!r||r.type!==me||!i.isAtEndOf(r))return;let{text:a}=r;if(!Dr(a))return;let s=n.document.getParent(r.key);if(!s||!Me(s,Dn))return;let l=rm(a,{sortQueryParameters:!1}),u=TN(l,e);o.replaceNodeByKey(r.key,u).collapseToStartOf(u)}}),[e])}var mR={onKeyDown:(e,t,o)=>{if((0,fg.default)("enter",e)||(0,fg.default)("shift+enter",e)){let{value:n}=t,{startBlock:r,document:i}=n;if(!r||r.type!==me)return;let a=i.getFragmentParent(r.key);if((a==null?void 0:a.object)!=="fragment")return;let s=i.getParent(a.key);if(!s||!s.isBlock()||![Dn,ri,sa,aa].includes(s.type))return;let l=s.type===ri?i.getParent(s.key):s;return St(t,l),t}}};function TN(e,t){let o=t(),n=Wc(o,e);return n?Ac.createIntegrationBlockForLinkUnfurl(n.integrationKey,n.block.id,e):bm.createEmbedBlock(e)}c();var xv=k(O());c();var Il=k(O());function pR(e){let{mark:t,node:o,offset:n,attributes:r,children:i,editor:a}=e,{value:s}=t.data.toObject(),l=Il.useRef(null),u=ft(s),d=se(l);return Il.useEffect(()=>{if(!d.opened&&a.value.isFocused){let m=f=>{a.change(g=>{let h=he.create({anchorKey:o.key,anchorOffset:n,focusKey:o.key,focusOffset:n+u.current.length+1});g.insertInlineAtRange(h,Cm.createEmoji(f)).focus()})};d.open(Ha(nl(m,{withSearch:!1}),s))}else d.typeQuery(s);return()=>{d.close()}},[d,s]),Il.createElement(ct,{ref:l,...r},i)}c();var cd=k(O());function fR(e){let{editor:t,node:o,parent:n}=e,r=cd.useRef(null),i=se(r),a=Qf(n.object==="block"?n:null),s=kp(()=>{i.open(nl(l=>{t.change(u=>{u.setNodeByKey(o.key,{data:{code:l}})})}))});return cd.createElement(xl,{ref:r,...e,onPress:t.readOnly?void 0:s},cd.createElement(Co,{code:o.data.get("code"),size:a}))}var gR="emojiContext",EN=/(^|\s):(\w*)$/,hR={renderMark:NN,renderNode:DN,decorateValue:LN};function LN(e){let{selection:t}=e,o=AN(e),n=[];return he.isTextRange(t)&&o!==null&&n.push(he.create({anchorKey:t.startKey,anchorOffset:t.startOffset-o.length-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:gR,data:{value:o}}],isAtomic:!0})),n}function NN(e){let{mark:t}=e;switch(t.type){case gR:return xv.createElement(pR,{...e})}}function DN(e){let{node:t}=e;switch(t.type){case Ls:return xv.createElement(fR,{...e})}}function AN(e){if(!e.isCollapsed)return null;let{document:t,startText:o,startBlock:n,selection:r}=e;if(!he.isTextRange(r)||!o||!n||!da({document:t,block:n},Ls))return null;let{startOffset:i}=r,a=o.text.slice(0,i),s=EN.exec(a);return s==null?null:s[2]}c();var gt=k(O());z();function BN(e,t,o){for(let[n,r]of e.entries())if(r===o){let i=t.getNode(n);return i?{key:n,id:r,node:i}:null}}function yR(e){let t=B.useInteractiveState(),{node:o,isFocused:n,editor:r}=e,[,i]=I(zN),[,a]=I(L),{sections:s,selected:l}=gt.useContext(Gr),u=Ye(),d=gt.useRef(""),[m,f]=gt.useState("unset");gt.useEffect(()=>{d.current="",f("unset")},[l]);let g=l&&s.get(o.key)===l,h=gt.useMemo(()=>!g&&!!BN(s,o,l),[g,s,o,l]);g&&(d.current=l);let{selection:y}=r.value,C=he.isTextRange(y)&&y.hasEdgeIn(ma.getBodyFragment(o)),x=n&&he.isTextRange(y)&&!y.hasFocusInFragmentOf(o),w=u||(m==="unset"?g||h||l===d.current:m==="expanded"),P=w?S.ChevronDown:S.ChevronRight,R=()=>{w&&C&&r.change(tt=>{tt.collapseToStartOf(ma.getTitleFragment(o))}),f(w?"collapsed":"expanded")},{anchoredBlockId:_,onAnchoredBlockPress:E,anchorElement:M,anchoredBlockInteractiveState:W}=ag(o,{accessibilityLabel:"Direct link to expandable block",onBlockPress:R}),G=gt.useId(),V={id:G,controls:{accessibilityRole:"button",accessibilityExpanded:w,accessibilityControls:`expandable-body-${G}`,accessibilityLabelledBy:`expandable-title-${G}`},chevron:{accessibilityRole:"presentation"},body:{accessibilityRole:"region",accessibilityLabelledBy:`expandable-title-${G}`}},F=o.fragments.get(ca),Y=F==null?void 0:F.nodes.first(),$=jr(Y,F||o),te=T.ICON_M,fe=$.paddingTop+(xn(Y)-te)/2;return gt.createElement(ve,{...e},gt.createElement(Vt,{...e,isFocused:x},gt.createElement(v,{...t.events,style:[i.expandable,t.active&&i.expandableActive],nativeID:_},gt.createElement(v,{style:[b.directionRow,p.Padding.mediumRight],...W.events},gt.createElement(B.TouchableOpacity,{onPress:E,style:[p.Padding.mediumHorizontal,b.directionRow,b.justifyContentCenter,{paddingTop:fe}],...V.controls},gt.createElement(P,{size:te,style:[t.active?a.primary:a.textMuted],...V.chevron})),gt.createElement(v,{style:[b.flex1,{paddingTop:$.paddingTop,paddingBottom:w?p.small:$.paddingBottom}],nativeID:`expandable-title-${G}`},gt.createElement(Gn.Provider,{value:"expandableTitle"},gt.createElement(kn,{fragment:ca}))),gt.createElement(v,{style:{paddingTop:fe}},M)),gt.createElement(v,{style:[i.expandableBody,!w&&i.hidden],nativeID:`expandable-body-${G}`,...V.body},gt.createElement(kn,{fragment:Es})))))}var zN=D.create({hidden:{visibility:"hidden",height:0,padding:0},expandable:e=>({breakInside:"avoid",borderWidth:1,borderColor:e.colors.border.main,borderRadius:e.radiuses.large}),expandableActive:e=>({borderColor:e.colors.primary.main}),expandableBody:{padding:p.medium,paddingLeft:p.medium+T.ICON_M+p.medium,paddingTop:0}});c();var Ov=k(Vr());var vR={onKeyDown:WN};function WN(e,t){if(!vn(t.value.selection)){if((0,Ov.default)("mod+enter",e))return qN(e,t);if((0,Ov.default)("enter",e))return VN(e,t)}}function VN(e,t){var n;let o=ma.getCurrentExpandable(t.value);if(o&&((n=o.fragment)==null?void 0:n.type)===ca)return t.collapseToStartOf(o.expandable.getFragmentByKey(Es)).focus()}function qN(e,t){let{value:o}=t,n=ma.getCurrentExpandable(t.value);if(!(!n||!o.isCollapsed))return e.preventDefault(),St(t,n.expandable),t}c();c();var _R=k(CR()),Lt=k(O());z();c();var Qn=k(O());c();var ld=k(O());z();function kR(e){return oe({search:"Pick a color\u2026",groups:[{key:"text",title:"Color",commands:Tp.map(t=>SR(e,t,!1))},{key:"background",title:"Background",commands:Ep.map(t=>SR(e,t,!0))}]})}function SR(e,t,o){let n=e.value.activeMarks.find(a=>a.type===pu),r=o?"background":"text",i=n&&n.data.get(r)===t.key;return{key:`${o?"background_":"foreground_"}${t.key}`,title:t.title,type:1,selected:!!i,icon:({size:a})=>o?ld.createElement(wR,{size:a,backgroundColor:t.color,color:H.BLACK}):ld.createElement(wR,{size:a,backgroundColor:H.WHITE,color:t.color}),trigger:()=>{e.change(a=>{n&&a.removeMark(n),i||a.addMark({type:pu,data:{background:"default",text:"default",...n?n.data.toObject():{},[r]:t.key}})})}}}function wR(e){let{size:t=T.ICON_S,color:o,backgroundColor:n}=e;return ld.createElement(v,{style:[b.directionRow,b.alignCenter,b.justifyContentCenter,{width:t+2,height:t+2,borderRadius:T.RADIUS_M,backgroundColor:n}]},ld.createElement(S.Type,{style:{color:o,fontSize:t*.9}}))}c();var $n=({type:e,editor:t})=>()=>{t.change(o=>{o.toggleMark(e),o.focus()})},rc=({palette:e,editor:t,contentReferenceContext:o,isInLink:n,insertAtRange:r})=>()=>{if(n){t.change(a=>{a.unwrapInline({type:To}).focus()});return}t.change(a=>{cg(a)});let i=on(a=>{t.change(s=>{r?Ns.insertContentReferenceAtRange(s,a,r):Ns.insertContentReference(s,a)})},{...o,document:t.value.document});return e.open(i),i},hg=({editor:e})=>()=>{e.change(t=>{vm.wrapWithAnnotation(t),t.focus()})};function xR(e){let{value:t,editor:o,palette:n}=e,{contentReferenceContext:r}=Qn.useContext(ne),i=t.activeMarks.map(g=>g.type),{startBlock:a,document:s}=t;cr(a);let l=t.hasInline(To),d=!(a.type===Ri),m=()=>{o.change(g=>{cg(g)}),n.open(kR(o))},f=()=>{o.change(g=>{g.removeAllMarks().focus()})};return Qn.createElement(Qn.Fragment,null,d&&!hm(a)?Qn.createElement(A,{size:"small",icon:S.Bold,active:i.has(Cn),onPress:$n({type:Cn,editor:o}),title:"*Bold*",tooltipBadge:Vs(Fe.EDITOR_BOLD),style:[p.Margin.smallRight],kind:"default_inverted"}):null,d?Qn.createElement(A,{size:"small",icon:S.Italic,active:i.has(Sn),onPress:$n({type:Sn,editor:o}),title:"_Italic_",tooltipBadge:Vs(Fe.EDITOR_ITALIC),style:[p.Margin.smallRight],kind:"default_inverted"}):null,d?Qn.createElement(A,{size:"small",icon:S.Strikethrough,active:i.has(dr),onPress:$n({type:dr,editor:o}),title:"~Strikethrough~",tooltipBadge:Vs(Fe.EDITOR_STRIKETHROUGH),style:[p.Margin.smallRight],kind:"default_inverted"}):null,d?Qn.createElement(A,{size:"small",icon:S.Code,active:i.has(io),onPress:$n({type:io,editor:o}),title:"`Code`",tooltipBadge:Vs(Fe.EDITOR_CODE),style:[p.Margin.smallRight],kind:"default_inverted"}):null,da({document:s,block:a},To)?Qn.createElement(A,{size:"small",icon:S.Link,onPress:rc({palette:n,editor:o,contentReferenceContext:r,isInLink:l}),active:l,title:"Link",tooltipBadge:Vs(Fe.EDITOR_LINK),style:[p.Margin.smallRight],kind:"default_inverted"}):null,da({document:s,block:a},dm)&&vm.isSelectionAnnotable(t)?Qn.createElement(A,{size:"small",icon:S.Annotation,onPress:hg({editor:o}),active:l,title:"Annotate",tooltipBadge:Vs(Fe.EDITOR_ANNOTATION),style:[d?p.Margin.smallRight:null],kind:"default_inverted"}):null,d?Qn.createElement(A,{size:"small",title:"Color",icon:S.Highlight,onPress:m,kind:"default_inverted"}):null,i.isEmpty()?null:Qn.createElement(A,{size:"small",icon:S.X,onPress:f,title:"Clear formatting",kind:"default_inverted"}))}function IR(e){let{value:t}=e,{selection:o}=t;return Bt(o)?Lt.createElement(FN,{selection:o,value:t}):null}function FN(e){let{value:t,selection:o}=e,n=Ga(),r=Lt.useRef(null),{contentReferenceContext:i}=Lt.useContext(ne),a=se(r,{onClose:()=>{n.change(w=>{KI(w),w.focus()})}}),s=dy(200),[l,u]=Lt.useState(null),d=ft(l),m=Lt.useRef(null);Lt.useEffect(()=>(s(()=>{a.opened||(m.current=o,u(OR(n)))}),()=>{s.cancel()}),[o]);let f=!t.isInVoid,g=t.hasInline(To),h=!hm(t.startBlock);yr(f?{...h?{[Fe.EDITOR_BOLD]:$n({type:Cn,editor:n})}:{},[Fe.EDITOR_ITALIC]:$n({type:Sn,editor:n}),[Fe.EDITOR_CODE]:$n({type:io,editor:n}),[Fe.EDITOR_STRIKETHROUGH]:$n({type:dr,editor:n}),[Fe.EDITOR_LINK]:rc({palette:a,editor:n,contentReferenceContext:i,isInLink:g}),[Fe.EDITOR_ANNOTATION]:hg({editor:n})}:{},"editor-selection-expanded",[i,h,n,g,f,a]),yr(f?{...h?{[Fe.EDITOR_BOLD]:$n({type:Cn,editor:n})}:{},[Fe.EDITOR_ITALIC]:$n({type:Sn,editor:n}),[Fe.EDITOR_CODE]:$n({type:io,editor:n}),[Fe.EDITOR_STRIKETHROUGH]:$n({type:dr,editor:n})}:{},"editor-selection-collapsed",[h,n,f]);let y=!!f,C=y&&l&&m.current&&!m.current.hasMoved(o),x=dy(200);return Lt.useEffect(()=>{if(!y)return;let w=()=>{a.opened||(d.current&&u(null),x(()=>{u(OR(n))}))};return window.addEventListener("scroll",w,!0),()=>{window.removeEventListener("scroll",w,!0)}},[a,y,d,x]),C?Lt.createElement(Wn,null,Lt.createElement(v,{ref:r,pointerEvents:"none",style:[HN.formattingMenuWrapper,l],dataSet:{"hide-on-drag":!0}},a.opened?null:Lt.createElement(GN,{editor:n,palette:a}))):null}function GN(e){let{editor:t,palette:o}=e,{value:n,value:{selection:r}}=t,i=Lt.useRef(null),a=B.useInteractiveState(),[s,l]=Lt.useState(!1),{width:u,height:d}=FC();Lt.useLayoutEffect(()=>{i.current&&r.isExpanded&&i.current.updatePosition()},[u,d]);let{startOffset:m=0,endOffset:f=0}=he.isTextRange(r)?r:{};return Lt.useLayoutEffect(()=>{let h=setInterval(()=>{l(!0)},200);return()=>{clearInterval(h),l(!1)}},[m,f]),r.isFocused&&!r.isCollapsed&&s||a.hovered?Lt.createElement(tn,{ref:i,kind:"tooltip",preferredPlacement:"top"},Lt.createElement(v,{style:[b.directionRow,p.Padding.xsmall],...a.events},r.isCollapsed?null:Lt.createElement(xR,{value:n,editor:t,palette:o}))):null}function OR(e){let t=window.getSelection();if(!t||t.rangeCount<1)return null;let o=t.getRangeAt(0),n=_R.default.getBoundingClientRect(o);if(!n)return null;let r=t.anchorNode;if(!r||!r1(e,r))return null;let i=r?RR(r):null,a=15,s={top:n.top+window.pageYOffset,left:n.left+window.scrollX,width:n.width,height:n.height};if(s.width<a&&(s.left-=(a-s.width)/2,s.width=a),i){let l=i.getBoundingClientRect();if(s.top<l.top||s.top+s.height>l.bottom)return null}return s}function RR(e){if(e instanceof HTMLElement){let t=getComputedStyle(e,null);if(t.getPropertyValue("overflow")==="auto"||t.getPropertyValue("overflow")==="scroll"||t.getPropertyValue("overflow-y")==="auto"||t.getPropertyValue("overflow-y")==="scroll")return e}return e.parentNode?RR(e.parentNode):null}var HN=X.create({formattingMenuWrapper:{position:"absolute",zIndex:100}});c();var MR=k(Vr()),TR=k(O());c();var Rl=k(O());function PR(e){let{mark:t,node:o,offset:n,attributes:r,children:i,editor:a}=e,{value:s}=t.data.toObject(),l=Rl.useRef(null),u=xt(),d=se(l,{onClose:()=>{d.close(),!u.isOpen()&&a.change(f=>f.focus())}}),{contentReferenceContext:m}=Rl.useContext(ne);return wp(()=>{if(!d.opened&&a.value.isFocused){let f=he.create({anchorKey:o.key,anchorOffset:n,focusKey:o.key,focusOffset:n+1});d.open(oe({groups:[{key:"inline-controls",commands:s.map(g=>{switch(g){case Ba:return{key:"image",title:"Image",icon:S.Image,trigger:()=>{a.change(h=>h.blur()),u.prompt({title:"Select image",accept:"images",acceptURL:!0}).then(h=>{a.change(y=>{h.forEach(C=>{y.insertInlineAtRange(f,vo.createImageInline(C))}),y.focus()})})}};case Ls:return{key:"emoji",title:"Emoji",icon:S.EmojiReaction,trigger:()=>nl(h=>{a.change(y=>{y.insertInlineAtRange(f,Cm.createEmoji(h)).focus()})})};case To:return{key:"link",title:"Link",icon:S.Link,trigger:rc({palette:d,editor:a,contentReferenceContext:m,isInLink:!1,insertAtRange:f})};case Ec:return{key:"math",title:"Math & TeX",icon:S.MathTeX,trigger:()=>{a.change(h=>{h.insertInlineAtRange(f,Ds.createMathInline()).focus()})}}}})}]}))}},150),Rl.createElement(ct,{ref:l,...r},i)}var ER="inlineControlsContext",XN=/(^|\s)\/$/,LR={renderMark:jN,decorateValue:KN,onKeyDown:(e,t,o)=>{if(NR(o.value)&&(0,MR.default)("esc",e))return t}};function KN(e){let{selection:t}=e,o=NR(e),n=[];return Bt(t)&&o!==null&&n.push(he.create({anchorKey:t.startKey,anchorOffset:t.startOffset-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:ER,data:{value:o}}],isAtomic:!0})),n}function jN(e){let{mark:t}=e;switch(t.type){case ER:return TR.createElement(PR,{...e})}}function NR(e){if(!e.isCollapsed)return null;let{startText:t,startBlock:o,selection:n}=e;if(!Bt(n)||!t||!o)return null;let{startOffset:r}=n,i=t.text.slice(0,r);if(XN.exec(i)==null)return null;let s=[Ba,Ls,To,Ec].filter(l=>da({document:e.document,block:o},l));return s.length===0?null:s}c();var ji=k(O());z();c();var wo=k(O());z();function DR(e){let{resolved:t,node:o,editor:n,children:r}=e,{contentReferenceContext:i}=wo.useContext(ne),a=wo.useRef(null),s=wo.useRef(null),[l,u]=wo.useState(!1),[d,m]=wo.useState(!1),[,f]=I(AR),g=l||d,h=B.useInteractiveState({hoverDelay:500,onHoverIn:()=>{u(!0)},onHoverOut:()=>{u(!1)}}),y=B.useInteractiveState({onHoverIn:()=>{m(!0)},onHoverOut:()=>{m(!1)}});Va({opened:g,closeOnClick:!1,closeOnScroll:!0,onClose:()=>{u(!1),m(!1)}},s);let C=se(a),x=()=>{n.change(P=>{P.unwrapInlineByKey(o.key)})},w=()=>{C.open(on(P=>{n.change(R=>{R.setDataByKey(o.key,["ref"],P)})},{...i,document:n.value.document}))};return wo.createElement(Di,{ref:s,anchorRef:a,wrapper:Wr,opened:g,updateOnScroll:!1,anchor:({ref:P})=>r(P,{...h.events,style:C.opened?f.linkBeingEdited:null})},wo.createElement(v,{style:[X.absoluteFill],...y.events},wo.createElement(zw,{kind:"tooltip",preferredAlignment:"start"},wo.createElement(v,null,wo.createElement(UN,{resolved:t,onPressEdit:w,onPressRemove:x})))))}function UN(e){let{resolved:t,onPressEdit:o,onPressRemove:n}=e,r=t.icon||t.secondaryIcon,[,i]=I(AR);return wo.createElement(v,{style:[b.directionRow,b.alignCenter,p.Padding.xsmall]},wo.createElement(v,{style:[i.buttonWrapper,b.directionRow]},wo.createElement(A,{title:"Edit link",icon:r,size:"small",kind:"default_inverted",onPress:o,style:b.flex1},t.title)),wo.createElement(v,null,wo.createElement(A,{title:"Remove link",kind:"default_inverted",icon:S.Trashcan,size:"small",onPress:n})))}var AR=D.create({buttonWrapper:{maxWidth:200},linkBeingEdited:e=>({backgroundColor:e.colors.background.standout})});var YN=B.createInteractiveComponent(ct);function zR(e){return ji.createElement(ji.Suspense,{fallback:ji.createElement(WR,{...e,resolved:null})},ji.createElement(ZN,{...e}))}function ZN(e){let{node:t}=e,{ref:o}=t.data.toFrozenObject(),n=po(o);return ji.createElement(WR,{...e,resolved:n})}var BR=B.createInteractiveHandle("link");function WR(e){let{node:t,attributes:o,children:n,resolved:r,editor:i}=e,{readOnly:a}=i,[,s]=I(L),l=(u,d={})=>ji.createElement(B.TouchableOpacity,{ref:u,handle:BR,...r?Qa(r):{},...d,style:[$N.wrapper,d.style]},ji.createElement(YN.Child,{...o,descendantOf:BR,hoverStyle:[s.primaryStandout,s.Underline],inactiveStyle:s.primary},n));return a||!r?l():ji.createElement(DR,{resolved:r,editor:i,node:t},l)}var $N=X.create({wrapper:{display:"inline"}});c();var VR=k(O());function qR(e){let t=ft(e.contentReferenceContext),{logAnalyticsEvent:o}=e;return VR.useMemo(()=>({onPaste:(n,r,i)=>{let a=Hc(n);if(!((a.type==="text"||a.type==="html")&&typeof a.text=="string"&&(Dr(a.text)||cS(a.text))))return;let s=a.text,{value:l}=r;l.isCollapsed&&r.insertText(s).extend(-s.length);let u={kind:"url",url:s};r.wrapInline({type:To,data:{ref:u}});let d=r.value.inlines.filter(f=>f.type===To&&f.data.has("ref")&&im(f.data.get("ref"),u)===!1);r.collapseToEnd();let m=Pm(s);return m&&su(()=>Mm(m,t.current)).then(f=>{f&&i.change(g=>{d.forEach(h=>{let y=g.value.document.getByKey(h.key);y&&g.setDataByKey(y.key,["ref"],f)})})}),o(sd(n,"link")),r}}),[t])}c();var vg=k(O());c();var FR=k(O());var yg=FR.createContext(Et);function GR(e){let{node:t,children:o,attributes:n}=e;return vg.createElement(ve,{...e},vg.createElement(le,{tag:t.type===Et?"ol":"ul",...n},vg.createElement(yg.Provider,{value:t.type},o)))}c();var Yr=k(O());z();function HR(e){let{node:t,parent:o,children:n,editor:r}=e,{readOnly:i}=r,[,a]=I(L),s=Yr.useContext(yg),l=t.data.toFrozenObject(),u=s===oo,d=s===Et,m=s===no,f=Yr.useMemo(()=>nt(r,t.key,[{key:"list",commands:[{key:"ul",type:1,title:"Unordered List",icon:S.ListUnordered,selected:o.type===oo,trigger:()=>{r.change(C=>{C.setNodeByKey(o.key,{type:oo})})}},{key:"ol",type:1,title:"Ordered List",icon:S.ListOrdered,selected:o.type===Et,trigger:()=>{r.change(C=>{C.setNodeByKey(o.key,{type:Et})})}},{key:"tasks",type:1,title:"Tasks List",icon:S.ListTasks,selected:o.type===no,trigger:()=>{r.change(C=>{C.setNodeByKey(o.key,{type:no})})}}]}]),[r,t.key,o.type]),g=C=>{r.change(x=>{ot.checkTaskItem(x,t.key,C)})},h=xn(t.nodes.first()),y=C=>C<10?p.medium:C<100?p.large:"auto";return Yr.createElement(ve,{tag:"li",palette:f,contentProps:{style:ud.blockListItem},...e},m&&Yr.createElement(le,{editable:!1,style:[ud.blockListItemPrefix,{height:h}]},Yr.createElement(Bi,{value:!!l.checked,onValueChange:g,readOnly:i,size:T.ICON_M})),u&&Yr.createElement(le,{editable:!1,style:[ud.blockListItemPrefix,{height:h}]},Yr.createElement(S.Dot,{size:12,style:a.text})),d&&Yr.createElement(ct,{editable:!1,style:[ud.blockListItemPrefix,{height:h,width:y(o.getChildIndex(t.key)+1)},a.Body,a.text]},QN(o,t)),Yr.createElement(v,{style:ud.blockListItemContent},n))}function QN(e,t){let o=e.data.toFrozenObject(),n=e.getChildIndex(t.key);return`${(o.start||1)+n}.`}var ud=X.create({blockListItem:{position:"relative",display:"flex",flexDirection:"row"},blockListItemPrefix:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:p.small,marginRight:p.small},blockListItemContent:{flex:1}});c();var dd=k(Vr());var JN=(0,dd.isKeyHotkey)("tab"),e5=(0,dd.isKeyHotkey)("shift+tab"),t5=(0,dd.isKeyHotkey)("enter"),o5=(0,dd.isKeyHotkey)("backspace"),XR={onKeyDown:r5,shouldNodeComponentUpdate:n5};function n5(e,t){if(e.node.type===ro){let{parent:o,node:n}=e,{parent:r,node:i}=t;if(o.object!=="block"||r.object!=="block")throw new Error("Parent of list-item must be a block");if(o.type===Et&&o.getChildIndex(n.key)!==r.getChildIndex(i.key))return!0}return null}function r5(e,t,o){if(t5(e))return i5(e,t,o);if(JN(e)||e5(e))return s5(e,t,o);if(o5(e))return a5(e,t,o)}function i5(e,t,o){if(e.shiftKey)return;let{value:n}=t,r=ot.getCurrentItem(n);if(!r)return;if(e.preventDefault(),n.isExpanded&&t.delete(),r.isEmpty)return ot.getItemDepth(n)>1?ot.decreaseItemsDepth(t):ot.unwrapList(t);ot.splitListItem(t);let i=ot.getListForItem(t.value,r);if(i&&i.type===no){let a=t.value.document.getNextSibling(r.key);return a?ot.checkTaskItem(t,a.key,!1):t}return t}function a5(e,t,o){let{value:n}=t,{startOffset:r,selection:i}=n;if(!he.isTextRange(i)||i.isExpanded||r>0)return;let a=ot.getCurrentItem(n);if(a&&i.isAtStartOf(a))return e.preventDefault(),ot.unwrapList(t)}function s5(e,t,o){return e.shiftKey?(e.preventDefault(),ot.decreaseItemsDepth(t)):(e.preventDefault(),ot.increaseItemsDepth(t))}c();c();var jR=k(Vr());function c5(e){let{transform:t}=e,o=e.onHotkey?(0,jR.isKeyHotkey)(e.onHotkey):()=>!1,n=e.onInput?l5(e.onInput):()=>!1,r=e.ignoreIn?KR(e.ignoreIn):null,i=e.onlyIn?KR(e.onlyIn):null;function a(m,f,g){if(!o(m))return;let h=u(f.value);if(h)return l(h,m,f,g),!0}function s(m,f,g){if(m.inputType!=="insertText"||!n(m))return;let h=u(f.value);if(h)return l(h,m,f,g),!0}function l(m,f,g,h){let{value:y}=g,{startOffset:C}=y,x=0;return d(m,C).forEach(P=>{g.moveOffsetsTo(P.start,P.end).delete(),x+=P.total}),C-=x,g.moveOffsetsTo(C,C),g.call(t,f,m,h),f.preventDefault(),!0}function u(m){if(m.isExpanded)return null;let{startBlock:f}=m;if(!f)return null;let{type:g}=f;if(i&&!i(g)||r&&r(g))return null;let{startText:h,startOffset:y}=m;cr(h);let{text:C}=h,x=null,w=null;return e.after&&(x=C.slice(y).match(e.after)),e.before&&(w=C.slice(0,y).match(e.before)),e.before&&e.after&&!w&&(x=null),e.before&&e.after&&!x&&(w=null),!w&&!x?null:(x&&(x[0]=x[0].replace(/\s+$/,"")),w&&(w[0]=w[0].replace(/^\s+/,"")),{before:w,after:x})}function d(m,f){let{before:g,after:h}=m,y=[],C=0;if(g){let x=g[0],w=0,P=0;g.slice(1,g.length).forEach(R=>{R!==void 0&&(P=x.indexOf(R,P),w=f-C+P-x.length,y.push({start:w,end:w+R.length,total:R.length}),C+=R.length,P+=R.length)})}if(h){let x=h[0],w=0,P=0;h.slice(1,h.length).forEach(R=>{R!==void 0&&(P=x.indexOf(R,P),w=f-C+P,y.push({start:w,end:w+R.length,total:0}),C+=R.length,P+=R.length)})}return y}return{onKeyDown:a,onBeforeInput:s}}function l5(e){if(typeof e=="string")return t=>!!(t.data&&t.data===e);if(typeof e=="function")return e;if(e instanceof RegExp)return t=>!!(t.data&&t.data.match(e));throw new Error("Invalid onInput option")}function KR(e){if(Array.isArray(e))return t=>e.includes(t);if(typeof e=="string")return t=>t===e;if(typeof e=="function")return e;throw new Error("Invalid matcher type")}var xr=c5;var u5=xr({onlyIn:[me],onInput:"*",before:/\*\*[^*]+?\*$/,transform:(e,t,o)=>{if(Pl(e.value,[Cn,io])||bg(e.value))return e.insertText("*");let n=o.before[0].slice(2).slice(0,-1);return md(e.value,n,[io,Sn])?e.insertText("*"):e.deleteBackward(n.length+3).addMark(Cn).insertText(n).removeMark(Cn)}}),d5=xr({onlyIn:[me],onInput:"_",before:/\b_[^_]+?$/,transform:(e,t,o)=>{if(Pl(e.value,[Sn,io])||bg(e.value))return e.insertText("_");let n=o.before[0].slice(1);return md(e.value,n,[Cn,io])?e.insertText("_"):e.deleteBackward(n.length+1).addMark(Sn).insertText(n).removeMark(Sn)}}),m5=xr({onlyIn:[me],onInput:"~",before:/\~\~[^*]+?\~$/,transform:(e,t,o)=>{if(Pl(e.value,[dr,io])||bg(e.value))return e.insertText("~");let n=o.before[0].slice(2).slice(0,-1);return md(e.value,n,[dr,io])?e.insertText("~"):e.deleteBackward(n.length+3).addMark(dr).insertText(n).removeMark(dr)}}),p5=xr({onlyIn:[me],onInput:/`/,before:/`[^`]+?$/,transform:(e,t,o)=>{if(Pl(e.value,io))return e.insertText("`");let n=o.before[0].slice(1);return md(e.value,n,[Cn,Sn])?e.insertText("`"):e.deleteBackward(n.length+1).addMark(io).insertText(n).removeMark(io)}}),f5=xr({onlyIn:[me],onInput:"$",before:/\$\$[^*]+?\$$/,transform:(e,t,o)=>{if(Pl(e.value,io)||bg(e.value))return e.insertText("$");let n=o.before[0].slice(2).slice(0,-1);if(md(e.value,n,[Cn,io,Sn]))return e.insertText("$");e.deleteBackward(n.length+3);let r=Ds.createMathInline(n);return e.insertInline(r),e}}),g5=xr({onlyIn:[me],onHotkey:"enter",before:/^\$\$$/,transform:(e,t,o)=>{let n=Ds.createMathBlock();return YR(e,n)}}),h5=xr({onlyIn:[me],onInput:" ",before:/^(-|\*)$/,transform:e=>UR(e.value)?e:ot.wrapInList(e,oo)}),y5=xr({onlyIn:me,onInput:" ",before:/^(([1-9]{1}\d*)\.)$/,transform:(e,t,o)=>{if(UR(e.value))return e;let n=parseInt(o.before[1],10);return ot.wrapInList(e,Et,n&&n!==1?{start:n}:{})}}),v5=xr({onlyIn:me,onInput:"]",before:/^(\[[ xX])$/,transform:(e,t,o)=>{let n=ot.getCurrentList(e.value);if(n)e.setNodeByKey(n.key,{type:no});else{if(!e.value.isEmpty)return e.insertText(`${o.before[0]}]`);e=ot.wrapInList(e,no)}let r=ot.getCurrentItem(e.value),i=o.before[0][1]!==" ";return r?ot.checkTaskItem(e,r.key,i):e}}),b5=xr({onlyIn:me,onHotkey:"enter",before:/^(```\S*\s*)$/,transform:(e,t,o)=>{let[n]=o.before,r=n.replace(/^```/,"").trim(),i=ep(r),a=Kt.createCodeBlock("",{syntax:i.key});return YR(e,a)}}),C5=xr({onlyIn:me,onInput:" ",before:/^(>)$/,transform:(e,t,o)=>e.wrapBlock(zt)});function UR(e){let{startBlock:t,document:o}=e;if(!t)return!1;let n=o.getParent(t.key);return(n==null?void 0:n.type)===ro}var S5=[De,ze,$e],w5=xr({onlyIn:me,onInput:" ",before:/^(#{1,3})$/,transform:(e,t,o)=>{let[n]=o.before,r=n.length,i=S5[r-1];return e.setBlocks({type:i})}});function Pl(e,t){let o=typeof t=="string"?[t]:t;return e.marks.some(n=>o.includes(n.type))}function md(e,t,o){let{startText:n,startOffset:r}=e;if(!n)return!1;let i=r-t.length,{leaf:a}=n.searchLeafAtOffset(i);return a?Pl(a,o):!1}function bg(e){let{startText:t,startOffset:o}=e;if(!t)return!1;let n=t.text.slice(0,o);return!(!n||n.match(/^[^`]+$/))}function YR(e,t){let{startBlock:o}=e.value;if(o)return e.insertBlock(t).collapseToStartOf(t).removeNodeByKey(o.key)}var ZR=[u5,d5,m5,p5,h5,y5,v5,w5,f5,g5,b5,C5];c();var _v=k(O());c();var Zr=k(O());z();var Cg={[me]:T.ICON_S,[De]:T.ICON_XL,[ze]:T.ICON_L,[$e]:T.ICON_S};function $R(e){let{node:t,attributes:o,isSelected:n,parent:r}=e,i=t.data.toFrozenObject();return Zr.createElement(Zr.Suspense,{fallback:Zr.createElement(k5,{selected:n,attributes:o,parentType:r.type})},Zr.createElement(x5,{reference:i.ref,selected:n,attributes:o,parentType:r.type}))}function k5(e){let{selected:t,attributes:o,parentType:n}=e,[,r]=I(QR),[,i]=I(L),a=t?i.primaryStandout:i.text,s=Cg[n||me]||Cg[me];return Zr.createElement(v,{style:[r.mention,t&&r.mentionSelected],...o},Zr.createElement(Oe,{size:s,style:a}))}function x5(e){let{reference:t,selected:o,attributes:n,parentType:r}=e,[,i]=I(QR),[,a]=I(L),s=B.useInteractiveState(),l=po(t),u=Cg[r||me]||Cg[me],d=o?a.primaryStandout:a.text;return Zr.createElement(Be,{...s.events,...Qa(l)},Zr.createElement(le,{tag:"span",style:[i.mention,s.hovered&&i.mentionHovered,o&&i.mentionSelected,b.directionRow,b.alignCenter],...n},l.secondaryIcon?Zr.createElement(l.secondaryIcon,{size:u,style:[d,i.mentionIcon]}):null,Zr.createElement(N,{style:[d,a.Bold]},l.title)))}var QR=D.create({mention:e=>({borderRadius:e.radiuses.medium,paddingHorizontal:p.xsmall/2}),mentionHovered:e=>({backgroundColor:e.colors.background.muted}),mentionSelected:e=>({backgroundColor:e.colors.primary.muted}),mentionIcon:{marginRight:p.xsmall/2}});c();var us=k(O());function JR(e){let{mark:t,node:o,offset:n,attributes:r,children:i,editor:a}=e,{value:s,symbol:l}=t.data.toObject(),u=us.useRef(null),d=ft(s),{contentReferenceContext:m,logAnalyticsEvent:f}=us.useContext(ne),g=se(u);return wp(()=>{if(!g.opened&&a.value.isFocused){let h=y=>{a.change(C=>{let x=he.create({anchorKey:o.key,anchorOffset:n,focusKey:o.key,focusOffset:n+d.current.length+1});C.insertInlineAtRange(x,{type:fu,data:{ref:y},isVoid:!0}).focus()}),f({type:"edit_page_document_insert_mention",kind:y.kind})};g.open(Ha(on(h,{...m,document:a.value.document},{withSearch:!1,accept:l==="@"?["user"]:["url","anchor","page","space","collection","file"]}),s))}},150),us.useEffect(()=>{g.opened&&g.typeQuery(s)},[g,s]),us.createElement(ct,{ref:u,...r},i)}var eP="mentionContext",O5=/(^|\s)(@|#)(\w*)$/,tP={renderMark:R5,renderNode:I5,decorateValue:_5};function _5(e){let{selection:t}=e,o=P5(e),n=[];return he.isTextRange(t)&&o!==null&&n.push(he.create({anchorKey:t.startKey,anchorOffset:t.startOffset-o.value.length-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:eP,data:{value:o.value,symbol:o.symbol}}],isAtomic:!0})),n}function I5(e){let{node:t}=e;switch(t.type){case fu:return _v.createElement($R,{...e})}}function R5(e){let{mark:t}=e;switch(t.type){case eP:return _v.createElement(JR,{...e})}}function P5(e){if(!e.isCollapsed)return null;let{document:t,startText:o,startBlock:n,selection:r}=e;if(!he.isTextRange(r)||!o||!n||!da({document:t,block:n},fu))return null;let{startOffset:i}=r,a=o.text.slice(0,i),s=O5.exec(a);return s?{symbol:s[2],value:s[3]}:null}c();var $r=k(O());z();c();function Sg(e,t,o=[]){return nt(e,t,[{key:"types",commands:()=>{let n=e.value.document.assertBlock(t),r=e.value.document.getParent(t);if(!r)return[];let i=a=>{e.change(s=>{s.setNodeByKey(n.key,{type:a}).focus()})};return[{key:me,title:"Paragraph",type:1,selected:n.type===me,icon:S.Paragraph,trigger:()=>{i(me)}},Me(r,De)?{key:De,title:"Heading 1",type:1,selected:n.type===De,icon:S.Heading1,trigger:()=>{i(De)}}:null,Me(r,ze)?{key:ze,title:"Heading 2",type:1,selected:n.type===ze,icon:S.Heading2,trigger:()=>{i(ze)}}:null,Me(r,$e)?{key:$e,title:"Heading 3",type:1,selected:n.type===$e,icon:S.Heading3,trigger:()=>{i($e)}}:null].filter(ge)}},...o])}function oP(e){let{editor:t,node:o,parent:n,children:r,attributes:i}=e,[,a]=I(L),[,s]=I(E5),l=$r.useContext(Za),u=$r.useContext(Gn),d=T5(n),m=[a.Body,a.text,s[l],s[u]],f=$r.createElement(N,{selectable:!0,style:m},r),g=$r.useMemo(()=>Sg(t,o.key),[t,o.key]),h=gu(o);return M5(n)?!t.readOnly&&h?$r.createElement(zI,{...e,placeholder:d},f):$r.createElement(ve,{...e,palette:g},f):$r.createElement(le,{...i},!t.readOnly&&d&&h&&ym(n)?$r.createElement(le,{editable:!1,pointerEvents:"none",style:[X.absoluteFill]},$r.createElement(N,{selectable:!0,style:[m,a.textMuted]},d)):null,f)}function M5(e){return e.type===ty||e.type===ey||e.type===Es?!0:!(e.object==="fragment"||e.type===ro)}function T5(e){return e.type===MS?"Parameter description (optional)":e.type===ty?"Response description (optional)":e.type===ey?"Operation description (optional)":e.type===ca?"Title":e.type===Es?"Expandable content":e.type===Ti?"Annotate this text":e.type===en?"Tab content":""}var E5=D.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},quote:e=>({color:e.colors.text.mid}),swaggerParameter:e=>({color:e.colors.text.mid,...qe.Label}),swaggerResponse:e=>({color:e.colors.text.mid}),caption:e=>({...qe.Caption,color:e.colors.text.muted}),expandableTitle:e=>({...qe.Heading3,color:e.colors.text.main})});c();var pd=k(Vr());var nP={onKeyDown:L5};function L5(e,t){if((0,pd.default)("enter",e)||(0,pd.default)("shift+enter",e))return N5(e,t);if((0,pd.default)("backspace",e))return rP(e,t)}function N5(e,t){let{value:o}=t;if(o.isExpanded)return;let{startBlock:n,startOffset:r,endOffset:i}=o;if(n){if(n.isVoid){let{document:a}=o,s=a.getParent(n.key);cr(s);let l=s.getChildIndex(n.key),u=Xt.create({type:me,nodes:[mu.create("")]});return t.insertNodeByKey(s.key,l+1,u).moveToRangeOf(u)}if(n.type===me){if((0,pd.default)("shift+enter",e))return t.insertText(`
`)}else{let a=n.text.length;if(r===0&&a===0)return rP(e,t);if(i===a)return e.preventDefault(),t.splitBlock().setBlocks({type:me,data:{}})}}}function rP(e,t){let{value:o}=t;if(o.isExpanded||o.startOffset>0)return;let{startBlock:n,startText:r}=o;if(!(!n||!(n.getFirstText()===r))){if(n.type===me){let a=o.document.getParent(n.key);return a&&Se.isSwaggerFragment(a)&&a.getChildIndex(n.key)===0?t:void 0}if(!(n.type===Ar||n.type===Ri))return e.preventDefault(),n.isVoid?t.removeNodeByKey(n.key):t.setNodeByKey(n.key,{type:me,isVoid:!1})}}c();var fd=k(O());z();function iP(e){let{children:t,isFocused:o,editor:n}=e,{readOnly:r}=n,[,i]=I(D5);return fd.default.createElement(ve,{tag:"blockquote",...e,contentProps:{style:i.blockQuote}},fd.default.createElement(v,{style:i.quote},fd.default.createElement(Gn.Provider,{value:"quote"},t)),!r&&o?fd.default.createElement(wl,{style:i.blockExitHint}):null)}var D5=D.create({blockQuote:{position:"relative",width:"100%"},quote:e=>({color:e.colors.text.mid,paddingLeft:Eu,borderLeftWidth:Tu,borderLeftColor:e.colors.border.mid}),blockExitHint:{position:"absolute",bottom:p.small,right:p.small}});c();var Ui=k(O());z();c();var gd={info:{title:"Info",color:H.primary.base,icon:S.InfoCircle},warning:{title:"Warning",color:H.orange.base,icon:S.Warning},success:{title:"Success",color:H.green.base,icon:S.CheckCircle},danger:{title:"Danger",color:H.scarlet.base,icon:S.Alert}};c();function aP(e,t){let o=["info","warning","danger","success"];return nt(e,t,[{key:"levels",commands:()=>{let n=e.value.document.assertBlock(t),r=n.data.get("style");return o.map(i=>({key:i,type:1,selected:r===i,title:gd[i].title,icon:gd[i].icon,trigger:()=>{e.change(a=>{a.setNodeByKey(n.key,{data:{style:i}})})}}))}}])}function sP(e){let{node:t,children:o,editor:n,isFocused:r}=e,{readOnly:i}=n,a=t.data.toFrozenObject(),[,s]=I(A5),l=gd[a.style],u=()=>{let C=["info","warning","danger","success"],x=a.style===C[C.length-1]?C[0]:C[C.indexOf(a.style)+1];n.change(w=>w.setNodeByKey(t.key,{data:{style:x}}))},d=Ui.useMemo(()=>aP(n,t.key),[n,t.key]),m=t.nodes.first(),f=jr(m,t),g=T.ICON_L,h=f.paddingTop+(xn(m)-g)/2,y=Ui.createElement(l.icon,{size:g,style:{color:l.color}});return Ui.createElement(ve,{...e,palette:d,contentProps:{style:[s.blockHint]}},Ui.createElement(v,{style:[s.hint,b.directionRow,{borderColor:l.color}]},Ui.createElement(v,{style:[s.blockHintIconSpacer,b.directionRow,b.justifyContentCenter,{paddingTop:h}]},i?y:Ui.createElement(Be,{onPress:u},y)),Ui.createElement(v,{style:b.flex1},o)),!i&&r?Ui.createElement(wl,{style:s.blockExitHint}):null)}var A5=D.create({blockHint:{position:"relative",width:"100%"},hint:e=>({backgroundColor:e.colors.background.muted,paddingRight:p.large,borderLeftWidth:Lu,borderRadius:e.radiuses.medium}),blockHintIconSpacer:{width:Nu},blockExitHint:{position:"absolute",bottom:p.small,right:p.small}});c();var wg=k(Vr());var cP={onKeyDown:V5},B5=(0,wg.isKeyHotkey)("backspace"),z5=(0,wg.isKeyHotkey)("enter"),W5=(0,wg.isKeyHotkey)("mod+enter");function V5(e,t,o){let{value:n}=t;if(!vn(n.selection)){if(B5(e)&&n.isCollapsed)return q5(e,t);if(z5(e))return F5(e,t);if(W5(e))return G5(e,t);if(e.key===">")return H5(e,t)}}function q5(e,t){let{value:o}=t,{startOffset:n,selection:r}=o;if(!he.isTextRange(r)||n>0)return;let i=Iv(o);if(!i)return;let a=r.anchorKey?i.getClosestBlock(r.anchorKey):null;if(!(!a||!r.isAtStartOf(a))&&i.nodes.size===1)return e.preventDefault(),t.unwrapBlock(i.type)}function F5(e,t){let{value:o}=t,{startBlock:n,selection:r}=o;if(!he.isTextRange(r))return;let i=Iv(o);if(i&&!(n&&n.text.length!==0))return e.preventDefault(),t.unwrapBlock(i.type)}function G5(e,t){let{value:o}=t,n=Iv(o);if(n)return e.preventDefault(),St(t,n),t}function H5(e,t){let{value:o}=t,{selection:n}=o;if(he.isTextRange(n)&&!(n.startOffset!==0||n.isCollapsed))return e.preventDefault(),t.wrapBlock(zt),t}function Iv(e,t=null){let{document:o,selection:n}=e;if(!he.isTextRange(n))return null;if(!t){if(!n.startKey)return null;t=e.startBlock}let r=t?o.getParent(t.key):null;return r&&X5(r)?r:null}function X5(e){return"type"in e&&(e.type===zt||e.type===Mo)}c();function lP(e,t,o){if(!e.selection)return[];let{anchorOffset:n,focusOffset:r,isAtomic:i,isBackward:a,isFocused:s}=e.selection;return[he.create({anchorKey:t,anchorOffset:n,focusKey:o,focusOffset:r,isAtomic:i,isBackward:a,isFocused:s,data:{userId:e.userId,userName:e.name,userColor:e.color}})]}c();var Rv=k(O());c();var On=k(O());z();var Ml=2,K5=250;function uP(e){let{selection:t}=e,o=t.data.get("userName"),n=t.data.get("userColor"),[r,i]=On.useState(!1),a=Ws(()=>new Ht.Value(r?1:0)),s={"data-cursor":!0},l={backgroundColor:n};return On.useEffect(()=>{Ht.timing(a.current,{toValue:r?1:0,delay:gr.TRANSITION_DURATION_SHORT,useNativeDriver:!1}).start()},[r]),On.createElement(le,{tag:"span",...s,style:[hd.cursor]},On.createElement(qa,{wrapper:Wr,onOpen:()=>i(!0),onClose:()=>i(!1),anchor:({ref:u,open:d,close:m})=>On.createElement(B.WithInteractiveState,{onHoverIn:d,onHoverOut:m},({events:f})=>On.createElement(v,{ref:u,...f,style:[hd.carret,l]},On.createElement(v,{style:[hd.carretTop,l]})))},On.createElement(Ht.View,{style:[hd.bubble,{opacity:a.current.interpolate({inputRange:[0,1],outputRange:[0,1]})}]},On.createElement(v,{style:[hd.bubbleContent,l,p.Padding.smallHorizontal]},On.createElement(zr,{theme:{color:Vi(n)}},On.createElement(j5,{userName:o}))))))}function j5({userName:e}){let[,t]=I(L);return On.createElement(N,{numberOfLines:1,style:[t.Body,t.text]},e)}var hd=X.create({cursor:{position:"absolute"},carret:{userSelect:"none",width:Ml,top:3,height:"1.2em"},carretTop:{position:"absolute",top:-Ml*3,left:-Ml,borderRadius:100,width:Ml*3,height:Ml*3},bubble:{position:"absolute",left:-Ml,top:"-1.2em",width:K5},bubbleContent:{position:"absolute",borderRadius:T.RADIUS_M}});c();var dP=k(lm()),mP=k(O());function pP(e){let{children:t,selection:o}=e,n=o.data.get("userColor");return mP.createElement(ct,{...{"data-cursor":!0},style:[{backgroundColor:U5(n,.2)}]},t)}function U5(e,t){let o=Math.round((0,dP.default)(t||1,0,1)*255);return e+o.toString(16).toUpperCase()}c();var fP="focus",gP="range";var hP={renderSelection:Y5};function Y5(e){let{type:t}=e;switch(t){case fP:return Rv.createElement(uP,{...e});case gP:return Rv.createElement(pP,{...e})}}c();var He=k(O());c();var Or=k(O());function yP(e){let{editor:t,node:o}=e,{contentReferenceContext:n}=Or.useContext(ne),r=ft(n),i=Or.useMemo(()=>nt(t,o.key,[{key:"edit",commands:[{key:"edit_ref",title:"Edit link target",icon:S.PageLink,trigger:()=>on(a=>{t.change(s=>{s.setDataByKey(o.key,["ref"],a)})},r.current,{accept:["page","space","collection"]})}]}]),[t,o.key,r]);return Or.createElement(ve,{...e,palette:i},Or.createElement(Vt,{...e},Or.createElement(Or.Suspense,{fallback:Or.createElement(Fi,{icon:Oe,title:""})},Or.createElement(Z5,{contentRef:o.data.get("ref")}))))}function Z5(e){let{contentRef:t}=e,o=po(t);return Or.createElement(Fi,{title:o.title,icon:o.icon||o.secondaryIcon,...Qa(o)})}c();var ds=k(O());z();function vP(e){let{ancestors:t,node:o,children:n,attributes:r}=e,i=o.data.toFrozenObject(),{blockLayoutComponent:a}=ds.useContext(ne),s=Ye(),l=hl({isPDF:s,ancestors:t,node:o.blockNodes.first(),diff:!0});return ds.createElement(a,{renderMode:l.renderMode},ds.createElement(wa.View,{isPDF:s},ds.createElement(ae,{style:[id.block,l.blockStyle.style],inlineStyle:l.blockStyle.inlineStyle},ds.createElement(v,{...r},l.diffLine?ds.createElement(Uf,{diff:i,...l.diffLine}):null,n))))}c();var bP=k(O());z();function CP(e){let{mark:t,attributes:o,children:n}=e;return bP.createElement(ct,{style:$5[t.type],...o},n)}var $5=X.create({[mm]:{color:ec.added},[pm]:{color:ec.deleted,textDecorationLine:"line-through"},[fm]:{color:ec.modified}});c();var Ve=k(O());c();var Uo=k(O());z();c();var ko=k(O());function SP(e){let{onClose:t}=e,[o,n]=Bn(),r=ko.useRef(null),[i,a]=ko.useState(!1),s=ft(i),l=ft(t),u=ft(o),d=ko.useCallback(()=>{u.current||n(()=>l.current())},[l,u]);return ko.useEffect(()=>yp("editor-block-modal"),[]),yr({[Fe.EDITOR_SAVE]:m=>{d()}},"editor-block-modal",[]),ko.useEffect(()=>{let m=null,f=g=>{g.key==="Escape"&&(s.current?(m&&clearTimeout(m),d()):(a(!0),m=setTimeout(()=>{a(!1)},2e3)))};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f),m&&clearTimeout(m)}},[s,d]),ko.useEffect(()=>{var m,f;i?(m=r.current)==null||m.open():(f=r.current)==null||f.close()},[i,r]),ko.createElement(A,{tooltipRef:r,icon:S.X,disabled:o,onPress:d,title:i?ko.createElement(ko.Fragment,null,"Press ",ko.createElement(qr,{shortcut:"ESC"})," again to save & close"):ko.createElement(ko.Fragment,null,"Save & Close ",ko.createElement(qr,{shortcut:Fe.EDITOR_SAVE})),tooltipPreferredPlacement:"left"})}c();c();c();var wP=Qm("05ab87fa95f4c5a09220a4e1067733011498ba1a47c8b145f5ec78dcb9ffe75d",()=>import("https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/chunks/excalidraw.lazy-2P62NES2.min.js"));var ic=wP;async function kP(e){let{default:{exportToSvg:t}}=await ic.load(),o=await t({appState:{exportEmbedScene:!0},elements:e.elements,files:e.files});return new XMLSerializer().serializeToString(o)}c();var Pv=Br({getValue:async e=>{if(!e)return{elements:[],files:{}};let{default:{loadFromBlob:t}}=await ic.load(),n=await(await fetch(e)).blob(),r=await t(n,null,null);return{elements:r.elements,files:r.files}}}),xP=Br({getValue:async({downloadURL:e,theme:t})=>{let{default:{exportToSvg:o}}=await ic.load(),n=await Pv.readAsync(e),r=await o({appState:{viewBackgroundColor:"transparent",exportWithDarkMode:t==="dark"},elements:n.elements,files:n.files});return r.style.maxWidth="100%",r.removeAttribute("width"),r.removeAttribute("height"),r}});function OP(e){let{blockData:t,onClose:o}=e,[,n]=I(e3),r=Uo.useRef(),i=Wa(gr.fade),a=Wa(gr.pop,{onEnd:()=>{var s;(s=r.current)==null||s.refresh()}});return Uo.createElement(Wn,null,Uo.createElement(v,{ref:i,style:[D.absoluteFill,n.modalBackdrop]},Uo.createElement(v,{ref:a,style:n.modalBody},Uo.createElement(Uo.Suspense,{fallback:Uo.createElement(bo,{size:"large"})},Uo.createElement(Q5,{blockData:t,onClose:o,excalidrawRef:r})))))}function Q5(e){var g,h;let{excalidrawRef:t,blockData:o,onClose:n}=e,r=Fm(),i=co(),{Excalidraw:a,useExcalidrawStyle:s}=ic.loadSuspense().default;s();let u=(h=(g=po(o.ref).resolution)==null?void 0:g.extra)==null?void 0:h.file,{result:d,error:m}=Pv.readSafe((u==null?void 0:u.downloadURL)||null),f=async()=>{let y=t.current;if(!y){n(void 0);return}let C=y.getSceneElements(),x=y.getFiles();if(d&&d.elements&&!J5(d.elements,C)){n(void 0);return}let w=await kP({elements:C,files:x});n(new File([new Blob([w])],(u==null?void 0:u.name)||"file.excalidraw.svg",{type:"image/svg+xml"}))};return Uo.useEffect(()=>{m&&i.notify({kind:"danger",icon:S.Warning,title:"Error loading drawing",details:m.expose?m.message:"An unexpected error occurred while loading the drawing"})},[m]),Uo.createElement(v,{style:[D.absoluteFill]},Uo.createElement(a,{ref:t,initialData:{...d,scrollToContent:!0},theme:r.color,UIOptions:{canvasActions:{export:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!1,changeViewBackgroundColor:!1,clearCanvas:!1}},renderTopRightUI:(y,C)=>Uo.createElement(v,null,Uo.createElement(SP,{onClose:f}))}))}function J5(e,t){return e.length!==t.length?!0:e.some((o,n)=>{let r=t[n];return o.version!==r.version})}var e3=D.create({modalBackdrop:e=>({backgroundColor:e.colors.backdrop.background}),modalBody:e=>({position:"absolute",top:p.large,bottom:p.large,right:p.xlarge,left:p.xlarge,borderRadius:T.RADIUS_L,backgroundColor:e.colors.background.main,overflow:"hidden"})});c();var Yt=k(O());z();var IP=Yt.forwardRef(function(t,o){let{readOnly:n,contentRef:r}=t,i=Yt.useRef(null),a=Fm(),s=sl(),[,l]=I(RP),[u,d]=Yt.useState(null),f=po(r).href,g=u;return r&&!f&&(g=new Rc.NotFound("Drawing file not found, the file may have been deleted")),Yt.useImperativeHandle(o,()=>({openInGallery:()=>{s.open([{url:f}])}})),Yt.useEffect(()=>{let h=!0;return xP.readAsync({downloadURL:f,theme:a.color}).then(y=>{let C=i.current;C&&y&&h&&(C.innerHTML="",C.appendChild(y.cloneNode(!0)))},y=>{h&&d(y)}),()=>{h=!1}},[f,a.color]),g?Yt.createElement(_P,{kind:"danger",icon:S.Warning,message:g.expose?g.message:"An error occurred while rendering this drawing file."}):Yt.createElement(v,{style:l.wrapper},f?Yt.createElement("div",{ref:i},Yt.createElement("img",{src:f,style:{width:"100%"}})):Yt.createElement(_P,{icon:S.EditDrawing,message:n?"Drawing file not found":"Double click to start sketching out your thoughts."}))});function _P(e){let{icon:t,message:o,kind:n="default"}=e,[,r]=I(RP),[,i]=I(L);return Yt.createElement(v,{style:[r.fallback,p.Padding.large,b.alignCenter,b.justifyContentCenter]},Yt.createElement(v,null,Yt.createElement(t,{size:T.ICON_XL,style:n==="danger"?i.danger:i.textMuted})),Yt.createElement(v,{style:p.Margin.mediumTop},Yt.createElement(N,{style:[n==="danger"?i.danger:i.textMuted,i.Body]},o)))}var RP=D.create({wrapper:{},fallback:e=>({height:200,borderWidth:1,backgroundColor:e.colors.background.main,borderColor:e.colors.border.mid,borderRadius:T.RADIUS_M,borderStyle:"dashed"})});var PP=B.createInteractiveHandle("drawing-block");function MP(e){let{node:t,editor:o,isSelected:n}=e,{readOnly:r}=o,i=xt(),{uploadFiles:a,updateFile:s}=Ve.useContext(ne),[l,u]=Ve.useState(null),[d,m]=Bn(),f=Ve.useRef(),g=Ve.useRef(null),h=t.data.toFrozenObject(),y=()=>{var M;(M=C.current)==null||M.close(),u("edit")},C=Ve.useRef(null),x=Ve.useRef(null);Ve.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]);let w=kp(y),P=M=>{var W,G,V;r?(W=g.current)==null||W.openInGallery():(x.current&&clearTimeout(x.current),w(M)?(G=C.current)==null||G.close():((V=C.current)==null||V.open(),x.current=setTimeout(()=>{var F;(F=C.current)==null||F.close()},1e3)))},R=M=>{f.current=M?URL.createObjectURL(M):void 0,M&&m(async()=>{let W=h.ref;h.ref&&W?await s(W,M):W=(await a([M]))[0],im(W,h.ref)&&o.change(G=>{G.setDataByKey(t.key,["ref"],W)})}),u(null)},_=async()=>{let[M]=await i.prompt({title:"Replace drawing file",acceptURL:!1,accept:"drawings"});(M==null?void 0:M.kind)==="file"&&o.change(W=>{W.insertDataByKey(t.key,["ref"],M)})},E=nt(o,t.key,[{key:"types",commands:[{key:"edit",title:"Edit drawing",icon:S.EditDrawing,trigger:()=>{y()}},{key:"files",title:"Replace file\u2026",icon:S.Replace,trigger:()=>{_()}}]}]);return Ve.createElement(Ve.Fragment,null,Ve.createElement(ve,{...e,palette:E},Ve.createElement(Vt,{...e},Ve.createElement(B.TouchableOpacity,{onPress:P},Ve.createElement(B.View,{handle:PP},Ve.createElement(Ve.Suspense,{fallback:Ve.createElement(Yn,null)},Ve.createElement(IP,{ref:g,readOnly:r,contentRef:f.current&&d?{kind:"url",url:f.current}:h.ref})),r?null:Ve.createElement(zr,{theme:{color:"dark"}},Ve.createElement(Vn,{ref:C,preferredPlacement:"left",tooltip:"Double click to edit!"},(M,W)=>Ve.createElement(t3,{ref:W,saving:d,isSelected:n,palette:E})))))),Ve.createElement(cs,{...e})),Ve.createElement(mt,null,l==="edit"?Ve.createElement(OP,{blockData:h,onClose:R}):null))}var t3=Ve.forwardRef(function(t,o){let{isSelected:n,saving:r,palette:i}=t,[,a]=I(o3);return Ve.createElement(B.View.Child,{ref:o,descendantOf:PP,style:[a.blockToolbar,b.directionRow],inactiveStyle:n||r?Ce.visible:Ce.hidden,activeStyle:Ce.visible},r?Ve.createElement(A,{size:"small",icon:Oe},"Saving"):i.groups.map(s=>Array.isArray(s.commands)?s.commands:[]).flat().map((s,l,u)=>Ve.createElement(A,{key:s.key,title:s.title,size:"small",icon:s.icon,style:[l<u.length-1?p.Margin.smallRight:null],onPress:()=>{var d;(d=s.trigger)==null||d.call(s,i)}})))}),o3=D.create({blockToolbar:e=>({position:"absolute",top:p.small,right:p.small,padding:p.small,borderRadius:T.RADIUS_M,backgroundColor:e.colors.background.mid,...e.shadows.base})});c();var Yi=k(O());function TP(e){let{node:t,editor:o}=e,n=xt(),r=async()=>{let[a]=await n.prompt({title:"Replace file"});(a==null?void 0:a.kind)==="file"&&o.change(s=>{s.insertDataByKey(t.key,["ref"],a)})},i=nt(o,t.key,[{key:"types",commands:()=>[{key:"files",title:"Replace file\u2026",icon:S.Paperclip,trigger:()=>{r()}}]}]);return Yi.createElement(ve,{...e,palette:i},Yi.createElement(Vt,{...e},Yi.createElement(Yi.Suspense,{fallback:Yi.createElement(Fi,{icon:Oe,title:""})},Yi.createElement(n3,{...e,onReplace:r}))),Yi.createElement(cs,{...e}))}function n3(e){var u,d;let{node:t,editor:o,onReplace:n}=e,{ref:r}=t.data.toFrozenObject(),a=(d=(u=po(r).resolution)==null?void 0:u.extra)==null?void 0:d.file,s=()=>{a?ya(As(a.downloadURL)):o.readOnly||n()},l=jt(ll,{file:a},[a]);return Yi.createElement(Fi,{onPress:s,icon:l,title:a?a.name:"File has been deleted",subtitle:a?Pu(a.size):void 0,details:a?Rx(a):void 0})}c();var rn=k(O());c();var ms=k(O());z();function EP(e){let{node:t,editor:o,onClose:n}=e,r=wm(t.text),[i,a]=ms.useState(()=>t.data.get("id")||""),s=u=>{let d=wm(u);d.length===u.length?a(d):a(u)},l=()=>{o.change(u=>{i?u.setDataByKey(t.key,["id"],wm(i)):u.removeDataByKey(t.key,["id"])}),n()};return ms.createElement(kt,{size:"small",title:"Edit heading anchor",footer:ms.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},ms.createElement(A,{kind:"secondary",onPress:n,style:p.Margin.smallRight},"Close"),ms.createElement(A,{kind:"primary",onPress:l},"Save")),onClose:n},ms.createElement(Ut,{autoFocus:!0,size:"large",icon:S.Hash,label:"Anchor",labelDescription:"Edit this anchor to customize a nice looking url for this heading.",value:i,onChangeText:s,onSubmit:l,placeholder:r}))}var r3=K.createResponsiveComponent(le);function LP(e){let{editor:t,node:o,parent:n,children:r}=e,[,i]=I(L),[,a]=I(a3),[s,l]=rn.useState(null),u=rn.useContext(Za),d=rn.useContext(Gn),m=rn.useMemo(()=>Sg(t,o.key,[{key:"edit",commands:[{key:"edit",title:"Edit anchor",icon:S.Link,trigger:()=>{l("edit")}}]}]),[t,o.key]),{anchorElement:f,anchoredBlockId:g,anchoredBlockInteractiveState:h,onAnchoredBlockPress:y}=ag(o,{accessibilityLabel:"Direct link to heading",anchorIconSize:l3[o.type]}),C=n.type===zt;return rn.createElement(rn.Fragment,null,rn.createElement(ve,{...e,palette:m},rn.createElement(r3,{tag:i3(o.type),nativeID:g,onClick:C?()=>{}:()=>y(),...h.events,style:[b.directionRow,b.alignEnd]},rn.createElement(K.Text,{selectable:!0,mobileStyle:[c3[o.type]],desktopStyle:[s3[o.type]],nativeID:`text-${g}`,style:[i.text,a[u],a[d]]},r,C?null:f))),rn.createElement(mt,null,s==="edit"?rn.createElement(EP,{node:o,editor:t,onClose:()=>l(null)}):null))}function i3(e){switch(e){case De:return"h2";case ze:return"h3";case $e:return"h4";default:throw new Error(`invalid node type (${e}) for heading`)}}var a3=D.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},caption:{},quote:{},swaggerParameter:{}}),s3={[De]:ao.Heading1,[ze]:ao.Heading2,[$e]:ao.Heading3},c3={[De]:ao.Heading2,[ze]:ao.Heading3,[$e]:ao.Body},l3={[De]:T.ICON_L,[ze]:T.ICON_S,[$e]:T.ICON_XXS};c();var kg=k(O());function NP(e){let{node:t,children:o,style:n,attributes:r}=e,{sections:i}=kg.useContext(Gr),a=i.get(t.key);return kg.createElement("div",{id:a,...r,style:n},o)}c();var Mv=k(O());z();function DP(e){let{node:t,editor:o,children:n}=e,{align:r="center"}=t.data.toFrozenObject(),i=xt(),a=Kr(o,t.key),s=u=>{o.change(d=>{d.insertDataByKey(t.key,["align"],u)})},l=nt(o,t.key,[{key:"types",commands:()=>[{key:"files",title:"Add images\u2026",icon:S.Image,trigger:()=>{i.prompt({accept:"images",title:"Select image",acceptURL:!0}).then(u=>{o.change(d=>{u.forEach(m=>{d.appendNodeByKey(t.key,vo.createImageBlock(m))})})})}}]},{key:"align",commands:[{key:"left",type:1,title:"Left align",selected:r==="left",icon:S.AlignTextLeft,trigger:()=>s("left")},{key:"center",type:1,title:"Center",selected:r==="center",icon:S.AlignTextCenter,trigger:()=>s("center")},{key:"right",type:1,title:"Right align",selected:r==="right",icon:S.AlignTextRight,trigger:()=>s("right")}]},...a?[a]:[]]);return Mv.createElement(ve,{palette:l,...e},Mv.createElement(K.View,{style:[b.directionRow,r==="center"&&b.justifyContentCenter,r==="left"&&b.justifyContentStart,r==="right"&&b.justifyContentEnd,u3.imagesWrapper],mobileStyle:[b.wrap,b.justifyContentCenter]},n))}var u3=X.create({imagesWrapper:{columnGap:p.medium,rowGap:p.medium}});c();var Le=k(O());z();c();var pi=k(O());z();function xg(e){let{node:t,editor:o,onClose:n}=e,[r,i]=pi.useState(()=>vo.getImageAltText(t)||""),a=()=>{o.change(s=>{s.insertDataByKey(t.key,["alt"],r)}),n()};return pi.createElement(kt,{title:"Set image alt text",onClose:n,footer:pi.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},pi.createElement(A,{kind:"secondary",onPress:n,style:p.Margin.smallRight},"Cancel"),pi.createElement(A,{kind:"primary",onPress:a},"Save"))},pi.createElement(v,{style:[p.Margin.largeBottom]},pi.createElement(v,{style:[p.Margin.mediumBottom]},pi.createElement(op,null,"This will be read out by screen readers when the image is encountered. Describe the image in detail \u2013 it's how visually impaired readers know what's in front of them.")),pi.createElement(Ut,{autoFocus:!0,size:"large",value:r,placeholder:"Edit alt text",onChangeText:i,onSubmit:a})))}c();c();c();var Jn=k(O());c();var Tv=k(O()),AP=Tv.createContext(()=>{}),d3=Tv.createContext([]);c();var m3=Ms();function BP(){let e=Yc();return Ev(e.uid)}function Ev(e){return`${e}-${m3}`}c();var zP=k(O());function WP(){return zP.useContext(AP)}c();var ac=k(O());var p3=ac.createContext({updateRevision:()=>{throw new Error("useUpdateRevision was called outside the UpdateRevisionProvider")},notifyEditing:()=>{throw new Error("useNotifyEditing was called outside the UpdateRevisionProvider")}});function Ft(){let e=ac.useContext(p3);if(!e)throw new Error("useUpdateRevision was called outside the UpdateRevisionProvider");return e.updateRevision}c();var Bv=k(O());c();c();var f3=st("edits"),VP=({onSet:e})=>{e(t=>{f3.debug("state",t)})};c();c();function Tl(e,t,o,n,r){var l,u,d,m,f,g;let i=(u=(l=e[t])==null?void 0:l[o])==null?void 0:u.pages[n],a=typeof r=="function"?r(i):r;function s(h){var y;return{...e,[t]:{...e[t],[o]:{...(y=e[t])==null?void 0:y[o],pages:h}}}}if(a===void 0){let h={...(m=(d=e[t])==null?void 0:d[o])==null?void 0:m.pages};return delete h[n],s(h)}return s({...(g=(f=e[t])==null?void 0:f[o])==null?void 0:g.pages,[n]:a})}function El(e,t,o=()=>!0,n=()=>!0){for(let r in e)if(o(r)){for(let i in e[r])if(n(r,i)){for(let a in e[r][i].pages)if(t(r,i,a,e[r][i].pages[a])===!1)return}}}function yd(e,t,o,n){var r,i;return(i=(r=e[t])==null?void 0:r[o])==null?void 0:i.pages[n]}function Qr(e){return!e.initialSheet||!e.value?!1:!e.initialSheet.value.document.equals(e.value.document)}function FP(e,t,o,n){let r=e?Qr(e):!1,a={initialSheet:e!=null&&e.initialSheet&&r&&e.initialSheet.beforeSaveKey===n?e.initialSheet:{key:n,value:o},value:t,save:e==null?void 0:e.save,restored:r||e==null?void 0:e.restored,modifiedOnce:(e==null?void 0:e.modifiedOnce)||!1};return a.modifiedOnce=a.modifiedOnce||Qr(a),a}function Lv(e,t){return!!(e.restored&&e.restored.initialSheetKey===t)}function GP(e,t,o){return e.restored?{initialSheet:{key:o,value:t},value:e.restored.value,restored:void 0,modifiedOnce:!0}:e}function HP(e){if(!e.restored)return e}function XP(e,t){if(!e.value)throw new Error("Cannot mark a page as saved without a value");return{initialSheet:t,value:e.value,save:"saved",modifiedOnce:e.modifiedOnce}}var qP=new WeakMap;function vd(e,t=void 0){if(!t){let r=qP.get(e);if(r)return r}let o=new Set;El(e,(r,i,a,s)=>{if(s.save==="failed")return o.add("crashed"),!1;s.save==="saving"?o.add("saving"):Qr(s)?o.add("modified"):s.save==="saved"&&o.add("saved")},r=>!t||t.spaceKey===r,(r,i)=>!t||t.spaceKey===r&&(t.changeRequestKey||"root")===i);let n="untouched";return o.has("crashed")?n="crashed":o.has("modified")?n="modified":o.has("saving")?n="saving":o.has("saved")&&(n="saved"),t||qP.set(e,n),n}var Ll=st("edits:backup"),Nv=new Sw("edits-backup");Nv.version(1).stores({pages:"++id"});var Og=Nv.table("pages"),KP=Gm(2e3,{maxWait:1*60*1e3,concurrent:!1}),jP=({setSelf:e,onSet:t})=>{t((o,n)=>{let r=vd(n instanceof ti?{}:n),i=vd(o);r!==i&&Ll.debug("status is going from",r,"to",i);let a=()=>h3(o);i==="saved"&&r!=="saved"?(KP.cancel(),a()):KP(a)}),e(g3())};async function g3(){let e={},t=[];try{t=await Og.limit(200).toArray()}catch(n){Ll.warning("Error while accessing entries from edits backup database:",n)}if(t.length===0)return Ll.info("No backups stored"),e;Ll.info(`Loading ${t.length} backup pages: ${t.map(n=>n.pageKey).join(",")}`);let o=new Nr("edits:load-backup",{sampleRate:1});return o.label("Entries",t.length),o.wrapSync(()=>(t.forEach(n=>{let r;try{let i=IS(JSON.parse(n.value));if(um.isValue(i))r=i;else throw new Error("invalid JSON in local database, not an editor value")}catch(i){Ll.warning("Error while reading entry from edits backup database:",i);return}e=Tl(e,n.spaceKey,n.changeRequestKey,n.pageKey,{modifiedOnce:!1,restored:{value:r,initialSheetKey:n.initialSheetKey}})}),e))}async function h3(e){let t=new Nr("edits:flush-backup");await t.wrap(async()=>{let o=[];El(e,(n,r,i,a)=>{if(Qr(a)&&a.value){let s=WS(a.value);o.push({spaceKey:n,changeRequestKey:r,pageKey:i,value:JSON.stringify(Jh(s)),initialSheetKey:a.initialSheet.key})}else a.restored&&o.push({spaceKey:n,changeRequestKey:r,pageKey:i,value:JSON.stringify(Jh(a.restored.value)),initialSheetKey:a.restored.initialSheetKey})}),t.label("Entries",o.length),await Nv.transaction("rw",Og,async n=>{await Og.clear(),o.length>0&&await Og.bulkPut(o)}),Ll.info(`Backup ${o.length} pages: (${o.map(n=>n.pageKey).join(", ")})`)})}c();c();var _g=60*1e3;function UP(e,t,o){let n=X1(Tm(e,t||"root",o)),r=Iw(_g),i=BP();return n&&n.participantId!==i&&n.lockedAt>r-_g?n:null}var YP=st("edits:lock"),ZP=({onSet:e})=>{let t=new Map,o=new Map,n=(r,i,a,s)=>{let l=Tm(r,i,a),{currentUser:u}=Rs.auth();if(!u)return;let d=u.uid,m=Ev(d);if(s){let f=0,g=()=>{f+=1;let y={userId:d,participantId:m,lockedAt:Date.now()};YP.info(`Locking page ${r}/${i}/${a} for ${m} (${f})`,y),l.set(y)};if(g(),!t.has(l.toString())){let y=l.onDisconnect();y.remove(),t.set(l.toString(),y)}let h=setInterval(()=>{g()},_g/2);o.set(l.toString(),h)}else{YP.info(`Removing lock for page ${r}/${i}/${a} for ${m}`),l.transaction(h=>h&&h.participantId!==m?h:null);let f=t.get(l.toString());f&&(f.cancel(),t.delete(l.toString()));let g=o.get(l.toString());g&&(clearInterval(g),o.delete(l.toString()))}};e((r,i)=>{El(r,(a,s,l,u)=>{let d=yd(i instanceof ti?{}:i,a,s,l),m=Qr(u),f=d?Qr(d):!1;m!==f&&n(a,s,l,m)}),El(i instanceof ti?{}:i,(a,s,l)=>{yd(r,a,s,l)||n(a,s,l,!1)})})};c();var Nl=st("edits:save"),y3=Gm(5e3,{maxWait:3*60*1e3,concurrent:!1}),$P=({onSet:e,setSelf:t})=>{e(o=>{y3(()=>v3(o,t))})};async function v3(e,t){let o=Object.entries(e).flatMap(([n,r])=>Object.entries(r).flatMap(([i,a])=>{let s=[],l=Object.entries(a.pages).filter(([d,m])=>Qr(m));if(l.length===0)return;l.forEach(([d])=>{s.push([n,i,d])}),t(d=>Dv(e,d instanceof ti?{}:d,s,"saving"));let u=i==="root"?void 0:i;return b3(n,u,l).then(d=>(t(m=>Dv(e,m instanceof ti?{}:m,s,"saved",d.sheets)),[n,u,d.revision]),()=>(t(d=>Dv(e,d instanceof ti?{}:d,s,"failed")),[n,u,null]))})).filter(ge);return o.length===0?[]:await Promise.all(o)}function Dv(e,t,o,n,r=new Map){let i={...t};return o.forEach(([a,s,l])=>{i=Tl(i,a,s,l,u=>{if(!u)return;let d=yd(e,a,s,l);if(!d||!d.value||!u.value)return;let m=r.get(l);if(n==="saved"){if(!m){Nl.warning(`Could not find sheet for page ${a}/${s}/${l}. Page was probably deleted, removing it from state.`);return}return XP(u,m)}return d.value.document!==u.value.document?u:{...u,save:n}})}),i}async function b3(e,t,o){let{currentUser:n}=Rs.auth(),r=new Nr("edits:saveSpace",{sampleRate:1});r.label("Space",e),r.label("Change Request",t),r.label("Pages",o.length);let i=new Map;try{if(!n)throw new Error(`Attempted to save locally changed space ${e} ${t?`with change request ${t} `:""}but user is not logged in`);let a=await r.wrap(async()=>(Nl.info(`starting save of ${o.length} pages in space ${e} ${t?`(change request: ${t}) `:""}`),Z1(e,t,(s,l)=>{o.forEach(([u,d])=>{fr(s,u,m=>{if(m.kind!=="sheet"||!d.value)return m;let f=qS({document:d.value.document,users:[n.uid],revision:s.key,page:u});return f.previous=m.sheet,FS(l,e,f),Nl.debug("Updating page",u,"with sheet",f.key),d.initialSheet.key!==m.sheet&&Nl.warning(`sheet in page "${u}" has been modified since the edits started, expected sheet "${d.initialSheet.key}" but got "${m.sheet}". Potential changes will be replaced.`),i.set(u,{key:f.key,beforeSaveKey:m.sheet,value:d.value}),{...m,sheet:f.key}})})})));return Nl.info(`Saved ${o.length} page(s) (${o.map(s=>s[0]).join(", ")}) to new revision ${a.key} in ${t?`change request ${t} in `:""}space ${e}`),{sheets:i,revision:a}}catch(a){throw Nl.error(`Couldn't save ${o.length} locally stored pages (${o.map(s=>s[0]).join(", ")}) in ${t?`change request ${t} in `:""}space ${e}`,a.stack),a}}var Ig=bt({key:"globalPageEditsAtom",default:{},effects:[$P,jP,ZP,VP]}),QP=Qd({key:"pageEditsSelector",get:([e,t,o])=>({get:n})=>{var i,a;return(a=(i=n(Ig)[e])==null?void 0:i[t])==null?void 0:a.pages[o]},set:([e,t,o])=>({set:n},r)=>{r instanceof ti||n(Ig,i=>Tl(i,e,t,o,r))}});c();var C3=Qd({key:"editsStatusSelector",get:e=>({get:t})=>{let o=t(Ig);return vd(o,e)}});function JP(e){return yn(C3(e))}c();var Cd=k(O());c();var Rg=k(O());var bd=Rg.createContext({baseRevision:null,pages:[],diffs:new Map,diffMode:null});c();var sc=k(O());var e0=sc.createContext({pages:[],setContentDiffPage:e=>{}});function Pg(e,t,o=!1){let{diffs:n,diffMode:r}=Cd.useContext(bd),i=r==="full"?n.get(t.key):null,a=(i==null?void 0:i.type)==="modified"&&i.before.page.kind==="sheet"?i.before.page.sheet:null,s=cx(t.sheet?{spaceKey:e,sheetKey:t.sheet}:null,`${e}-${t.key}`);if(t.sheet&&!s)throw new Error(`Sheet "${t.sheet}" not found`);let[l]=Ty([a?{spaceKey:e,sheetKey:a}:null]);if(a&&!l)throw new Error(`Original sheet "${a}" not found`);return[Cd.useMemo(()=>{let d=o&&!i?"conflicts":"document",m=s?Av(s,d):ry(t.key);if(i){let f=l?Av(l,d):ry(t.key);return um.create({document:ES(f.document,m.document)})}return m},[s,t.key,i,l,o]),s]}function o0(e,t){let{baseRevision:o,diffMode:n}=Cd.useContext(bd),r=n==="quick"?o==null?void 0:o.pages[t.key]:null,i=r&&r.kind==="sheet"?r.sheet:null,[a]=Ty([i?{spaceKey:e,sheetKey:i}:null]);if(i&&!a)throw new Error(`Original sheet "${i}" not found`);if(n!==null)return a?Av(a,"document"):null}var t0=new WeakMap;function Av(e,t){let o=t!=="conflicts",n=t0.get(e),r=o&&n?n:xm(e.body,t);if(o&&t0.set(e,r),mr(r.document)){let i=r.change();return i.focus(),i.value}return r}var Sd=st("edits:page");function n0({revision:e,changeRequest:t,page:o,analyticsContext:n}){let r=co(),[i,a]=Pg(e.space,o,e.conflicts&&o.key in e.conflicts.pages),s=JP({spaceKey:e.space,changeRequestKey:(t==null?void 0:t.key)||null}),[l,u]=qo(QP([e.space,(t==null?void 0:t.key)||"root",o.key]));Bv.useEffect(()=>{var h,y;if(!(l!=null&&l.restored))return;let f=()=>{u(C=>C&&GP(C,i,a==null?void 0:a.key))},g=()=>{u(C=>C&&HP(C))};if(Lv(l,a==null?void 0:a.key))Sd.info(`performing a fast-forward restore on sheet ${(y=l==null?void 0:l.restored)==null?void 0:y.initialSheetKey}`),f(),r.close("restore-page-edits"),r.notify({id:"restore-page-edits",kind:"info",title:"Previous session restored",details:"We\u2019ve automatically restored the latest unsaved changes you've made.",timeout:3500});else{Sd.info(`user has changes made against sheet ${(h=l==null?void 0:l.restored)==null?void 0:h.initialSheetKey} that cannot be fast-forwarded as current sheet is ${a==null?void 0:a.key}. prompting user for their desired action`);let C=r.notifyOrUpdate({id:"restore-page-edits",kind:"info",title:"Unsaved changes found",details:"We have found unsaved changes you've previously made on this page. Restoring these changes will overwrite the current content. Would you like to restore them?",timeout:0,actions:[{label:"Restore",onPress:()=>{Sd.info("user restored changes from the non-fast-forward backup"),f(),C()}},{label:"Discard",onPress:()=>{Sd.info("user discarded changes from the non-fast-forward backup"),g(),C()}}]});return C}},[l,i,a,u,r]);let[d,m]=S3(l,i,a==null?void 0:a.key);return Bv.useEffect(()=>{Sd.info(`resolved page value with resolution ${m}`)},[m]),{value:d,onChange:f=>{u(g=>{let h=FP(g,f.value,i,a==null?void 0:a.key);return h.modifiedOnce&&!(g!=null&&g.modifiedOnce)&&ee({...n,page:o.key,type:"edit_page_document_start",collaborators:0}),h})},crashed:s==="crashed"}}function S3(e,t,o){var n;if(!e)return[t,"no-local-edits-or-backup"];if(Qr(e)){if(!e.value)throw new Error("Should never be modified and value being null");return[e.value,"local-edits"]}return!e.value&&e.restored?Lv(e,o)?[e.restored.value,"backup-fast-forward"]:[t,"backup-no-ff"]:e.value&&((n=e.initialSheet)==null?void 0:n.beforeSaveKey)===o?[e.value,"local-no-edits-post-save"]:e.value?[t.merge({history:e.value.history,decorations:e.value.decorations,selection:e.value.selection.normalize(t.document)}),"local-no-edits-selection-only"]:[t,"local-no-edits"]}var w3=B.createInteractiveComponent(S.EmojiReaction);function r0(e){let{analyticsContext:t,page:o,size:n,readOnly:r=!0}=e,i=Jn.useRef(null),[,a]=I(L),s=Ft(),[l,u]=Bn(),d=async m=>{var f;(f=i.current)==null||f.close(),m!==o.emoji&&(await u(()=>s(g=>{fr(g,o.key,{emoji:m})})),ee({...t,...m?{type:"edit_pick_page_emoji",pageKind:o.kind,emoji:m}:{type:"edit_remove_page_emoji",pageKind:o.kind}}))};return r?o.emoji?Jn.createElement(Co,{code:o.emoji,size:n}):null:Jn.createElement(qa,{ref:i,wrapper:Wr,anchor:({ref:m,opened:f,toggle:g})=>Jn.createElement(B.TouchableOpacity,{ref:m,onPress:g},l?Jn.createElement(Oe,{size:n}):Jn.createElement(Jn.Fragment,null,o.emoji?Jn.createElement(Co,{code:o.emoji,size:n}):Jn.createElement(w3.Child,{size:n,style:f?a.textMid:a.textMuted,activeStyle:a.textMid})))},Jn.createElement(tn,{kind:"wide",preferredAlignment:"middle"},Jn.createElement(Np,{onPick:d,onRemove:o.emoji?()=>d(void 0):void 0})))}c();var ie=k(O());z();c();var i0=JSON.parse('{"pageCoverBleedFull":"pageCoverBleedFull_eqtqd"}');var xo={};zC(xo,{COMMENTS_COLUMN_EXPANDED_WIDTH:()=>Tg,MAX_PAGE_OUTLINE_WIDTH:()=>ps,PAGE_BODY_DESKTOP_H_PADDING:()=>It,PAGE_BODY_DESKTOP_WIDTH:()=>Mg,PAGE_BODY_MAX_WIDTH:()=>er,PAGE_BODY_MOBILE_H_PADDING:()=>Do,PAGE_OUTLINE_WIDTH:()=>Vv,PUBLIC_DESKTOP_HEADER_HEIGHT:()=>k3,PUBLIC_MOBILE_HEADER_HEIGHT:()=>x3,SPACE_HEADER_HEIGHT:()=>zv,TOC_DESKTOP_WIDTH:()=>Wv,columnsWidthThreadhold:()=>cc,getPageOutlineWrapperWidth:()=>qv,getToCWrapperDesktopWidth:()=>a0,pageSwitchThreadhold:()=>fs});c();var zv=T.L,er=750,It=110,Do=p.medium,Mg=er+2*It,Wv=300,Tg=300,Vv=220,ps=300,k3=T.XL,x3=T.L;function cc(e,t=0){let o=t+Wv+Mg+Vv;return e===2||(o+=Tg-Do),o}function fs(e=0){return e+Mg}function a0(e){let t=`(100vw - ${Mg}px) / 2 - ${e||0}px`;return`max(${Wv}px, calc(${t}))`}function qv(e,t){let o=`100vw - ${a0(e)} - ${er}px - ${It}px - ${typeof t>"u"?It:t||0}px - ${e||0}px`;return`max(${Vv}px, calc(${o}))`}c();var an=k(O());z();c();c();var c0=k(O());c();var s0=JSON.parse('{"commentHalo":"commentHalo_0AauK"}');function Fv(e){return c0.default.createElement(ae,{style:[s0.commentHalo],as:"span",contentEditable:!1})}Fv.displayName="BlockCommentHalo";function l0(e){var s;let{screen:t}=Wi(),o=yn(Ly);if(!e)return null;let n=t.type==="space"&&((s=t.sideSheet)==null?void 0:s.type)==="comments"?t.sideSheet.node:null;return(o&&o.highlighting&&o.node!==n?o.node:null)===e||n===e?Fv:null}c();var Zi=k(O());z();var u0=k(Ww());var d0=e=>{let{nodeKey:t,visible:o,buttonSize:n,style:r,shortcutsActive:i}=e,a=Zi.useContext(zy),{navigate:s}=_e(),l=Zi.useMemo(()=>a(t),[t]),u=(0,u0.useSubscription)(l),d=Zi.useMemo(()=>(u!=null?u:[]).reduce((C,x)=>{let w=Object.values(x.replies).reduce((P,R)=>P+R.count,0);return 1+C+w},0),[u]),m=d>0,f=u==null?void 0:u[0],g=()=>{var C;f&&s({screen:{type:"space",space:f.space,sideSheet:{type:"comments",node:(C=f.node)!=null?C:void 0,comment:f.key}}})},h=()=>{s({screen:{sideSheet:{type:"comments",node:t,context:"post",comment:void 0}}})},y=()=>m&&f?g():h();return yr(i?{[Fe.EDITOR_COMMENT]:y}:{},["editor-selection-collapsed","editor-selection-expanded"],[i,f]),Zi.createElement(le,{editable:!1,style:[o||m?Ce.visible:Ce.hidden,r,m?Gv.commentsButtonWithComments:null],"data-hide-on-drag":!0},Zi.createElement(Kw,{kind:"secondary",size:"small",style:b.justifyContentEnd},Zi.createElement(A,{icon:S.Comment,title:m?`${d} Comment${d>1?"s":""}`:"Comment",onPress:y,size:n,style:[Gv.commentButton]},m?d:null),m?Zi.createElement(A,{icon:S.Plus,size:n,title:"Leave another comment",onPress:h,style:[Gv.commentButton]}):null))},Gv=X.create({commentButton:{width:"fit-content"},commentsButtonWithComments:{right:-48-p.xlarge}});c();var Xv=k(O());c();var Hv=JSON.parse('{"blockWrapper":"blockWrapper_y0Ubs","pageWrapper":"pageWrapper_ca2kA"}');function m0(e){let{children:t,style:o}=e;return Xv.createElement(ae,{style:[Hv.pageWrapper,o]},t)}function wd(e){let{children:t,style:o}=e;return Xv.createElement(ae,{style:[Hv.blockWrapper,o]},t)}function O3(e){let{children:t,renderMode:o,isDiffViewEnabled:n,isFullPage:r,isPDF:i,node:a,interactive:s}=e,{desktopSidebarWidth:l}=an.useContext(vr),{customBreakpointsPageBodyStyles:u}=an.useMemo(()=>({customBreakpointsPageBodyStyles:{[cc(2,l)]:b.justifyContentCenter}}),[l]),d=l0(a);if(o==="unstyled")return an.createElement(v,{...s==null?void 0:s.events},t);let m=o==="full-width"?an.Fragment:wd;return an.createElement(v,{style:[b.flex1,i?p0.pdfContainer:null]},an.createElement(m,null,an.createElement(K.View,{style:[b.flex1,b.directionRow,r?b.justifyContentCenter:b.justifyContentEnd],mobileStyle:[b.justifyContentCenter],customBreakpointsStyles:u,...s==null?void 0:s.events},an.createElement(v,{style:[b.flex1]},d?an.createElement(d,null):null,an.createElement(K.View,{mobileStyle:[n?p0.pageBodyMobileWithDiff:null]},t)))))}function f0(e){let{isCommentMarginVisible:t,isDiffViewEnabled:o,isFullPage:n}=e,r=Ye();return an.useMemo(()=>[i=>an.createElement(O3,{...i,isPDF:r,isDiffViewEnabled:o,isCommentMarginVisible:t,isFullPage:n}),r||!t?void 0:d0],[o,n,t,r])}var p0=X.create({pdfContainer:{breakInside:"avoid",breakBefore:"auto"},pageBody:{maxWidth:er+2*It},pageBodyWithComments:{maxWidth:er+It,paddingRight:0},pageBodyMobileWithDiff:{marginLeft:Do*2},pageBodyDesktopLeftMargin:{marginLeft:It},pageBodyDesktopRightPadding:{paddingRight:It},pageBodyMobileLeftMargin:{marginLeft:Do},pageBodyMobileRightPadding:{paddingRight:Do},pageBodyPDFLeftMargin:{marginLeft:Do},pageBodyPDFRightPadding:{paddingRight:Do}});c();var pe=k(O());z();c();var Kv=k(RE()),it=k(O());z();function g0(e){let{analyticsContext:t,parentPages:o,childPages:n,onClose:r,revision:i,page:a}=e,[,s]=I(R3),[l,u]=Bn(),d=Ft(),m=async(f=!0)=>{await u(async()=>{await d(g=>{if(f){[a,...o,...n].forEach(h=>{hu(g,h.key)});return}hu(g,a.key)}),await ee({...t,type:"edit_conflicts_keep_page",pageKind:a.kind})}),r()};return it.createElement(kt,{title:"Keep page",onClose:r,footer:it.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},it.createElement(A,{kind:"secondary",onPress:()=>{},style:p.Margin.smallRight,disabled:l},"Cancel"),it.createElement(fa,{kind:"secondary",onPress:()=>m(!1),style:p.Margin.smallRight},"Keep only this page"),it.createElement(fa,{kind:"merge",onPress:()=>m()},"Keep"))},(0,Kv.default)(o)?null:it.createElement(v,{style:[(0,Kv.default)(n)?null:s.parentPages]},it.createElement(_3,{revision:i,pages:o,onClose:r})),it.createElement(I3,{revision:i,pages:n,onClose:r}))}function _3(e){let{pages:t,revision:o}=e,{conflicts:n}=o,[,r]=I(L),i=t.length;return t.length?it.createElement(v,{style:[p.Margin.mediumTop]},it.createElement(v,{style:[b.directionRow,p.Margin.smallBottom]},it.createElement(so,{kind:"warning",icon:S.Warning}),it.createElement(N,{style:[p.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",i>1?"are":"is"," ",t.length," conflicted parent"," ",it.createElement(ci,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",it.createElement(ci,{count:i,singular:"it",plural:"all of them"}))),it.createElement(v,null,t.map(a=>{let s=n==null?void 0:n.pages[a.key];return it.createElement(ha,{key:a.key,layout:"wide",icon:()=>s==="deleted-in-head-subtree-modified-in-base"||s==="deleted-in-base-subtree-modified-in-head"?it.createElement(so,{kind:"warning",icon:S.Conflict}):it.createElement(so,{kind:"danger",icon:S.Trashcan}),title:a.title})}))):null}function I3(e){let{pages:t,revision:o}=e,{conflicts:n}=o,[,r]=I(L),i=t.length;return t.length?it.createElement(v,{style:[p.Margin.mediumTop]},it.createElement(v,{style:[b.directionRow,p.Margin.smallBottom]},it.createElement(so,{kind:"warning",icon:S.Warning}),it.createElement(N,{style:[p.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",t.length>1?"are":"is"," ",t.length," nested"," ",it.createElement(ci,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",it.createElement(ci,{count:i,singular:"it",plural:"all of them"}))),it.createElement(v,null,t.map(a=>{let s=n==null?void 0:n.pages[a.key];return it.createElement(ha,{key:a.key,layout:"wide",icon:()=>s==="deleted-in-head-subtree-modified-in-base"||s==="deleted-in-base-subtree-modified-in-head"?it.createElement(so,{kind:"warning",icon:S.Conflict}):it.createElement(so,{kind:"danger",icon:S.Trashcan}),title:a.title})}))):null}var R3=D.create({parentPages:e=>({borderBottomColor:e.colors.border.mid,borderBottomWidth:1,marginBottom:p.large,paddingBottom:p.large})});c();var ht=k(O());z();c();var tr=k(O());z();var h0=4;function y0(e){let{space:t,page:o,readOnly:n,...r}=e,[i,a]=tr.useState(!1),s=Uv(t,o),l=jv();if(s.length===0)return null;let u=i?s:s.slice(0,h0),d=s.length-h0,m=!i&&d>0;return tr.createElement(v,{...r,style:[b.directionRow,b.wrap]},u.map(f=>tr.createElement(v,{key:f.key,style:[p.Margin.mediumRight,p.Margin.mediumTop]},tr.createElement(A,{kind:"default",size:"small",icon:S.ArrowDownLeft,onPress:()=>l(f)},f.page.title))),m?tr.createElement(v,{style:[p.Margin.mediumTop]},tr.createElement(A,{kind:"grey",size:"small",onPress:()=>a(!0),title:tr.createElement(tr.Fragment,null,"Show ",d," more"," ",tr.createElement(ci,{count:d,singular:"backlink",plural:"backlinks"}))},`+${d} more`)):null)}function jv(){let{navigate:e}=_e();return tr.useCallback(t=>{let{page:o,revision:n}=t;if(o.kind==="link")return;let r=Ct(n,o.key);e({screen:i=>i.type==="space"&&n.space===i.space?{page:r}:{type:"space",space:n.space,page:r,changeRequest:void 0,revision:void 0}})},[])}function Uv(e,t){return P3([{kind:"page",page:t.key},{kind:"page",page:t.key,space:e.key}]).filter(n=>n.page.key!==t.key||n.revision.space!==e.key)}function P3(e){let t=e.map(r=>hS(r)),[o]=Fr([yS(t)]),n=V1(o.map(r=>({space:r.space,revision:r.revision})));return o.map((r,i)=>{var l;let a=(l=n[i])==null?void 0:l.result;return a?Object.keys(r.pages).filter(u=>Object.keys(r.pages[u].references).some(d=>t.includes(d))).map(u=>({key:`${a.space}-${u}`,revision:a,page:a.pages[u]})):null}).filter(ge).flat().sort((r,i)=>r.page.key<i.page.key?-1:r.page.key>i.page.key?1:0)}function Eg(e){let{space:t,analyticsContext:o,page:n,onClose:r,revision:i}=e,[,a]=I(L),s=Ft(),l=async u=>{u&&(await s(d=>{US(d,n.key,{deleteEmptyGroupParent:!0})}),ee({...o,type:"edit_remove_page",pageKind:n.kind})),r()};return ht.createElement(Su,{title:n.kind==="group"?"Delete group":"Delete page",kind:"danger",confirmButtonText:"Delete",onComplete:l},ht.createElement(v,null,ht.createElement(N,{style:[a.Body,a.text]},"Confirming will delete all the content; however, it will still be available in the version history.")),ht.createElement(ht.Suspense,{fallback:null},ht.createElement(M3,{space:t,page:n,onClose:r})),n.kind!=="link"&&ht.createElement(T3,{revision:i,page:n,onClose:r}))}function M3(e){let{space:t,page:o,onClose:n}=e,[,r]=I(L),i=jv(),a=Uv(t,o);return a.length===0?null:ht.createElement(v,{style:[p.Margin.mediumTop]},ht.createElement(v,null,ht.createElement(N,{style:[r.Label,r.textMuted]},"Deleting this page will break links in the following ",a.length," pages:")),ht.createElement(v,{style:[b.directionRow,b.wrap]},a.map(s=>ht.createElement(v,{key:s.key,style:[p.Margin.smallRight,p.Margin.smallTop]},ht.createElement(A,{kind:"secondary",size:"small",icon:S.ArrowDownLeft,onPress:()=>{n(),i(s)}},s.page.title)))))}function T3(e){let{page:t,revision:o,onClose:n}=e,[,r]=I(L),{navigateToPage:i}=$a(),s=du(o,t.key).map(u=>{var d;return((d=o.conflicts)==null?void 0:d.pages[u.key])==="deleted-in-base"?u:null}).filter(Boolean),l=s.length;return l?ht.createElement(v,{style:[p.Margin.mediumTop]},ht.createElement(v,{style:[b.directionRow,p.Margin.mediumBottom]},ht.createElement(so,{kind:"warning",icon:S.Warning}),ht.createElement(N,{style:[p.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",l>1?"are":"is"," ",s.length," nested"," ",ht.createElement(ci,{count:Object.keys(s.length).length,singular:"page",plural:"pages"})," ","deleted in the primary content but modified in your change request.",ht.createElement("br",null),"Deleting the current page, you would delete ",l>1?"all of them":"it",".")),ht.createElement(v,null,s.map(u=>ht.createElement(ha,{key:u.key,layout:"wide",icon:()=>ht.createElement(so,{kind:"danger",icon:S.Trashcan}),title:u.title,buttons:[ht.createElement(A,{size:"medium",kind:"secondary",onPress:()=>{n(),i(o,u.key)}},"Open")]})))):null}function v0(e){let{page:t,document:o,conflictType:n,pageWithComments:r,pageIsDiff:i}=e,[,a]=I(N3),s=Ft(),[l,u]=Bn(),d=co(),m=pr.getDocumentConflicts(o),f=m.isEmpty(),g=()=>{f&&u(async()=>{let y=await s(C=>{hu(C,t.key)});y&&!CS(y)&&d.notify({kind:"success",icon:S.CheckCircle,title:"All conflicts have been resolved",details:"You can now merge this change request."})})},h=()=>{switch(n){case"deleted-in-head":case"deleted-in-base":case"deleted-in-base-subtree-modified-in-head":case"deleted-in-head-subtree-modified-in-base":return pe.createElement(L3,{conflictType:n,onPressMarkAsResolved:g,loading:l,...e});default:return typeof n=="boolean"?pe.createElement(E3,{conflictNodes:m,canBeResolved:f,loading:l,onPressMarkAsResolved:g,...e}):null}};return pe.createElement(v,{style:[b.directionRow,b.justifyContentCenter,p.Margin.mediumBottom,a.alert]},pe.createElement(v,{style:[b.flex1,r||i?a.alertWithComments:a.alertFullWidth]},pe.createElement(v,{style:[b.directionRow,b.alignCenter,p.Padding.mediumVertical,p.Padding.mediumHorizontal,a.alertInner]},h())))}var E3=e=>{let{hasBeenResolved:t,canBeResolved:o,loading:n,conflictNodes:r,onPressMarkAsResolved:i}=e,[,a]=I(L),s=pe.useRef(),l=f=>{let g=Fa(f);g&&vk(g)},u=f=>{var C;let h=(s.current?r.findIndex(x=>x.key===s.current):-1)+f;h<0?h=r.size-1:h>=r.size&&(h=0);let y=(C=r.get(h))==null?void 0:C.key;y&&(s.current=y,l(y))},d=()=>{u(1)},m=()=>{u(-1)};return pe.createElement(v,{style:[b.flex1,b.directionColumn]},pe.createElement(v,{style:[b.directionRow]},pe.createElement(v,{style:p.Margin.mediumRight,testID:"conflictBanner.badge"},t?pe.createElement(so,{kind:"success",size:"large",icon:S.Check}):pe.createElement(so,{kind:"merge",size:"large",icon:S.Conflict})),pe.createElement(v,{style:[b.flex1,b.directionColumn]},pe.createElement(N,{style:[a.Label,a.textMid],testID:"conflictBanner.message"},t?"All conflicts with the primary content have been resolved for this page.":pe.createElement(pe.Fragment,null,"This page has ",o?"no":r.size," ","unresolved"," ",pe.createElement(ci,{count:r.size,singular:"conflict",plural:"conflicts"})," ","with the primary content."," ",o?"Confirm by marking this page as resolved.":"Resolve them by editing this document.")),t?null:pe.createElement(v,{style:[b.directionRow,b.wrap]},o?null:pe.createElement(v,{style:[b.directionRow,b.wrap,p.Margin.smallBottom]},pe.createElement(A,{style:[p.Padding.noneLeft],size:"medium",rightIcon:S.ChevronUp,onPress:m,testID:"conflictBanner.prevButton"},"Prev"),pe.createElement(A,{size:"medium",rightIcon:S.ChevronDown,onPress:d,style:p.Margin.smallRight,testID:"conflictBanner.nextButton"},"Next")),pe.createElement(v,{style:[{marginLeft:"auto"}]},pe.createElement(A,{size:"medium",kind:"secondary",title:o?"Confirm resolution of all conflicts in this page":"You need to first resolve conflicts in the document",disabled:n||!o,icon:n?Oe:S.Check,onPress:i,testID:"conflictBanner.resolveButton"},"Mark as resolved"))))))},L3=e=>{let{hasBeenResolved:t,loading:o,onPressMarkAsResolved:n,page:r,space:i,analyticsContext:a,revision:s,conflictType:l}=e,[u,d]=pe.useState(!1),[m,f]=pe.useState(!1),[,g]=I(L),h=du(s,r.key).filter(_=>{var E,M;return((E=s==null?void 0:s.conflicts)==null?void 0:E.pages[_.key])==="deleted-in-head"||((M=s==null?void 0:s.conflicts)==null?void 0:M.pages[_.key])==="deleted-in-base"}),y=()=>{let _="Do you want to keep the modified page or delete it?",E=h.length>1?"pages":"page";switch(l){case"deleted-in-base":return`This page has been deleted in the primary content, but has been modified in this change request. ${_}`;case"deleted-in-head":return`This page has been deleted in this change request, but has been modified in the primary content ${_}`;case"deleted-in-base-subtree-modified-in-head":return`This page has been deleted in the primary content but has ${h.length} conflicted child ${E}. Do you want to keep or delete it?`;case"deleted-in-head-subtree-modified-in-base":return`This page has been deleted in your change request but has ${h.length} conflicted child ${E}. Do you want to keep or delete it?`}},x=(_=>{let E=[];function M(W){var V;let G=Object.values(s.pages).find(F=>{var Y;return(Y=F==null?void 0:F.pages)==null?void 0:Y.includes(W.key)});G&&((V=s.conflicts)!=null&&V.pages[G.key])&&(E.push(G),M(G))}return M(_),E})(r),w=du(s,r.key),P=()=>f(!0),R=()=>{if(x.length||w.length){d(!0);return}n()};return pe.createElement(pe.Fragment,null,pe.createElement(pe.Fragment,null,pe.createElement(v,{style:p.Margin.mediumRight,testID:"conflictBanner.badge"},t?pe.createElement(so,{kind:"success",size:"large",icon:S.Check}):l==="deleted-in-base-subtree-modified-in-head"||l==="deleted-in-head-subtree-modified-in-base"?pe.createElement(so,{kind:"warning",size:"large",icon:S.Conflict}):pe.createElement(so,{kind:"danger",size:"large",icon:S.Trashcan})),pe.createElement(v,{style:[b.flex1]},pe.createElement(N,{style:[g.Label,g.textMid],testID:"conflictBanner.message"},t?"All conflicts with the primary content have been resolved for this page.":y())),t?null:pe.createElement(v,{style:[p.Margin.mediumLeft,b.directionRow]},pe.createElement(v,{style:[p.Margin.mediumLeft,b.directionRow]},pe.createElement(A,{size:"medium",icon:o?Oe:S.Copy,onPress:R,testID:"conflictBanner.keepButton"},"Keep"),pe.createElement(A,{size:"medium",icon:o?Oe:S.Trashcan,onPress:P,testID:"conflictBanner.deleteButton"},"Delete")))),pe.createElement(mt,null,u?pe.createElement(g0,{page:r,revision:s,analyticsContext:a,onClose:()=>d(!1),parentPages:x,childPages:w}):null),pe.createElement(mt,null,m?pe.createElement(Eg,{space:i,page:s.pages[r.key],revision:s,analyticsContext:a,onClose:()=>f(!1)}):null))},N3=D.create({alert:e=>({position:"sticky",top:-T.RADIUS_L,right:0,left:0,zIndex:1}),alertInner:e=>({borderRadius:T.RADIUS_L,borderWidth:1,borderColor:e.colors.border.mid,backgroundColor:e.colors.background.main,...e.shadows.tight}),alertFullWidth:{maxWidth:er+2*It},alertWithComments:{maxWidth:er+It}});c();var xe=k(O());z();var C0=xp({width:1448,height:240}),A3=B.createInteractiveComponent(C0.View);function S0(e){let{page:t}=e;return am(t)?xe.createElement(xe.Suspense,{fallback:xe.createElement(B3,null)},xe.createElement(z3,{...e})):null}function B3(e){return xe.createElement(v,{style:[xa.pageCover]},xe.createElement(w0,null))}function z3(e){let{page:t,revision:o,readOnly:n,analyticsContext:r}=e,[i,a]=xe.useState(!1),s=xt(),l=Ft(),u=Ye(),[d,m]=Bn(),f=b0(),g=null;if(t.cover){let M=t.cover.kind==="file"?o.files[t.cover.file]:null;f=(t.cover.kind==="file"?M?As(M==null?void 0:M.downloadURL):null:t.cover.url)||f,M!=null&&M.dimensions&&(g=M.dimensions)}let h=t.coverY||0,y=xe.useMemo(()=>new Ht.Value(h),[t.key,t.coverY]),C=xe.useRef(h);xe.useEffect(()=>{let M=y.addListener(({value:W})=>{C.current=W});return()=>{y.removeListener(M)}},[y]);let x=async()=>{a(!1),await l(M=>{fr(M,t.key,{coverY:C.current})}),ee({...r,type:"edit_reposition_cover"})},w=()=>{a(!1),y.flattenOffset(),y.setValue(h)},P=xe.useRef(null),R=se(P),_=xe.useCallback(async()=>{let[M]=await s.prompt({title:"Select cover image",accept:"images",acceptURL:!0});M&&(await m(()=>l(W=>{Im(W,t.key,M)})),ee({...r,type:"edit_upload_cover"}))},[r,l,t.key]),E=xe.useMemo(()=>{if(!n)return oe({groups:[{key:"pageCover",commands:[{key:"pageCover.select",icon:S.Image,title:"Select image",trigger:()=>{_()}},{key:"pageCover.reposition",icon:S.ArrowsMove,title:"Reposition",trigger:()=>{a(!0)}},{key:"pageCover.remove",icon:S.Trashcan,title:"Remove",trigger:async()=>{await l(M=>{jS(M,t.key)}),ee({...r,type:"edit_remove_cover"})}}]}]})},[r,t.key,l,n,_]);return xe.createElement(A3,{style:[xa.pageCover],isPDF:u},xe.createElement(W3,{coverUrl:f,animatedY:y,repositioning:i,isPDF:u,coverFileDimensions:g}),d?xe.createElement(w0,null):null,n||u?null:xe.createElement(B.View.Child,{style:[xa.pageCoverButton,b.directionRow],activeStyle:"visible",inactiveStyle:i||R.opened?"visible":"hidden"},i?xe.createElement(xe.Fragment,null,xe.createElement(A,{kind:"secondary",size:"medium",style:[p.Margin.smallRight],onPress:w},"Cancel"),xe.createElement(A,{kind:"primary",size:"medium",onPress:x},"Save")):xe.createElement(xe.Fragment,null,t.cover?null:xe.createElement(A,{icon:S.Image,kind:"secondary",size:"medium",style:[p.Margin.smallRight],onPress:()=>{_()}},"Change cover"),xe.createElement(A,{ref:P,icon:S.MoreVertical,rounded:!0,size:"medium",kind:"secondary",active:R.opened,onPress:()=>{E&&R.open(E)}}))))}function W3(e){let{coverUrl:t,animatedY:o,repositioning:n,isPDF:r,coverFileDimensions:i}=e,a=Ei(),s=xe.useRef(null),[l,u]=xe.useState(i),[d,m]=C0.useDimensions(),f=l?V3(d,l):0,g=xe.useMemo(()=>Zd.create({onStartShouldSetPanResponder:(w,P)=>!1,onStartShouldSetPanResponderCapture:(w,P)=>!1,onMoveShouldSetPanResponder:(w,{dx:P})=>n,onMoveShouldSetPanResponderCapture:(w,P)=>!1,onPanResponderGrant:(w,{dx:P})=>{o.extractOffset()},onPanResponderMove:(w,{dy:P})=>{o.setValue(P/f)},onPanResponderTerminationRequest:(w,P)=>!0,onPanResponderRelease:(w,{dy:P})=>{o.flattenOffset()}}),[f,n]),h=l?l.width*f:0,y=l?l.height*f:0,C=(d.height-y)/2,x=!!l&&m;return xe.createElement(v,{...g.panHandlers,style:[X.absoluteFill,xa.pageCoverInner,n&&q3.pageCoverRepositioning],...x?{testID:"page.cover"}:{}},!r&&xe.createElement(v,{style:[xa.pageCoverOverlay,a.color==="dark"&&xa.pageCoverOverlayDark,x&&xa.pageCoverOverlayReady]}),xe.createElement(Lw,{ref:s,source:{uri:t},loading:"priority",style:[xa.pageCoverImage,h&&y?{top:r?0:Ht.diffClamp(Ht.add(C,Ht.multiply(o,f)),-(y-d.height),0),left:(d.width-h)/2,width:h,height:y}:{width:"100%",top:o}],onLoad:()=>{var w,P,R,_;u({width:(P=(w=s.current)==null?void 0:w.width)!=null?P:0,height:(_=(R=s.current)==null?void 0:R.height)!=null?_:0})}}))}function w0(){return xe.createElement(v,{style:xa.pageCoverLoadingOverlay},xe.createElement(Oe,{size:T.ICON_L}))}function V3(e,t){let o=e.width/t.width,n=e.height/t.height;return t.height*o<e.height?n:o}var q3=X.create({pageCoverRepositioning:{cursor:"grab"}}),xa=X.create({pageCoverOverlay:{position:"absolute",inset:0,opacity:1,zIndex:1,transitionDelay:"200ms",transition:"opacity 500ms ease-in, z-index 1000ms ease-in",backgroundColor:"rgba(255,255,255,.2)",backdropFilter:"blur(10px)"},pageCoverOverlayDark:{backgroundColor:"rgba(0,0,0,.2)"},pageCoverOverlayReady:{zIndex:-1,opacity:0},pageCover:{position:"relative",width:"100%",height:240},pageCoverInner:{overflow:"hidden"},pageCoverImage:{position:"absolute",left:0,right:0,objectFit:"cover",pointerEvents:"none"},pageCoverButton:{position:"absolute",bottom:p.medium,right:p.medium},pageCoverLoadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:H.GREY_BLUE_LIGHT,justifyContent:"center",alignItems:"center"}});c();var Ge=k(O());z();c();var Bo=k(O());z();c();var Ao=k(O());c();var je=k(O());z();function k0(e){let{revision:t,analyticsContext:o,page:n,onClose:r}=e,i=je.useRef(null),[,a]=I(L),[s,l]=je.useState(n.title),[u,d]=je.useState(n.emoji),[m,f]=je.useState("path"in n&&n.path?n.path:""),[g,h]=je.useState("ref"in n?n.ref:void 0),y=Ft(),C=uu(t,n.key),x=C?Ct(t,C.key):"",w=n.kind!=="link"?kS(t,n.key,s):"",P=async()=>{await y(E=>{let M=n.kind!=="link"?{title:s,emoji:u,path:m?Zh(m):void 0}:{title:s,emoji:u,ref:g};fr(E,n.key,M)}),n.title!==s&&ee({...o,type:"edit_page_title",pageKind:n.kind}),m&&n.path!==m&&ee({...o,type:"edit_page_path",pageKind:n.kind}),n.emoji!==u&&ee({...o,...u?{type:"edit_pick_page_emoji",pageKind:n.kind,emoji:u}:{type:"edit_remove_page_emoji",pageKind:n.kind}}),r()},R=E=>{var M;(M=i.current)==null||M.close(),d(E)},_=je.useMemo(()=>u?Qe(Co,{code:u}):null,[u]);return je.createElement(kt,{title:"Edit page",onClose:r,footer:je.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},je.createElement(A,{kind:"secondary",onPress:r,style:p.Margin.smallRight},"Cancel"),je.createElement(fa,{kind:"primary",onPress:P},"Save"))},je.createElement(v,{style:[p.Margin.largeBottom]},je.createElement(v,{style:[p.Margin.smallBottom]},je.createElement(Xc,null,"Title")),je.createElement(v,{style:[b.directionRow,b.alignEnd]},je.createElement(v,{style:[p.Margin.mediumRight]},je.createElement(qa,{ref:i,wrapper:Wr,anchor:({ref:E,opened:M,toggle:W})=>je.createElement(A,{ref:E,active:M,onPress:W,kind:"secondary",size:"large",icon:_||S.EmojiReaction})},je.createElement(tn,{kind:"wide"},je.createElement(Np,{onPick:R,onRemove:u?()=>R(void 0):void 0})))),je.createElement(v,{style:[b.flex1]},je.createElement(Ut,{size:"large",value:s,onChangeText:l,onSubmit:P})))),n.kind==="link"?je.createElement(v,null,je.createElement(Up,{label:"Reference",size:"large",value:g,context:{space:t.space,revision:t.key},onChangeValue:h})):je.createElement(v,null,je.createElement(Ut,{label:"Slug",size:"large",prefix:`${x}/`,value:m,placeholder:w,onChangeText:f,onSubmit:P,feedback:m&&!sS(m)?{type:"warning",message:je.createElement(je.Fragment,null,"The page slug contains unsupported characters for an URL. Saving will replace it by"," ",je.createElement(N,{style:[a.Bold]},Zh(m)),".")}:void 0})))}c();var Oo=k(O());z();c();var Yv="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/docs-page.raw-MB3QTRCE.svg";var Zv="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/editorial-post.raw-527V74B3.svg";var $v="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/landing-page.raw-EDHVYRIQ.svg";var X3=225,K3=200,j3=112,Qv=T.ICON_XL,U3=[{type:"docs",name:"Docs page",description:"A standard page, with table of contents and an outline.",icon:Qe(zn,{source:{uri:Yv}})},{type:"editorial",name:"Editorial post",description:"No table of contents, but visible page outline. Great for blogs!",icon:Qe(zn,{source:{uri:Zv}})},{type:"landing",name:"Landing page",description:"A full-width page, with no table of contents and no outline.",icon:Qe(zn,{source:{uri:$v}})}];function x0(e){let{page:t,page:{layout:o=na(t)},analyticsContext:n,onClose:r}=e,[i,a]=Oo.useState(o),s=Ft(),l=d=>{a(d)},u=async()=>{o!==i&&(await s(d=>{fr(d,t.key,{layout:i})}),ee({...n,type:"edit_page_layout",pageKind:t.kind,pageLayout:i})),r()};return Oo.createElement(kt,{size:"xlarge",title:"Page Layout",subtitle:"Customize this page by selecting a layout. Some layouts include changes that only apply to public content.",onClose:r,footer:Oo.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},Oo.createElement(A,{kind:"secondary",onPress:r,style:p.Margin.smallRight},"Cancel"),Oo.createElement(fa,{kind:"primary",onPress:u},"Save"))},Oo.createElement(v,{style:[b.directionRow,b.justifySpaceBetween,p.Margin.mediumVertical]},U3.map(({name:d,description:m,type:f,icon:g})=>Oo.createElement(Y3,{key:f,type:f,name:d,description:m,icon:g,selected:f===i,onSelect:l}))))}function Y3({type:e,name:t,description:o,onSelect:n,selected:r,style:i,icon:a}){let[,s]=I(Z3),[,l]=I(L);return Oo.createElement(v,null,r?Oo.createElement(v,{style:[s.checkCircle]},Oo.createElement(Gw,{kind:"primary",size:Qv,icon:S.Check})):null,Oo.createElement(B.TouchableOpacity,{style:[s.layoutOptionCardWrapper,b.flexGrow1,r&&s.optionSelected,i],onPress:()=>n(e)},Oo.createElement(v,{style:[s.layoutOptionCardIllustrationWrapper]},Oo.createElement(a,{size:64})),Oo.createElement(v,{style:[s.layoutOptionCardContentWrapper,p.Padding.smallVertical,p.Padding.mediumHorizontal,b.flex1]},Oo.createElement(v,{style:[b.directionRow,b.alignCenter]},Oo.createElement(N,{style:[l.Heading3,l.text]},t)),Oo.createElement(N,{style:[l.Label,l.textMid]},o))))}var Z3=D.create({layoutOptionCardWrapper:e=>({width:X3,minHeight:K3,flexDirection:"column",backgroundColor:e.colors.background.muted,borderRadius:T.RADIUS_XL,borderWidth:1,borderColor:e.colors.border.main,overflow:"hidden"}),layoutOptionCardIllustrationWrapper:e=>({justifyContent:"center",alignItems:"center",height:j3}),layoutOptionCardContentWrapper:e=>({backgroundColor:e.colors.secondary.main,borderTopWidth:1,borderTopColor:e.colors.border.main}),checkCircle:()=>({position:"absolute",left:"50%",top:-Qv/2,transform:[{translateX:-Qv/2}],zIndex:1}),optionSelected:e=>({borderColor:e.colors.primary.main})});c();var _n=k(O());c();var fi=k(O());z();function O0(e){let{revision:t,onClose:o,onSubmit:n}=e,[r,i]=fi.useState(""),[a,s]=fi.useState(),l=async()=>{a?await n(vS(a,r)):o()};return fi.createElement(kt,{title:"Insert link",onClose:o,subtitle:"Insert a link to external content in your content navigation, this link will open in a new tab.",footer:fi.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},fi.createElement(A,{kind:"secondary",onPress:o,style:p.Margin.smallRight},"Cancel"),fi.createElement(fa,{kind:"primary",onPress:l,disabled:!a},"Insert"))},fi.createElement(v,{style:[p.Margin.largeBottom]},fi.createElement(Ut,{autoFocus:!0,label:"Title",size:"large",placeholder:"Enter title to display",value:r,onChangeText:i})),fi.createElement(Up,{label:"To",size:"large",placeholder:"Paste in or type a url",value:a,onChangeValue:s,context:{space:t.space,revision:t.key}}))}c();var Jv=k(O());function Dl(e){let{space:t,changeRequest:o,analyticsContext:n,page:r,onClose:i}=e;return ja({screen:"space_import",...n},[t.key,o==null?void 0:o.key]),Jv.createElement(Wn,null,Jv.createElement(_0,{target:{page:r,space:t,changeRequest:o},onClose:i}))}function I0(e){let{space:t,revision:o,changeRequest:n,analyticsContext:r,parent:i}=e,{navigateToPagePath:a}=$a(),[s,l]=_n.useState(null),u=Ft(),d=_n.useCallback(async y=>{let C=await u(x=>{_m(x,i,y)});C&&(ee({...r,type:"edit_create_page",pageKind:y.kind}),y.kind!=="link"&&a(Ct(C,y.key)))},[u]),m=_n.useCallback(async()=>{let y=bS({title:sm(o,"Group")}),C=$h({title:sm(o,"Page")}),x=await u(w=>{_m(w,i,y),_m(w,y.key,C)});x&&(ee({...r,type:"edit_create_page",pageKind:y.kind}),a(Ct(x,C.key)))},[o,u]),f=_n.useMemo(()=>oe({groups:[{key:"insertPage",commands:[{key:"insertPage.sheet",icon:S.Page,title:"New document page",trigger:async()=>{await d($h({title:sm(o)}))}},i?null:{key:"insertPage.group",icon:S.AddPageGroup,title:"New group",trigger:async()=>{await m()}},{key:"insertPage.link",icon:S.Link,title:"New link",trigger:()=>{l("link")}}].filter(ge)},{key:"insertExisting",commands:[{key:"insertExisting.import",icon:S.Download,title:"Import new pages",trigger:()=>{l("import")}}].filter(ge)}]}),[o,i,m,d]),g=()=>{l(null)};return[_n.createElement(_n.Fragment,null,_n.createElement(mt,null,s==="link"?_n.createElement(O0,{revision:o,onClose:g,onSubmit:async y=>{await d(y),l(null)}}):null),_n.createElement(mt,null,s==="import"?_n.createElement(Dl,{space:t,changeRequest:n,page:i,analyticsContext:r,onClose:g}):null)),f]}function eb(e){let{space:t,revision:o,changeRequest:n,page:r,analyticsContext:i,readOnly:a}=e,[s,l]=Ao.useState(null),u=Ft(),{getNavigationHref:d,navigateToPage:m}=$a(),f=Ao.useContext(Lo),g=ce(),h=jm(),[y,C]=I0({space:t,revision:o,changeRequest:n,parent:r.key,analyticsContext:i}),x=Object.keys(o.pages).length>1,w=r.kind==="sheet",P=Ao.useMemo(()=>{var _,E,M,W,G;return oe({groups:[a?null:{key:"pageEdit",commands:[r.kind!=="link"?{key:"pageEdit.insert",icon:S.AddPageGroup,title:"Insert subpage",descendant:()=>C}:null,r.kind!=="link"?{key:"pageEdit.import",icon:S.Download,title:"Import subpages",trigger:()=>{l("import")}}:null,r.kind==="sheet"&&!am(r)?{key:"pageEdit.addCover",icon:S.Image,title:"Add cover",trigger:async()=>{await u(V=>{Im(V,r.key)}),ee({...i,type:"edit_add_cover"})}}:null,{key:"pageEdit.edit",icon:S.Type,title:r.kind==="link"?"Edit":"Rename",trigger:()=>{l("edit")}},{key:"pageEdit.duplicate",icon:S.PageDuplicate,title:"Duplicate",trigger:async()=>{let V=Ms(),F=await u(Y=>$S(Y,{newKey:V,originalPageKey:r.key}));F&&(ee(Am(t,r,{...i,type:"edit_duplicate_page",pageKind:r.kind})),r.kind!=="link"&&m(F,V))}},x?{key:"pageEdit.delete",icon:S.Trashcan,title:"Delete",trigger:()=>{l("delete")}}:null].filter(ge)},a?null:{key:"pagePublic",commands:[w?{key:"pagePublic.pageLayout",icon:S.Page,title:"Page Layout",trigger:()=>{l("layout")}}:null].filter(ge)},{key:"pageRead",commands:[r.kind==="sheet"&&(t.hasPDFExport||f.mode!=="public-content")?{key:"pageRead.export",icon:S.PDF,title:g("export_pdf"),testID:"page.exportButton",trigger:()=>{m(o,r.key,{sideSheet:{type:"share",tab:"pdf"}})}}:null,r.kind!=="link"?{key:"pageRead.copyURL",icon:S.Link,title:g("copy_link"),trigger:()=>{let V=d(o,r.key),F=`${window.location.origin}${V}`;h.writeTextAndNotify(F,{title:"Page URL copied to clipboard"})}}:null,r.kind!=="link"&&t.showEditOnGitProvider&&((_=t.git)!=null&&_.url)&&((E=t.git)!=null&&E.installationProvider)&&((M=r.git)!=null&&M.filePath)&&f.mode==="public-content"?{key:"pageRead.editOnGitHub",icon:ok[(W=t.git)==null?void 0:W.installationProvider],title:g("edit_on_github",nk[(G=t.git)==null?void 0:G.installationProvider]),trigger:()=>{var V,F;window.location.assign(`${(V=t.git)==null?void 0:V.url}/${(F=r.git)==null?void 0:F.filePath}`)}}:null].filter(ge)}].filter(ge)})},[a,t,o,r,x,f.mode,n]);ja(s==="layout"?{...i,screen:"space_page_layout"}:null,[s]);let R=()=>{l(null)};return[Ao.createElement(Ao.Fragment,null,y,Ao.createElement(mt,null,s==="edit"?Ao.createElement(k0,{revision:o,page:r,analyticsContext:i,onClose:R}):null),Ao.createElement(mt,null,s==="delete"?Ao.createElement(Eg,{space:t,page:r,revision:o,analyticsContext:i,onClose:R}):null),Ao.createElement(mt,null,s==="import"?Ao.createElement(Dl,{space:t,changeRequest:n,page:r.key,analyticsContext:i,onClose:R}):null),Ao.createElement(mt,null,s==="layout"&&r.kind==="sheet"?Ao.createElement(x0,{page:r,analyticsContext:i,onClose:R}):null)),P]}var $3=B.createInteractiveComponent(wn),R0=Bo.memo(function(t){let[,o]=I(e8),[n,r]=eb(t);return Bo.createElement(Bo.Fragment,null,Bo.createElement(v,{style:[o.pageToolbar,p.Margin.largeBottom]},r.groups.map((i,a)=>Array.isArray(i.commands)?Bo.createElement(v,{key:i.key,style:[p.Padding.smallVertical,a===0&&p.Padding.noneTop,a===r.groups.length-1&&p.Padding.noneBottom]},i.commands.map(s=>Bo.createElement(Q3,{key:s.key,command:s}))):null)),n)});function Q3(e){let{command:t}=e,o=Bo.useRef(null),n=se(o),[,r]=I(L),i=t.icon?B.createInteractiveComponent(t.icon):null;return Bo.createElement(B.TouchableOpacity,{ref:o,style:[b.directionRow,b.alignCenter,p.Padding.largeHorizontal,p.Padding.xsmallVertical,J3.pageActionItem],testID:t.testID,onPress:()=>{t.trigger?n.executeCommand(t):t.descendant&&n.open(t.descendant())}},i?Bo.createElement(v,{style:[p.Margin.smallRight]},Bo.createElement(i.Child,{size:T.ICON_S,style:[r.textMuted,n.opened&&r.primary],activeStyle:r.primary})):null,Bo.createElement($3.Child,{style:[r.Label,r.textMid,b.flex1,n.opened&&r.primary],activeStyle:r.primary},t.title))}function P0(e){let[t,o]=eb(e);return Bo.createElement(Bo.Fragment,null,t,Bo.createElement(cp,{palette:o,icon:S.MoreVertical,kind:"grey",size:"large",title:"Page actions",rounded:!0,testID:"pageCompactToolbar.paletteButton"}))}var J3=X.create({pageActionItem:{width:"fit-content",maxWidth:"100%"}}),e8=D.create({pageToolbar:e=>({minWidth:196})});c();var gs=k(O());z();function M0(e){let{lock:t}=e,[o]=Fr([om(t.userId)]),[,n]=I(L),r=jt(va,{user:o},[o]);return gs.createElement(Vn,{icon:o?r:void 0,tooltip:gs.createElement(gs.Fragment,null,gs.createElement(N,{style:n.Bold},(o==null?void 0:o.displayName)||"Someone")," is editing this page.")},(i,a)=>gs.createElement(v,{ref:a,...i.events},gs.createElement(S.Lock,{size:T.ICON_M,style:n.textMid})))}var Al={mobile:"MobileMainTitle",desktop:"MainTitle"},n8=K.createResponsiveComponent(hr),Jwe=K.createResponsiveComponent(y0),r8=K.createResponsiveComponent(ct),E0=Ge.memo(function(t){let{space:o,revision:n,page:r,changeRequest:i,readOnly:a,onSubmitDescription:s,analyticsContext:l,lock:u,withDiff:d}=t,[m,f]=I(L),[,g]=I(i8),h=Ye(),y=ce(),C=Ge.useRef(null),x=[f.Description,f.textMuted],w=Ft(),{desktopSidebarWidth:P}=Ge.useContext(vr),R=Ge.useMemo(()=>({[cc(2,P)]:"visible"}),[P]),_=async G=>{await w(V=>{fr(V,r.key,{title:fS(G)})}),ee({...l,type:"edit_page_title",pageKind:r.kind})},E=async G=>{await w(V=>{fr(V,r.key,{description:gS(G)})}),ee({...l,type:"edit_page_description",pageKind:r.kind})},M=G=>{G.nativeEvent.key==="Enter"&&(G.preventDefault(),C.current&&C.current.focus())},W=G=>{G.nativeEvent.key==="Enter"&&(G.preventDefault(),s&&s())};return Ge.createElement(v,{style:[b.directionColumn,p.Padding.largeTop,p.Margin.largeBottom]},Ge.createElement(v,{style:[b.directionRow]},Ge.createElement(K.View,{style:[b.directionRow,b.justifyContentEnd,b.alignCenter],mobileStyle:g.emojiWrapperMobile,desktopStyle:g.emojiWrapperDesktop},r.emoji||!a?Ge.createElement(K.View,{mobileStyle:[tb.pageEmojiRelative,p.Padding.noneLeft,p.Padding.mediumRight],desktopStyle:[tb.pageEmojiAbsolute,p.Padding.mediumLeft,p.Padding.mediumRight]},Ge.createElement(r0,{analyticsContext:l,page:r,readOnly:a,size:T.ICON_XL})):null),a?Ge.createElement(v,{style:[b.flex1]},Ge.createElement(r8,{testID:"page.title",tag:"h1",style:[f.text],selectable:!0,mobileStyle:f[Al.mobile],desktopStyle:f[Al.desktop]},r.title)):Ge.createElement(n8,{key:r.key,testID:"page.title",component:T0,value:r.title,maxLength:100,style:[f.text,b.flex1,f.Body],onChangeText:_,onKeyPress:M,placeholder:y("untitled_page"),placeholderTextColor:m.colors.text.muted,mobileStyle:f[Al.mobile],desktopStyle:f[Al.desktop]}),u?Ge.createElement(Ge.Suspense,{fallback:null},Ge.createElement(v,{style:[b.directionRow,b.alignCenter,p.Margin.mediumRight]},Ge.createElement(M0,{lock:u}))):null,h?null:Ge.createElement(K.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[b.directionRow,b.alignCenter],customBreakpointsStyles:R},Ge.createElement(P0,{space:o,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a}))),Ge.createElement(K.View,{style:[p.Margin.mediumTop]},a?r.description?Ge.createElement(v,null,Ge.createElement(N,{style:x,selectable:!0},r.description)):d?Ge.createElement(K.View,{style:tb.pageDescriptionDiffPlaceholder,mobileStyle:"hidden"}):null:Ge.createElement(hr,{key:r.key,ref:C,component:T0,value:r.description,style:x,maxLength:200,onChangeText:E,onSubmitEditing:s,onKeyPress:W,placeholder:y("page_description"),placeholderTextColor:m.colors.text.muted})),null)}),T0=Ge.forwardRef(function(t,o){let{style:n,...r}=t,[i,a]=Ge.useState(void 0);return Ge.createElement(Lr,{ref:o,...r,multiline:!0,style:[n,typeof i<"u"?{height:i}:void 0],onContentSizeChange:l=>{l.nativeEvent.contentSize.height!==i&&a(l.nativeEvent.contentSize.height)}})}),tb=X.create({pageEmojiRelative:{position:"relative"},pageEmojiAbsolute:{position:"absolute"},pageDescriptionDiffPlaceholder:{height:Vm.mediumLarge}}),i8=D.create({emojiWrapperMobile:{width:"auto",height:qe[Al.mobile].lineHeight},emojiWrapperDesktop:{height:qe[Al.desktop].lineHeight},pageBodyDesktopLeftMargin:{marginLeft:It},pageBodyMobileLeftMargin:{marginLeft:Do}});c();var Nt=k(O());z();var L0=K.createResponsiveComponent(ga),N0=B.createInteractiveComponent(wn),D0=Nt.memo(function(t){let{space:o,revision:n,page:r,style:i}=t,{getNavigationLinkProps:a}=_e(),[,s]=I(L),l=ce(),u=Ye(),d=B.useInteractiveComponent(S.ArrowLeft),m=B.useInteractiveComponent(S.ArrowRight),{desktopSidebarWidth:f}=Nt.useContext(vr),{nextPage:g,previousPage:h}=Nt.useMemo(()=>{let P=a8(n),R=P.findIndex(_=>_.key===r.key);return R===-1?{nextPage:null,previousPage:null}:{nextPage:ob(P,R,1),previousPage:ob(P,R,-1)}},[n,r.key]),{previousLinkProps:y,previousGroup:C,nextLinkProps:x,nextGroup:w}=Nt.useMemo(()=>({previousLinkProps:h?a({screen:{page:Ct(n,h.key)}}):void 0,previousGroup:h?uu(n,h.key):null,nextLinkProps:g?a({screen:{page:Ct(n,g.key)}}):void 0,nextGroup:g?uu(n,g.key):null}),[g,h]);return o.showPagination===!1||!g&&!h||u?null:Nt.createElement(K.View,{style:i,desktopStyle:b.directionRow,customBreakpointsStyles:{[fs(f)]:b.directionColumn}},h?Nt.createElement(L0,{...y,style:[b.alignCenter,p.Padding.medium,b.flex1],desktopStyle:g?p.Margin.smallRight:null,customBreakpointsStyles:g?{[fs(f)]:[p.Margin.noneRight,p.Margin.smallBottom]}:void 0},Nt.createElement(v,{style:[p.Margin.mediumRight]},Nt.createElement(d.Child,{size:T.XS,style:[s.textMuted],hoverStyle:s.primary})),Nt.createElement(v,{style:[b.flex1,b.alignEnd]},Nt.createElement(v,null,Nt.createElement(N,{style:[s.Caption,s.textMuted]},C&&C.kind==="group"?`${C.title} - `:"",l("previous"))),Nt.createElement(N0.Child,{style:[s.Body,s.Medium,s.text],activeStyle:s.primary},h.title))):null,g?Nt.createElement(L0,{...x,style:[b.alignCenter,p.Padding.medium,b.flex1],desktopStyle:h?p.Margin.smallLeft:null,customBreakpointsStyles:h?{[fs(f)]:[p.Margin.noneLeft,p.Margin.smallTop]}:void 0},Nt.createElement(v,{style:[b.flex1]},Nt.createElement(v,null,Nt.createElement(N,{style:[s.Caption,s.textMuted]},l("next"),w&&w.kind==="group"?` - ${w.title}`:"")),Nt.createElement(N0.Child,{style:[s.Body,s.Medium,s.text],activeStyle:s.primary},g.title)),Nt.createElement(v,{style:[p.Margin.mediumLeft]},Nt.createElement(m.Child,{size:T.XS,style:[s.textMuted],hoverStyle:s.primary}))):null)});function a8(e){let t=[];function o(n){var i;let r=e.pages[n];t.push(r),(i=r.pages)!=null&&i.length&&r.pages.forEach(o)}return e.rootPages.forEach(o),t}function ob(e,t,o){let n=e[t+o];if(n)return n.kind!=="sheet"?ob(e,t+o,o):n}c();var _o=k(O());z();var s8=K.createResponsiveComponent(ga),c8=B.createInteractiveComponent(wn);function A0(e){let{subPages:t,revision:o}=e,{desktopSidebarWidth:n}=_o.useContext(vr),r=ce(),[,i]=I(L);return Ye()?null:_o.createElement(v,null,_o.createElement(N,{style:[i.Body,i.text]},r("page_articles_section")),_o.createElement(K.View,{style:[p.Padding.largeTop,b.wrap],desktopStyle:b.directionRow,customBreakpointsStyles:{[fs(n)]:b.directionColumn}},t.map((s,l)=>_o.createElement(_o.Suspense,{fallback:_o.createElement(B0,{page:s,revision:o,index:l,totalPageNumber:t.length}),key:s.key},_o.createElement(l8,{page:s,revision:o,index:l,totalPageNumber:t.length})))))}function l8(e){let{page:t,revision:o}=e,n=Hn(t.kind==="link"?t.ref:void 0,{space:o.space,revision:o.key});return _o.createElement(B0,{...e,contentRef:n})}function B0(e){let{page:t,revision:o,index:n,totalPageNumber:r,contentRef:i}=e,{desktopSidebarWidth:a}=_o.useContext(vr),{getNavigationLinkProps:s}=_e(),[,l]=I(L),u=t.emoji?B.createInteractiveComponent(Qe(Co,{code:t.emoji})):null,d=B.createInteractiveComponent((i==null?void 0:i.secondaryIcon)||Oe),m=r%2===0;return _o.createElement(s8,{...t.kind==="link"?i?Qa(i):{}:s({screen:{page:Ct(o,t.key)}}),style:[b.alignCenter,p.Padding.medium,b.flex1,{minWidth:`calc(50% - ${p.small}px)`}],desktopStyle:[n%2===0?m?p.Margin.smallRight:null:p.Margin.smallLeft,n<r-(m?2:1)?p.Margin.smallBottom:null],customBreakpointsStyles:{[fs(a)]:[p.Margin.noneHorizontal,n<r-1?p.Margin.smallBottom:null]}},u?_o.createElement(v,{style:[p.Margin.mediumRight]},_o.createElement(u.Child,{size:T.XS,style:[l.textMuted],hoverStyle:l.primary})):null,_o.createElement(c8.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary},t.title),t.kind==="link"&&(!i||i.secondaryIcon)?_o.createElement(v,{style:[p.Margin.mediumLeft]},_o.createElement(d.Child,{size:T.XS,style:[l.textMuted],hoverStyle:l.primary})):null)}c();var _r=k(O());z();function z0(e){let{space:t,changeRequest:o,analyticsContext:n}=e,{navigate:r}=_e(),[i,a]=I(u8),s=Ye(),[l,u]=_r.useState(null);return s?null:_r.createElement(_r.Fragment,null,_r.createElement(mt,null,l==="import"?_r.createElement(Dl,{space:t,changeRequest:o,analyticsContext:n,onClose:()=>{u(null)}}):null),_r.createElement(v,{style:[p.Padding.smallHorizontal,p.Padding.smallVertical,p.Margin.mediumTop,a.blankslateBox,b.directionRow,b.wrap]},_r.createElement(A,{icon:S.Download,size:"medium",style:p.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{u("import"),ee({...n,type:"space_blank_slate_initiate",kind:"import"})}},"Import content"),_r.createElement(A,{icon:S.Page,size:"medium",style:p.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({overlay:{type:"template",space:t.key,...Aa(t)}}),ee({...n,type:"space_blank_slate_initiate",kind:"template"})}},"Use a template"),_r.createElement(A,{icon:S.GitHub,size:"medium",style:p.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"gitsync"}}}),ee({...n,type:"space_blank_slate_initiate",kind:"gitsync"})}},"Sync with GitHub / GitLab"),nm(t)&&!t.private?_r.createElement(A,{icon:S.User,size:"medium",style:p.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"share",tab:"invite"}}}),ee({...n,type:"space_blank_slate_initiate",kind:"invite-members"})}},"Add members"):null))}var u8=D.create({blankslateBox:e=>({borderRadius:T.RADIUS_L,borderWidth:1,borderColor:e.colors.border.mid})});c();var hs=k(O());c();var gi=k(O());z();var m8=B.createInteractiveComponent(wn),p8={[De]:null,[ze]:p.Margin.smallLeft,[Go]:null},Y1e=gi.memo(function(t){let{sections:o,activeSection:n}=t,[,r]=I(L),[,i]=I(W0),a=ce();return gi.createElement(v,{style:[i.pageOutline]},gi.createElement(v,{style:[b.directionRow,b.alignCenter,p.Padding.largeHorizontal,p.Margin.smallBottom]},gi.createElement(N,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),o.map(s=>gi.createElement(f8,{key:s.key,section:s,active:n===s.key})))});function f8(e){let{section:t,active:o}=e,[,n]=I(L),[,r]=I(W0),{navigateToHash:i}=_e();return gi.createElement(B.TouchableOpacity,{style:[b.directionRow,p.Padding.largeHorizontal,r.sectionItem,o&&r.sectionItemActive],onPress:()=>{i(t.anchor)}},t.tag?gi.createElement(An,{backgroundColor:Ys[t.tag]||H.orange.base,style:[r.sectionTag,p.Margin.xsmallRight,b.alignSelfCenter]},gi.createElement(N,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},t.tag)):null,gi.createElement(m8.Child,{style:[n.Label,n.textMid,t.type&&p8[t.type],o&&n.primary],hoverStyle:n.primary},t.title))}var W0=D.create({pageOutline:e=>({borderLeftWidth:1,borderLeftColor:e.colors.border.main,maxWidth:ps}),sectionItem:{paddingTop:p.xsmall,paddingBottom:p.xsmall,marginLeft:-1,borderLeftWidth:2,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:e=>({borderLeftColor:e.colors.primary.main}),sectionTag:{borderRadius:T.XXS,height:T.XXS,paddingHorizontal:p.small,justifyContent:"center"}});function V0(e,t){let o=p.large,n=e.length,r=Math.floor(Math.log2(n)+1),i=0,a=n-1,s=Math.ceil((i+a)/2),l=-1,u=null;for(let d=0;d<r;d++){let m=e[s];if(!m)return null;let f=Fa(m.key),g=f?f.getBoundingClientRect().top-t:null;if(g===null||g>o)a=s,s=Math.floor((i+a)/2);else{if(g>=-o&&g<=o)return e[s].key;g<o&&((u===null||g>u)&&(u=g,l=s),i=s,s=Math.ceil((i+a)/2))}}return l!==-1?e[l].key:null}var q0=.9;function F0(e,t){let[o,n]=hs.useState(null),r=pp(),i=hs.useRef(0),a=hs.useRef(null),s=hs.useRef(new Map),l=e.length>1,u=g8(()=>{typeof i.current!="number"&&(i.current=t.current.getBoundingClientRect().top);let m=V0(e,i.current);m!==o&&n(m)},500),d=m=>{m.forEach(g=>{let h=g.target.getAttribute("data-key");h&&s.current.set(h,g.isIntersecting&&g.intersectionRatio>=q0)});let f=Array.from(s.current.entries()).find(([,g])=>g);f&&n(f[0])};return hs.useEffect(()=>{var m;if(!(!(t!=null&&t.current)||!l)){if(!r)(m=t.current)==null||m.addEventListener("scroll",u);else{let f=e.map(g=>Fa(g.key)).filter(ge);a.current=new IntersectionObserver(d,{rootMargin:`-${xo.PUBLIC_DESKTOP_HEADER_HEIGHT}px 0px -40% 0px`,threshold:q0}),f.forEach(g=>{var h;(h=a.current)==null||h.observe(g)})}return()=>{var f,g;(f=t.current)==null||f.removeEventListener("scroll",u),(g=a.current)==null||g.disconnect()}}},[t==null?void 0:t.current,l]),o}function g8(e,t){let o=!1;return(...n)=>{o||(e.apply(this,n),o=!0,setTimeout(()=>o=!1,t))}}var h8=st("sheet"),y8=K.createResponsiveComponent(le);function Lg(e){return e.readOnly?ie.createElement(v8,{...e}):ie.createElement(b8,{...e})}function v8(e){let[t]=Pg(e.space.key,e.page);return ie.createElement(G0,{...e,value:t,onChange:()=>{}})}function b8(e){var a;let{onChange:t,value:o,crashed:n}=n0(e),r=UP(e.space.key,(a=e.changeRequest)==null?void 0:a.key,e.page.key);return ie.createElement(G0,{...e,value:o,onChange:t,documentReadOnly:n||!!r,lock:r})}function G0(e){var DC,AC;let{space:t,revision:o,page:n,changeRequest:r,readOnly:i=!0,withComments:a,value:s,onChange:l,lock:u,analyticsContext:d,withToC:m,outline:f,footer:g,withDiff:h,scrollRef:y,sideColumnStickyTop:C}=e,x=i||!!e.documentReadOnly,w=ie.useRef(null),P=WP(),{mode:R}=ie.useContext(Lo),{pages:_,setContentDiffPage:E}=ie.useContext(e0),M=Wi(),W=Ft(),G=Ox({spaceId:t.key}),V=ce(),F=Ye(),Y=ie.useRef(),{sections:$,sectionIDs:te}=ie.useMemo(()=>{let Xe=DS(s.document,Y.current),Vo=km(s.document,Xe).filter(sr=>sr.parentType==="document"&&sr.type!==null&&[De,ze,Go].includes(sr.type));return{sectionIDs:Xe,sections:Vo}},[s.document,Y]);Y.current=te;let fe=M.screen.type==="space"&&((DC=M.screen.sideSheet)==null?void 0:DC.type)==="comments"?{commentKey:M.screen.sideSheet.comment,nodeKey:M.screen.sideSheet.node}:void 0;ie.useEffect(()=>{var Xe;fe!=null&&fe.commentKey&&(fe!=null&&fe.nodeKey)&&((Xe=Fa(fe.nodeKey))==null||Xe.scrollIntoView())},[fe==null?void 0:fe.commentKey]);let tt=Xe=>{P({pageKey:n.key,focus:"page",activity:Xe.typing?"typing":"viewing"})},Gt=ie.useRef(null),Po=ie.useCallback(()=>{let Xe=Gt.current;if(!Xe)return;let Vo=Xe.value.change();mr(Vo.value.document)||Vo.collapseToStartOf(Xe.value.document),Vo.focus(),l(Vo)},[Gt]),Ln=ie.useMemo(()=>_.find(Xe=>Xe.page.key===n.key&&Xe.diff),[_,n.key]),xi=Xe=>{l(Xe),!Ln&&r&&!s.document.equals(Xe.value.document)&&E({diff:"modified",page:n})},Oi=Po,at=$.length>1,Wo=!f||F,eo=F0($,y),Tt=A1(),_s=ie.useMemo(()=>({space:t.key,revision:o.key,page:n.key}),[t.key,o.key,n.key]),Is=Xe=>{ee({...d,...Xe})},Nn=async Xe=>{let Vo=[],sr=await W((Xd,Kd,kE)=>{Vo=[],kE.forEach(xE=>{let BC=HS(xE,Tt.uid);Vo.push({kind:"file",file:BC.key}),ZS(Xd,BC)})},()=>sy({kind:"space_file",space:t.key},Xe));return sr&&Vo.forEach((Xd,Kd)=>{h8.info(`file ${Xd.file} uploaded to revision ${sr.key} (${Kd+1} / ${Vo.length})`)}),Vo},Er=async(Xe,Vo)=>{await W((sr,Xd,Kd)=>{YS(sr,Xe.file,Kd)},async()=>{let[sr]=await sy({kind:"space_file",space:t.key},[Vo]);return sr})},{desktopSidebarWidth:q}=ie.useContext(vr),{customBreakpointsOutlineStyles:J,customBreakpointsPageBodyStyles:j}=ie.useMemo(()=>{let Xe=cc(2,q);return{customBreakpointsOutlineStyles:{[Xe]:"hidden"},customBreakpointsPageBodyStyles:{[Xe]:b.justifyContentCenter}}},[q]),Q=qv(q,Tg),ye=o.conflicts&&n.key in o.conflicts.pages,de=(AC=o.conflicts)==null?void 0:AC.pages[n.key],Pe=ye&&o.conflicts&&o.conflicts.pages[n.key],Ee=mr(s.document),dt=Ee&&Object.keys(o.pages).length===1&&!x,{diffs:to}=ie.useContext(bd),gn=to.has(n.key),ar=o0(t.key,n),[hn,_c]=f0({isDiffViewEnabled:h,isCommentMarginVisible:a,isFullPage:m||Wo}),au=gx(),Gh=ie.useCallback(Xe=>{Xe?au.highlight(Xe,{highlighting:!1,postButton:!0}):au.highlight(null)},[au]),Hd=!M.overlay&&Ee&&!x;ie.useEffect(()=>{Hd&&Po()},[n.key,Hd,Po]);let wE=ie.useCallback(()=>{let{data:Xe}=k1({operationId:"listSpaceIntegrationsBlocks",params:{spaceId:t.key},query:{}}),Vo={};return Xe.forEach(sr=>{Vo[sr.name]=sr.blocks}),Vo},[t.key]);return ie.createElement(ie.Fragment,null,ie.createElement(ae,{style:R==="public-content"&&!m?i0.pageCoverBleedFull:null},ie.createElement(S0,{revision:o,page:n,readOnly:i,analyticsContext:d})),ie.createElement(v,{ref:w,style:[b.flex1,b.directionRow]},ie.createElement(m0,{style:[U.flex.flex1,U.flex.column]},ie.createElement(le,{tag:"main",style:[b.flex1,b.directionColumn]},ie.createElement(wd,null,ie.createElement(K.View,{style:[b.flex1,b.directionRow],customBreakpointsStyles:j},ie.createElement(v,{style:[b.flex1]},ie.createElement(E0,{space:t,revision:o,page:n,changeRequest:r,readOnly:i,onSubmitDescription:Oi,analyticsContext:d,lock:u,withDiff:h})))),ie.createElement(K.View,{desktopStyle:F?void 0:p.Padding.xlargeBottom},ye?ie.createElement(hn,{renderMode:"marginless-centered"},ie.createElement(v0,{space:t,page:n,revision:o,document:s.document,hasBeenResolved:!Pe,pageIsDiff:h,conflictType:de,analyticsContext:d})):null,x&&Ee&&n.pages.length?ie.createElement(hn,{renderMode:"centered"},ie.createElement(A0,{subPages:n.pages.map(Xe=>o.pages[Xe]),revision:o})):ie.createElement(_x,{withComments:a,spaceKey:t.key,pageKey:n.key,changeRequestKey:r==null?void 0:r.key},ie.createElement(H0,{ref:Gt,value:s,baseValue:ar,onActivity:tt,onChange:xi,readOnly:x,isDiff:gn,logAnalyticsEvent:Is,contentReferenceContext:_s,uploadFiles:Nn,updateFile:Er,placeholder:"Enter your content here\u2026",sectionIDs:te,selectedSection:M.screen.hash||null,blockLayoutComponent:hn,rightGutterComponent:_c,getIntegrationsBlocks:wE,integrationBlocksRemote:G,onBlockHover:Gh}),dt?ie.createElement(hn,{renderMode:"centered"},ie.createElement(z0,{space:t,revision:o,analyticsContext:d,changeRequest:r})):null),dt?null:ie.createElement(wd,null,ie.createElement(K.View,{style:[b.flex1,b.directionRow,p.Margin.largeTop],customBreakpointsStyles:j},ie.createElement(v,{style:[b.flex1]},ie.createElement(K.View,null,ie.createElement(D0,{analyticsContext:d,space:t,revision:o,page:n,style:p.Margin.largeBottom}),g||null))))))),Wo?null:ie.createElement(y8,{tag:"aside",accessibilityLabel:V("page_outline"),testID:"page.outline",style:[nb.pageSideColumn,p.Margin.largeVertical,{top:C!==void 0?C:p.large,maxHeight:C!==void 0?`calc(100vh - ${C}px)`:`calc(100vh - ${zv+p.large}px)`},R==="app"?nb.pageSideMaxWidth:nb.pageSidePublicMaxWidth],mobileStyle:"hidden",desktopStyle:{width:Q},customBreakpointsStyles:J},ie.createElement(R0,{space:t,page:n,changeRequest:r,revision:o,analyticsContext:d,readOnly:i}),at?ie.createElement(f,{sections:$,activeSection:eo}):null)))}var nb=X.create({pageSideMaxWidth:{maxWidth:ps},pageSidePublicMaxWidth:{maxWidth:ps},pageSideColumn:{position:"sticky",overflowY:"auto",alignSelf:"flex-start"},pageBody:{maxWidth:er+2*It},pageBodyWithComments:{maxWidth:er+It,marginRight:0},pageBodyDesktopRightPadding:{paddingRight:It},pageBodyMobileRightPadding:{paddingRight:Do},pageBodyPDFRightPadding:{paddingRight:Do},pageBodyDesktopLeftMargin:{marginLeft:It},pageBodyMobileLeftMargin:{marginLeft:Do},pageBodyPDFLeftMargin:{marginLeft:Do}});c();var rb=k(O());z();function Dg(e){let{withPageOutline:t=!0}=e;return rb.createElement(K.View,{style:[b.directionRow,b.justifyContentCenter],desktopStyle:[p.Padding.xxlargeTop,Ng.pageSheetLoadingDesktop,t&&Ng.pageSheetLoadingDesktopWithOutline],mobileStyle:[p.Padding.mediumTop,Ng.pageSheetLoadingMobile]},rb.createElement(bo,{size:"xlarge",style:Ng.pageBody}))}var Ng=X.create({pageSheetLoadingDesktop:{paddingRight:It,paddingLeft:It},pageSheetLoadingDesktopWithOutline:{paddingRight:ps+It},pageSheetLoadingMobile:{paddingLeft:Do,paddingRight:Do},pageBody:{maxWidth:er+2*It}});c();var ib=k(O());function Ag(e,t,o){let n=Ye(),r=Hm();ib.useEffect(()=>{var i;!t.hash&&!n&&r.current&&((i=e==null?void 0:e.current)==null||i.scrollTo(0,0))},[o,!!t.hash,n]),ib.useEffect(()=>{if(t.hash&&!n){let i=window.document.getElementById(t.hash);i&&i.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})}},[t.hash,n])}var C8=[{size:25,label:"Small"},{size:50,label:"Medium"},{size:75,label:"Large"},{size:100,label:"Fit"}];function X0(e,t){let o=typeof e=="number"?e:e==null?void 0:e.value,n=typeof e=="number"?"px":e==null?void 0:e.unit;return`${o||100}${n||t}`}function K0(e,t){return typeof e=="number"?`${e}px`:(e==null?void 0:e.unit)==="px"?`${e.value}${e.unit}`:t}async function S8(e,t){let o=e.nodes.toArray().map(i=>{let{ref:a}=i.data.toFrozenObject();return a}),n={url:"",broken:!0},r=o.map(i=>lO(i,t).then(({uri:a})=>typeof a!="string"||a===""?n:{url:a,broken:!1}).catch(()=>n));return Promise.all(r)}function j0(e){let{node:t,parent:o,isSelected:n,attributes:r,editor:i}=e,{readOnly:a}=i,{ref:s,height:l,width:u}=t.data.toFrozenObject(),d=tg(i,t.key),{contentReferenceContext:m,logAnalyticsEvent:f}=Le.useContext(ne),g=Zp(s,m),[,h]=I(ab),y=sl(),C=B.useInteractiveState(),x=o.nodes.size>1,[{dragging:w},P]=Xi({type:"block",item:{id:t.key,type:"block",blockType:t.type,previewLabel:"Move image"},canDrag:()=>!a,collect:tt=>({dragging:tt.isDragging()})}),R=B.useInteractiveState(),[_,E]=Le.useState(null),M=vo.getImageAltText(t),W=X0(u,"%"),G=X0(l,"%"),V=K0(l,"auto"),F=K0(u,"100%"),Y=()=>{E("alt")},$=()=>{E(null)},te=async()=>{if(!g||!g.uri)return;let tt=await S8(o,m),Gt=o.getChildIndex(t.key);y.open(tt,Gt)},fe=tt=>{if(!g)return;f({type:"edit_page_document_edit_block_property",blockType:ri,blockProperty:"size",fromValue:void 0,toValue:tt.label});let Gt=O8(g,tt.size);i.change(Po=>{l&&Po.removeDataPathByKey(t.key,["height"]),Gt?Po.insertDataByKey(t.key,["width"],Gt):Po.removeDataPathByKey(t.key,["width"])})};return Le.createElement(Le.Fragment,null,Le.createElement(mt,null,_==="alt"?Le.createElement(xg,{...e,onClose:$}):null),Le.createElement(v,{style:[b.alignCenter,b.flex1]},Le.createElement(v,{style:[h.imageWrapper,{maxWidth:W,maxHeight:G}],...C.events,...r},Le.createElement(Vt,{...e},g?Le.createElement(B.TouchableOpacity,{onPress:te,style:b.alignCenter},Le.createElement(Eo,{width:F,height:V,source:g,accessibilityLabel:M,loading:d?"priority":"lazy",style:[h.image,w&&Ce.translucent]})):Le.createElement(w8,{accessibilityLabel:M})),a?null:Le.createElement(zr,{theme:{color:"dark"}},(n||C.hovered)&&!w?Le.createElement(k8,{...e,openAltTextModal:Y,setSize:fe}):null,x?Le.createElement(v,{ref:P,style:[h.imageDragHandle,{display:(C.hovered||R.hovered)&&!w?"flex":"none"}],...R.events},Le.createElement(S.GrabberVertical,{size:T.ICON_S,style:[h.imageDragHandleIcon]})):null))),Le.createElement(cs,{...e,isSelected:e.isSelected||C.hovered}))}function w8(e){let{style:t,...o}=e,[,n]=I(L),[,r]=I(ab);return Le.createElement(v,{style:[b.alignCenter,b.justifyContentCenter,r.brokenImage,p.Padding.large,t],...o},Le.createElement(v,null,Le.createElement(S.CloudOff,{size:T.ICON_L,style:[n.textMuted]})),Le.createElement(v,{style:[p.Margin.mediumTop]},Le.createElement(N,{style:[n.Caption,n.textMuted]},"Could not load image")))}function k8(e){let{editor:t,node:o,isSelected:n,openAltTextModal:r,setSize:i}=e,[,a]=I(ab),s=xt(),l=async()=>{let[u]=await s.prompt({title:"Replace image",accept:"images",acceptURL:!0});u&&t.change(d=>{d.insertDataByKey(o.key,["ref"],u),d.removeDataPathByKey(o.key,["height"]),d.removeDataPathByKey(o.key,["width"])})};return Le.createElement(Le.Fragment,null,Le.createElement(v,{style:[a.imageToolbar,b.directionRow]},Le.createElement(x8,{onPress:i,...e}),Le.createElement(A,{title:"ALT text",size:"small",icon:S.AltText,style:[p.Margin.smallRight],onPress:r}),n?Le.createElement(A,{title:"Replace",size:"small",icon:S.Replace,style:[p.Margin.smallRight],onPress:()=>l()}):null))}function x8(e){let{editor:t,node:o,onPress:n}=e,r=Le.useRef(null),i=C8.map(({size:l,label:u})=>({key:`${l}`,title:u,trigger:()=>{n({size:l,label:u})}})),a=se(r),s=()=>{a.open(oe({position:{width:"anchor"},groups:[{key:"image.resize",commands:i}].filter(ge)})),t.change(l=>{o&&he.isTextRange(l.value.selection)&&!l.value.selection.hasEdgeIn(o)&&l.collapseToStartOf(o),l.focus()})};return Le.createElement(Le.Fragment,null,Le.createElement(A,{ref:r,active:a.opened,size:"small",rightIcon:S.ChevronDown,onPress:s},"Size"))}function O8(e,t){let o=e.width||xo.PAGE_BODY_MAX_WIDTH;if(t===100)return;let n=Math.min(o,xo.PAGE_BODY_MAX_WIDTH);return Math.round(n*(t/100))}var ab=D.create({imageWrapper:{position:"relative",borderRadius:T.RADIUS_M},imageCaption:{position:"relative",textAlign:"center"},image:{borderRadius:T.RADIUS_M,maxWidth:"100%"},imageToolbar:e=>({position:"absolute",top:p.small,right:p.small,padding:p.small,borderRadius:T.RADIUS_M,backgroundColor:e.colors.background.mid,...e.shadows.base}),imageDragHandle:{position:"absolute",top:p.small,left:p.small,cursor:"grab"},imageDragHandleIcon:{textShadowColor:H.BLACK,textShadowRadius:3,color:H.WHITE},brokenImage:e=>({borderRadius:T.RADIUS_M,backgroundColor:e.colors.background.muted})});c();var Ie=k(O());z();function U0(e){let{editor:t,node:o,parent:n,ancestors:r}=e,i=tg(t,o.key),a=Ie.useRef(null),s=xn(n.object==="block"?n:null),l=o.data.get("size","original"),[,u]=I(Y0),d=r.some(f=>f.object==="inline"&&f.type===To),m=f=>Ie.createElement(xl,{...f,...e,style:[u.inlineFrame,l==="line"?b.alignCenter:null]},Ie.createElement(Ie.Suspense,{fallback:Ie.createElement(Oe,{size:T.ICON_S})},Ie.createElement(_8,{node:o,parentLineHeight:s,size:l,ref:a,withPriorityLoading:i})));return t.readOnly?m(d?{}:{onPress:()=>{var f;(f=a.current)==null||f.openInGallery()}}):Ie.createElement(R8,{...e,anchor:m})}var _8=Ie.forwardRef(function(t,o){let{node:n,parentLineHeight:r,size:i,withPriorityLoading:a}=t,s=n.data.get("ref"),l=vo.getImageAltText(n),{contentReferenceContext:u}=Ie.useContext(ne),d=Zp(s,u),m=sl();Ie.useImperativeHandle(o,()=>({openInGallery:()=>{d!=null&&d.uri&&m.open([{url:d.uri}])}}),[d==null?void 0:d.uri]);let f={};i==="original"?f={maxWidth:300}:f={maxHeight:r,width:"auto"};let g=Ie.createElement(I8,{accessibilityLabel:l});return d?Ie.createElement(Eo,{accessibilityLabel:l,source:d,style:f,errorFallback:g,loading:a?"priority":"lazy"}):g});function I8(e){let[,t]=I(Y0),[,o]=I(L);return Ie.createElement(v,{style:t.brokenImage,...e},Ie.createElement(S.CloudOff,{size:T.ICON_M,style:o.textMuted}))}function R8(e){let{node:t,anchor:o,isFocused:n,editor:r}=e,{logAnalyticsEvent:i}=Ie.useContext(ne),a=Ie.useRef(null),s=xt(),[l,u]=Ie.useState(null),d=n&&r.value.selection.isCollapsed,[m,f]=Ie.useState(!1);Ie.useEffect(()=>{if(d){f(!0);return}let x=setTimeout(()=>{f(!1)},300);return()=>{clearTimeout(x)}},[d]);let g=()=>{r.change(x=>{x.collapseToStartOf(t).focus()})},h=x=>{r.change(w=>{w.insertDataByKey(t.key,["size"],x),w.collapseToStartOf(t).focus()})},y=()=>{i({type:"edit_page_document_edit_block_type",fromType:Ba,toType:ri}),r.change(x=>{vo.replaceInlineImageWithBlock(x,t)})},C=async()=>{let[x]=await s.prompt({title:"Replace image",accept:"images",acceptURL:!0});x&&r.change(w=>{w.insertDataByKey(t.key,["ref"],x)})};return Vc(()=>{var x;(x=a.current)==null||x.updatePosition()},[t.data]),Ie.createElement(Ie.Fragment,null,Ie.createElement(mt,null,l==="alt"?Ie.createElement(xg,{...e,onClose:()=>u(null)}):null),Ie.createElement(Di,{ref:a,opened:d||m,anchor:({ref:x})=>o({ref:x,onPress:g})},Ie.createElement(tn,{kind:"tooltip"},Ie.createElement(v,{style:[b.directionRow,p.Padding.xsmall]},Ie.createElement(A,{size:"small",title:"Inline size",kind:"default_inverted",onPress:()=>h("line"),icon:S.ImageSizeSmall}),Ie.createElement(A,{size:"small",title:"Original size",kind:"default_inverted",onPress:()=>h("original"),icon:S.ImageSizeLarge}),Ie.createElement(A,{size:"small",title:"Convert to block",kind:"default_inverted",onPress:y,icon:S.ImageSizeBlock}),Ie.createElement(A,{size:"small",kind:"default_inverted",title:"Replace",onPress:C,icon:S.Replace}),Ie.createElement(A,{size:"small",kind:"default_inverted",title:"ALT text",onPress:()=>u("alt"),icon:S.AltText})))))}var Y0=D.create({brokenImage:e=>({padding:p.xsmall,borderRadius:T.RADIUS_M,backgroundColor:e.colors.background.muted}),inlineFrame:{maxWidth:"100%"}});c();var Z0=k(O());function $0(e){let{children:t,attributes:o}=e;return Z0.createElement(ct,{tag:"strong",style:ao.Bold,...o},t)}c();var Q0=k(O());function J0(e){let{children:t,attributes:o}=e;return Q0.createElement(ct,{tag:"em",style:ao.Italic,...o},t)}c();var e7=k(O());function t7(e){let{children:t,attributes:o}=e;return e7.createElement(ct,{tag:"span",style:ao.Strikethrough,...o},t)}c();var o7=k(O());function n7(e){let{children:t,attributes:o}=e,[,n]=I(P8);return Qw(),o7.createElement(ct,{tag:"code",style:[n.markCode],...o},t)}var P8=D.create({markCode:e=>({backgroundColor:e.colors.background.muted,borderRadius:e.radiuses.medium,paddingLeft:p.xsmall,paddingRight:p.xsmall,fontFamily:zm})});c();var r7=k(O());function i7(e){let{children:t,mark:o,attributes:n}=e,r=o.data.toObject(),i=Ei(),a=r.background&&r.background!=="default",s=r.text&&r.text!=="default",l=a&&i.color==="dark"?{color:H.lightModeText.base}:null;s&&(l=Tp.find(d=>d.key===r.text)||null);let u=a?Ep.find(d=>d.key===r.background):null;return r7.createElement(ct,{tag:"mark",style:[{color:l?l.color:"inherit",backgroundColor:u?u.color:"inherit"}],...n},t)}c();var $i=k(O());z();c();var zo=k(O());z();function Bg(e){let{node:t,anchor:o,isSelected:n,isOnlyNodeSelected:r,isFocused:i,editor:a}=e,{formula:s}=t.data.toFrozenObject(),l=zo.useRef(null),[u,d]=zo.useState(!1),[m,f]=zo.useState(!1),[g,h]=Li(s,[s]),[,y]=I(L),C=()=>{d(!1),f(!1)},x=()=>{u||(a.change(_=>{Bt(_.value.selection)&&_.collapseToStartOf(t).focus()}),d(!0))};zo.useEffect(()=>{var _;u&&((_=l.current)==null||_.focus())},[u]),zo.useEffect(()=>{r&&x()},[r]);let w=_=>{h(_),f(!1)},P=()=>{C(),a.change(_=>{_.blur(),_.insertDataByKey(t.key,["formula"],t.object==="inline"?g.replace(/\n/g," "):g)})},R=()=>{C(),a.change(_=>{var E;if(_.blur(),_.insertDataByKey(t.key,["formula"],t.object==="inline"?g.replace(/\n/g," "):g),t.object==="block")St(_);else{let M=(E=t.getFirstText())==null?void 0:E.key;if(M){let W=_.value.document.getNextText(M);W&&_.collapseToStartOf(W)}}_.focus()})};return a.readOnly?o({formula:s}):zo.createElement(fk,{opened:u,onClose:P,wrapper:qw,anchor:({ref:_})=>o({ref:_,isFocused:n&&i||u,onPress:x,formula:g,onError:()=>{f(!0)}})},zo.createElement(tn,{kind:"tooltip"},zo.createElement(v,null,zo.createElement(Ut,{ref:l,multiline:!0,numberOfLines:3,autoFocus:!0,selectTextOnFocus:!0,value:g,onChangeText:w,placeholder:"Enter your TeX formula",onSubmit:R,kind:"inverted",textStyle:m?[y.danger]:void 0}),zo.createElement(N,{style:[y.Label,y.textInverted,a7.blockExitHint]},"Exit with ",zo.createElement(qr,{kind:"muted",shortcut:"enter"})),m?zo.createElement(Vn,{tooltip:"There is an error in your math formula",preferredPlacement:"bottom"},(_,E)=>zo.createElement(v,{ref:E,style:a7.blockErrortBadge,..._.events},zo.createElement(so,{icon:S.ExclamationCircle,kind:"danger"}))):null)))}var a7=X.create({blockExitHint:{position:"absolute",bottom:p.small,right:p.small},blockErrortBadge:{position:"absolute",bottom:p.small,left:p.small}});c();var zg=Jm("f1a718ae5a0b5d0a680254c13fabc0ed4b38f7b4037704dda83756645a7f1027",()=>import("https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/chunks/MathTeXView.lazycomponent.legacy-LW5N3ZJV.min.js"));function s7(e){return $i.createElement(Bg,{anchor:({formula:t,onError:o,...n})=>$i.createElement(ve,{...e},$i.createElement(Vt,{...e,...n},$i.createElement($i.Suspense,{fallback:$i.createElement(Yn,null)},$i.createElement(_i,{horizontal:!0,showsVerticalScrollIndicator:!1,contentContainerStyle:M8.container},$i.createElement(zg,{formula:t,inline:!1,onError:o}))))),...e})}var M8=X.create({container:{marginLeft:"auto",marginRight:"auto"}});c();var ys=k(O());function c7(e){return ys.createElement(Bg,{anchor:({formula:t,onError:o,...n})=>ys.createElement(xl,{...e,...n},ys.createElement(ys.Suspense,{fallback:ys.createElement(Oe,{size:T.ICON_S})},ys.createElement(zg,{formula:t,inline:!0,onError:o}))),...e})}c();var $t=k(O());c();var l7=k(O()),Wg=l7.createContext(new Map);c();c();var lb=k(O());c();c();var sb=k(O());z();var u7={title:"Checkbox",description:"A single checkbox that can be checked or unchecked.",IconComponent:S.ColumnTypeCheckbox,ValueComponent:T8,onKeyDown:(e,t,o)=>{switch(e){case"backspace":t&&o(!1);break;case"enter":o(!t);break}}};function T8(e){let{value:t,readOnly:o,onValueChange:n,style:r}=e;return sb.default.createElement(v,{style:[r,b.flex1,b.directionRow,b.alignCenter]},sb.default.createElement(Bi,{value:t,onValueChange:n,readOnly:o}))}c();var In=k(O());z();var d7={title:"Link",description:"Reference another page, file, space or collection.",IconComponent:S.PageLink,ValueComponent:E8};function E8(e){let{value:t,selected:o,readOnly:n,displayMode:r,style:i,onValueChange:a}=e,s=In.default.useRef(null),l=se(s),{contentReferenceContext:u}=In.default.useContext(ne),d=()=>{l.open(on(a,u,{accept:["page","file","space","collection","anchor","url"]}))};return In.default.createElement(v,{ref:s,style:[b.directionRow,b.wrap,b.flex1,b.alignCenter,i]},In.default.createElement(In.default.Suspense,{fallback:In.default.createElement(Oe,null)},t?In.default.createElement(v,{style:[b.flex1,b.directionRow]},In.default.createElement(L8,{contentRef:t})):null,(r==="block"||o)&&!n?In.default.createElement(A,{icon:S.MoreVertical,title:r!=="block"?"Select target":null,kind:"secondary",size:"small",onPress:d},r==="block"?"Select target":null):null))}function L8(e){let{contentRef:t}=e,{contentReferenceContext:o}=In.default.useContext(ne),[n]=jy([t],o),[,r]=I(L);return n?In.default.createElement(v,{style:[b.directionRow,b.alignCenter]},n.icon?In.default.createElement(v,{style:[p.Margin.smallRight]},In.default.createElement(n.icon,{size:T.ICON_M,style:[r.textMuted]})):null,In.default.createElement(zi,{url:n.href,onPress:i=>{i.preventDefault(),n.open()},style:[r.Body]},n.title)):null}c();var or=k(O());z();var m7={title:"Files",description:"Attachments allow you to add images, documents, or other files which can then be viewed or downloaded.",IconComponent:S.ColumnTypeFile,ValueComponent:N8};function N8(e){let{value:t,selected:o,readOnly:n,displayMode:r,onValueChange:i,style:a}=e,s=xt(),l=async()=>{let d=await s.prompt({title:"Select file"});i([...t,...d.filter(m=>m.kind==="file").map(m=>m.file)])},u=d=>{let m=[...t];m.splice(d,1),i(m)};return or.default.createElement(v,{style:[b.directionRow,b.wrap,b.flex1,t.length>0?A8.filesList:null,a]},or.default.createElement(or.default.Suspense,{fallback:or.default.createElement(Oe,null)},t.map((d,m)=>or.default.createElement(D8,{key:d,fileId:d,readOnly:n,onRemove:()=>u(m)}))),(r==="block"||o)&&!n?or.default.createElement(A,{icon:S.Plus,title:"Add attachment",kind:"secondary",size:"small",onPress:l},r==="block"?"Add file":null):null)}function D8(e){var m,f;let{fileId:t,readOnly:o,onRemove:n}=e,[,r]=I(L),i=B.useInteractiveState(),a=or.default.useRef(null),s=se(a),l=po({kind:"file",file:t}),u=(f=(m=l.resolution)==null?void 0:m.extra)==null?void 0:f.file;return or.default.createElement(Be,{onPress:()=>{o?l.href&&ya(l.href):s.open(oe({groups:[{key:"file",commands:[{key:"remove",title:"Remove",icon:S.Trashcan,trigger:()=>{n()}},u?{key:"download",title:"Download",icon:S.Download,trigger:()=>{ya(l.href)}}:null].filter(ge)}]}))},...i.events},or.default.createElement(v,{ref:a,style:[b.directionRow,b.alignCenter,p.Margin.smallRight]},or.default.createElement(v,{style:[p.Margin.smallRight]},or.default.createElement(ll,{file:u,size:T.BUTTON_S})),or.default.createElement(v,null,or.default.createElement(N,{style:[r.Body,i.active||s.opened?r.primary:r.text]},(u==null?void 0:u.name)||"Deleted"))))}var A8=X.create({filesList:{gap:p.small}});c();var cb=k(O());z();var p7={title:"Number",description:"",IconComponent:S.Numbers,ValueComponent:B8,onKeyDown:(e,t,o)=>{switch(e){case"backspace":o(null);break;case"enter":typeof t!="number"&&o(0);break}}};function B8(e){let{readOnly:t,value:o,onValueChange:n,onSelectionChange:r,style:i}=e,[,a]=I(L),s=[a.Body,z8.numberInput,a.textMid,i],l=()=>{r(!0)};return t?cb.default.createElement(N,{style:s},typeof o=="number"?String(o):""):cb.default.createElement(Lr,{style:s,value:typeof o=="number"?String(o):"",onChangeText:u=>n(Number(u)),onFocus:l})}var z8=X.create({numberInput:{height:"auto",padding:0,width:"100%",borderWidth:0}});c();var lc=k(O());z();var W8=8,V8={info:H.primary.light,merge:H.violet.light,upgrade:H.fuchsia.light,danger:H.scarlet.light},f7={title:"Rating",description:"",IconComponent:S.ColumnTypeRating,ValueComponent:F8,commands:q8,onKeyDown:(e,t,o)=>{switch(e){case"backspace":o(0);break;case"enter":break}}};function q8(e){let{definition:t,setDefinition:o}=e;return[{key:"rating",commands:[{key:"rating.max_value",title:"Max",icon:S.MaximumValue,descendant:()=>oe({search:"Select max rating\u2026",groups:[{key:"max_values",commands:[...Array(5).keys()].map(n=>({key:`${n+1}`,title:`${n+1}`,type:1,selected:t.max===n+1,trigger:()=>{o({...t,max:n+1})}}))}]})}]}]}function F8(e){let{value:t,definition:o,definitionColorKind:n,onValueChange:r,readOnly:i,style:a}=e,[s,l]=I(H8),[u,d]=lc.default.useState(0),m=[...Array(o.max+1).keys()].slice(1),f=C=>{r(C===t?null:C)},g=C=>{i||d(C)},h=l.circleBase,y=n?{backgroundColor:V8[n]}:l.circleActiveDefault;return lc.default.createElement(v,{style:[b.directionRow,b.flex1,b.alignCenter,a]},m.map(C=>lc.default.createElement(B.WithInteractiveState,{key:String(C),onHoverIn:()=>g(C),onHoverOut:()=>g(0)},({events:x})=>lc.default.createElement(Be,{...x,onPress:()=>f(C)},lc.default.createElement(G8,{size:W8+2*(C-1),style:[u===0&&t&&t>=C||u>=C?y:h,{marginRight:p.xsmall}]})))))}function G8({size:e,style:t}){return lc.default.createElement(v,{style:[{width:e,height:e,borderRadius:e/2},t]})}var H8=D.create({circleBase:e=>({backgroundColor:e.colors.background.standout}),circleActiveDefault:()=>({backgroundColor:H.primary.light})});c();var g7=k(ME()),sn=k(O());z();var h7={title:"Select",description:"Select allows you to select an option from predefined options in a dropdown.",IconComponent:S.ColumnTypeSelect,ValueComponent:j8,commands:X8,onKeyDown:(e,t,o)=>{switch(e){case"backspace":t.length>0&&o([]);break}}};function X8(e){let{definition:t,setDefinition:o}=e;return[{key:"select",commands:[{key:"select.allow_multiple",title:"Allow multiple",icon:S.OptionAdd,type:2,enabled:t.multiple,trigger:()=>{let[n]=o({...t,multiple:!t.multiple});return n}},{key:"select.options",title:"Manage options",icon:S.OptionManage,descendant:()=>y7(e)}]}]}function y7(e){let{definition:t,setDefinition:o,openModal:n}=e,{options:r}=t,i=r.map((a,s)=>{let l=u=>{let d=[...r];d[s]={...a,label:u},o({...t,options:d})};return{key:a.value,title:a.label,descendant:()=>oe({groups:[{key:"select.options.manageOption",commands:[{key:"editOption",title:"Edit option",icon:S.Edit,trigger:()=>{n(u=>sn.default.createElement(K8,{...u,option:a,onSave:l}))}},{key:"deleteOption",title:"Delete option",icon:S.Trashcan,trigger:()=>{let u=[...r];u.splice(s,1),o({...t,options:u})}}]}]})}});return oe({search:"Search options or type to add",groups:[{key:"select.options.manage",commands:a=>{let s=a.query.text.trim();return a.query.text&&!i.find(l=>l.title===s)?[{key:"add_new_option",title:s,icon:S.Plus,trigger:()=>{let u={value:cm(),label:s,color:"blue"},[,d]=o({...t,options:[...r,u]});return y7(d)}},...i]:i}}]})}function K8(e){let{option:t,definition:o,onSave:n,onClose:r}=e,{options:i}=o,a=[...i].filter(g=>g.label!==t.label),[s,l]=sn.default.useState(t),u=g=>g.length===0?"The label can not be empty":a.filter(y=>y.label===g).length>0?"Another option already exists with this label":null,d=()=>{n(s.label),r()},m=g=>{l({...s,label:g})},f=u(s.label);return sn.default.createElement(kt,{title:"Edit option",footer:sn.default.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},sn.default.createElement(A,{kind:"secondary",onPress:r,style:p.Margin.smallRight},"Cancel"),sn.default.createElement(A,{kind:"primary",onPress:d,disabled:!!f},"Save")),onClose:r},sn.default.createElement(v,null,sn.default.createElement(Ut,{autoFocus:!0,value:s.label,label:"Label",onChangeText:m,feedback:f?{type:"danger",message:f}:void 0})))}function j8(e){let{value:t,selected:o,definition:n,onValueChange:r,definitionColorKind:i,readOnly:a,displayMode:s,style:l}=e,u=sn.default.useRef(null),d=se(u),[,m]=I(L),f=()=>{d.open(U8(n,t,r))},g=sn.default.createElement(v,{style:[b.directionRow,b.wrap,b.flex1,t.length>0?Y8.optionsList:null]},t.map(h=>{let y=n.options.find(C=>C.value===h);return y?sn.default.createElement(u1,{key:y.value,deletable:!a&&n.multiple,kind:i!=null?i:"info",onPress:()=>n.multiple?r(t.filter(C=>C!==y.value)):null,size:"small"},y.label):null}));return a||s==="inline"&&!o?g:sn.default.createElement(Be,{ref:u,onPress:f,style:[l]},sn.default.createElement(v,{style:[b.directionRow,b.flex1,b.alignCenter]},g,s==="inline"?sn.default.createElement(v,{style:[p.Margin.smallLeft]},sn.default.createElement(S.ChevronDown,{size:T.ICON_XS,style:m.textMuted})):null))}function U8(e,t,o){return oe({search:"Find an option\u2026",position:{width:"small"},groups:[{key:"options",commands:e.options.map(n=>{let r=t.includes(n.value);return{key:n.value,title:n.label,...e.multiple?{type:1,selected:r}:{selected:void 0},trigger:()=>{o(r?t.filter(i=>i!==n.value):(0,g7.default)(e.multiple?[...t,n.value]:[n.value]))}}})}]})}var Y8=X.create({optionsList:{gap:p.small}});c();var Vg=k(O());z();var v7={title:"Text",description:"",IconComponent:S.ColumnTypeText,ValueComponent:$8,commands:Z8};function Z8(e){return[{key:"text.alignment",commands:[{key:"text.alignment",title:"Alignment",descendant:()=>b7(e)}]}]}function b7(e){let{definition:t,setDefinition:o}=e;return oe({groups:[{key:"text.alignment.select",commands:[{label:"Left",value:"left",icon:S.AlignTextLeft},{label:"Center",value:"center",icon:S.AlignTextCenter},{label:"Right",value:"right",icon:S.AlignTextRight}].map(n=>({key:`text.alignment.${n.value}`,title:n.label,type:1,selected:t.textAlignment===n.value,icon:n.icon,trigger:()=>{let[,r]=o({...t,textAlignment:n.value});return b7(r)}}))}]})}function $8(e){let{value:t,definition:o,style:n,readOnly:r}=e;return t==null?null:Vg.default.createElement(v,{style:[b.flex1,!r&&Q8.editableFragment,n]},Vg.default.createElement(Za.Provider,{value:o.textAlignment},Vg.default.createElement(kn,{fragment:t})))}var Q8=X.create({editableFragment:{cursor:"text"}});c();var cn=k(O());z();var C7={title:"Users",description:"A user field lets you add collaborators to your records.",IconComponent:S.Users,ValueComponent:eD,commands:J8};function J8(e){let{definition:t,setDefinition:o}=e;return[{key:"users",commands:[{key:"users.allow_multiple",title:"Allow multiple",icon:S.Team,type:2,enabled:t.multiple,trigger:()=>{let[n]=o({...t,multiple:!t.multiple});return n}}]}]}function eD(e){let{value:t,selected:o,readOnly:n,displayMode:r,definition:i,onValueChange:a,style:s}=e,l=cn.default.useRef(null),u=se(l),d=g=>{let h=[...t];h.splice(g,1),a(h)},m=()=>{u.open(oe({search:"Search users\u2026",position:{width:"small"},groups:[{key:"users",commands:g=>Gs.read({query:g.query.text,types:["users"]}).map(y=>y.index!=="users"?null:{key:y.object.objectID,title:y.object.displayName,icon:({size:C})=>cn.default.createElement(va,{user:y.object,size:C}),trigger:()=>{a([...t,y.object.objectID])}}).filter(ge)}]}))},f=i.multiple?"Add users":"Replace";return cn.default.createElement(v,{style:[b.flex1,b.directionRow,s]},cn.default.createElement(v,{style:[b.directionRow,b.wrap,b.flex1,t.length>0?oD.filesList:null]},cn.default.createElement(cn.default.Suspense,{fallback:null},t.map((g,h)=>cn.default.createElement(tD,{key:g,userId:g,readOnly:n,onRemove:()=>d(h)})))),(r==="block"||o)&&!n?cn.default.createElement(A,{ref:l,icon:i.multiple?S.Plus:S.ChevronDown,title:r==="block"?void 0:f,kind:"secondary",size:"small",onPress:m,active:u.opened},r==="block"?f:null):null)}function tD(e){let{userId:t,readOnly:o,onRemove:n}=e,[,r]=I(L),i=B.useInteractiveState(),a=cn.default.useRef(null),s=se(a),[l]=Fr([om(t)]);return cn.default.createElement(Be,{onPress:()=>{s.open(oe({position:{width:"small"},groups:[{key:"user",commands:[o?null:{key:"remove",title:"Remove",icon:S.Trashcan,trigger:()=>{n()}}].filter(ge)}]}))},...i.events},cn.default.createElement(v,{ref:a,style:[b.directionRow,b.alignCenter,p.Margin.smallRight]},l?cn.default.createElement(v,{style:[p.Margin.smallRight]},cn.default.createElement(va,{user:l,size:T.BUTTON_S})):null,cn.default.createElement(v,null,cn.default.createElement(N,{style:[r.Body,i.active||s.opened?r.primary:r.text]},(l==null?void 0:l.displayName)||"Deleted"))))}var oD=X.create({filesList:{gap:p.small}});var Ir={checkbox:u7,number:p7,text:v7,files:m7,select:h7,users:C7,rating:f7,"content-ref":d7},S7=["text","number","checkbox","select","users","files","content-ref","rating"];function Oa(e){return e.title||Ir[e.type].title}function Bl(e){let{record:t,definition:o,readOnly:n,displayMode:r="inline",editor:i,nodeKey:a,selected:s,definitionColorKind:l,style:u}=e,{ValueComponent:d}=Ir[e.definition.type],m=h=>{i.change(y=>{Z.setRecordValue(y,a,t.key,o.id,h)})},f=h=>{h&&i.change(y=>{Z.moveTableSelection(y,a,{recordId:t.key,definitionId:o.id})})},g=lb.createElement(d,{editor:i,nodeKey:a,readOnly:n,displayMode:r,selected:s,value:t.value.values[o.id],definitionColorKind:l,definition:o,onValueChange:m,onSelectionChange:f,style:u});return o.type==="text"?g:lb.createElement(le,{style:b.flex1,onClick:h=>{h.stopPropagation(),f(!0)}},g)}c();function _a(e,t={}){return oe({search:"Select column type",groups:[{key:"types",commands:S7.map(o=>{let n=Ir[o];return{key:o,icon:n.IconComponent,title:n.title,...t.selectedType?{type:1,selected:t.selectedType===o}:{selected:void 0},trigger:()=>{e(o)}}})}]})}c();var vs=k(O());z();function w7(e){return e.readOnly?vs.createElement(nD,{...e}):vs.createElement(rD,{...e})}function nD(e){let{definition:t,style:o}=e,[,n]=I(L);return vs.createElement(N,{style:[b.directionRow,t.type==="text"?qg[t.textAlignment]:null,n.Body,n.textMid,n.Medium,qg.columnHeader,o],selectable:!0},Oa(t))}function rD(e){let{editor:t,nodeKey:o,definition:n,style:r}=e,[i,a]=I(L),s=f=>{t.change(g=>{Z.renameColumn(g,o,n.id,f)})},l=n.title||"",u=Oa(n),d=vs.useMemo(()=>X.flatten([r,a.Body,a.textMid,a.Medium,qg.columnHeader,n.type==="text"?qg[n.textAlignment]:null]),[r,n]),m=vs.useMemo(()=>np(l||u||"",d),[l,u,d]);return vs.createElement(hr,{component:Lr,value:l,placeholder:u,placeholderTextColor:i.colors.text.muted,onChangeText:s,style:[d,m===void 0?{}:{width:m,maxWidth:"100%"}]})}var qg=X.create({columnHeader:{wordWrap:"anywhere"},left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"}});c();var x7=k(O()),k7=["info","merge","upgrade","danger"];function iD(e,t){let{definitionColorsKindsMap:o}=t.reduce((n,r)=>{let i=e[r];if(i.type==="rating"||i.type==="select"){let a=k7[n.colorIndexToBeClaimed];n.definitionColorsKindsMap[r]=a,n.colorIndexToBeClaimed=(n.colorIndexToBeClaimed+1)%k7.length}return n},{colorIndexToBeClaimed:0,definitionColorsKindsMap:{}});return o}function O7(e,t){return x7.default.useMemo(()=>iD(e,t),[e])}c();var Rr=k(O());c();c();c();var ub=k(O());function _7(e){return ub.default.createElement(ub.default.Fragment,null)}c();c();function zl(e,t,o={}){let{selected:n=[],search:r="Select columns\u2026",multiple:i=!1,filterDefinition:a=()=>!0}=o;return oe({search:r,groups:[{key:"columns",commands:Object.entries(e).filter(([s,l])=>a(l)).map(([s,l])=>{let u=Ir[l.type],d=n.includes(s);return{key:s,title:Oa(l),icon:u.IconComponent,type:1,selected:d,trigger:()=>t(i?d?n.filter(m=>m!==s):[...n,s]:d?[]:[s])}})}]})}c();function Yo(e,t,o,n){let{focus:r="end",definition:i,record:a}=n;if(!o.selection.definitionId)return!1;let s=o.records.findIndex(m=>m.key===o.selection.recordId),l=o.view.columns.indexOf(o.selection.definitionId),u=o.records["relative"in a?s+a.relative:a.absolute],d=o.view.columns["relative"in i?l+i.relative:i.absolute];return!d||!u?!1:(Z.moveTableSelection(e,t,{recordId:u.key,definitionId:d},r),!0)}function uc(e,t,o,n){let r=o.records.findIndex(a=>a.key===o.selection.recordId),i=o.records["relative"in n?r+n.relative:n.absolute];return i?(Z.moveTableSelection(e,t,{recordId:i.key,definitionId:void 0}),!0):!1}var I7=(e,t,o,n)=>{if(!o.selection.definitionId&&o.selection.recordId)return sD(e,t,o,n);if(o.selection.definitionId&&o.selection.recordId)return aD(e,t,o,n)},aD=(e,t,o,n)=>{let r=o.view.cardSize==="medium"?3:2;switch(e){case"move-up":case"move-down":{Yo(n,t,o,{definition:{relative:e==="move-up"?-1:1},record:{relative:0},focus:e==="move-up"?"end":"start"})||Yo(n,t,o,{definition:{absolute:e==="move-up"?o.view.columns.length-1:0},record:{relative:e==="move-up"?-r:r},focus:e==="move-up"?"end":"start"})||(e==="move-up"?Nc(n,t):St(n,t));break}case"move-left":case"move-right":{Yo(n,t,o,{definition:{absolute:0},record:{relative:e==="move-left"?-1:1},focus:e==="move-left"?"end":"start"});break}case"tab":case"enter":{if(!Yo(n,t,o,{definition:{relative:1},record:{relative:0},focus:"end"})&&!Yo(n,t,o,{definition:{absolute:0},record:{relative:1},focus:"end"})){let i=Z.insertEmptyRecord(n,t.key);Z.moveTableSelection(n,t,{recordId:i,definitionId:o.view.columns[0]},"start")}break}case"backspace":{Yo(n,t,o,{definition:{relative:-1},record:{relative:0},focus:"end"})||Z.moveTableSelection(n,t,{recordId:o.selection.recordId,definitionId:void 0});break}}},sD=(e,t,o,n)=>{let r=o.view.cardSize==="medium"?3:2;switch(e){case"tab":{uc(n,t,o,{relative:1});break}case"shift+tab":{uc(n,t,o,{relative:-1});break}case"move-left":case"move-right":{uc(n,t,o,{relative:e==="move-left"?-1:1})||(e==="move-left"?Nc(n,t):St(n,t));break}case"move-up":case"move-down":{uc(n,t,o,{relative:e==="move-up"?-r:r})||(e==="move-up"?Nc(n,t):St(n,t));break}case"backspace":{uc(n,t,o,{relative:-1})||uc(n,t,o,{relative:1}),Z.removeRecord(n,t.key,o.selection.recordId);break}case"enter":{Yo(n,t,o,{definition:{absolute:0},record:{relative:0},focus:"start"});break}}};c();var Ia=k(O());c();var Fg=k(O());function R7(e){let{editor:t,nodeKey:o,defaultTextDefinitionId:n}=e,[,r]=I(cD),[,i]=I(L),a=()=>{t.change(s=>{let l=Z.insertEmptyRecord(s,o);Z.moveTableSelection(s,o,{recordId:l,definitionId:n})})};return Fg.createElement(B.TouchableOpacity,{style:[b.flex1,r.cardPlaceholder,b.directionRow,b.alignCenter,b.justifyContentCenter,p.Padding.medium],activeStyle:r.cardPlaceholderActive,onPress:a},Fg.createElement(B.Text.Child,{style:[i.Body,i.textMuted],activeStyle:i.primary},Fg.createElement(S.Plus,{size:T.ICON_M,style:[p.Margin.smallRight]}),"New card"))}var cD=D.create({cardPlaceholder:e=>({borderRadius:e.radiuses.large,borderColor:e.colors.border.mid,borderWidth:1,borderStyle:"dashed"}),cardPlaceholderActive:e=>({borderColor:e.colors.primary.main})});c();var ln=k(O());z();c();var Gg=JSON.parse('{"targetCard":"targetCard_YoeqR","controlButtons":"controlButtons_l18tz","grab":"grab_y1-pK","grabbing":"grabbing_fDPig"}');c();var Qi=k(O());z();function P7(e){var P;let{nodeKey:t,editor:o,record:n,view:r,visible:i,onExpand:a,dragHandleRef:s,isDragging:l}=e,u=Qi.useRef(null),d=Ni(u,s),m=se(u),f=xt(),{contentReferenceContext:g}=Qi.useContext(ne),h=r.coverDefinition?((P=n.value.values[r.coverDefinition])==null?void 0:P.length)>0:!1,y=r.targetDefinition?!!n.value.values[r.targetDefinition]:!1,C=async()=>{let[R]=await f.prompt({title:"Select file",accept:"images",acceptURL:!1});!R||R.kind!=="file"||o.change(_=>{Z.cards.setCardCoverForRecord(_,t,n.key,R)})},x=()=>on(R=>{o.change(_=>{Z.cards.setCardTargetForRecord(_,t,n.key,R)})},g,{accept:["page","file","space","collection","anchor","url"]}),w=R=>{R.preventDefault(),R.stopPropagation(),m.open(oe({groups:[{key:"actions",commands:[{key:"actions.target",icon:S.PageLink,...y?{title:"Target link",descendant:()=>oe({groups:[{key:"target",commands:[{key:"target.set",title:"Replace target",icon:S.Replace,trigger:()=>x()},{key:"target.remove",title:"Remove target",icon:S.Trashcan,trigger:()=>{o.change(_=>{Z.cards.removeCardTargetForRecord(_,t,n.key)})}}]}]})}:{title:"Add target link",trigger:()=>x()}},{key:"actions.cover",icon:S.Image,...h?{title:"Cover",descendant:()=>oe({groups:[{key:"cover",commands:[{key:"cover.set",title:"Replace cover",icon:S.Replace,trigger:()=>{C()}},{key:"cover.remove",title:"Remove cover",icon:S.Trashcan,trigger:()=>{o.change(_=>{Z.cards.removeCardCoverForRecord(_,t,n.key)})}}]}]})}:{title:"Add cover",trigger:()=>{C()}}},{key:"actions.delete",title:"Delete record",icon:S.Trashcan,trigger:()=>{o.change(_=>{Z.removeRecord(_,t,n.key)})}}]}]}))};return Qi.createElement(At,{onPressIn:R=>{R.preventDefault(),R.stopPropagation()}},Qi.createElement(ae,{style:[U.flex.row,U.flex.alignCenter,Gg.controlButtons,l&&U.opacity.translucent],inlineStyle:m.opened||i?{opacity:1}:void 0},Qi.createElement(Fc,{ref:d,kind:"secondary",size:"small",leadingIcon:S.GrabberVertical.CSS,iconOnly:!0,rounded:!0,label:"Drag card",tooltipTitle:l?void 0:`Click for options.
Drag to move.`,onClick:w,preventFocusOnPress:!0,style:{cursor:l?"grabbing":"grab"}}),Qi.createElement(ae,{style:[U.gap.smallColumnGap,U.margin.autoLeft]},Qi.createElement(A,{kind:"secondary",size:"small",rounded:!0,icon:S.Maximize,onPress:a,title:"Open card",tooltipDelay:300}))))}c();var db=k(O());z();function M7(e){var a,s;let{coverRef:t}=e,[,o]=I(lD),n=po(t),r=(s=(a=n.resolution)==null?void 0:a.extra)==null?void 0:s.file,i=n&&r&&za(r)?li(r.downloadURL,{width:371}):null;return i?db.createElement(v,{style:o.cardCover},db.createElement(qC,{source:{uri:i},style:o.cardImage})):null}var lD=D.create({cardCover:e=>({backgroundColor:e.colors.background.muted}),cardImage:{width:"100%",aspectRatio:16/9}});function T7(e){var Y,$;let{nodeKey:t,definition:o,editor:n,readOnly:r,record:i,view:a,selected:s,isLastInRow:l,beforeOrderIndex:u,afterOrderIndex:d,onExpand:m}=e,[,f]=I(dD),[,g]=I(L),[h,y]=ln.useState(),C=ft(h),x=ln.useRef(null),w={type:"table-record",id:i.key,blockKey:t,previewLabel:"Move card"},[{dragging:P},R]=gl({type:w.type,item:w,canDrag:()=>!r,collect:te=>({dragging:te.isDragging()})}),[_,E]=wr({accept:[w.type],drop:(te,fe)=>{fe.didDrop()||n.change(tt=>{Z.moveRecord(tt,t,te.id,C.current==="before"?{before:u,after:i.value.orderIndex}:{before:i.value.orderIndex,after:d})})},hover:(te,fe)=>{if(!fe.canDrop())return;let tt=uD(fe,x);h!==tt&&y(tt)},canDrop:te=>i.key!==te.id&&t===te.blockKey,collect:te=>({higlighted:te.isOver()&&te.canDrop()})}),M=E(x),W=a.targetDefinition?i.value.values[a.targetDefinition]:void 0,G=po(W),V=()=>{n.change(te=>{Z.moveTableSelection(te,t,{recordId:i.key}),te.focus()})},F=ln.createElement(v,{style:[b.flex1,p.Padding.medium,!r&&f.editableArea]},a.columns.map((te,fe)=>{let tt=o[te],Gt=ln.createElement(Bl,{record:i,selected:!1,definition:tt,nodeKey:t,editor:n,readOnly:r});return ln.createElement(v,{key:te,style:[fe<a.columns.length-1?p.Margin.smallBottom:null]},a.hideColumnTitle?null:ln.createElement(v,null,ln.createElement(N,{style:[g.Label,g.textMid]},tt.title)),Gt)}));return ln.createElement(Cv,{style:[b.flex1],readOnly:r,selected:s,onSelect:V},ln.createElement(ae,{style:[Gg.targetCard,U.flex.flex1,P&&U.opacity.translucent,Zw,{[Zm]:_.higlighted&&(!l||l&&h==="before"),[$m]:_.higlighted&&l&&h==="after"}],ref:M},ln.createElement(ga,{style:[b.flex1,b.directionColumn],...W?{component:B.TouchableOpacity,href:r?G.href:void 0,onPress:te=>{te.preventDefault(),G==null||G.open()}}:{component:B.View}},a.coverDefinition&&((Y=i.value.values[a.coverDefinition])!=null&&Y[0])?ln.createElement(M7,{coverRef:{kind:"file",file:($=i.value.values[a.coverDefinition])==null?void 0:$[0]}}):null,r?F:ln.createElement(At,{onPressIn:te=>{te.preventDefault(),te.stopPropagation()}},F),r?null:ln.createElement(P7,{nodeKey:t,editor:n,record:i,view:a,visible:s,onExpand:m,dragHandleRef:R,isDragging:P}))))}function uD(e,t){if(!(t!=null&&t.current))return;let o=t.current.getBoundingClientRect(),n=.5*(o.right-o.left),r=e.getClientOffset();return r?r.x-o.left<n?"before":"after":void 0}var dD=D.create({editableArea:{cursor:"text"}});function E7(e){let{nodeKey:t,editor:o,readOnly:n,definition:r,records:i,view:a,selection:s,openRecord:l}=e,u=qc(),d=Ia.useMemo(()=>a.columns.find(g=>r[g].type==="text")||void 0,[a.columns,r]),m=Ia.useMemo(()=>{switch(a.cardSize){case"medium":return{mobile:1,tablet:2,desktop:3};case"large":return{mobile:1,tablet:1,desktop:2};default:Ne(a.cardSize)}},[a.cardSize]),f=Ia.useCallback(({item:g,index:h})=>g.key==="new"?Ia.createElement(R7,{editor:o,nodeKey:t,defaultTextDefinitionId:d}):Ia.createElement(T7,{nodeKey:t,editor:o,readOnly:n,definition:r,record:g,view:a,isLastInRow:m[u]===1||(h+1)%m[u]===0,beforeOrderIndex:h>0?i[h-1].value.orderIndex:void 0,afterOrderIndex:h<i.length-1?i[h+1].value.orderIndex:void 0,selected:!s.definitionId&&s.recordId===g.key,onExpand:()=>l(g.key)}),[t,o,n,r,a,s.recordId,!!s.definitionId,d,l]);return Ia.createElement(jw,{data:n?i:[...i,{key:"new"}],renderItem:f,numColumnsPerScreen:m,columnSpacing:p.medium,rowSpacing:p.medium})}var L7={IconComponent:S.Cards3Columns,title:"Cards",recordName:"card",selectableView:!1,ViewComponent:E7,DefinitionSettingsComponent:_7,commands:mD,onKeyDown:I7};function mD(e){let{view:t,setView:o}=e;return[{key:"cards.definitions",commands:[{key:"cards.selectCover",title:"Cover image",icon:S.Image,descendant:()=>pD(e)},{key:"cards.selectTarget",title:"Target link",icon:S.PageLink,descendant:()=>fD(e)}]},{key:"cards.size",commands:[{key:"cards.size.medium",title:"Medium",icon:S.Cards3Columns,type:1,selected:t.cardSize==="medium",trigger:()=>{let[n]=o({...t,cardSize:"medium"});return n}},{key:"cards.size.large",title:"Large",icon:S.Cards2Columns,type:1,selected:t.cardSize==="large",trigger:()=>{let[n]=o({...t,cardSize:"large"});return n}}]},{key:"cards.options",commands:[{key:"cards.hideColumnTitle",title:"Show labels",icon:S.EyeOff,type:2,enabled:!t.hideColumnTitle,trigger:()=>{let[n]=o({...t,hideColumnTitle:!t.hideColumnTitle});return n}},{key:"cards.definitions",title:"Columns",icon:S.EyeOff,descendant:()=>N7(e)}]}]}function pD(e){let{view:t,definition:o,setView:n}=e;return zl(o,r=>{n({...t,coverDefinition:r[0]})},{multiple:!1,search:"Select column for cover\u2026",selected:t.coverDefinition?[t.coverDefinition]:[],filterDefinition:r=>r.type==="files"})}function fD(e){let{view:t,definition:o,setView:n}=e;return zl(o,r=>{n({...t,targetDefinition:r[0]})},{multiple:!1,search:"Select column for target\u2026",selected:t.targetDefinition?[t.targetDefinition]:[],filterDefinition:r=>r.type==="content-ref"})}function N7(e){let{view:t,definition:o,setView:n}=e;return zl(o,r=>{let[,i]=n({...t,columns:r});return N7(i)},{multiple:!0,search:"Select visible columns\u2026",selected:t.columns})}c();c();var kd=k(O());c();var A7=k(lm()),Rt=k(O());z();var Ra=Rt.createContext(new Map),B7=Rt.forwardRef((e,t)=>{let{nodeKey:o,editor:n,view:r,children:i}=e,{readOnly:a}=n,[,s]=I(z7),[l]=wa.useDimensions(),u=Ye(),d=u?l.width:l.width-2,{widths:m,totalWidth:f}=Rt.useMemo(()=>$f(r,d,u),[d,r.columns,r.columnWidths]),[g,h]=Rt.useState({left:!1,right:!1});Rt.useEffect(()=>{h(P=>({left:f>d?P.left:!1,right:f>d?P.right:!1}))},[f,d]);let y=ft(g),C=Rt.useCallback(P=>{let{contentOffset:R,contentSize:_,layoutMeasurement:E}=P.nativeEvent,M=R.x>0,W=R.x<_.width-E.width;y.current.left===M&&y.current.right===W||h({left:M,right:W})},[]),x=Rt.useCallback((P,R)=>{let _=m.get(P);cr(_),n.change(E=>{E.setDataByKey(o,["view","columnWidths",P],(0,A7.default)(_.width+R,Zf,od),{normalize:!1}),E.setDataByKey(o,["view","useNewSizing"],!0,{normalize:!1})})},[m]),w=(P,R)=>{n.change(_=>{Z.moveColumn(_,o,R.id,P)})};return Rt.createElement(v,{ref:t},Rt.createElement(Ra.Provider,{value:m},Rt.createElement(_i,{horizontal:!0,style:s.tableScrollWrapper,onScroll:C,scrollEventThrottle:100,contentContainerStyle:s.tableWrapper},i,a?null:[...r.columns].reverse().reduce((P,R,_,E)=>{let M=m.get(R);return cr(M),Rt.createElement(gD,{key:R,columnId:R,columnAfterId:E[_-1],tableKey:o,controller:M.controller,width:M.animated,onResizeComplete:x,onDropBefore:W=>w(R,W)},P)},null))),!u&&g.left?Rt.createElement(v,{style:s.tableScrollIndicatorLeft,pointerEvents:"none"}):null,!u&&g.right?Rt.createElement(v,{style:s.tableScrollIndicatorRight,pointerEvents:"none"}):null)});function gD(e){let{tableKey:t,columnId:o,columnAfterId:n,controller:r,width:i,children:a,onDropBefore:s,onResizeComplete:l}=e,[u,d]=I(z7),m=Rt.useMemo(()=>Zd.create({onStartShouldSetPanResponder:(y,C)=>!1,onStartShouldSetPanResponderCapture:(y,C)=>!1,onMoveShouldSetPanResponder:(y,{dx:C})=>!0,onMoveShouldSetPanResponderCapture:(y,C)=>!1,onPanResponderGrant:(y,{dx:C})=>{},onPanResponderMove:(y,{dx:C})=>{r.setValue(C)},onPanResponderTerminationRequest:(y,C)=>!1,onPanResponderRelease:(y,{dx:C})=>{l(o,C)},onPanResponderTerminate:(y,C)=>{}}),[o,r,l]),f=B.useInteractiveState(m.panHandlers),[g,h]=wr({accept:"table-definition",drop:(y,C)=>{C.didDrop()||s(y)},canDrop:y=>o!==y.id&&n!==y.id&&t===y.blockKey,collect:y=>({highlighted:y.isOver({shallow:!0})&&y.canDrop()})},[o,n,t]);return Rt.createElement(Ht.View,{ref:h,style:[d.columnLine,{left:i}]},Rt.createElement(v,{style:d.blockGrabber,...f.events},Rt.createElement(v,{style:[d.blockGrabberBar,(f.hovered||f.dragging||g.highlighted)&&{backgroundColor:u.colors.primary.main}]})),a)}var Hg=10,D7=3,z7=D.create({tableScrollWrapper:{borderWidth:0},tableScrollIndicatorLeft:e=>({position:"absolute",left:-1,top:0,bottom:0,width:1,shadowColor:H.BLACK,shadowOffset:{width:5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableScrollIndicatorRight:e=>({position:"absolute",right:-1,top:0,bottom:0,width:1,shadowColor:H.BLACK,shadowOffset:{width:-5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableWrapper:{position:"relative",overflow:"hidden",flexDirection:"column"},columnLine:{position:"absolute",top:0,bottom:0},blockGrabber:{position:"absolute",top:0,right:-(Hg/2),bottom:0,width:Hg,cursor:"ew-resize"},blockGrabberBar:{position:"absolute",top:0,right:Hg/2-D7/2,bottom:0,width:D7,borderRadius:T.RADIUS_M},blockGrabberPlus:{position:"absolute",top:p.small,left:-(T.BUTTON_XS/2)+Hg/2}});function W7(e){var a;let{view:t,columnId:o,setView:n}=e,r=kd.default.useContext(Ra);function i(s){var l;if(s){let{[o]:u,...d}=t.columnWidths||{};n({...t,useNewSizing:!0,columnWidths:d})}else n({...t,useNewSizing:!0,columnWidths:{...t.columnWidths,[o]:((l=r.get(o))==null?void 0:l.width)||is}})}return kd.default.createElement(kd.default.Fragment,null,kd.default.createElement(rp,{value:typeof((a=t.columnWidths)==null?void 0:a[o])>"u",onValueChange:i,label:"Fill available space",labelDescription:"Expand this column to fill the available horizontal space"}))}c();var V7=(e,t,o,n)=>{let r=(i=o.selection.definitionId)=>{if(!i)return;let a=o.records.findIndex(d=>d.key===o.selection.recordId),s=o.records[a],l=o.records[a+1],u=Z.insertEmptyRecord(n,t.key,{before:s.value.orderIndex,after:l==null?void 0:l.value.orderIndex});Z.moveTableSelection(n,t,{recordId:u,definitionId:i},"start")};switch(e){case"move-up":case"move-down":{Yo(n,t,o,{definition:{relative:0},record:{relative:e==="move-up"?-1:1},focus:e==="move-up"?"end":"start"})||(e==="move-up"?Nc(n,t):St(n,t));break}case"tab":case"move-right":{let i=e==="tab"?"select":"start";Yo(n,t,o,{definition:{relative:1},record:{relative:0},focus:i})||!Yo(n,t,o,{definition:{absolute:0},record:{relative:1},focus:i})&&e==="tab"&&r(o.view.columns[0]);break}case"shift+tab":case"move-left":{let i=e==="shift+tab"?"select":"end";Yo(n,t,o,{definition:{relative:-1},record:{relative:0},focus:i})||Yo(n,t,o,{definition:{absolute:o.view.columns.length-1},record:{relative:-1},focus:i});break}case"enter":{r();break}case"backspace":{if(Yo(n,t,o,{definition:{relative:-1},record:{relative:0},focus:"end"}))break;o.selection.recordId&&Z.isRowEmpty(t,o.selection.recordId)?(Yo(n,t,o,{definition:{absolute:o.view.columns.length-1},record:{relative:-1},focus:"end"}),Z.removeRecord(n,t.key,o.selection.recordId)):Yo(n,t,o,{definition:{absolute:o.view.columns.length-1},record:{relative:-1},focus:"end"});break}}};c();var dn=k(O());z();c();var Jr=k(O());c();var Xg=p.Padding.mediumLeft;c();var Rn=k(O());z();var Kg=Rn.default.forwardRef(function(t,o){let{recordKey:n,columnId:r,selected:i,width:a,children:s,header:l=!1,isFirstColumn:u=!1,isFirstRow:d=!1,isLastColumn:m=!1,isLastRow:f=!1,onPress:g,readOnly:h,...y}=t,C=Rn.default.useRef(null),x=Ni(C,o),[,w]=I(hD);Rn.default.useEffect(()=>{i&&C.current&&tp(C.current,{behavior:"smooth",scrollMode:"if-needed"})},[i]);let P=Rn.default.createElement(Ht.View,{ref:x,style:[w.cell,b.directionRow,b.alignCenter,u?w.farLeftCell:{},d?w.topCell:{},f?w.bottomCell:{},d&&u?w.topLeftCell:{},d&&m?w.topRightCell:{},f&&u?w.bottomLeftCell:{},f&&m?w.bottomRightCell:{},l?w.columnHeader:{},d?ao.Bold:{},{width:a}]},s,i?Rn.default.createElement(Rn.default.Fragment,null,Rn.default.createElement(v,{style:[w.cellSelectionBorderTop,w.cellSelectedBorder]}),Rn.default.createElement(v,{style:[w.cellSelectionBorderBottom,w.cellSelectedBorder]}),Rn.default.createElement(v,{style:[w.cellSelectionBorderRight,w.cellSelectedBorder]}),Rn.default.createElement(v,{style:[w.cellSelectionBorderLeft,w.cellSelectedBorder]})):null);return Rn.default.createElement(le,{style:[w.unsetDefaultTH,b.directionRow,b.justifyContentCenter],tag:l?"th":"td"},h?Rn.default.createElement(Rn.default.Fragment,null,P):Rn.default.createElement(At,{...y},P))}),un=1,hD=D.create({unsetDefaultTH:{textAlign:"left"},cell:e=>({position:"relative",paddingVertical:p.small,paddingHorizontal:p.medium,borderLeftWidth:1,borderTopWidth:1,borderColor:e.colors.border.mid}),cellSelectionBorderTop:{position:"absolute",top:-Math.floor(un/2),left:-Math.floor(un/2),right:-Math.floor(un/2),height:un},cellSelectionBorderBottom:{position:"absolute",bottom:-Math.floor(un/2),left:-Math.floor(un/2),right:-Math.floor(un/2),height:un},cellSelectionBorderRight:{position:"absolute",bottom:-Math.floor(un/2),top:-Math.floor(un/2),right:-Math.floor(un/2),width:un},cellSelectionBorderLeft:{position:"absolute",bottom:-Math.floor(un/2),top:-Math.floor(un/2),left:-Math.floor(un/2),width:un},cellSelectedBorder:e=>({backgroundColor:e.colors.primary.main}),topCell:{borderTopWidth:0},farLeftCell:{borderLeftWidth:0},topLeftCell:{},bottomLeftCell:{},topRightCell:{},bottomRightCell:{},bottomCell:{borderBottomWidth:1},columnHeader:e=>({backgroundColor:"transparent"})});var F7=Jr.memo(function(t){let{editor:o,nodeKey:n,readOnly:r,definition:i,view:a}=t,s=Jr.useContext(Ra),[,l]=I(bD);return Jr.createElement(le,{tag:"thead"},Jr.createElement(le,{style:[b.directionRow,l.background],tag:"tr"},a.columns.map((u,d)=>{let m=i[u],f=s.get(u);return cr(f),Jr.createElement(vD,{key:u,columnId:u,editor:o,nodeKey:n,columnDef:m,view:a,readOnly:r,width:f.animated,isFirstColumn:d===0,isLastColumn:d===a.columns.length-1,isFirstRow:!0,header:!0})})))}),q7=B.createInteractiveHandle("table-column"),yD=B.createInteractiveComponent(le);function vD(e){let{columnDef:t,readOnly:o,editor:n,nodeKey:r,view:i,...a}=e;return Jr.createElement(yD,{handle:q7},Jr.createElement(Kg,{focusable:!1,readOnly:o,...a},Jr.createElement(w7,{editor:n,nodeKey:r,definition:t,readOnly:o,style:[b.flex1,a.isFirstColumn&&!o?Xg:null]}),o?null:Jr.createElement(jg,{editor:n,nodeKey:r,view:i,definition:t,descendantOf:q7,icon:S.GrabberVertical,rounded:!0})))}var bD=D.create({background:e=>({backgroundColor:e.colors.background.mid,borderBottomColor:e.colors.border.mid,borderBottomWidth:2})});c();var Pt=k(O());z();var G7=B.createInteractiveHandle("table-row"),CD=B.createInteractiveComponent(le),K7=Pt.memo(Pt.forwardRef(function(t,o){let{nodeKey:n,editor:r,readOnly:i,record:a,definition:s,view:l,isFirstRow:u,isLastRow:d,beforeOrderIndex:m,afterOrderIndex:f,selectedColumnId:g,definitionColorKinds:h,openRecord:y,style:C}=t,x=Pt.useContext(Ra),w={id:a.key,type:"table-record",blockKey:n,previewLabel:"Move record",previewIcon:"TableRecord"},[{dragging:P},R]=Xi({type:w.type,item:w,canDrag:()=>!i,collect:F=>({dragging:F.isDragging()})}),_=(F,Y)=>{r.change($=>{Z.moveRecord($,n,F.id,Y)})},E=Pt.useRef(null),M=se(E),W=()=>{M.open(oe({search:"Select action\u2026",groups:[{key:"table.row",commands:[{key:"table.row.open",title:"Open row",icon:S.Maximize,trigger:()=>{y(a.key)}},{key:"table.row.insertAbove",title:"Insert above",icon:S.TableInsertRowAbove,trigger:()=>{r.change(F=>{Z.insertEmptyRecord(F,n,{after:a.value.orderIndex,before:m})})}},{key:"table.row.insertBelow",title:"Insert below",icon:S.TableInsertRow,trigger:()=>{r.change(F=>{Z.insertEmptyRecord(F,n,d?{before:a.value.orderIndex}:{after:a.value.orderIndex,before:f})})}},{key:"table.row.addColumn",icon:S.TableInsertColumn,title:"Add column",trigger:()=>{r.change(F=>{Z.insertColumn(F,n,Z.createColumnFromType("text"))})},descendant:()=>_a(F=>{r.change(Y=>{Z.insertColumn(Y,n,Z.createColumnFromType(F))})})},{key:"table.row.remove",title:"Delete row",icon:S.Trashcan,trigger:()=>{r.change(F=>{Z.removeRecord(F,n,a.key)})}}]}]}))},[,G]=I(j7),V=Pt.createElement(CD,{ref:o,handle:G7,style:[b.directionRow,P&&Ce.translucent,C],tag:"tr"},l.columns.map((F,Y)=>{let $=s[F],te=g===F,fe=h[F],tt=Pt.createElement(Bl,{definitionColorKind:fe,record:a,selected:te,definition:$,nodeKey:n,editor:r,readOnly:i}),Gt=x.get(F);return cr(Gt),Pt.createElement(Kg,{key:F,recordKey:a.key,columnId:F,width:Gt.animated,selected:te,isFirstColumn:Y===0,isLastColumn:Y===l.columns.length-1,isFirstRow:u,isLastRow:d,onPressIn:Po=>{Po.type!=="keydown"&&(Po.preventDefault(),r.change(Ln=>{Z.moveTableSelection(Ln,n,{recordId:a.key,definitionId:F})}))},readOnly:i},Y>0||i?tt:Pt.createElement(Pt.Fragment,null,Pt.createElement(B.View.Child,{descendantOf:G7,ref:R,style:[b.justifyContentCenter,G.rowGrabber],inactiveStyle:M.opened?{}:Ce.hidden,activeStyle:Ce.visible},Pt.createElement(A,{ref:E,size:"xsmall",rounded:!0,kind:"grey",active:M.opened,title:`Click for options.
Drag to move.`,icon:S.GrabberVertical,onPress:W})),Pt.createElement(v,{style:[b.flex1,b.justifyContentCenter,Xg]},tt)))}));return i?V:Pt.createElement(v,null,V,Pt.createElement(H7,{currentItem:w,position:"before",onDrop:F=>_(F,{before:m,after:a.value.orderIndex})}),d?Pt.createElement(H7,{currentItem:w,position:"after",onDrop:F=>_(F,{before:a.value.orderIndex,after:f})}):null)}));function H7(e){let{currentItem:t,position:o,onDrop:n}=e,r=B.useInteractiveState(),[,i]=I(j7),{logAnalyticsEvent:a}=Pt.useContext(ne),[s,l]=wr({accept:"table-record",drop:(u,d)=>{d.didDrop()||(a({type:"edit_page_document_move_block",method:"dnd",blockType:"table-row",toParent:"table",fromParent:"table"}),n(u))},canDrop:u=>t.id!==u.id&&t.blockKey===u.blockKey,collect:u=>({highlighted:u.isOver()&&u.canDrop()})});return Pt.createElement(v,{ref:l,style:[i.insertionLineWrapper,o==="after"?i.insertionLineAfter:i.insertionLineBefore],...r.events},Pt.createElement(v,{style:[i.insertionLineBar,(r.hovered&&r.dragging||s.highlighted)&&i.insertionLineBarHovered]}))}var Ug=10,X7=3,j7=D.create({insertionLineWrapper:{position:"absolute",left:0,right:0,height:Ug},insertionLineBefore:{top:-(Ug/2)},insertionLineAfter:{bottom:-(Ug/2)},insertionLineBar:{position:"absolute",left:0,right:0,top:Ug/2-X7/2,height:X7,borderRadius:T.RADIUS_M},insertionLineBarHovered:e=>({backgroundColor:e.colors.primary.main}),rowGrabber:{position:"absolute",left:p.xsmall,bottom:"auto",zIndex:10}});var SD=20;function U7(e){let{view:t,editor:o,nodeKey:n}=e,[r,i]=dn.useState(),a=dn.useCallback(s=>{s!==null&&i(s)},[]);return dn.createElement(B7,{editor:o,nodeKey:n,view:t,ref:a},dn.createElement(wD,{...e,parentRef:r}))}function wD(e){let{selection:t,records:o,definition:n,view:r,readOnly:i,editor:a,nodeKey:s,parentRef:l,openRecord:u}=e,{mode:d}=dn.useContext(Lo),m=a.value.document.getNode(s),f=dn.useContext(Ra),g=a1({enabled:d==="app"&&o.length>SD,parentRef:l?{current:l}:void 0,getEstimatedItemHeight:x=>vv(m,String(x.key),f),list:o.map(x=>({key:x.key}))}),h=O7(n,r.columns),C=!(r.hideHeader||i&&Z.isHeaderEmpty({definition:n,view:r,records:{}}))||!!t.recordId;return dn.createElement(le,{tag:"table"},C?dn.createElement(F7,{definition:n,view:r,editor:a,nodeKey:s,readOnly:i}):null,dn.createElement(le,{tag:"tbody"},g.map(([x,w,P],R)=>{let _=o[R],E=R>0?o[R-1]:void 0,M=o[R+1];return w?dn.createElement(K7,{key:_.key,ref:x.nodeRef,selectedColumnId:t.recordId===_.key?t.definitionId:void 0,record:_,definition:n,view:r,readOnly:i,editor:a,nodeKey:s,isFirstRow:!C&&R===0,isLastRow:R===o.length-1,beforeOrderIndex:E==null?void 0:E.value.orderIndex,afterOrderIndex:M==null?void 0:M.value.orderIndex,definitionColorKinds:h,openRecord:u,...x.nodeProps}):dn.createElement(v,{key:_.key,style:{height:P},ref:x.nodeRef},dn.createElement(N,null,Z.getTableRowPlainText(m,_.value)))})))}var Y7={IconComponent:S.Table,title:"Table",recordName:"row",selectableView:!0,ViewComponent:U7,DefinitionSettingsComponent:W7,commands:xD,definitionCommands:kD,onKeyDown:V7};function kD(e){var i;let{view:t,definition:o,setView:n}=e,r=typeof((i=t.columnWidths)==null?void 0:i[o.id])>"u";return[{key:"grid",commands:[{key:"grid.autoSize",title:"Auto size",icon:S.AutoSize,type:2,enabled:r,trigger:()=>{if(r)n({...t,useNewSizing:!0,columnWidths:{...t.columnWidths,[o.id]:is}});else{let{[o.id]:a,...s}=t.columnWidths||{};n({...t,useNewSizing:!0,columnWidths:s})}}}]}]}function xD(e){let{view:t,setView:o}=e;return[{key:"grid",commands:[{key:"grid.toggleHeader",title:"Show header",type:2,enabled:!t.hideHeader,trigger:()=>{let[n]=o({...t,hideHeader:!t.hideHeader});return n}},{key:"grid.resetSizing",title:"Reset column sizing",trigger:()=>{let{columnWidths:n,...r}=t;o({...r,useNewSizing:!0})}},{key:"grid.columns",title:"Hide Columns",icon:S.EyeOff,descendant:()=>Z7(e)}]}]}function Z7(e){let{view:t,definition:o,setView:n}=e;return zl(o,r=>{let[,i]=n({...t,columns:r});return Z7(i)},{multiple:!0,search:"Select visible columns",selected:t.columns})}var hi={grid:Y7,cards:L7};function jg(e){let{nodeKey:t,editor:o,view:n,definition:r,descendantOf:i,icon:a,rightIcon:s,rounded:l}=e,u={id:r.id,type:"table-definition",blockKey:t,previewLabel:Oa(r)},[,d]=I(OD),m=Rr.useRef(null),f=se(m),g=B.useInteractiveState(),[,h]=gl({type:u.type,item:u,canDrag:()=>!0}),[y,C]=Rr.useState(null),x=W=>{o.change(G=>{Z.setColumnDefinition(G,t,r.id,W)})},w=()=>{let G=o.value.document.assertBlock(t).data.toFrozenObject(),V=G.definition[r.id];return[R(G.view,V),P(G.view,V)]},P=(W,G)=>({definition:G,view:W,setView:V=>(o.change(F=>{Z.setView(F,t,V)}),w()),setDefinition:V=>(x(V),w()),openModal:V=>{C({type:"command",modal:Rr.createElement(V,{definition:G,onClose:()=>C(null)})})}}),R=(W,G)=>{let V=Ir[G.type],F=hi[W.type],Y=P(W,G);return oe({search:"Select action\u2026",groups:[{key:"definition.type",commands:[{key:"definition.type.change",title:V.title,icon:V.IconComponent,descendant:()=>_a($=>{C({type:"change_type",columnType:$})},{selectedType:G.type})}]},...V.commands?V.commands(Y):[],...F.definitionCommands?F.definitionCommands(Y):[],{key:"definition.danger",commands:[{key:"definition.add",title:"Add column",icon:S.TableInsertColumn,trigger:()=>{o.change($=>{let te=[...W.columns].findIndex(fe=>G.id===fe);Z.insertColumn($,t,Z.createColumnFromType("text"),te+1)})},descendant:()=>_a($=>{let te=[...W.columns].findIndex(fe=>G.id===fe);o.change(fe=>{Z.insertColumn(fe,t,Z.createColumnFromType($),te+1)})})},{key:"definition.hide",title:"Hide column",icon:S.EyeOff,trigger:()=>{o.change($=>{Z.hideColumn($,t,G.id)})}},{key:"definition.delete",title:"Delete column",icon:S.Trashcan,trigger:()=>{C({type:"delete"})}}]}]})},_=()=>{f.open(R(n,r))},E=W=>{C(null),W&&o.change(G=>{Z.removeColumn(G,t,r.id)})},M=W=>{C(null),W&&(y==null?void 0:y.type)==="change_type"&&x(Z.changeColumnType(r,y.columnType))};return Rr.createElement(Rr.Fragment,null,(y==null?void 0:y.type)==="delete"?Rr.createElement(Su,{kind:"danger",title:"Delete column",confirmButtonText:"Delete",onComplete:E},"Do you really want to delete this column and all of its data?"):null,(y==null?void 0:y.type)==="change_type"?Rr.createElement(Su,{title:"Change column type",confirmButtonText:"Change",onComplete:M},"You are about to change this column type from ",r.type," to"," ",y.columnType,". We will try to convert any value automatically, but you may lose data if we cannot convert them."):null,(y==null?void 0:y.type)==="command"?y.modal:null,Rr.createElement(B.View.Child,{...g.events,descendantOf:i,ref:h,style:[b.justifyContentCenter,d.columnGrabber],inactiveStyle:f.opened||g.focused?{}:Ce.hidden,activeStyle:Ce.visible,focusStyle:Ce.translucent},Rr.createElement(A,{kind:"grey",size:"small",ref:m,title:`Click for options.
Drag to move.`,active:f.opened,icon:a,rightIcon:s,rounded:l,onPress:_})))}var OD=D.create({columnGrabber:{position:"absolute",right:p.xsmall,bottom:"auto"}});function Yg(e,t,o){let n=t.data.toFrozenObject(),r=hi[n.view.type],i=r.commands?r.commands($7(e,n,t.key,o)):[];return{...nt(e,t.key,[{key:"views",commands:Object.entries(hi).map(([a,s])=>({key:a,title:s.title,icon:s.IconComponent,type:1,selected:a===n.view.type,trigger:()=>{e.change(u=>{Z.setView(u,t.key,{type:a})});let l=e.value.document.assertBlock(t.key);return Yg(e,l,o)}}))},{key:"table",commands:[{key:"addColumn",icon:S.ArrowRight,title:"Add column",trigger:()=>{e.change(a=>{Z.insertColumn(a,t.key,Z.createColumnFromType("text"))})},descendant:()=>_a(a=>{e.change(s=>{Z.insertColumn(s,t.key,Z.createColumnFromType(a))})})},{key:"insertRow",icon:S.ArrowDown,title:`Insert ${r.recordName}`,trigger:()=>{e.change(a=>{Z.insertEmptyRecord(a,t.key)})}}]},...i,...o]),search:"Select action\u2026"}}function $7(e,t,o,n){return{view:t.view,definition:t.definition,setView:r=>{e.change(a=>{Z.setView(a,o,r)});let i=e.value.document.assertBlock(o);return[Yg(e,i,n),$7(e,i.data.toFrozenObject(),o,n)]}}}c();var J7=k(PE()),Zt=k(O());z();c();var dc=k(O());z();var Q7=B.createInteractiveHandle("record-column-value-line");function mb(e){let{nodeKey:t,editor:o,readOnly:n,record:r,view:i,definition:a,style:s}=e,[,l]=I(_D);return dc.createElement(B.View,{handle:Q7,style:s},dc.createElement(v,{style:[b.directionRow,b.alignCenter,p.Margin.xsmallBottom]},dc.createElement(v,{style:[b.flex1]},dc.createElement(Xc,null,Oa(a))),n?null:dc.createElement(jg,{nodeKey:t,editor:o,view:i,definition:a,descendantOf:Q7,icon:Ir[a.type].IconComponent,rightIcon:S.ChevronDown})),dc.createElement(Bl,{nodeKey:t,editor:o,readOnly:n,record:r,definition:a,selected:!1,displayMode:"block",style:[l.recordValueBox,p.Padding.smallVertical,p.Padding.mediumHorizontal]}))}var _D=D.create({recordValueBox:e=>({borderWidth:1,borderColor:e.colors.border.mid,backgroundColor:e.colors.background.main,borderRadius:e.radiuses.large,minHeight:T.BUTTON_L})});function e6(e){let{nodeKey:t,editor:o,readOnly:n,record:r,records:i,view:a,definition:s,openRecord:l,onClose:u}=e,[,d]=I(L),[,m]=I(ID),[f,g]=Zt.useState(!1),h=hi[a.type],y=a.columns,C=Zt.useMemo(()=>(0,J7.default)(Object.keys(s),y),[y,a,s]),x=Zt.useMemo(()=>i.findIndex(R=>R.key===r.key),[i,r.key]),w=i[x-1],P=i[x+1];return Zt.createElement(kt,{title:`Edit ${h.recordName}`,size:"large",footer:Zt.createElement(v,{style:[b.directionRow,b.alignCenter,b.justifySpaceBetween]},n?null:Zt.createElement(A,{icon:S.Trashcan,kind:"secondary",size:"medium",onPress:()=>{o.change(R=>{Z.removeRecord(R,t,r.key)}),u()}},`Delete ${h.recordName}`),Zt.createElement(v,{style:[b.directionRow,b.alignCenter]},Zt.createElement(A,{icon:S.ChevronLeft,kind:"secondary",size:"medium",title:`Previous ${h.recordName}`,disabled:!w,onPress:()=>{w&&l(w.key)}}),Zt.createElement(v,{style:[p.Padding.mediumHorizontal]},Zt.createElement(N,{style:[d.Body,d.textMuted]},`${x+1} of ${i.length}`)),Zt.createElement(A,{icon:S.ChevronRight,kind:"secondary",size:"medium",title:`Next ${h.recordName}`,disabled:!P,onPress:()=>{P&&l(P.key)}}))),onClose:u},Zt.createElement(v,null,y.map((R,_)=>Zt.createElement(mb,{key:R,nodeKey:t,editor:o,readOnly:n,view:a,record:r,definition:s[R],style:[_<y.length-1?p.Margin.mediumBottom:null]}))),C.length>0||!n?Zt.createElement(v,{style:[b.directionRow,b.justifySpaceBetween,p.Margin.mediumTop]},C.length>0?Zt.createElement(A,{icon:f?S.ChevronUp:S.ChevronDown,kind:"grey",size:"medium",onPress:()=>{g(R=>!R)}},f?"Hide":"Show hidden columns"):null,n?null:Zt.createElement(cp,{icon:S.Plus,kind:"grey",size:"medium",palette:()=>_a(R=>{o.change(_=>{Z.insertColumn(_,t,Z.createColumnFromType(R))})})},"Add column")):null,f?Zt.createElement(v,{style:[m.hiddenColumnsGroup,p.Margin.mediumTop,p.Padding.mediumTop]},C.map((R,_)=>Zt.createElement(mb,{key:R,nodeKey:t,editor:o,readOnly:n,view:a,record:r,definition:s[R],style:[_<C.length-1?p.Margin.mediumBottom:null]}))):null)}var ID=D.create({hiddenColumnsGroup:e=>({borderTopWidth:1,borderTopColor:e.colors.border.mid,borderTopStyle:"dashed"})});c();function t6(e){return Z.defaultRecordSortedKeys(e).map(o=>({key:o,value:e.records[o]}))}function o6(e){let{node:t,editor:o,isFocused:n}=e,r=t.data.toFrozenObject(),i=$t.useMemo(()=>t6(r),[r]),[a,s]=$t.useState(null),l=$t.useMemo(()=>a===null?null:i.find(y=>y.key===a),[i,a]),u=$t.useCallback(y=>{s(y)},[s]),d=$t.useMemo(()=>o.readOnly?{}:Z.getTableSelection(o.value,t),[i,t,o.readOnly,o.value.selection]),m={view:r.view,definition:r.definition,records:i,selection:d},f=$t.useContext(Wg);f.set(t.key,m),$t.useEffect(()=>()=>{f.delete(t.key)},[f,t.key]);let g=hi[m.view.type],h=Kr(o,t.key);return $t.createElement($t.Fragment,null,$t.createElement(ve,{...e,palette:Yg(o,t,h?[h]:[])},$t.createElement(Vt,{...e,selectable:g.selectableView,isFocused:n&&!d.definitionId&&!d.recordId,onSelect:()=>{o.change(y=>{Z.moveTableSelection(y,t,{}),y.focus()})}},$t.createElement(i1,{readOnly:!!l},$t.createElement(g.ViewComponent,{editor:e.editor,nodeKey:t.key,readOnly:o.readOnly,openRecord:u,...m})))),l?$t.createElement(e6,{editor:e.editor,nodeKey:t.key,readOnly:o.readOnly,view:m.view,records:m.records,definition:m.definition,record:l,openRecord:u,onClose:()=>{s(null)}}):null)}c();var mc=k(Vr()),$g=k(O());var n6=(0,mc.isKeyHotkey)("enter"),RD=(0,mc.isKeyHotkey)("shift+enter"),r6=(0,mc.isKeyHotkey)("mod+enter"),pb=(0,mc.isKeyHotkey)("tab"),Zg=(0,mc.isKeyHotkey)("shift+tab"),i6=(0,mc.isKeyHotkey)("backspace");function a6(){let e=$g.useContext(Wg);return[$g.useMemo(()=>({onKeyDown:(...o)=>PD(e,...o)}),[e])]}function PD(e,t,o,n){if(t.key!=="ArrowUp"&&t.key!=="ArrowDown"&&t.key!=="ArrowRight"&&t.key!=="ArrowLeft"&&!(n6(t)&&!RD(t))&&!r6(t)&&!i6(t)&&!pb(t)&&!Zg(t))return;let{selection:r}=o.value;if(!Bt(r)||!r.isCollapsed&&!pb(t)&&!Zg(t))return;let i=Z.getCurrentTable(o.value);if(!i)return;let{table:a,fragment:s}=i;if(i.ancestorBlocks&&i.ancestorBlocks.size>0)return;if(r6(t))return t.preventDefault(),St(o,a),o;let l=e.get(a.key);if(!l||!l.selection.recordId&&!l.selection.definitionId)return;let u=a.data.toFrozenObject(),d=l.selection.recordId?u.records[l.selection.recordId]:null,m=l.selection.definitionId?u.definition[l.selection.definitionId]:null,f=hi[l.view.type],g=m?Ir[m.type]:null,h=C=>{if(!g||!g.onKeyDown||!d||!m)return!1;let x=!1;return g.onKeyDown(C,d.values[m.id],w=>{x=!0,Z.setRecordValue(o,a.key,l.selection.recordId,l.selection.definitionId,w)}),x},y=C=>{f.onKeyDown&&f.onKeyDown(C,a,l,o)};if(n6(t)){if(s&&!r.hasAnchorAtEndOf(s))return;t.preventDefault(),h("enter")||y("enter")}else if(i6(t)){if(s&&!r.hasAnchorAtStartOf(s))return;t.preventDefault(),h("backspace")||y("backspace")}else if(pb(t)||Zg(t))t.preventDefault(),y(Zg(t)?"shift+tab":"tab");else if(t.key==="ArrowDown"){if(s&&!TD(s,r))return;t.preventDefault(),y("move-down")}else if(t.key==="ArrowUp"){if(s&&!MD(s,r))return;t.preventDefault(),y("move-up")}else if(t.key==="ArrowRight"){if(s&&!r.hasAnchorAtEndOf(s))return;t.preventDefault(),y("move-right")}else if(t.key==="ArrowLeft"){if(s&&!r.hasAnchorAtStartOf(s))return;t.preventDefault(),y("move-left")}return o}function MD(e,t){let o=e.nodes.first();return o?t.hasAnchorIn(o):!1}function TD(e,t){let o=e.nodes.last();return o?t.hasAnchorIn(o):!1}c();var Qt=k(O());z();c();var s6=k(O());z();function fb(e){let{children:t}=e,[,o]=I(ED);return s6.default.createElement(v,{style:o.blockTabsBody},t)}var ED=D.create({blockTabsBody:e=>({border:`1px solid ${e.colors.border.main}`,backgroundColor:e.colors.background.main,paddingHorizontal:Fy,borderRadius:e.radiuses.medium,borderTopLeftRadius:0,"@media print":{padding:0,border:0}})});c();var Qg=k(O());z();function gb(e){let{children:t}=e,[,o]=I(LD);return Qg.default.createElement(v,{style:o.blockTabsHeader},Qg.default.createElement(Gc,{style:o.blockTabsHeaderContainer},Qg.default.createElement(v,{style:o.blockTabsHeaderContent},t)))}var LD=D.create({blockTabsHeader:{position:"relative",display:"flex",flexDirection:"row",width:"100%",alignItems:"center",whiteSpace:"nowrap",marginBottom:-1,"@media print":{display:"none"},zIndex:1},blockTabsHeaderContainer:{maxWidth:"100%",display:"flex"},blockTabsHeaderContent:e=>({maxWidth:"100%",display:"flex",flexDirection:"row",borderTopRightRadius:e.radiuses.medium,borderTopLeftRadius:e.radiuses.medium,pointerEvents:"auto"})});c();var go=k(O()),_6=k(w6());z();c();var Wl=k(O());z();var O6=Wl.default.forwardRef(function(t,o){let{active:n,editor:r,tab:i,isLast:a,onDropBefore:s,onDropAfter:l,onInsertLeft:u,onInsertRight:d,onDelete:m,children:f,...g}=t;return Wl.default.createElement(v,{style:[x6.tabItemControls,n&&x6.tabItemControlsActive],...g,ref:o},Wl.default.createElement(k6,{position:"before",onDrop:s,onInsert:u}),f,a?Wl.default.createElement(k6,{position:"after",onDrop:l,onInsert:d}):null)});function k6(e){let{position:t,onDrop:o,onInsert:n}=e,[r,i]=wr({accept:["tab"],drop:(a,s)=>{s.didDrop()||a.type==="tab"&&o(a.id)},canDrop:a=>a.type==="tab",collect:a=>({hovered:a.isOver({shallow:!0})&&a.canDrop()})});return Wl.default.createElement(bu,{ref:i,dropHovered:r.hovered,position:t==="before"?"left":"right",button:{kind:"default",size:"xsmall",icon:S.Plus,onPress:n}})}var x6=X.create({tabItemControls:{position:"relative",flexShrink:1},tabItemControlsActive:{flexShrink:0},tabItemInsertionLine:{flex:1,opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},tabItemInsertionLineHovered:{opacity:1}});function Cb(e){let{editor:t,tab:o,index:n,active:r,isFirst:i,isLast:a,onSelect:s}=e,{readOnly:l}=t,u=o.data?o.data.get("title"):"Untitled",[{isDragging:d},m]=Xi({type:"tab",item:{type:"tab",id:o.key,previewLabel:"Move tab"},canDrag:()=>!l,collect:C=>({isDragging:C.isDragging()})}),f=C=>{t.change(x=>{let w=x.value.document.getParent(o.key);if(!w)return;let P=ii.createTabsItem("Untitled");x.insertNodeByKey(w.key,n+C,P);let R=x.value.document.getDescendant(P.key);R&&x.collapseToStartOf(R).focus(),s(P)})},g=C=>{t.change(x=>{x.setNodeByKey(o.key,{data:o.data.merge({title:C})})})},h=(C,x)=>{t.change(w=>{x==="before"?w.moveBeforeNodeByKey(C,o.key):w.moveAfterNodeByKey(C,o.key);let P=w.value.document.getDescendant(C);P&&w.collapseToStartOf(P).focus()})},y=()=>{t.change(C=>{C.removeNodeByKey(o.key)})};return l?go.default.createElement(At,{onPress:()=>s(o)},go.default.createElement(bb,{title:u,active:r,isFirst:i,isLast:a,isEditable:!1,withOptions:!1,editor:t,tab:o})):go.default.createElement(At,{onPress:()=>s(o)},go.default.createElement(O6,{onInsertLeft:()=>f(0),onInsertRight:()=>f(1),onDropBefore:C=>h(C,"before"),onDropAfter:C=>h(C,"after"),onDelete:y,...e},go.default.createElement(bb,{title:u,active:r,isFirst:i,isLast:a,isEditable:r,onTitleChange:g,editor:t,tab:o,withOptions:!0,isDragging:d,dragHandleRef:m})))}var bb=go.default.forwardRef((e,t)=>{let{title:o,titlePlaceholder:n="Untitled",active:r=!1,isFirst:i=!1,isLast:a=!1,isDragging:s=!1,isEditable:l,withOptions:u,onTitleChange:d,editor:m,tab:f,dragHandleRef:g,...h}=e,[y,C]=go.default.useState(o),[x,w]=I(HD),P=d?()=>{d(y||"")}:void 0;go.default.useEffect(()=>{C(o)},[o]);let R=go.default.useRef(null),_=Ni(R,g),E=se(R),M=()=>{E.open(oe({position:{width:"small"},groups:[{key:"tab",commands:[{key:"delete",title:"Delete",icon:S.Trashcan,trigger:()=>{m.change(W=>{ii.removeTab(W,f.key)})}}]}]}))};return go.default.createElement(B.View,{ref:t,style:[w.blockTabsBodyItem,p.Padding.xsmallVertical,r&&w.blockTabsBodyItemActive,i&&w.blockTabsBodyItemFirst,a&&w.blockTabsBodyItemLast],...h},go.default.createElement(v,{style:w.flexPadding}),go.default.createElement(v,{style:[w.blockTabsBodyItemTitleContainer,s&&Ce.translucent,p.Padding.xsmallVertical]},l?go.default.createElement(go.default.Fragment,null,go.default.createElement(_6.default,{value:y,inputStyle:{...qe.Label,color:x.colors.text.main,backgroundColor:"transparent",border:"none",...qm.Bold,padding:0,margin:0,lineHeight:"22px"},title:y,placeholder:n,onChange:W=>C(W.target.value),onBlur:P})):go.default.createElement(N,{style:[ao.Label,w.blockTabsBodyItemReadonlyTitle,r&&w.blockTabsBodyItemTitleReadonlyActive]},y||n)),u?go.default.createElement(B.View.Child,{style:[w.tabItemOptions],inactiveStyle:E.opened||l?Ce.visible:Ce.hidden,activeStyle:Ce.visible},go.default.createElement(A,{ref:_,kind:"grey",size:"small",rounded:!0,active:E.opened,onPress:M,icon:S.GrabberVertical,title:`Click for options.
Drag to move.`})):null,go.default.createElement(v,{style:w.flexPadding}))});bb.displayName="TabItem";var HD=D.create({blockTabsBodyItem:e=>({flexGrow:0,flexShrink:1,flexBasis:"auto",textOverflow:"ellipsis",maxWidth:"100%",minWidth:0,borderWidth:1,borderColor:e.colors.border.main,borderLeftColor:"transparent",backgroundColor:e.colors.background.muted,flexDirection:"row",cursor:"pointer"}),blockTabsBodyItemFirst:e=>({borderLeftColor:e.colors.border.main,borderTopLeftRadius:e.radiuses.medium}),blockTabsBodyItemLast:e=>({borderTopRightRadius:e.radiuses.medium}),blockTabsBodyItemActive:e=>({flexGrow:0,flexShrink:0,flexBasis:"auto",cursor:"auto",backgroundColor:e.colors.background.main,borderBottomColor:e.colors.background.main}),flexPadding:{minWidth:8,width:16,flexGrow:1,flexShrink:1,flexBasis:"16px"},blockTabsBodyItemTitleContainer:{flexGrow:0,flexShrink:1,flexBasis:"auto",maxWidth:"100%",minWidth:0,display:"flex",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flexDirection:"row"},blockTabsBodyItemReadonlyTitle:e=>({color:e.colors.text.muted,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),blockTabsBodyItemTitleReadonlyActive:e=>({color:e.colors.text.main}),tabItemOptions:{marginLeft:p.medium,display:"flex",alignItems:"center",justifyContent:"center"}});c();var R6=k(O());z();function Sb(e){let{active:t,children:o,...n}=e;return R6.default.createElement(v,{style:[I6.blockTabsItem,t&&I6.blockTabsItemActive],...n},o)}var I6=X.create({blockTabsItem:{display:"none",pageBreakInside:"avoid"},blockTabsItemActive:{display:"flex"}});c();var Od=k(O());var XD=5,P6={activeKeys:{},activeTitles:[]},KD=bt({key:"tabsAtom",default:P6,effects:[si.recoilEffect("@recoil/tabsAtom",P6)]});function M6(e){let{sections:t,selected:o}=Od.useContext(Gr),n=Od.useMemo(()=>{let u=new Map;return e.blockNodes.forEach(d=>{let m=Dc();[...t.entries()].filter(([f])=>d.getNode(f)).forEach(([f,g])=>{m.set(f,g)}),u.set(d.key,m)}),u},[t,e]),[r,i]=qo(KD),[a,s]=Li(!1,[o]),l=Ga();return Od.useMemo(()=>{let{value:u,readOnly:d}=l;return[(d?null:UD(u,e))||jD(r,e,a,n,o)||(d?YD(r,e):null)||e.blockNodes.first(),f=>{let g=f.data.get("title");s(!0),i(h=>({activeKeys:{...h.activeKeys,[e.key]:f.key},activeTitles:g?h.activeTitles.filter(y=>y!==g).concat([g]).slice(-XD):h.activeTitles}))}]},[l,r,i,a,n,o])}function jD(e,t,o,n,r){let i=e.activeKeys[t.key];return o&&i?t.blockNodes.find(a=>a.key===i):t.blockNodes.find(a=>{var s;return[...((s=n.get(a.key))==null?void 0:s.values())||[]].includes(r||"")})}function UD(e,t){if(e.selection.isFocused)return t.blockNodes.find(o=>he.isTextRange(e.selection)&&(e.selection.hasAnchorIn(o)||e.selection.hasFocusIn(o)))}function YD(e,t){return t.blockNodes.map(o=>{let n=o.data.get("title");return{node:o,score:e.activeTitles.indexOf(n)}}).filter(({score:o})=>o>=0).sortBy(({score:o})=>-o).map(({node:o})=>o).first()||void 0}function T6(e){let{node:t,children:o,editor:n}=e,[r,i]=M6(t),a=t.getChildIndex(r.key),s=Ye(),l=Qt.default.useRef(null),u=Qt.default.useRef(null),d=Qt.default.useCallback(g=>{let h=l.current;h&&h.measureInWindow((y,C)=>{u.current=C}),n.readOnly||n.change(y=>{y.blur()}),i(g)},[n,i]);Qt.default.useEffect(()=>{let{current:g}=u;g&&(u.current=null,window.requestAnimationFrame(()=>{let h=l.current;h&&h.measureInWindow((y,C)=>{window.scrollBy(0,C-g)})}))},[r]);let m=t.blockNodes.map((g,h)=>Qt.default.createElement(Cb,{key:g.key,editor:n,tab:g,index:h,active:h===a,isFirst:h===0,isLast:h===t.nodes.size-1,onSelect:y=>d(y)})),f=Qt.default.Children.map(o,(g,h)=>Qt.default.createElement(Sb,{key:g&&typeof g=="object"&&"key"in g?g.key:h,active:h===a},g));return s?Qt.default.createElement(ve,{...e},Qt.default.createElement(v,{ref:l,style:wb.blockTabs},Qt.default.Children.map(o,(g,h)=>{let y=t.nodes.toArray()[h];return Qt.default.createElement(ve,{key:y.key,...e},Qt.default.createElement(v,{ref:l,style:wb.blockTabs},Qt.default.createElement(gb,null,Qt.default.createElement(Cb,{editor:n,key:y.key,tab:y,index:h,active:!0,isFirst:!0,isLast:!1,onSelect:()=>{}})),Qt.default.createElement(fb,null,Qt.default.createElement(Sb,{active:!0},g))))}))):Qt.default.createElement(ve,{...e},Qt.default.createElement(v,{ref:l,style:wb.blockTabs},Qt.default.createElement(gb,null,m),Qt.default.createElement(fb,null,f)))}var wb=X.create({blockTabs:{}});c();var Jg=k(O());z();function L6(e){let{attributes:t,children:o,editor:n,isFocused:r}=e,{readOnly:i}=n;return Jg.default.createElement(ve,{...e},Jg.default.createElement(v,{...t,style:[E6.blockTabsItem]},o,!i&&r&&ZD(n.value)?Jg.default.createElement(wl,{style:E6.blockExitHint}):null))}function ZD(e){let{startBlock:t}=e;if(!t)return!1;let o=e.document.getAncestors(t.key);return o?o.skipUntil(n=>n.object==="block"&&n.type===en).skip(1).every(n=>n.object==="block"&&gm.includes(n.type)):!1}var E6=X.create({blockTabsItem:{},blockExitHint:{position:"absolute",bottom:-p.medium,right:-p.medium}});c();var _d=k(Vr());var N6={onKeyDown:$D};function $D(e,t){let{value:o}=t;return vn(o.selection)?null:(0,_d.default)("backspace",e)&&o.isCollapsed?QD(e,t):(0,_d.default)("enter",e)?JD(e,t):(0,_d.default)("mod+enter",e)?e4(e,t):(0,_d.default)("mod+a",e)?t4(e,t):null}function QD(e,t){let{value:o}=t,n=ii.getCurrentTab(o);return!n||!gu(n)?null:(e.preventDefault(),ii.removeTab(t,n.key))}function JD(e,t){let{value:o}=t,n=ii.getCurrentTab(o);if(!n||n.nodes.size<=1||!gu(n.blockNodes.last()))return null;let r=o.document.getClosest(o.startKey,u=>"type"in u&&u.type===bn);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter is pressed twice");let i=o.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab when enter is pressed twice");let a=i.getChildIndex(r.key);if(a<0)throw new Error("Could not find child of parent while exiting tab when enter is pressed twice");e.preventDefault();let s=n.blockNodes.last();s&&t.removeNodeByKey(s.key);let l=Xt.create({type:me,nodes:[mu.create("")]});return t.insertNodeByKey(i.key,a+1,l).collapseToStartOf(l)}function e4(e,t){let{value:o}=t;if(!ii.getCurrentTab(o))return null;let r=o.document.getClosest(o.startKey,l=>"type"in l&&l.type===bn);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter are pressed twice");let i=o.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab on mod+enter");let a=i.getChildIndex(r.key);if(a<0)throw new Error("Could not find child of parent while exiting tab on mod+enter");e.preventDefault();let s=Xt.create({type:me,nodes:[mu.create()]});return t.insertNodeByKey(i.key,a+1,s).collapseToStartOf(s)}function t4(e,t){let{value:o}=t,n=ii.getCurrentTab(o);return n?(e.preventDefault(),t.collapseToStartOf(n).extendToEndOf(n)):null}var D6={renderNode:o4,renderVirtualNode:n4,renderMark:r4,estimateNodeSize:(e,t)=>{let o=jr(e,t);return{height:tc(e,t,{blockSpacing:o})}}};function o4(e){if(Xt.isBlock(e.node)&&!Qh.isInline(e.parent)){let t=e;switch(e.node.type){case me:return He.createElement(oP,{...t,node:e.node,parent:e.parent});case oo:case Et:case no:return He.createElement(GR,{...t,node:e.node,parent:e.parent});case ro:return He.createElement(HR,{...t,node:e.node,parent:e.parent});case De:case ze:case $e:return He.createElement(LP,{...t,node:e.node,parent:e.parent});case Ar:return He.createElement(o6,{...t,node:e.node,parent:e.parent});case lr:return He.createElement(eR,{...t,node:e.node,parent:e.parent});case Ri:return He.createElement(nR,{...t,node:e.node,parent:e.parent});case ur:return He.createElement(DP,{...t,node:e.node,parent:e.parent});case ri:return He.createElement(j0,{...t,node:e.node,parent:e.parent});case sa:return He.createElement(TP,{...t,node:e.node,parent:e.parent});case Dn:return He.createElement(sR,{...t,node:e.node,parent:e.parent});case Go:return He.createElement(gI,{...t,node:e.node,parent:e.parent});case Mo:return He.createElement(sP,{...t,node:e.node,parent:e.parent});case zt:return He.createElement(iP,{...t,node:e.node,parent:e.parent});case bn:return He.createElement(T6,{...t,node:e.node,parent:e.parent});case en:return He.createElement(L6,{...t,node:e.node,parent:e.parent});case Ts:return He.createElement(s7,{...t,node:e.node,parent:e.parent});case Lc:return He.createElement(vP,{...t,node:e.node,parent:e.parent});case la:return He.createElement(yP,{...t,node:e.node,parent:e.parent});case Pi:return He.createElement(yR,{...t,node:e.node,parent:e.parent});case aa:return He.createElement(MP,{...t,node:e.node,parent:e.parent});case Mi:return He.createElement(lR,{...t,node:e.node,parent:e.parent})}}if(Qh.isInline(e.node)&&!Tc.isDocument(e.parent))switch(e.node.type){case To:return He.createElement(zR,{...e,node:e.node,parent:e.parent});case Ba:return He.createElement(U0,{...e,node:e.node,parent:e.parent});case Ec:return He.createElement(c7,{...e,node:e.node,parent:e.parent});case dm:return He.createElement(QI,{...e,node:e.node,parent:e.parent})}return null}function n4(e){switch(e.node.type){case De:case ze:case $e:return He.createElement(NP,{...e,key:e.node.key})}}function r4(e){switch(e.mark.type){case Cn:return He.createElement($0,{...e});case Sn:return He.createElement(J0,{...e});case dr:return He.createElement(t7,{...e});case io:return He.createElement(n7,{...e});case pu:return He.createElement(i7,{...e});case mm:case fm:case pm:return He.createElement(CP,{...e})}return null}var H0=Ze.forwardRef(function(t,o){var Er,q,J,j,Q,ye;let{value:n,baseValue:r,participants:i=[],onChange:a,onActivity:s,placeholder:l,contentReferenceContext:u,uploadFiles:d,updateFile:m,logAnalyticsEvent:f,readOnly:g=!1,style:h,sectionIDs:y,selectedSection:C,isDiff:x,blockLayoutComponent:w,rightGutterComponent:P,integrationBlocksRemote:R,getIntegrationsBlocks:_,onBlockHover:E}=t,{mode:M}=Ze.useContext(Lo),W=Ze.useRef(null),G=Ni(W,o),V=Ze.useMemo(()=>({...Hy,...w?{blockLayoutComponent:w}:{},...P?{rightGutterComponent:P}:{},onBlockHover:E,getIntegrationsBlocks:_}),[u==null?void 0:u.space,u==null?void 0:u.revision,u==null?void 0:u.page,E,_]);u&&(V.contentReferenceContext=u),d&&(V.uploadFiles=d),m&&(V.updateFile=m),f&&(V.logAnalyticsEvent=f),V.integrationBlocksRemote=R;let[,F]=I(L),Y=GI(V),[$]=a6(),te=dR(_),fe=qR(V),tt=o1(n.document,lr),Gt=Ze.useMemo(()=>[D6,$,HI,rR,cP,N6,nP,XR,fe,...ZR,tP,hR,LR,te,mR,vR,JI,tt,hP,Y,UI,II,XI],[Y,fe,tt]),Po=Ye(),Ln=Ze.useRef(null),xi=de=>{let Pe=de.value,Ee=n.document!==Pe.document;s&&Ee&&(Ln.current?clearTimeout(Ln.current):s({typing:!0}),Ln.current=setTimeout(()=>{Ln.current=null,s({typing:!1})},2e3)),a(de)},Oi=mr(n.document),at=Ze.useMemo(()=>{let de=i.map(Pe=>{if(!Pe.selection||!Pe.selection.anchorPath||!Pe.selection.focusPath)return;let Ee=n.document.getNodeAtPath(Pe.selection.anchorPath),pt=n.document.getNodeAtPath(Pe.selection.focusPath);if(!(!Ee||!pt))return lP(Pe,Ee.key,pt.key)}).filter(ge).flat();return OS.create(de)},[i,n.document]);Ze.useEffect(()=>{var de,Pe;if((de=W.current)!=null&&de.value.isFocused)return yp((Pe=W.current)!=null&&Pe.value.selection.isCollapsed?"editor-selection-collapsed":"editor-selection-expanded")},[(Er=W.current)==null?void 0:Er.value.isFocused,(q=W.current)==null?void 0:q.value.selection.isCollapsed]);let Wo=Ze.useRef(null),eo=(j=(J=W.current)==null?void 0:J.value)!=null&&j.selection?vn((ye=(Q=W.current)==null?void 0:Q.value)==null?void 0:ye.selection):!1;Ze.useEffect(()=>{let de=eo?"block":"text";Wo.current&&de!==Wo.current&&(f==null||f({type:"edit_switch_selection_mode",selectionMode:de})),Wo.current=eo?"block":"text"},[eo]);let[Tt,_s]=Ze.useState(null),Is=Ze.useMemo(()=>({sections:y||Dc(),active:Tt,selected:C,setActive:_s}),[y,Tt]),Nn=r===null?null:r===void 0?void 0:r.document;return Ze.createElement(PI,{original:Nn,modified:n.document},Ze.createElement(Gr.Provider,{value:Is},Ze.createElement(ne.Provider,{value:V},Ze.createElement(wa.View,{style:[Vl.editor,h],isPDF:Po},g?null:Ze.createElement(At,{onPress:()=>{var de;(de=W.current)==null||de.change(Pe=>ny(Pe,"DOCUMENT_START"))}},Ze.createElement(v,{style:[Vl.editorFocusArea,Vl.editorFocusAreaTop]})),Oi&&l&&!n.isFocused&&!g?Ze.createElement(V.blockLayoutComponent,{renderMode:"centered"},Ze.createElement(v,{style:[Vl.placeholder]},Ze.createElement(N,{style:[F.Body,F.textMuted]},l))):null,Ze.createElement(s1,{ref:G,testID:"page.contentEditor",value:n,onChange:xi,readOnly:g,selections:at,plugins:Gt,virtualize:M==="app",enableBlockContainment:g&&!x},g?null:Ze.createElement(IR,{value:n})),g?null:Ze.createElement(At,{onPress:()=>{var de;(de=W.current)==null||de.change(Pe=>ny(Pe,"DOCUMENT_END"))}},Ze.createElement(v,{style:[Vl.editorFocusArea,Vl.editorFocusAreaBottom]}))))))}),Vl=X.create({editor:{position:"relative"},editorFocusArea:{position:"absolute",cursor:"text",right:0,left:0},editorFocusAreaTop:{height:p.large,top:-p.large},editorFocusAreaBottom:{height:p.large,bottom:-p.large},placeholder:{position:"absolute",top:p.small}});c();var Pn=k(O());c();c();var Ad=k(O());c();var Ji=k(O());c();var mn=k(O());c();var pc="right-scroll-bar-position",fc="width-before-scroll-bar",kb="with-scroll-bars-hidden",xb="--removed-body-scroll-bar-size";c();c();function A6(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}c();var B6=k(O());function z6(e,t){var o=(0,B6.useState)(function(){return{value:e,callback:t,facade:{get current(){return o.value},set current(n){var r=o.value;r!==n&&(o.value=n,o.callback(n,r))}}}})[0];return o.callback=t,o.facade}c();function Id(e,t){return z6(t||null,function(o){return e.forEach(function(n){return A6(n,o)})})}c();c();c();function W6(e){return e}function V6(e,t){t===void 0&&(t=W6);var o=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:e},useMedium:function(i){var a=t(i,n);return o.push(a),function(){o=o.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(n=!0;o.length;){var a=o;o=[],a.forEach(i)}o={push:function(s){return i(s)},filter:function(){return o}}},assignMedium:function(i){n=!0;var a=[];if(o.length){var s=o;o=[],s.forEach(i),a=o}var l=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),o={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),o}}}};return r}function Rd(e,t){return t===void 0&&(t=W6),V6(e,t)}function gc(e){e===void 0&&(e={});var t=V6(null);return t.options=Fo({async:!0,ssr:!1},e),t}c();var q6=k(O()),F6=function(e){var t=e.sideCar,o=Ps(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return q6.createElement(n,Fo({},o))};F6.isSideCarExport=!0;function hc(e,t){return e.useMedium(t),F6}var eh=gc();var Ob=function(){},th=mn.forwardRef(function(e,t){var o=mn.useRef(null),n=mn.useState({onScrollCapture:Ob,onWheelCapture:Ob,onTouchMoveCapture:Ob}),r=n[0],i=n[1],a=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,f=e.sideCar,g=e.noIsolation,h=e.inert,y=e.allowPinchZoom,C=e.as,x=C===void 0?"div":C,w=Ps(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),P=f,R=Id([o,t]),_=Fo(Fo({},w),r);return mn.createElement(mn.Fragment,null,d&&mn.createElement(P,{sideCar:eh,removeScrollBar:u,shards:m,noIsolation:g,inert:h,setCallbacks:i,allowPinchZoom:!!y,lockRef:o}),a?mn.cloneElement(mn.Children.only(s),Fo(Fo({},_),{ref:R})):mn.createElement(x,Fo({},_,{className:l,ref:R}),s))});th.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};th.classNames={fullWidth:fc,zeroRight:pc};c();c();VC();var yt=k(O());c();var Pd="data-focus-lock",oh="data-focus-lock-disabled",G6="data-no-focus-lock",H6="data-autofocus-inside",X6="data-no-autofocus";var U6=k(O());c();var ql=k(O());var Fl={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},K6=function(t){var o=t.children;return ql.createElement(ql.Fragment,null,ql.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:Fl}),o,o&&ql.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:Fl}))};K6.propTypes={};K6.defaultProps={children:null};c();var nh=Rd({},function(e){var t=e.target,o=e.currentTarget;return{target:t,currentTarget:o}}),rh=Rd(),j6=Rd(),ih=gc({async:!0});var a4=[],_b=yt.forwardRef(function(t,o){var n,r=yt.useState(),i=r[0],a=r[1],s=yt.useRef(),l=yt.useRef(!1),u=yt.useRef(null),d=t.children,m=t.disabled,f=t.noFocusGuards,g=t.persistentFocus,h=t.crossFrame,y=t.autoFocus,C=t.allowTextSelection,x=t.group,w=t.className,P=t.whiteList,R=t.hasPositiveIndices,_=t.shards,E=_===void 0?a4:_,M=t.as,W=M===void 0?"div":M,G=t.lockProps,V=G===void 0?{}:G,F=t.sideCar,Y=t.returnFocus,$=t.focusOptions,te=t.onActivation,fe=t.onDeactivation,tt=yt.useState({}),Gt=tt[0],Po=yt.useCallback(function(){u.current=u.current||document&&document.activeElement,s.current&&te&&te(s.current),l.current=!0},[te]),Ln=yt.useCallback(function(){l.current=!1,fe&&fe(s.current)},[fe]);(0,U6.useEffect)(function(){m||(u.current=null)},[]);var xi=yt.useCallback(function(Nn){var Er=u.current;if(Er&&Er.focus){var q=typeof Y=="function"?Y(Er):Y;if(q){var J=typeof q=="object"?q:void 0;u.current=null,Nn?Promise.resolve().then(function(){return Er.focus(J)}):Er.focus(J)}}},[Y]),Oi=yt.useCallback(function(Nn){l.current&&nh.useMedium(Nn)},[]),at=rh.useMedium,Wo=yt.useCallback(function(Nn){s.current!==Nn&&(s.current=Nn,a(Nn))},[]),eo=Ic((n={},n[oh]=m&&"disabled",n[Pd]=x,n),V),Tt=f!==!0,_s=Tt&&f!=="tail",Is=Id([o,Wo]);return yt.createElement(yt.Fragment,null,Tt&&[yt.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:m?-1:0,style:Fl}),R?yt.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:m?-1:1,style:Fl}):null],!m&&yt.createElement(F,{id:Gt,sideCar:ih,observed:i,disabled:m,persistentFocus:g,crossFrame:h,autoFocus:y,whiteList:P,shards:E,onActivation:Po,onDeactivation:Ln,returnFocus:xi,focusOptions:$}),yt.createElement(W,Ic({ref:Is},eo,{className:w,onBlur:at,onFocus:Oi}),d),_s&&yt.createElement("div",{"data-focus-guard":!0,tabIndex:m?-1:0,style:Fl}))});_b.propTypes={};_b.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var Y6=_b;c();function Ib(e){var t=window,o=t.setImmediate;typeof o<"u"?o(e):setTimeout(e,1)}var Z6=Y6;c();var ah=gc(),sh="data-focus-on-hidden";var $6=Ji.forwardRef(function(e,t){var o=Ji.useState(!1),n=o[0],r=o[1],i=e.children,a=e.autoFocus,s=e.shards,l=e.enabled,u=l===void 0?!0:l,d=e.scrollLock,m=d===void 0?!0:d,f=e.focusLock,g=f===void 0?!0:f,h=e.returnFocus,y=h===void 0?!0:h,C=e.inert,x=e.allowPinchZoom,w=e.sideCar,P=e.className,R=e.shouldIgnore,_=e.style,E=e.as,M=Ps(e,["children","autoFocus","shards","enabled","scrollLock","focusLock","returnFocus","inert","allowPinchZoom","sideCar","className","shouldIgnore","style","as"]),W=w,G=n.onActivation,V=n.onDeactivation,F=Ps(n,["onActivation","onDeactivation"]),Y=Fo(Fo({},F),{sideCar:w,shards:s,allowPinchZoom:x,as:E,inert:C,style:_,enabled:u&&m});return Ji.createElement(Ji.Fragment,null,Ji.createElement(Z6,{ref:t,sideCar:w,disabled:!(n&&u&&g),returnFocus:y,autoFocus:a,shards:s,onActivation:G,onDeactivation:V,className:P,whiteList:R,lockProps:Y,as:th},i),u&&Ji.createElement(W,Fo({},M,{sideCar:ah,setLockProps:r,shards:s})))});c();c();c();var yM=k(O());c();c();c();function Md(e,t){return Md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Md(e,t)}function Rb(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Md(e,t)}OE();var ch=k(O());function s4(e,t){function o(n){return n.displayName||n.name||"Component"}return function(r){var i=[],a;function s(){a=e(i.map(function(u){return u.props})),t(a)}var l=function(u){Rb(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a};var m=d.prototype;return m.componentDidMount=function(){i.push(this),s()},m.componentDidUpdate=function(){s()},m.componentWillUnmount=function(){var g=i.indexOf(this);i.splice(g,1),s()},m.render=function(){return ch.default.createElement(r,this.props)},d}(ch.PureComponent);return WC(l,"displayName","SideEffect("+o(r)+")"),l}}var Q6=s4;c();c();c();c();var pn=function(e){for(var t=Array(e.length),o=0;o<e.length;++o)t[o]=e[o];return t},Td=function(e){return Array.isArray(e)?e:[e]};c();var c4=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},J6=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},eM=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},l4=function(e,t){return!e||eM(e)||!c4(e)&&t(J6(e))},Pb=function(e,t){var o=e.get(t);if(o!==void 0)return o;var n=l4(t,Pb.bind(void 0,e));return e.set(t,n),n},u4=function(e,t){return e&&!eM(e)?m4(e)?t(J6(e)):!1:!0},Mb=function(e,t){var o=e.get(t);if(o!==void 0)return o;var n=u4(t,Mb.bind(void 0,e));return e.set(t,n),n},Tb=function(e){return e.dataset},d4=function(e){return e.tagName==="BUTTON"},tM=function(e){return e.tagName==="INPUT"},Eb=function(e){return tM(e)&&e.type==="radio"},oM=function(e){return!((tM(e)||d4(e))&&(e.type==="hidden"||e.disabled))},m4=function(e){var t=e.getAttribute(X6);return![!0,"true",""].includes(t)},Ed=function(e){var t;return!!(e&&(!((t=Tb(e))===null||t===void 0)&&t.focusGuard))},Gl=function(e){return!Ed(e)},nM=function(e){return!!e};c();var p4=function(e,t){var o=e.tabIndex-t.tabIndex,n=e.index-t.index;if(o){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return o||n},Lb=function(e,t,o){return pn(e).map(function(n,r){return{node:n,index:r,tabIndex:o&&n.tabIndex===-1?(n.dataset||{}).focusGuard?0:-1:n.tabIndex}}).filter(function(n){return!t||n.tabIndex>=0}).sort(p4)};c();c();var rM=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"];var Nb=rM.join(","),f4="".concat(Nb,", [data-focus-guard]"),iM=function(e,t){var o;return pn(((o=e.shadowRoot)===null||o===void 0?void 0:o.children)||e.children).reduce(function(n,r){return n.concat(r.matches(t?f4:Nb)?[r]:[],iM(r))},[])},lh=function(e,t){return e.reduce(function(o,n){return o.concat(iM(n,t),n.parentNode?pn(n.parentNode.querySelectorAll(Nb)).filter(function(r){return r===n}):[])},[])},aM=function(e){var t=e.querySelectorAll("[".concat(H6,"]"));return pn(t).map(function(o){return lh([o])}).reduce(function(o,n){return o.concat(n)},[])};var Db=function(e,t){return pn(e).filter(function(o){return Pb(t,o)}).filter(function(o){return oM(o)})},Ab=function(e,t){return t===void 0&&(t=new Map),pn(e).filter(function(o){return Mb(t,o)})},Ld=function(e,t,o){return Lb(Db(lh(e,o),t),!0,o)},Bb=function(e,t){return Lb(Db(lh(e),t),!1)},sM=function(e,t){return Db(aM(e),t)},bs=function(e,t){return e.shadowRoot?bs(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:pn(e.children).some(function(o){return bs(o,t)})};c();var g4=function(e){for(var t=new Set,o=e.length,n=0;n<o;n+=1)for(var r=n+1;r<o;r+=1){var i=e[n].compareDocumentPosition(e[r]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter(function(a,s){return!t.has(s)})},cM=function(e){return e.parentNode?cM(e.parentNode):e},Hl=function(e){var t=Td(e);return t.filter(Boolean).reduce(function(o,n){var r=n.getAttribute(Pd);return o.push.apply(o,r?g4(pn(cM(n).querySelectorAll("[".concat(Pd,'="').concat(r,'"]:not([').concat(oh,'="disabled"])')))):[n]),o},[])};c();var lM=function(e){return e.activeElement?e.activeElement.shadowRoot?lM(e.activeElement.shadowRoot):e.activeElement:void 0},Xl=function(){return document.activeElement?document.activeElement.shadowRoot?lM(document.activeElement.shadowRoot):document.activeElement:void 0};var h4=function(e){return e===document.activeElement},y4=function(e){return!!pn(e.querySelectorAll("iframe")).some(function(t){return h4(t)})},uh=function(e){var t=document&&Xl();return!t||t.dataset&&t.dataset.focusGuard?!1:Hl(e).some(function(o){return bs(o,t)||y4(o)})};c();var zb=function(){var e=document&&Xl();return e?pn(document.querySelectorAll("[".concat(G6,"]"))).some(function(t){return bs(t,e)}):!1};c();c();c();var v4=function(e,t){return t.filter(Eb).filter(function(o){return o.name===e.name}).filter(function(o){return o.checked})[0]||e},dh=function(e,t){return Eb(e)&&e.name?v4(e,t):e},uM=function(e){var t=new Set;return e.forEach(function(o){return t.add(dh(o,e))}),e.filter(function(o){return t.has(o)})};c();var Wb=function(e){return e[0]&&e.length>1?dh(e[0],e):e[0]},Vb=function(e,t){return e.length>1?e.indexOf(dh(e[t],e)):t};var qb="NEW_FOCUS",dM=function(e,t,o,n){var r=e.length,i=e[0],a=e[r-1],s=Ed(o);if(!(o&&e.indexOf(o)>=0)){var l=o!==void 0?t.indexOf(o):-1,u=n?t.indexOf(n):l,d=n?e.indexOf(n):-1,m=l-u,f=t.indexOf(i),g=t.indexOf(a),h=uM(t),y=o!==void 0?h.indexOf(o):-1,C=y-(n?h.indexOf(n):l),x=Vb(e,0),w=Vb(e,r-1);if(l===-1||d===-1)return qb;if(!m&&d>=0)return d;if(l<=f&&s&&Math.abs(m)>1)return w;if(l>=g&&s&&Math.abs(m)>1)return x;if(m&&Math.abs(C)>1)return d;if(l<=f)return w;if(l>g)return x;if(m)return Math.abs(m)>1?d:(r+d+m)%r}};c();var b4=function(e){return function(t){var o,n=(o=Tb(t))===null||o===void 0?void 0:o.autofocus;return t.autofocus||n!==void 0&&n!=="false"||e.indexOf(t)>=0}},mM=function(e,t,o){var n=e.map(function(i){var a=i.node;return a}),r=Ab(n.filter(b4(o)));return r&&r.length?Wb(r):Wb(Ab(t))};c();var Gb=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&Gb(e.parentNode.host||e.parentNode,t),t},Fb=function(e,t){for(var o=Gb(e),n=Gb(t),r=0;r<o.length;r+=1){var i=o[r];if(n.indexOf(i)>=0)return i}return!1},mh=function(e,t,o){var n=Td(e),r=Td(t),i=n[0],a=!1;return r.filter(Boolean).forEach(function(s){a=Fb(a||s,s)||a,o.filter(Boolean).forEach(function(l){var u=Fb(i,l);u&&(!a||bs(u,a)?a=u:a=Fb(u,a))})}),a},pM=function(e,t){return e.reduce(function(o,n){return o.concat(sM(n,t))},[])};var C4=function(e,t){var o=new Map;return t.forEach(function(n){return o.set(n.node,n)}),e.map(function(n){return o.get(n)}).filter(nM)},fM=function(e,t){var o=document&&Xl(),n=Hl(e).filter(Gl),r=mh(o||e,e,n),i=new Map,a=Bb(n,i),s=Ld(n,i).filter(function(f){var g=f.node;return Gl(g)});if(!(!s[0]&&(s=a,!s[0]))){var l=Bb([r],i).map(function(f){var g=f.node;return g}),u=C4(l,s),d=u.map(function(f){var g=f.node;return g}),m=dM(d,l,o,t);return m===qb?{node:mM(a,d,pM(n,i))}:m===void 0?m:u[m]}};c();var Hb=function(e){var t=Hl(e).filter(Gl),o=mh(e,e,t),n=new Map,r=Ld([o],n,!0),i=Ld(t,n).filter(function(a){var s=a.node;return Gl(s)}).map(function(a){var s=a.node;return s});return r.map(function(a){var s=a.node,l=a.index;return{node:s,index:l,lockItem:i.indexOf(s)>=0,guard:Ed(s)}})};c();var S4=function(e,t){"focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},Xb=0,Kb=!1,gM=function(e,t,o){o===void 0&&(o={});var n=fM(e,t);if(!Kb&&n){if(Xb>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Kb=!0,setTimeout(function(){Kb=!1},1);return}Xb++,S4(n.node,o.focusOptions),Xb--}};var jb=gM;var w4=function(){return document&&document.activeElement===document.body},k4=function(){return w4()||zb()},jl=null,Kl=null,Ul=null,Nd=!1,x4=function(){return!0},O4=function(t){return(jl.whiteList||x4)(t)},_4=function(t,o){Ul={observerNode:t,portaledElement:o}},I4=function(t){return Ul&&Ul.portaledElement===t};function hM(e,t,o,n){var r=null,i=e;do{var a=n[i];if(a.guard)a.node.dataset.focusAutoGuard&&(r=a);else if(a.lockItem){if(i!==e)return;r=null}else break}while((i+=o)!==t);r&&(r.node.tabIndex=0)}var R4=function(t){return t&&"current"in t?t.current:t},P4=function(t){return t?!!Nd:Nd==="meanwhile"},M4=function e(t,o,n){return o&&(o.host===t&&(!o.activeElement||n.contains(o.activeElement))||o.parentNode&&e(t,o.parentNode,n))},T4=function(t,o){return o.some(function(n){return M4(t,n,n)})},ph=function(){var t=!1;if(jl){var o=jl,n=o.observed,r=o.persistentFocus,i=o.autoFocus,a=o.shards,s=o.crossFrame,l=o.focusOptions,u=n||Ul&&Ul.portaledElement,d=document&&document.activeElement;if(u){var m=[u].concat(a.map(R4).filter(Boolean));if((!d||O4(d))&&(r||P4(s)||!k4()||!Kl&&i)&&(u&&!(uh(m)||d&&T4(d,m)||I4(d,u))&&(document&&!Kl&&d&&!i?(d.blur&&d.blur(),document.body.focus()):(t=jb(m,Kl,{focusOptions:l}),Ul={})),Nd=!1,Kl=document&&document.activeElement),document){var f=document&&document.activeElement,g=Hb(m),h=g.map(function(y){var C=y.node;return C}).indexOf(f);h>-1&&(g.filter(function(y){var C=y.guard,x=y.node;return C&&x.dataset.focusAutoGuard}).forEach(function(y){var C=y.node;return C.removeAttribute("tabIndex")}),hM(h,g.length,1,g),hM(h,-1,-1,g))}}}return t},vM=function(t){ph()&&t&&(t.stopPropagation(),t.preventDefault())},fh=function(){return Ib(ph)},bM=function(t){var o=t.target,n=t.currentTarget;n.contains(o)||_4(n,o)},E4=function(){return null},L4=function(t){var o=t.children;return yM.createElement("div",{onBlur:fh,onFocus:bM},o)};L4.propTypes={};var CM=function(){Nd="just",setTimeout(function(){Nd="meanwhile"},0)},N4=function(){document.addEventListener("focusin",vM),document.addEventListener("focusout",fh),window.addEventListener("blur",CM)},D4=function(){document.removeEventListener("focusin",vM),document.removeEventListener("focusout",fh),window.removeEventListener("blur",CM)};function A4(e){return e.filter(function(t){var o=t.disabled;return!o})}function B4(e){var t=e.slice(-1)[0];t&&!jl&&N4();var o=jl,n=o&&t&&t.id===o.id;jl=t,o&&!n&&(o.onDeactivation(),e.filter(function(r){var i=r.id;return i===o.id}).length||o.returnFocus(!t)),t?(Kl=null,(!n||o.observed!==t.observed)&&t.onActivation(),ph(!0),Ib(ph)):(D4(),Kl=null)}nh.assignSyncMedium(bM);rh.assignMedium(fh);j6.assignMedium(function(e){return e({moveFocusInside:jb,focusInside:uh})});var SM=Q6(A4,B4)(E4);var ALe=hc(ih,SM);c();c();var vt=k(O());c();c();var gh=k(O());c();c();c();var xM=k(O());c();c();var wM;var kM=function(){if(wM)return wM;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function z4(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kM();return t&&e.setAttribute("nonce",t),e}function W4(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function V4(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ub=function(){var e=0,t=null;return{add:function(o){e==0&&(t=z4())&&(W4(t,o),V4(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}};var Yb=function(){var e=Ub();return function(t,o){xM.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&o])}};var yc=function(){var e=Yb(),t=function(o){var n=o.styles,r=o.dynamic;return e(n,r),null};return t};c();var q4={left:0,top:0,right:0,gap:0},Zb=function(e){return parseInt(e||"",10)||0},F4=function(e){var t=window.getComputedStyle(document.body),o=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[Zb(o),Zb(n),Zb(r)]},$b=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return q4;var t=F4(e),o=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-o+t[2]-t[0])}};var G4=yc(),H4=function(e,t,o,n){var r=e.left,i=e.top,a=e.right,s=e.gap;return o===void 0&&(o="margin"),`
  .`.concat(kb,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),o==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),o==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(pc,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(fc,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(pc," .").concat(pc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(fc," .").concat(fc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(xb,": ").concat(s,`px;
  }
`)},Qb=function(e){var t=e.noRelative,o=e.noImportant,n=e.gapMode,r=n===void 0?"margin":n,i=gh.useMemo(function(){return $b(r)},[r]);return gh.createElement(G4,{styles:H4(i,!t,r,o?"":"!important")})};c();var Jb=!1;if(typeof window<"u")try{Dd=Object.defineProperty({},"passive",{get:function(){return Jb=!0,!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch(e){Jb=!1}var Dd,vc=Jb?{passive:!1}:!1;c();var X4=function(e){return e.tagName==="TEXTAREA"},OM=function(e,t){var o=window.getComputedStyle(e);return o[t]!=="hidden"&&!(o.overflowY===o.overflowX&&!X4(e)&&o[t]==="visible")},K4=function(e){return OM(e,"overflowY")},j4=function(e){return OM(e,"overflowX")},eC=function(e,t){var o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var n=_M(e,o);if(n){var r=IM(e,o),i=r[1],a=r[2];if(i>a)return!0}o=o.parentNode}while(o&&o!==document.body);return!1},U4=function(e){var t=e.scrollTop,o=e.scrollHeight,n=e.clientHeight;return[t,o,n]},Y4=function(e){var t=e.scrollLeft,o=e.scrollWidth,n=e.clientWidth;return[t,o,n]},_M=function(e,t){return e==="v"?K4(t):j4(t)},IM=function(e,t){return e==="v"?U4(t):Y4(t)},Z4=function(e,t){return e==="h"&&t==="rtl"?-1:1},RM=function(e,t,o,n,r){var i=Z4(e,window.getComputedStyle(t).direction),a=i*n,s=o.target,l=t.contains(s),u=!1,d=a>0,m=0,f=0;do{var g=IM(e,s),h=g[0],y=g[1],C=g[2],x=y-C-i*h;(h||x)&&_M(e,s)&&(m+=x,f+=h),s=s.parentNode}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(d&&(r&&m===0||!r&&a>m)||!d&&(r&&f===0||!r&&-a>f))&&(u=!0),u};var hh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},PM=function(e){return[e.deltaX,e.deltaY]},MM=function(e){return e&&"current"in e?e.current:e},$4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Q4=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},J4=0,Yl=[];function TM(e){var t=vt.useRef([]),o=vt.useRef([0,0]),n=vt.useRef(),r=vt.useState(J4++)[0],i=vt.useState(function(){return yc()})[0],a=vt.useRef(e);vt.useEffect(function(){a.current=e},[e]),vt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var y=UC([e.lockRef.current],(e.shards||[]).map(MM),!0).filter(Boolean);return y.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var s=vt.useCallback(function(y,C){if("touches"in y&&y.touches.length===2)return!a.current.allowPinchZoom;var x=hh(y),w=o.current,P="deltaX"in y?y.deltaX:w[0]-x[0],R="deltaY"in y?y.deltaY:w[1]-x[1],_,E=y.target,M=Math.abs(P)>Math.abs(R)?"h":"v";if("touches"in y&&M==="h"&&E.type==="range")return!1;var W=eC(M,E);if(!W)return!0;if(W?_=M:(_=M==="v"?"h":"v",W=eC(M,E)),!W)return!1;if(!n.current&&"changedTouches"in y&&(P||R)&&(n.current=_),!_)return!0;var G=n.current||_;return RM(G,C,y,G==="h"?P:R,!0)},[]),l=vt.useCallback(function(y){var C=y;if(!(!Yl.length||Yl[Yl.length-1]!==i)){var x="deltaY"in C?PM(C):hh(C),w=t.current.filter(function(_){return _.name===C.type&&_.target===C.target&&$4(_.delta,x)})[0];if(w&&w.should){C.cancelable&&C.preventDefault();return}if(!w){var P=(a.current.shards||[]).map(MM).filter(Boolean).filter(function(_){return _.contains(C.target)}),R=P.length>0?s(C,P[0]):!a.current.noIsolation;R&&C.cancelable&&C.preventDefault()}}},[]),u=vt.useCallback(function(y,C,x,w){var P={name:y,delta:C,target:x,should:w};t.current.push(P),setTimeout(function(){t.current=t.current.filter(function(R){return R!==P})},1)},[]),d=vt.useCallback(function(y){o.current=hh(y),n.current=void 0},[]),m=vt.useCallback(function(y){u(y.type,PM(y),y.target,s(y,e.lockRef.current))},[]),f=vt.useCallback(function(y){u(y.type,hh(y),y.target,s(y,e.lockRef.current))},[]);vt.useEffect(function(){return Yl.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",l,vc),document.addEventListener("touchmove",l,vc),document.addEventListener("touchstart",d,vc),function(){Yl=Yl.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,vc),document.removeEventListener("touchmove",l,vc),document.removeEventListener("touchstart",d,vc)}},[]);var g=e.removeScrollBar,h=e.inert;return vt.createElement(vt.Fragment,null,h?vt.createElement(i,{styles:Q4(r)}):null,g?vt.createElement(Qb,{gapMode:"margin"}):null)}var I9e=hc(eh,TM);c();var bh=k(O());c();var eA=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Zl=new WeakMap,yh=new WeakMap,vh={},tC=0,tA=function(e,t,o,n){var r=Array.isArray(e)?e:[e];vh[o]||(vh[o]=new WeakMap);var i=vh[o],a=[],s=new Set,l=new Set(r),u=function(m){!m||s.has(m)||(s.add(m),u(m.parentNode))};r.forEach(u);var d=function(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,function(f){if(s.has(f))d(f);else{var g=f.getAttribute(n),h=g!==null&&g!=="false",y=(Zl.get(f)||0)+1,C=(i.get(f)||0)+1;Zl.set(f,y),i.set(f,C),a.push(f),y===1&&h&&yh.set(f,!0),C===1&&f.setAttribute(o,"true"),h||f.setAttribute(n,"true")}})};return d(t),s.clear(),tC++,function(){a.forEach(function(m){var f=Zl.get(m)-1,g=i.get(m)-1;Zl.set(m,f),i.set(m,g),f||(yh.has(m)||m.removeAttribute(n),yh.delete(m)),g||m.removeAttribute(o)}),tC--,tC||(Zl=new WeakMap,Zl=new WeakMap,yh=new WeakMap,vh={})}},EM=function(e,t,o){o===void 0&&(o="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),r=t||eA(e);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),tA(n,r,o,"aria-hidden")):function(){return null}};c();var LM=k(O());var oA=yc(),nA=`
 [`+sh+`] {
   pointer-events: none !important;
 }
`,NM=function(){return LM.createElement(oA,{styles:nA})};var Cs=k(O()),DM=function(e){return"current"in e?e.current:e};function AM(e){var t=e.setLockProps,o=e.onEscapeKey,n=e.onClickOutside,r=e.shards,i=e.onActivation,a=e.onDeactivation,s=e.noIsolation,l=(0,Cs.useState)(void 0),u=l[0],d=l[1],m=(0,Cs.useRef)(null),f=(0,Cs.useRef)(0);return bh.useEffect(function(){var g=function(x){x.defaultPrevented||(x.code==="Escape"||x.key==="Escape"||x.keyCode===27)&&o&&o(x)},h=function(x){x.defaultPrevented||x.target===m.current||x instanceof MouseEvent&&x.button!==0||r&&r.map(DM).some(function(w){return w&&w.contains(x.target)||w===x.target})||n&&n(x)},y=function(x){h(x),f.current=x.touches.length},C=function(x){f.current=x.touches.length};if(u)return document.addEventListener("keydown",g),document.addEventListener("mousedown",h),document.addEventListener("touchstart",y),document.addEventListener("touchend",C),function(){document.removeEventListener("keydown",g),document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",y),document.removeEventListener("touchend",C)}},[u,n,o]),(0,Cs.useEffect)(function(){if(u)return i&&i(u),function(){a&&a()}},[!!u]),(0,Cs.useEffect)(function(){var g=function(){return null},h=!1,y=function(x){s||(g=EM(jC([x],(r||[]).map(DM)),document.body,sh)),d(function(){return x})},C=function(){g(),h||d(null)};return t({onMouseDown:function(x){m.current=x.target},onTouchStart:function(x){m.current=x.target},onActivation:y,onDeactivation:C}),function(){h=!0,t(!1)}},[]),bh.createElement(NM,null)}var BM=hc(ah,AM);var rA=function(e){return Ad.createElement(BM,Fo({},e))},oC=Ad.forwardRef(function(e,t){return Ad.createElement($6,Fo({},e,{ref:t,sideCar:rA}))});z();var UM=k(jM());function YM(e){let t=Pn.useRef(null),[o,n]=qo(Ny),{medias:r,currentIndex:i}=o,a=()=>{n({medias:[],currentIndex:0})},s=()=>{n(d=>({...d,currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{n(d=>({...d,currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{n(m=>({...m,currentIndex:d}))};return Va({opened:r.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},t),yr(r.length?{Left:()=>s(),Right:()=>l()}:{},"all",[n,!r.length]),r.length?Pn.createElement(Wn,{ref:t},Pn.createElement(oC,null,Pn.createElement(v,{style:Ql.imagesZoonPortal},Pn.createElement(UM.default,{imageUrls:r.map(d=>({url:d.url})),index:i,renderIndicator:d=>Pn.createElement(v,{style:Ql.indactor},Pn.createElement(v,{style:Ql.indicatorElement}),Pn.createElement(v,{style:[Ql.indicatorElement,b.alignCenter,b.justifyContentCenter]},Pn.createElement(N,{style:Ql.indicatorText},`${d}/${r.length}`)),Pn.createElement(v,{style:[Ql.indicatorElement,b.alignEnd,b.justifyContentCenter]},Pn.createElement(A,{icon:S.X,defaultTextStyle:{color:H.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>Pn.createElement(A,{icon:S.ChevronLeft,defaultTextStyle:{color:H.WHITE},onPress:()=>s()}),renderArrowRight:()=>Pn.createElement(A,{icon:S.ChevronRight,defaultTextStyle:{color:H.WHITE},onPress:()=>l()}),onChange:d=>u(d||0),onCancel:()=>a(),enableSwipeDown:!0})))):null}var Ql=X.create({imagesZoonPortal:{position:"fixed",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:H.WHITE}});c();var ZM=k(O());function $M(e){let t=Yc(),{navigate:o}=_e(),n=co(),r=D1(),i=W1(e),a=z1(e),s=ft(i),l=cy(a,"create-space"),u=cy(a,"create-collection")&&CA(e,r);return ZM.default.useMemo(()=>{let d=m=>async(f=!0)=>{let g=new Nr("startSpace",{sampleRate:1});g.label("User",t.uid),g.label("Owner type",Pc(e)?"user":"organization"),g.label("Owner",Pc(e)?e.user:e.organization),e.collection&&g.label("Collection",e.collection),m&&g.label("Private",!0),g.label("Perm",a);let[{space:h},y]=hy(C=>xS(C,{user:t.uid,owner:e,at:Uh(m?s.current.privateSpaces:s.current.spaces),perm:a,private:m}));return g.wrapPromise(y),y.catch(C=>{n.notify({title:"Error while creating space",details:Ii(C),kind:"danger"})}),ee(wt(h,{type:"space_create",private:m})),f&&o({screen:{type:"space",space:h.key,...Aa(h),page:""}}),h};return{createSpace:l?d(!1):void 0,createPrivateSpace:d(!0),createCollection:u?async(m=!0)=>{let f=new Nr("startCollection");f.label("User",t.uid),f.label("Owner type",Pc(e)?"user":"organization"),f.label("Owner",Pc(e)?e.user:e.organization),e.collection&&f.label("Collection",e.collection),f.label("Perm",a);let[g,h]=hy(y=>mS(y,{title:"New Collection",owner:e,at:Uh(s.current.collections),createdBy:t.uid,perm:a}));return f.wrapPromise(h),ee(fw(g,{type:"collection_create",collection:g.key,restricted:!1})),m&&o({screen:{type:"collection",collection:g.key,...Aa(g)}}),g}:void 0}},[Pc(e)?e.user:e.organization,e.collection,t.uid,s,o,l,u])}function CA(e,t){let o=0,n=e.collection;for(;n;){let r=t.collections.find(i=>i.key===n);n=r?r.collection:void 0,o++}return o<dS}c();var uC=k(O());function QM(e){let{active:t=!0,interactive:o=!1,size:n,rating:r}=e,[,i]=I(wA),a=SA[r];return uC.createElement(B.View,{style:[i.ratingIcon,{width:n,height:n,borderRadius:n}],inactiveStyle:t?i[r]:i.inactiveButton,activeStyle:o?i[r]:null},uC.createElement(a.Child,{size:.75*n,activeStyle:o?i.activeIcon:null,style:t&&i.activeIcon}))}var SA={["ok"]:B.createInteractiveComponent(S.FeedbackOk),["good"]:B.createInteractiveComponent(S.FeedbackGood),["bad"]:B.createInteractiveComponent(S.FeedbackBad)},wA=D.create({ratingIcon:{borderRadius:T.BUTTON_S,alignItems:"center",justifyContent:"center"},inactiveButton:e=>({backgroundColor:e.colors.background.mid,color:e.colors.text.mid}),activeIcon:e=>({color:e.colors.primary.textInside}),["ok"]:e=>({backgroundColor:e.colors.warning.main}),["good"]:e=>({backgroundColor:e.colors.success.main}),["bad"]:e=>({backgroundColor:e.colors.danger.main})});c();var Wd=k(O());c();var nr=k(O());z();function JM(e){let{sources:t,pickSource:o,withGitSyncAction:n,onClose:r}=e,[,i]=I(eT),{navigate:a}=_e(),s=()=>{r(),a({screen:l=>l.type!=="space"?l:{sideSheet:{type:"gitsync"}}})};return nr.createElement(sp,{size:"large",onClose:r,title:"Import your content",subtitle:"Choose a file type or platform below to get started importing your data.",footer:nr.createElement(qn,{icon:S.GitHub,kind:"default",title:"Need to stay in sync?",details:n?"Set up GitHub or GitLab Sync and link a repo for two-way syncing.":"Start a new space, set up GitHub or GitLab Sync, and link a repo for two-way syncing.",actions:n?[{label:"Set up now",onPress:s}]:void 0})},nr.createElement(v,{style:[i.cardsWrapper]},t.map(({title:l,name:u,source:d,icon:m})=>nr.createElement(kA,{key:l,title:u,onPress:()=>o(d),icon:m}))))}function kA(e){let{title:t,description:o,icon:n,onPress:r,style:i}=e,[,a]=I(L),[,s]=I(eT);return nr.createElement(B.TouchableOpacity,{style:[b.directionRow,b.alignCenter,p.Padding.smallVertical,p.Padding.smallRight,s.importCard,i],onPress:r},nr.createElement(v,{style:p.Margin.smallLeft},typeof n=="function"?nr.createElement(n,{size:T.ICON_L}):nr.createElement(Eo,{source:n,style:s.importCardImage})),nr.createElement(v,{style:p.Margin.smallLeft},nr.createElement(v,null,nr.createElement(B.Text.Child,{style:[a.Label,a.text],activeStyle:a.primary},t)),nr.createElement(v,null,nr.createElement(B.Text.Child,{style:[a.Body,a.textMuted],activeStyle:a.primary},o))))}var eT=D.create({importCard:e=>({borderWidth:1,borderColor:e.colors.border.main,borderRadius:4,flexShrink:0,flexGrow:0,flexBasis:"32%",padding:p.small,marginRight:p.small,marginBottom:p.small}),importCardImage:{width:T.ICON_L,height:T.ICON_L},cardsWrapper:{flexWrap:"wrap",flexDirection:"row",marginRight:-p.small}});c();function Ma(e){return"organization"in e}c();var Oh=k(O());c();var ei=k(O());c();var vi=k(O());z();c();var yi=k(O());z();c();var ws=k(O());z();function tT(e){let{fileIcon:t,files:o,setFiles:n}=e,[,r]=I(L),i=jt(t,{style:r.primary},[t]),a=ws.useCallback(({item:s})=>{let l=()=>{n(u=>u.filter(d=>d.key!==s.key))};return ws.createElement(ha,{layout:"wide",icon:i,title:s.file.name,buttons:[s.uploaded||s.failed?null:ws.createElement(Oe,{size:T.ICON_M}),s.failed?ws.createElement(A,{tint:H.scarlet.base,icon:S.Alert,title:"Failed to upload. Please try again.",onPress:l}):null,ws.createElement(A,{icon:S.X,title:"Remove",onPress:l})]})},[t,n]);return ws.createElement(Ud,{data:o,renderItem:a})}function kh(e){let{getSpace:t,files:o,setFiles:n,fileIcon:r,fileExtension:i,limitWarning:a=!1,fileUploadsLimit:s=1/0}=e,[,l]=I(L),u=co(),d=(h,y)=>{n(C=>C.map(x=>x.key===h?{...x,...y}:x))},m=async h=>{let y=await t();try{let C=await ew({kind:"space_import",space:y.key},h.file);d(h.key,{uploaded:C})}catch(C){throw u.notify({kind:"danger",title:"Error while uploading files",details:"Please try again or contact support if the problem persists.",icon:S.Alert}),d(h.key,{failed:!0}),C}},f=h=>{let y=[];for(let C of h){if(o.length>=s){u.notify({kind:"danger",title:"Cannot upload file",details:`You can only upload ${s} file for this operation`,timeout:5e3});break}if(C.size>209715200){u.notify({kind:"danger",title:`Your file must be less than ${Pu(209715200)}`,details:`Please try a different file that's below ${Pu(209715200)}`,timeout:5e3});continue}let x={key:cm(),file:C};y.push(x)}n(C=>C.concat(y)),y.forEach(C=>m(C))};return yi.createElement(yi.Fragment,null,yi.createElement(v,null,yi.createElement(Uw,{icon:r,onDropFiles:f,onPress:async()=>{let h=await $1();f(h)},hint:`Drop your ${i} file here or choose a file`})),a?yi.createElement(v,{style:p.Margin.smallTop},yi.createElement(N,{style:[l.Caption,l.textMuted]},"GitBook has limits for imported content,"," ",yi.createElement(zi,{url:"https://web.archive.org/web/20230609172921/https://docs.gitbook.com/features/import#limits"},"read more here."))):null,o.length>0?yi.createElement(v,{style:[p.Margin.mediumTop]},yi.createElement(tT,{fileIcon:r,files:o,setFiles:n})):null)}c();var Sc=k(O());z();function Jl(e){let{title:t,subtitle:o,onClose:n,onSubmit:r,isPrivateSpace:i,setIsPrivateSpace:a,target:s,children:l}=e,[,u]=I(L);return Sc.default.createElement(sp,{title:t,subtitle:o,footer:Sc.default.createElement(v,{style:[b.directionRow,b.justifyContentEnd]},Ma(s)?Sc.default.createElement(Bi,{label:Sc.default.createElement(N,{style:[u.Label,u.text]},"Start a private space"),value:i,onValueChange:a,style:[p.Margin.mediumRight]}):null,Sc.default.createElement(A,{kind:"secondary",onPress:n,style:p.Margin.smallRight},"Back"),Sc.default.createElement(A,{kind:"primary",onPress:r},"Start import")),onClose:n},l)}function nT(e){let{getSpace:t,fileIcon:o,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=e,[,l]=I(L),[u,d]=vi.useState([]),f=u.some(h=>!h.uploaded)||u.length===0;return vi.createElement(Jl,{...e,onSubmit:async()=>{if(!f){let h=await t();i(u.map(y=>{var C;return(C=y.uploaded)==null?void 0:C.downloadURL}).filter(ge),h)}}},r.length>0?vi.createElement(v,{style:[p.Margin.mediumBottom]},r.map((h,y)=>vi.createElement(v,{key:y,style:[b.directionRow]},vi.createElement(v,{style:[p.Margin.smallRight]},vi.createElement(N,{style:[l.Body,l.textMid]},`${y+1}.`)),vi.createElement(v,{style:b.flex1},vi.createElement(N,{style:[l.Body,l.textMid]},h))))):null,vi.createElement(kh,{getSpace:t,files:u,setFiles:d,fileIcon:o,fileExtension:n,limitWarning:a,fileUploadsLimit:s}))}c();var xh=k(O());function rT(e,t){let o=xh.useRef(),{createSpace:n,createPrivateSpace:r}=$M({organization:e.organization});return xh.useMemo(()=>{if(!(t&&!r)&&!(!t&&!n))return async()=>{if(o.current)return o.current;if(t){if(!r)throw new Error("Cannot import into private space due to incorrect hook usage");o.current=await r(!1)}else{if(!n)throw new Error("Cannot import into shared space due to incorrect hook usage");o.current=await n(!1)}return o.current}},[t,n,r,o])}c();var Ro=k(O());z();c();var bi=k(O());z();function iT(e){let{url:t,setURL:o,placeholder:n="e.g: https://mysite.com/a_file",supportedFormats:r=[],validate:i=Dr}=e,[,a]=I(L),s=i(t);return bi.createElement(bi.Fragment,null,bi.createElement(v,null,bi.createElement(Ut,{size:"large",placeholder:n,value:t,cleareable:!0,onChangeText:o,feedback:t&&!s?{type:"danger",message:"URL is invalid. It must be a valid absolute URL starting with https:// or http://"}:{type:"none"}})),r.length>1?bi.createElement(v,{style:[p.Margin.smallTop,b.directionRow,b.alignCenter]},bi.createElement(v,null,bi.createElement(S.InfoCircle,{size:T.ICON_S,style:a.info})),bi.createElement(v,{style:[p.Margin.smallLeft,b.flex1]},bi.createElement(N,{style:[a.Caption,a.info]},`Supported formats: ${r.join(", ")}`))):null)}function aT(e){let{getSpace:t,fileIcon:o,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=e,[,l]=I(L),[u,d]=Ro.useState([]),[m,f]=Ro.useState(""),[g,h]=Ro.useState("files"),y=u.some(P=>!P.uploaded),C=P=>Dr(P),x=(y||u.length===0)&&(!m||!C(m));return Ro.createElement(Jl,{...e,onSubmit:async()=>{if(!x){let P=await t();i(g==="files"?u.map(R=>{var _;return(_=R.uploaded)==null?void 0:_.downloadURL}).filter(ge):[m],P)}}},r.length>0?Ro.createElement(v,{style:[p.Margin.mediumBottom]},r.map((P,R)=>Ro.createElement(v,{key:R,style:[b.directionRow]},Ro.createElement(v,{style:[p.Margin.smallRight]},Ro.createElement(N,{style:[l.Body,l.textMid]},`${R+1}.`)),Ro.createElement(v,{style:b.flex1},Ro.createElement(N,{style:[l.Body,l.textMid]},P))))):null,Ro.createElement(v,{style:[b.flex1,b.directionRow,b.alignCenter]},Ro.createElement(Xa,null,Ro.createElement(Xa.Tab,{active:g==="files",onPress:()=>h("files")},"Files"),Ro.createElement(Xa.Tab,{active:g==="url",onPress:()=>h("url")},"URL"))),Ro.createElement(v,{style:[b.directionColumn,p.Margin.smallTop]},g==="files"?Ro.createElement(kh,{getSpace:t,files:u,setFiles:d,fileIcon:o,fileExtension:n,limitWarning:a,fileUploadsLimit:s}):null,g==="url"?Ro.createElement(iT,{url:m,validate:C,setURL:f,placeholder:"https://web.archive.org/web/20230609172921/https://myapi.io/swagger.yaml",supportedFormats:["JSON","YAML"]}):null))}c();var Mn=k(O());z();function sT(e){let{title:t="Import a Website",subtitle:o="Enter a link to a web page below to import it into your space.",getSpace:n,startImport:r}=e,[i,a]=Mn.useState(""),[,s]=I(L),l=i?Dr(i):!1,u=async()=>{if(l){let d=await n();r([i],d)}};return Mn.createElement(Jl,{...e,title:t,subtitle:o,onSubmit:u},Mn.createElement(v,{style:[p.Margin.smallBottom]},Mn.createElement(hr,{label:"URL",labelDescription:"We\u2019ll crawl your site and pull in as much of your content as possible.",placeholder:"https://web.archive.org/web/20230609172921/https://docs.mycompany.com",value:i,onChangeText:a,onSubmit:u,feedback:i?{type:l?"success":"danger",message:l?"":"URL is not valid"}:void 0})),Mn.createElement(v,{style:p.Margin.mediumBottom},Mn.createElement(N,{style:[s.Caption,s.textMuted]},"GitBook has limits for imported content,"," ",Mn.createElement(zi,{url:"https://web.archive.org/web/20230609172921/https://docs.gitbook.com/features/import#limits"},"read more here."))),i&&l?Mn.createElement(Mn.Suspense,{fallback:null},Mn.createElement(xA,{url:i})):null)}function xA(e){let{url:t}=e,[o]=zp(t);return o.data?Mn.createElement(v,{style:[p.Margin.mediumBottom]},Mn.createElement(Fi,{title:o.data.title,details:o.data.site,icon:Qe(zn,{source:{uri:o.data.icon||void 0}}),onPress:()=>{ya(t)}})):null}function cT(e){return Ma(e.target)?ei.createElement(_A,{...e,target:e.target}):ei.createElement(OA,{...e,target:e.target})}function OA(e){let t=ei.useCallback(async()=>e.target.space,[e.target.space]);return ei.createElement(lT,{...e,getSpace:t,isPrivateSpace:!1,setIsPrivateSpace:()=>{}})}function _A(e){let[t,o]=ei.useState(!1),n=rT(e.target,t);return n?ei.createElement(lT,{...e,getSpace:n,isPrivateSpace:t,setIsPrivateSpace:o}):null}function lT(e){let{sourceInfo:t,startImport:o,target:n,setSource:r,getSpace:i,isPrivateSpace:a,setIsPrivateSpace:s,onBack:l}=e,{source:u}=t!=null?t:{};if(t===void 0||u===void 0)return null;switch(u){case"website":case"github-wiki":return ei.createElement(sT,{target:n,isPrivateSpace:a,setIsPrivateSpace:s,title:t.title,subtitle:t.subtitle,getSpace:i,startImport:o,onClose:()=>{r(null)}});case"docx":case"markdown":case"html":case"zip":case"dropbox-paper":case"google-docs":case"confluence":case"quip":case"notion":{let d=u==="zip"||u==="confluence"||u==="notion";return ei.createElement(nT,{target:n,isPrivateSpace:a,setIsPrivateSpace:s,getSpace:i,title:t.title,subtitle:t.subtitle,steps:t.steps,fileIcon:t.fileIcon,fileExtension:t.fileExtension,onClose:l,startImport:o,limitWarning:d})}case"open-api":return ei.createElement(aT,{target:n,isPrivateSpace:a,setIsPrivateSpace:s,getSpace:i,title:t.title,subtitle:t.subtitle,steps:t.steps,fileIcon:t.fileIcon,fileExtension:t.fileExtension,onClose:l,startImport:o,fileUploadsLimit:1,limitWarning:!0});default:Ne(u)}}c();var Te=k(O());z();c();var dC="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/confluence-XZRVQN7T.png";var mC="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/dropbox-paper-F627BIKK.png";var pC="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/google-docs-T6C75XLR.png";var fC="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/openapi-H4Y5H3P5.png";var gC="https://web.archive.org/web/20230609172921/https://app.gitbook.com/public/app/assets/quip-SHLUXOMG.png";function uT(){let[e]=I(),[,t]=I(L),o=jt(S.FileCode,{style:t.primary}),n=jt(S.FileText,{style:{color:H.scarlet.light}}),r=jt(S.FileWord,{style:{color:H.primary.light}}),i=jt(S.FileCode,{style:{color:H.violet.light}}),a=jt(S.FileZIP,{style:{color:H.orange.light}}),s=jt(S.GitHub,{style:{color:e.colors.text.main}}),l=jt(S.Notion,{style:{color:e.colors.text.main}}),u=jt(zn,{source:{uri:dC}}),d=jt(zn,{source:{uri:gC}}),m=jt(zn,{source:{uri:mC}}),f=jt(zn,{source:{uri:pC}}),g=jt(zn,{source:{uri:fC}});return[{name:"Website",title:"Import a Website",subtitle:"Enter a link to a web page below to import it into your space.",source:"website",icon:o,type:"application"},{name:"Markdown",title:"Import a Markdown file",source:"markdown",icon:n,subtitle:"Drag and drop your .md file below to start the import.",fileIcon:S.FileText,fileExtension:".md",type:"file"},{name:"MS Word",title:"Import a Word document",source:"docx",icon:r,subtitle:"Drag and drop your .docx file below to start the import.",fileIcon:S.FileWord,fileExtension:".docx",type:"application"},{name:"HTML",title:"Import a HTML file",source:"html",subtitle:"Drag and drop your .html file below to start the import.",icon:i,fileIcon:S.FileCode,fileExtension:".html",type:"file"},{name:"ZIP",title:"Import a ZIP file",source:"zip",subtitle:"Drag and drop your .zip file below to start the import.",icon:a,fileIcon:S.FileZIP,fileExtension:".zip",type:"file"},{name:"Confluence",title:"Import from Confluence",icon:u,source:"confluence",type:"application",subtitle:"Export your space as ZIP to bring your content from Confluence.",fileExtension:".zip",fileIcon:S.FileZIP,steps:[Te.createElement(Te.Fragment,null,"Go to ",Te.createElement(N,{style:[t.Bold,t.text]},"Space Settings")," for the space you're looking to export and select the"," ",Te.createElement(N,{style:[t.Bold,t.text]},"Content tools")," section."),Te.createElement(Te.Fragment,null,"Click on the ",Te.createElement(N,{style:[t.Bold,t.text]},"Export")," tab, and select"," ",Te.createElement(N,{style:[t.Bold,t.text]},"HTML"),", then hit"," ",Te.createElement(N,{style:[t.Bold,t.text]},"Next, and Export"),"."),Te.createElement(Te.Fragment,null,"Choose ",Te.createElement(N,{style:[t.Bold,t.text]},"Normal Export")," unless you want to choose specific pages to export.")]},{name:"Notion",title:"Import from Notion",icon:l,source:"notion",type:"application",subtitle:"Export your workspace as Markdown to bring your content from Notion.",steps:[Te.createElement(Te.Fragment,null,"Go to the Workspace you're looking to export and select the"," ",Te.createElement(N,{style:[t.Bold,t.text]},"\u2026")," button in the top right."),Te.createElement(Te.Fragment,null,"Choose ",Te.createElement(N,{style:[t.Bold,t.text]},"Export All as Markdown"))],fileIcon:S.FileText,fileExtension:".md"},{name:"GitHub Wiki",title:"Import from GitHub Wiki",subtitle:"Enter a link to a GitHub Wiki below to import it into your space.",icon:s,source:"github-wiki",type:"application"},{name:"Quip",title:"Import from Quip",icon:d,source:"quip",fileIcon:S.FileText,fileExtension:".md",type:"application"},{name:"Dropbox Paper",title:"Import from Dropbox Paper",icon:m,source:"dropbox-paper",steps:[Te.createElement(Te.Fragment,null,`Click "\u2026" (ellipsis) in the Paper doc you're viewing.`),Te.createElement(Te.Fragment,null,"Click ",Te.createElement(N,{style:[t.Bold,t.text]},"Export"),"."),Te.createElement(Te.Fragment,null,"Select ",Te.createElement(N,{style:[t.Bold,t.text]},".docx")," and click"," ",Te.createElement(N,{style:[t.Bold,t.text]},"Download"),"."),Te.createElement(Te.Fragment,null,"Drag your downloaded files to the box below to import.")],fileIcon:S.FileWord,fileExtension:".docx",type:"application"},{name:"Google docs",title:"Import from Google Docs",icon:f,source:"google-docs",type:"application",subtitle:"Export your documents as .docx or webpage to bring your content from Google Docs.",steps:[Te.createElement(Te.Fragment,null,"Click on ",Te.createElement(N,{style:[t.Bold,t.text]},"File ",">"," Download"),"."),Te.createElement(Te.Fragment,null,"Choose between ",Te.createElement(N,{style:[t.Bold,t.text]},"Microsoft Word")," or"," ",Te.createElement(N,{style:[t.Bold,t.text]},"Web Page"),".")],fileIcon:S.FileWord,fileExtension:".docx"},{name:"OpenAPI",title:"Import from OpenAPI",icon:g,source:"open-api",type:"application",subtitle:"Provide an OpenAPI specification file or URL to import your API.",fileIcon:S.FileText,fileExtension:".yaml or .json",fileUploadsLimit:1}]}function dT({target:e,onStartImport:t,onComplete:o,onBack:n}){let[r,i]=Oh.useState(null),a=uT(),s=co(),l=f=>{f&&(Ma(e)?ee(Dm(e.organization,{type:"templates_pick_import",source:f})):ee(wt(e.space,{type:"edit_pick_import",source:f}))),i(f)},u=async(f,g)=>{if(!r)return;let h=await jc(),y={url:f,source:r};if(Ma(e)||!e.page&&!e.changeRequest)return h.spaces.importContent(g.key,y);if(e.page&&e.changeRequest)return h.spaces.importContentInChangeRequestPageById(g.key,e.changeRequest.key,e.page,y);if(e.page)return h.spaces.importContentInPageById(g.key,e.page,y);if(e.changeRequest)return h.spaces.importContentInChangeRequest(g.key,e.changeRequest.key,y)},d=async(f,g)=>{if(r){ee(gw(g,void 0,{type:"edit_import",source:r,isPrivateSpace:!!g.private})),t?t(g):n();try{(await s.notifyProgress(Promise.all(f.map(async C=>{let x=await u(C,g);return x?x.data:void 0})),{title:"Importing docs",details:"We are importing your docs, this might take a while."})).some(C=>C&&C.totalResources!==C.importedResources)?s.notify({kind:"warning",title:"Incomplete import",timeout:0,icon:S.Alert,details:"Some of your docs were not imported due to file limits, try splitting them into several imports."}):(s.notify({icon:S.CheckCircle,kind:"success",title:"Imported docs",details:"Docs have been successfully imported. Enjoy!"}),o&&o(g))}catch(h){throw s.notify({kind:"danger",title:"Error while importing docs",details:Ii(h,"Please try again or contact support if the problem persists."),icon:S.Alert}),h}}},m=a.find(({source:f})=>f===r);return{modals:Oh.createElement(cT,{sourceInfo:m,startImport:d,target:e,setSource:i,onBack:n}),source:r,sources:a,onSelectSource:l}}function _0(e){let{target:t,onStartImport:o,onComplete:n,onClose:r}=e,{modals:i,source:a,sources:s,onSelectSource:l}=dT({onStartImport:u=>{o?o(u):r()},onComplete:n,onBack:()=>l(null),target:t});return Wd.createElement(Wd.Fragment,null,a?i:Wd.createElement(JM,{withGitSyncAction:!Ma(t),sources:s,pickSource:l,onClose:r}))}c();var mT=k(O());var EA=5,pT=bt({key:"recentSearches",default:[],effects:[si.recoilEffect("@recoil/recentSearches",[])]});function fT(){return yn(pT)}function gT(e){let t=oi(pT);mT.useEffect(()=>{if(!e)return;let o=setTimeout(()=>{t(n=>n.includes(e)?n:[e,...n.slice(0,EA-1)])},3e3);return()=>clearTimeout(o)},[e])}c();var hT=k(O());function yT(e,t){let{space:o,organization:n}=t,r=pp();hT.useEffect(()=>{if(!e)return;let i=setTimeout(()=>{let a={type:r?"public_content_search_type":"search_type",query:e};o?ee(wt(o,a)):n?ee(Dm(n,a)):ee(a)},700);return()=>{clearTimeout(i)}},[e])}c();var Ue=k(O());c();var hC=JSON.parse('{"loadingDelayedText":"loadingDelayedText_WVBF7","loadingDelayedTextVisible":"loadingDelayedTextVisible_y5onq"}');c();var Pr=k(O());c();var vT=JSON.parse('{"aiAnswerFooter":"aiAnswerFooter_UeG4c"}');c();var wc=k(O());function bT(e){let{answer:t,singleSpace:o}=e,{navigate:n}=_e(),r=wc.useMemo(()=>LA(t,o),[t,o]),i=wc.useCallback(s=>{switch(ee({type:"ai_search_open_source"}),s.type){case"space":n({screen:{type:"space",space:s.space.key,...Aa(s.space),page:"",query:void 0}});break;case"page":n({screen:{type:"space",space:s.space.key,...Aa(s.space),page:s.path,query:void 0}});break;default:Ne(s)}},[n]),a=wc.useCallback(s=>{switch(s.type){case"space":return{icon:Nw(Qe(Co,{code:cw(s.space)})),title:s.space.title||ra,action:"Go to space"};case"page":return{icon:S.Page.CSS,title:s.page.title,subtitle:s.ancestors.filter(l=>l.key!==s.page.key).map(l=>l.title).join(" \u203A "),nested:!o,action:"Go to page"};default:Ne(s)}},[o]);return wc.createElement(Ka,{data:r,getKey:NA,renderItem:a,onOpen:i})}function LA(e,t){let o=new Map;return Q1(e.pages,n=>{var u,d;let r=(u=fp([ia(n.space)])[0])==null?void 0:u.result;if(!r)return null;let i=(d=q1([{space:r.key,revision:r.revision}])[0])==null?void 0:d.result;if(!i)return null;let a=i.pages[n.page];if(!a||a.kind!=="sheet")return null;let s=SS(i,a.key),l=o.get(r.key)||[];l.length===0&&!t&&l.push({type:"space",space:r}),l.push({type:"page",space:r,page:a,ancestors:s,path:Ct(i,a.key)}),o.set(r.key,l)}),Array.from(o.values()).flat()}function NA(e){switch(e.type){case"space":return`space:${e.space.key}`;case"page":return`page:${e.space.key}/${e.page.key}`;default:Ne(e)}}function CT(e){let{answer:t,singleSpace:o}=e,[n,r]=Pr.useState(!1),i=ce();return Pr.createElement(ae,{style:[U.flex.column,U.padding.mediumHorizontal,U.padding.mediumVertical,vT.aiAnswerFooter]},Pr.createElement(ae,{style:[U.flex.row]},Pr.createElement(ae,{style:[U.flex.flex1]},Pr.createElement(A,{size:"small",rightIcon:n?S.ChevronDown:S.ChevronRight,onPress:()=>{r(!n)}},i("search_answer_sources",`${t.pages.length}`)))),n?Pr.createElement(ae,{style:U.margin.mediumTop},Pr.createElement(Pr.Suspense,{fallback:Pr.createElement(bo,{size:"medium"})},Pr.createElement(bT,{answer:t,singleSpace:o}))):null)}c();var ea=k(O());function ST(e){let{query:t,answer:o}=e,[n,r]=ea.useState(!1),i=co(),a=jm(),s=ce(),l=()=>{a.writeTextAndNotify(o.text)},u=()=>{ee({type:"ai_search_upvote_answer",query:t,answer:o.text}),r(!0),i.notify({icon:S.ThumbsUp,title:s("search_answer_feedback_title"),details:s("search_answer_feedback_details")})},d=()=>{ee({type:"ai_search_downvote_answer",query:t,answer:o.text}),r(!0),i.notify({icon:S.ThumbsUp,title:s("search_answer_feedback_title"),details:s("search_answer_feedback_details")})};return ea.createElement(ae,{style:[U.flex.row]},ea.createElement(A,{size:"small",title:s("search_answer_copy"),icon:S.Copy,onPress:l}),n?null:ea.createElement(ea.Fragment,null,ea.createElement(A,{size:"small",icon:S.ThumbsUp,title:s("search_answer_feedback_upvote"),onPress:u,style:p.Margin.xsmallLeft}),ea.createElement(A,{size:"small",icon:S.ThumbsDown,title:s("search_answer_feedback_downvote"),onPress:d,style:p.Margin.xsmallLeft})))}c();var vC=k(O());c();var yC=JSON.parse('{"aiSearchSpinner":"aiSearchSpinner_cTH2Q","aiSearchSpinnerAnim":"aiSearchSpinnerAnim_75OX-","aiSearchSpinnerIcon":"aiSearchSpinnerIcon_MOqIL"}');function wT(e){let{size:t=T.ICON_L}=e;return vC.createElement(ae,{style:yC.aiSearchSpinner,inlineStyle:{width:t,height:t}},vC.createElement(S.AILens.CSS,{style:yC.aiSearchSpinnerIcon}))}function kT(e){let{query:t,target:o}=e,n=Ue.useCallback((r,i,a)=>{ee(o.space?wt(o.space,{type:"ai_search_crash",query:t.query}):{type:"ai_search_crash",query:t.query})},[t]);return Ue.createElement(tm,{fallback:()=>Ue.createElement(zA,null),onError:n},Ue.createElement(Ue.Suspense,{fallback:Ue.createElement(AA,null)},Ue.createElement(DA,{...e})))}function DA(e){let{target:t,query:o,onAnswerLoaded:n,onSubmitQuery:r}=e,i=x1(t.space?{operationId:"askQueryInSpace",params:{spaceId:t.space.key},query:{},body:o}:{operationId:"askQuery",params:{},query:{},body:o}),{answer:a}=i.data;if(Ue.useEffect(()=>{ee(t.space?wt(t.space,{type:"ai_search_view_answer",query:o.query,queriesInMemory:o.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0}):{type:"ai_search_view_answer",query:o.query,queriesInMemory:o.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0})},[o,a,t.space]),Ue.useEffect(()=>{a&&(n==null||n())},[a,n]),!a)return Ue.createElement(BA,null);let s=l=>{ee(t.space?wt(t.space,{type:"ai_search_pick_followup",query:o.query,followup:l,previousQueriesCount:o.previousQueries.length}):{type:"ai_search_pick_followup",query:o.query,followup:l,previousQueriesCount:o.previousQueries.length}),r(l)};return Ue.createElement(ae,{style:[U.flex.column]},Ue.createElement(ae,{style:[U.flex.column,U.padding.large]},Ue.createElement(ae,{style:[U.flex.row,U.margin.mediumBottom]},Ue.createElement(ae,{style:[U.margin.mediumRight,U.flex.flex1]},Ue.createElement(pa,{style:[U.text.heading2,U.textColor.main]},o.query)),Ue.createElement(ae,{style:U.margin.smallRight},Ue.createElement(ST,{query:o.query,answer:a}))),Ue.createElement(Kc,{markdown:a.text}),a.followupQuestions.length>0?Ue.createElement(ae,{style:[U.flex.row,U.flex.wrap,U.margin.smallTop]},a.followupQuestions.map(l=>Ue.createElement(ae,{style:[U.margin.smallTop,U.margin.smallRight]},Ue.createElement(A,{icon:S.AILens,kind:"pill",size:"medium",key:l,onPress:()=>{s(l)}},l)))):null),Ue.createElement(CT,{answer:a,singleSpace:!!t.space}))}function AA(e){let[t,o]=Ue.useState(!1),n=ce();return Ue.useEffect(()=>{let r=setTimeout(()=>{o(!0)},3e3);return()=>{clearTimeout(r)}},[]),Ue.createElement(Ai,{size:"small",icon:wT,title:n("search_answer_loading")},Ue.createElement(pa,{style:[hC.loadingDelayedText,t&&hC.loadingDelayedTextVisible]},n("search_answer_loading_wait")))}function BA(e){let t=ce();return Ue.createElement(Ai,{size:"small",title:t("search_answer_none_title")},t("search_answer_none_details"))}function zA(e){let t=ce();return Ue.createElement(Ai,{size:"small",icon:S.Alert,title:t("search_answer_error_title")},t("search_answer_error_details"))}c();var xT=k(O());function _h(e){var o;let t=O1(e===null||((o=e.documents)==null?void 0:o.length)===0?null:e.space?{operationId:"getRecommendedQuestionsInSpace",params:{spaceId:e.space.key},query:{}}:{operationId:"getRecommendedQuestions",params:{},query:{},body:{documents:e.documents}});return xT.useMemo(()=>t?t.data.questions.map(n=>({type:"recommended-question",question:n})):[],[t])}c();var WA=k(O());var VA=bt({key:"recentAISearches",default:[],effects:[si.recoilEffect("@recoil/recentAISearches",[])]});function Ih(){return yn(VA)}c();var Ta=k(O());function OT(e){let{allowEnterToOpen:t,target:o,onSubmitAIQuery:n}=e,r=ce(),i=Ih(),a=_h(o),s=Ta.useCallback(m=>{switch(m.type){case"recent-search":return{icon:S.Search.CSS,title:m.query,action:r("search_ask")};case"recommended-question":return{icon:S.AILens.CSS,title:m.question,action:r("search_ask")};default:Ne(m)}},[r]),l=Ta.useCallback(m=>{switch(m){case"recent-search":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),u=(m,f)=>{switch(m.type){case"recent-search":{n(m.query),ee({type:"ai_search_pick_suggestion_recent_search",suggestionIndex:f});break}case"recommended-question":ee({type:"ai_search_pick_suggestion_question"}),n(m.question);break;default:Ne(m)}},d=Ta.useMemo(()=>[...i.map(f=>({type:"recent-search",query:f})),...a],[i,a]);return d.length===0?Ta.createElement(Ai,null,r("search_blankslate_ai")):Ta.createElement(ae,{style:[U.flex.flex1,U.flex.column]},Ta.createElement(Ka,{data:d,getKey:qA,renderItem:s,renderGroup:l,groupItem:FA,getGroupKey:GA,onOpen:u,style:[U.padding.mediumHorizontal,U.padding.mediumVertical],allowEnterToOpen:t}))}function qA(e){switch(e.type){case"recent-search":return`recent-search:${e.query}`;case"recommended-question":return`recommended-question:${e.question}`;default:Ne(e)}}function FA(e){return e.type}function GA(e){return e}c();var _T=k(O());var HA=10,XA=bt({key:"aiSearchQuery",default:{query:"",previousQueries:[]},effects:[si.recoilEffect("@recoil/aiSearchQuery",{query:"",previousQueries:[]})]});function IT(){let[e,t]=qo(XA),o=_T.useCallback(n=>{t(r=>r?{query:n,previousQueries:[...r.previousQueries.filter(i=>i!==n&&i!==r.query),...r.query?[r.query]:[]].slice(-HA)}:{query:n,previousQueries:[]})},[t]);return[e,o]}c();var Jt=k(O());z();var KA=st("app:crash");function Vd(e){let{children:t}=e,o=Jt.useCallback((n,r,i)=>{KA.emergency(`An error occured during rendering:

`,n,`

The error is located at:
`,r),ee({type:"crash",crashType:bC(n),sentryEvent:i})},[]);return Jt.createElement(tm,{fallback:n=>Jt.createElement(jA,{...n}),onError:o,beforeCapture:ZA},t)}function jA(e){let{eventId:t,error:o}=e,[,n]=I($A),r=()=>{$C({eventId:t||void 0})},i=()=>{window.location.reload()};Jt.useEffect(()=>{let s=document.querySelector(".gitbook-splashscreen");s==null||s.remove()},[]);let a=()=>{switch(bC(o)){case"network-crash":return Jt.createElement(YA,{onReload:i,...e});case"crash":default:return Jt.createElement(UA,{onShareFeedback:r,onReload:i,...e})}};return Jt.createElement(v,{style:[n.background]},a())}function UA(e){let t=ce(),{onReload:o,onShareFeedback:n}=e;return Jt.createElement(vu,{title:t("something_wrong"),action:Jt.createElement(Jt.Fragment,null,Jt.createElement(A,{kind:"primary",size:"medium",onPress:o,style:p.Margin.smallRight},t("reload")),Jt.createElement(A,{kind:"secondary",size:"medium",onPress:n},t("let_us_know")))},t("we_have_been_notified"))}function YA(e){let{onReload:t}=e,o=ce(),n=()=>{window.open("https://web.archive.org/web/20230609172921/https://docs.gitbook.com/resources/firewall-safelist","_blank")};return Jt.createElement(vu,{title:o("connection_lost"),icon:S.CloudOff,action:Jt.createElement(Jt.Fragment,null,Jt.createElement(A,{kind:"primary",size:"medium",onPress:t,style:p.Margin.smallRight},o("reload")),Jt.createElement(A,{size:"medium",icon:S.Link,onPress:n},o("network_troubleshooting")))},o("device_offline"))}function ZA(e,t){switch(bC(t)){case"network-crash":e.setTag("error_category","network-crash");break;case"crash":default:e.setTag("error_category","react-crash")}}function bC(e){return e.name==="FirebaseError"&&e.code==="unavailable"?"network-crash":"crash"}var $A=D.create({background:e=>({backgroundColor:e.colors.background.main,minHeight:"100vh"})});c();var Tr=k(O());c();var CC=k(O());function Rh(e){let{children:t,ssrRequestPath:o,ssrRouterContext:n}=e;return n?CC.createElement(ex,{location:o,context:n},t):CC.createElement(Py,null,t)}c();var Ph=k(O());function RT(e="https://web.archive.org/web/20230609172921/https://policies.gitbook.com/privacy/cookies",t=!1){let o=co(),n=ce();Ph.useEffect(()=>{if(!t)return;let r=!1;if(Bm()!==null)return;let i=o.notify({title:n("cookies"),details:n("cookie_prompt",Ph.createElement(zi,{url:e},n("cookie_policy"))),timeout:0,icon:S.Cookies,actions:[{label:n("reject_all"),onPress:()=>{r=!0,ly(!1),i()}}],onClose:()=>{r||ly(!0)}})},[])}c();var ue=k(O());z();c();var PT=JSON.parse('{"withStickyHeader":"withStickyHeader_HQiM-"}');c();var Tn=k(O());z();var{TOC_DESKTOP_WIDTH:QA}=xo,JA=K.createResponsiveComponent(Be),eB=B.createInteractiveComponent(JA),SC=QA-p.large-p.large;function Mh(e){let{space:t,collection:o,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:i,desktopStyle:a}=e,[,s]=I(L),{getNavigationLinkProps:l}=_e(),d={color:Vi(n)==="light"?H.lightModeText.base:H.darkModeText.base},m=(o?(o==null?void 0:o.publishedTitle)||(o==null?void 0:o.title):t.publishedTitle||t.title)||ra,f=m.length>14,g=f?2:1,h=ni(t);return Tn.createElement(eB,{style:[b.directionRow,b.alignCenter],mobileStyle:i,desktopStyle:a,...l({screen:{space:t.key,page:""}}),testID:"public.headerHomeLink",accessibilityLabel:m},r?Tn.createElement(K.View,{style:[b.flex1,b.directionRow,b.alignCenter,qd.headerDesktop],mobileStyle:qd.logoMobile,desktopStyle:qd.logoDesktop},Tn.createElement(K.View,{desktopStyle:"visible",mobileStyle:"hidden"},Tn.createElement(Eo,{source:{uri:li(r,{height:40,fit:"contain"})},loading:"priority",style:{maxHeight:40,maxWidth:SC,width:"auto",height:"auto"}})),Tn.createElement(K.View,{desktopStyle:"hidden",mobileStyle:"visible"},Tn.createElement(Eo,{source:{uri:li(r,{height:30,fit:"contain"})},style:{maxHeight:30,maxWidth:SC,width:"auto",height:"auto"}}))):Tn.createElement(v,{style:[qd.headerDesktop,b.flex1,b.directionRow,b.justifyContentStart,b.alignCenter]},Tn.createElement(v,null,Tn.createElement(K.View,{mobileStyle:"hidden",desktopStyle:"visible"},Tn.createElement(yy,{content:o||t,renderFor:"public-content",size:T.BUTTON_L,style:[p.Margin.mediumRight]})),Tn.createElement(K.View,{mobileStyle:"visible",desktopStyle:"hidden"},Tn.createElement(yy,{content:o||t,renderFor:"public-content",size:T.ICON_XL,style:[p.Margin.mediumRight]}))),Tn.createElement(K.Text,{style:qd.textOverflow,mobileStyle:[s.Heading3],desktopStyle:[f?s.Heading3:s.Heading2]},Tn.createElement(B.Text.Child,{style:[d],numberOfLines:g,ellipsizeMode:"tail",inactiveStyle:s.text,activeStyle:h==="bold"?s.textStandout:s.primary},m))))}var qd=X.create({textOverflow:{overflow:"hidden"},logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:SC}});c();var xc=k(O());z();c();c();var Mr=k(O());z();var tB=K.createResponsiveComponent(B.TouchableOpacity),oB=B.createInteractiveComponent(K.View);function Th(e){return`hsla(${xw(e.colors.text.primary).h}, 60%, 70%, 0.1)`}var MT=Mr.forwardRef(function(t,o){let{isLast:n,leftIcon:r,icon:i,rightIcon:a,kind:s="primary",children:l,expanded:u=!1,onChevronPress:d,active:m=!1,onPress:f,textStyle:g,href:h}=t,y=B.useInteractiveState(),[C,x]=I(nB),[,w]=I(L),P=s==="primary"?w.textMid:w.textMuted,R=m?w.primary:P,_=f?tB:oB,E=u?S.ChevronDown:S.ChevronRight;return Mr.createElement(_,{ref:o,...y.events,style:[x.tocMenuItem,p.Padding.smallHorizontal,p.Margin.smallRight,n?null:p.Margin.xsmallBottom,m?{backgroundColor:Th(C)}:null],hoverStyle:f&&!m?x.tocMenuItemHovered:null,mobileStyle:x.tocMenuItemMobile,desktopStyle:x.tocMenuItemDesktop,onPress:f,href:h&&f?h:void 0},r?Mr.createElement(v,{style:[p.Margin.mediumRight]},Mr.createElement(r,{size:T.ICON_M,style:[R,g]})):null,i?Mr.createElement(v,{style:[p.Margin.mediumRight]},Mr.createElement(i,{size:T.ICON_M,style:[R,g]})):null,Mr.createElement(N,{style:[b.flex1,p.Padding.xsmallVertical,s==="group"?w.GroupTitle:w.Label,R,g,m?w.Bold:null]},l),d?Mr.createElement(Be,{style:[b.directionRow,b.alignCenter],onPress:d},Mr.createElement(E,{size:T.ICON_S,style:R})):null,a?Mr.createElement(v,{style:x.tocMenuItemRightIcon},Mr.createElement(a,{size:T.ICON_M,style:w.textMuted})):null)}),nB=D.create({tocMenuItem:e=>({flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,borderRadius:e.radiuses.medium,minHeight:T.XS}),tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:e=>({backgroundColor:e.colors.background.standout}),tocMenuItemRightIcon:{marginLeft:p.small,marginRight:(T.S-T.ICON_M)/2}});c();var ou=k(O());c();var Si=k(O());z();c();var rB=750,iB=p.xxlarge,aB=rB+2*iB,wC=300,sB=220;function TT(e=0){return e+wC+aB+sB}c();var Fd=k(O());z();c();var Zo=k(O());z();function kC(e){return Zo.createElement(Zo.Suspense,{fallback:Zo.createElement(ET,{...e})},Zo.createElement(cB,{...e}))}function cB(e){let{revision:t,treePage:o}=e,{page:n}=o,r=Hn(n.kind==="link"?n.ref:void 0,{space:t.space,revision:t.key});return Zo.createElement(ET,{...e,contentRef:r})}function ET(e){let{revision:t,treePage:o,parent:n,currentPage:r,contentRef:i,isLastPage:a}=e,{page:s}=o,{getNavigationHref:l,navigateToPage:u}=$a(),d=r?r.key:null,m=d===s.key,f=!!d&&wS(t,s.key,d),[g,h]=Zo.useState(f),[,y]=I(lB),C=x=>{x.isDefaultPrevented()||x.nativeEvent.metaKey||x.nativeEvent.ctrlKey||(x.preventDefault(),s.kind==="sheet"?u(t,s.key):s.kind==="link"&&(i==null||i.open()))};return Zo.useEffect(()=>{f&&h(!0)},[f]),Zo.createElement(v,{style:[s.kind==="group"&&p.Margin.mediumVertical]},Zo.createElement(MT,{isLast:a,kind:s.kind==="group"?"group":!n||n.kind==="group"?"primary":"secondary",icon:s.emoji?Qe(Co,{code:s.emoji}):void 0,rightIcon:s.kind==="link"?i?i.secondaryIcon:Oe:void 0,active:m,expanded:g,onPress:s.kind==="group"?void 0:C,href:(()=>s.kind==="link"?i==null?void 0:i.href:l(t,s.key))(),onChevronPress:o.pages.length>0&&s.kind==="sheet"?x=>{x.preventDefault(),h(w=>!w)}:void 0},s.title),(g||s.kind==="group")&&o.pages.length>0?Zo.createElement(v,{style:[y.tocItemChildren,...s.kind==="group"?[p.Margin.noneLeft]:[p.Margin.smallLeft,p.Margin.xsmallTop,p.Margin.smallBottom]]},o.pages.map((x,w)=>Zo.createElement(v,{style:s.kind==="group"?null:p.Margin.smallLeft,key:x.renderKey},Zo.createElement(kC,{...e,treePage:x,isLastPage:w===o.pages.length-1,parent:s}))),s.kind==="group"?null:Zo.createElement(v,{style:y.tocItemChildrenLine})):null)}var lB=D.create({tocItemChildren:{position:"relative"},tocItemChildrenLine:e=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:e.colors.border.main})});c();var Ci=k(O());z();var LT=k(Nk());var xC=40,uB=B.createInteractiveComponent(Dw);function eu(e){return Ci.createElement(zs,null,Ci.createElement(dB,{...e}))}function dB(e){let{space:t,floating:o}=e,[n,r]=I(mB),[,i]=I(L),a=ce(),s=new URLSearchParams({utm_source:"content",utm_medium:"trademark",utm_campaign:t.key}),l=`https://${Da.homepage.domain}/?${s.toString()}`,u=()=>{ee(wt(t,{type:"public_content_click_trademark"}))};return Ci.createElement(v,{style:o&&r.floatingWrapper},o?Ci.createElement(LT.default,{colors:[`${n.colors.background.main}00`,n.colors.background.main],style:r.floatingTopGradient}):null,Ci.createElement(v,{style:o&&[p.Padding.mediumHorizontal,p.Padding.mediumBottom,r.floatingBackground]},Ci.createElement(B.TouchableOpacity,{style:[b.directionRow,b.alignCenter,...o?[r.trademarkFloating,p.Padding.smallVertical,p.Padding.mediumHorizontal]:[r.tradeMarkDefault]],activeStyle:i.primary,onPress:u,href:l,target:"_blank"},Ci.createElement(uB,{size:xC,style:i.textMuted,activeStyle:i.primary}),Ci.createElement(v,{style:[b.flex1,p.Padding.mediumLeft]},Ci.createElement(B.Text.Child,{style:[i.Label,i.textMuted],activeStyle:i.primary},a("powered_by",Ci.createElement(N,{style:i.Bold},"GitBook")))))))}var mB=D.create({floatingWrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},floatingTopGradient:{height:p.medium},floatingBackground:e=>({backgroundColor:e.colors.background.main}),tradeMarkDefault:e=>({backgroundColor:"transparent"}),trademarkFloating:e=>({backgroundColor:e.colors.background.standout,borderRadius:e.radiuses.xlarge})});function Eh(e){let{showingTrademark:t,revision:o}=e,n=Fd.useMemo(()=>KS(o.pages,o.rootPages),[o]);return Fd.createElement(_i,{style:b.flex1,contentContainerStyle:[p.Padding.mediumVertical,t?pB.scrollviewWithTrademark:null]},n.map((r,i)=>Fd.createElement(kC,{key:r.renderKey,...e,treePage:r,isLastPage:i===n.length-1})))}var pB=X.create({scrollviewWithTrademark:{paddingBottom:p.medium+xC+2*p.medium}});c();var fn=k(O());z();c();var Lh=k(O());c();var ks=k(O());var fB={color:lu,radius:iS},Ea=ks.createContext([fB,()=>{}]),NT="@gitbook/themeMode";function gB(e,t){let[o,n]=ks.useState(()=>{if(typeof window>"u"||!e.themeModeTogglable)return t;let i=si.get(NT);return i!==null?i:t});return{themeMode:o,toggleThemeMode:()=>{n(i=>{let a=i==="light"?"dark":"light";return si.set(NT,a),ee(pw(e,{type:"public_content_toggle_theme_mode",themeMode:a})),a})}}}function DT(e){let{content:t,isPreview:o,children:n}=e,{color:r,radius:i}=aS(t),{themeMode:a,toggleThemeMode:s}=gB(t,r);ks.useEffect(()=>{window==null||window.document.body.classList.remove("theme-overlay")},[]);let l=o?r:a!=null?a:r;return ai(u=>{u.setTheme([`${l?`theme-color-${l}`:""}`,`${i?`theme-radius-${i}`:""}`].join(" "))}),ks.createElement(Ea.Provider,{value:[{color:l,radius:i},s]},n)}function En(e){let[{color:t}]=Lh.useContext(Ea);return Lh.useMemo(()=>Bp(e,t),[t,e])}c();var Nh=k(O());function kc(e){let{content:t,mode:o="switch"}=e,[{color:n},r]=Nh.useContext(Ea),{headerBackgroundColor:i}=En(t);return Nh.createElement(Wk,{onValueChange:r,value:n==="dark",mode:o,backgroundColor:i})}c();var xs=k(O());z();c();function OC(e){switch(Cp(e)){case"lightest":return{backgroundColor:"rgba(59, 69, 78, 0.1)",textColor:H.lightModeText.base};case"light":return{backgroundColor:"rgba(255, 255, 255, 0.6)",textColor:H.lightModeText.base};case"semiLight":return{backgroundColor:"rgba(255, 255, 255, 0.55)",textColor:H.lightModeText.base};case"medium":return{backgroundColor:"rgba(59, 69, 78, 0.25)",textColor:H.darkModeText.base};case"semiDark":return{backgroundColor:"rgba(59, 69, 78, 0.3)",textColor:H.darkModeText.base};case"dark":return{backgroundColor:"rgba(59, 69, 78, 0.5)",textColor:H.darkModeText.base};case"darkest":default:return{backgroundColor:"rgba(255, 255, 255, 0.2)",textColor:H.darkModeText.base}}}function AT(e){let{contentTheme:t,headerBackgroundColor:o}=e,[,{open:n}]=gy(),r=ce(),{textColor:i}=OC(o);return xs.createElement(A,{icon:S.SearchPublic,size:"medium",kind:t==="bold"?"default_bold":"default",alignItems:"start",onPress:n,style:[p.Padding.noneHorizontal],defaultTextStyle:[{color:i}],accessibilityLabel:r("search")})}function Dh(e){let{headerBackgroundColor:t=H.WHITE}=e,[,{open:o}]=gy(),n=ce(),[,r]=I(L),[,i]=I(hB),{backgroundColor:a,textColor:s}=OC(t);return xs.createElement(B.TouchableOpacity,{style:[{backgroundColor:a},i.searchBarButton,b.directionRow,b.justifySpaceBetween,b.alignCenter,p.Padding.mediumLeft,p.Padding.smallRight],activeStyle:i.searchBarButtonActive,accessibilityLabel:n("search"),onPress:o},xs.createElement(v,{style:[b.directionRow,b.alignCenter]},xs.createElement(S.SearchPublic,{size:T.ICON_XS,style:[{color:s},p.Margin.smallRight]}),xs.createElement(B.Text.Child,{style:[r.Label,{color:s}],activeStyle:r.text},n("search"))),xs.createElement(v,null,xs.createElement(qr,{kind:"main",shortcut:Fe.SEARCH_OPEN})))}var hB=D.create({searchBarButton:e=>({width:"100%",height:T.BUTTON_L,borderRadius:e.radiuses.large,borderWidth:1,borderColor:"transparent"}),searchBarButtonActive:e=>({borderColor:e.colors.border.mid})});function Ah(e){let{space:t,collection:o,collectionSpaces:n,currentPage:r,revision:i}=e,[,a]=I(BT),{headerBackgroundColor:s,headerLogoURL:l,headerDisabled:u}=En(t),d=n&&(o==null?void 0:o.publishingType)==="variants"?fn.createElement(tu,{key:"variants-picker",currentVariant:t,collection:o,variants:n,revision:i,currentPage:r}):null;return fn.createElement(fn.Fragment,null,u?fn.createElement(fn.Fragment,null,fn.createElement(yB,{key:"space-header",space:t,collection:o,headerBackgroundColor:s,headerLogoURL:l,variantsSwitcher:d}),fn.createElement(K.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[a.searchBarSection,b.directionRow,b.justifySpaceBetween,b.alignCenter,p.Margin.mediumRight]},fn.createElement(v,{style:[b.flex1,b.directionRow,p.Margin.mediumVertical]},fn.createElement(Dh,{key:"search-bar",headerBackgroundColor:s})),t.themeModeTogglable?fn.createElement(v,{style:[p.Margin.mediumLeft]},fn.createElement(kc,{content:t,mode:"button"})):null)):null)}function yB(e){let{space:t,collection:o,headerBackgroundColor:n,headerLogoURL:r,variantsSwitcher:i}=e,[,a]=I(BT);return fn.createElement(K.View,{style:[a.spaceTitleWrapper,b.directionRow,b.justifyContentCenter,b.alignCenter],mobileStyle:"hidden",desktopStyle:"visible"},fn.createElement(Mh,{space:t,collection:o,headerBackgroundColor:n,headerLogoURL:r,desktopStyle:b.flex1}),fn.createElement(v,{style:[b.alignSelfCenter,p.Margin.smallHorizontal]},i))}var BT=D.create({searchBarSection:e=>({borderColor:e.colors.border.mid,borderBottomWidth:1}),selectedTab:e=>({borderLeftColor:e.colors.primary.main,borderLeftWidth:2}),hoverTab:e=>({backgroundColor:e.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:T.BUTTON_M,lineHeight:T.BUTTON_M,borderRadius:0,paddingHorizontal:p.medium},mainBadge:{fontFamily:vw,fontSize:Wm.xxsmall,lineHeight:T.BUTTON_M,...qm.Bold,textTransform:"uppercase",letterSpacing:1},spaceTitleWrapper:e=>({height:T.L}),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:vB}=xo;function zT(e){let{space:t}=e,o=ce(),{headerDisabled:n}=En(t),[,r]=I(bB[n?"none":"default"]),{desktopSidebarWidth:i}=Si.useContext(vr),a=Si.useMemo(()=>({[TT(i)]:"visible"}),[i]),s=!t.hideTrademark;return Si.createElement(K.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:a,style:[r.tocDesktopWrapper,b.directionRow,b.justifyContentEnd]},Si.createElement(le,{tag:"nav",accessibilityLabel:o("table_of_contents"),style:[CB.tocDesktop,b.directionColumn]},Si.createElement(v,{style:[b.flex1,p.Padding.largeLeft]},Si.createElement(Ah,{...e}),Si.createElement(Eh,{...e,showingTrademark:s})),s?Si.createElement(eu,{floating:!0,space:t}):null))}var bB={none:D.create({tocDesktopWrapper:e=>({position:"sticky",top:0,height:"100vh",overflowY:"auto",alignSelf:"flex-start",backgroundColor:e.colors.background.main,borderRightColor:e.colors.border.mid,borderRightWidth:1})}),default:D.create({tocDesktopWrapper:e=>({position:"sticky",top:p.xxlarge,height:`calc(100vh - ${vB}px)`,overflowY:"auto",alignSelf:"flex-start",backgroundColor:e.colors.background.main,borderRightColor:e.colors.border.mid,borderRightWidth:1})})},CB=X.create({tocDesktop:{width:wC}});c();var Mt=k(O());z();var SB=K.createResponsiveComponent(Ht.View),wB=K.createResponsiveComponent(Ht.createAnimatedComponent(Be));function VT(e){let{currentPage:t,space:o,collection:n,collectionSpaces:r,revision:i}=e,a=ce(),s=wu(qo(Iu),Mt.useState(!1)),[,l]=I(L),{sidebarMobileLeft:u,showOverlay:d}=b1(s),[m,f]=I(qT);Mt.useEffect(()=>{s.close()},[t==null?void 0:t.key]);let g=!o.hideTrademark,h=r&&(n==null?void 0:n.publishingType)==="variants"?Mt.createElement(tu,{key:"variants-picker",currentVariant:o,collection:n,variants:r,revision:i,currentPage:t}):null,y=!!o.themeModeTogglable,C=y?Mt.createElement(v,{style:[p.Margin.mediumRight]},Mt.createElement(kc,{content:o,mode:"button"})):null;return Mt.createElement(Wn,null,Mt.createElement(SB,{style:[f.sidebar,{left:u}],mobileStyle:"visible",desktopStyle:"hidden"},Mt.createElement(le,{tag:"nav",accessibilityLabel:a("table_of_contents"),style:[b.directionColumn,b.flex1]},Mt.createElement(v,{style:b.flex1},Mt.createElement(kB,{key:"mobile-closing-bar",switcher:h!=null?h:C}),y&&h?Mt.createElement(v,{style:[b.directionRow,b.justifySpaceBetween,b.alignCenter,p.Padding.smallVertical,p.Padding.mediumHorizontal,f.mobileChangeAppearance]},Mt.createElement(N,{style:[l.Label,l.text]},a("theme_change_appearance")),Mt.createElement(kc,{content:o})):null,Mt.createElement(Ah,{...e}),Mt.createElement(v,{style:[p.Padding.mediumLeft,b.flex1,f.sidebarWrapper]},Mt.createElement(Eh,{...e,showingTrademark:g}))),g?Mt.createElement(eu,{floating:!0,space:o}):null)),Mt.createElement(wB,{style:[f.screenOverlay,{backgroundColor:u.interpolate({inputRange:[-up.MOBILE_WIDTH,0],outputRange:[m.colors.backdrop.transparent,m.colors.backdrop.background]})}],mobileStyle:d?"visible":"hidden",desktopStyle:"hidden",onPress:s.closeMobile}))}function kB(e){let[,t]=I(qT),o=wu(qo(Iu),Mt.useState(!1));return Mt.createElement(K.View,{style:[t.mobileClosingBar,p.Padding.smallHorizontal,b.justifySpaceBetween,b.alignCenter,b.directionRow],mobileStyle:"visible",desktopStyle:"hidden"},Mt.createElement(A,{icon:S.X,size:"large",kind:"default",onPress:()=>o.closeMobile(),style:[b.alignSelfCenter,p.Padding.smallHorizontal],accessibilityLabel:"Close"}),e.switcher)}var WT=10,qT=D.create({sidebar:e=>({backgroundColor:e.colors.background.main,width:up.MOBILE_WIDTH,maxWidth:"100%",height:"100%",flexDirection:"row",position:"fixed",top:0,bottom:0,zIndex:WT}),sidebarWrapper:e=>({borderRightWidth:1,borderRightColor:e.colors.border.mid}),sidebarCloseButton:{position:"absolute",width:T.BUTTON_M,height:T.BUTTON_M,top:(T.M-T.BUTTON_M)/2,left:up.MOBILE_WIDTH+T.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:WT-1},mobileClosingBar:e=>({height:T.L,borderBottomWidth:1,borderBottomColor:e.colors.border.mid,backgroundColor:e.colors.background.main}),mobileChangeAppearance:e=>({borderBottomWidth:1,borderColor:e.colors.border.mid})});function FT(e){return ou.createElement(ou.Fragment,null,ou.createElement(zT,{...e}),ou.createElement(VT,{...e}))}var _C=150,xB=200,OB=150;function Bh(e){let[,t]=I(GT);return xc.createElement(K.View,{style:t.wrapper,mobileStyle:[t.wrapperMobile,p.Margin.smallVertical,p.Margin.smallHorizontal],desktopStyle:[t.wrapperDesktop,p.Margin.smallVertical,p.Margin.xsmallHorizontal]},xc.createElement(_i,null,e.children))}function zh(e){let{title:t,kind:o="default",active:n=!1,onPress:r,isLast:i}=e,[a,s]=I(GT),[,l]=I(L);return xc.createElement(B.TouchableOpacity,{hoverStyle:s.menuItemHovered,style:[s.menuItem,p.Padding.xsmallVertical,p.Padding.smallHorizontal,i?null:p.Margin.xsmallBottom,n?{backgroundColor:Th(a)}:null],onPress:r},xc.createElement(v,{style:[b.directionRow,b.alignCenter,b.justifySpaceBetween]},xc.createElement(B.Text.Child,{hoverStyle:n?null:l.textStandout,style:[l.Label,o==="link"?l.SemiBold:null,...n?[l.primary,l.Bold]:[l.text]],numberOfLines:2,ellipsizeMode:"tail"},t),xc.createElement(v,{style:[p.Margin.mediumLeft]},e.rightElement)))}var GT=D.create({wrapper:e=>({backgroundColor:e.colors.background.main}),wrapperDesktop:{minWidth:_C,maxWidth:xB,maxHeight:OB},wrapperMobile:{width:"auto",maxWidth:"100%",maxHeight:"100%"},menuItem:e=>({borderRadius:e.radiuses.large}),menuItemHovered:e=>({backgroundColor:e.colors.background.muted})});c();var $o=k(O());z();function tu(e){let{backgroundColor:t,currentPage:o,collection:n,variants:r,currentVariant:i,revision:a}=e,{getNavigationLinkProps:s}=_e(),l=ce(),u=$o.useRef(null),[,d]=I(L),m=$o.useMemo(()=>o?Ct(a,o.key):"",[o]);return $o.createElement(qa,{ref:u,wrapper:Wr,closeOnClick:!0,closeOnOutsideClick:!0,anchor:({ref:f,toggle:g,opened:h})=>{let y=h?S.ChevronUp:S.ChevronDown;return $o.createElement(A,{ref:f,size:"medium",rightIcon:y,kind:Vi(t||H.WHITE)?"default_bold":"default",alignItems:"start",onPress:g,style:[p.Padding.noneHorizontal]},$o.createElement(v,{style:[HT.variantsPicker]},$o.createElement(N,{numberOfLines:1,ellipsizeMode:"tail"},i.publishedTitle||i.title||ra)))}},$o.createElement(tn,{kind:"menu",preferredAlignment:"start"},$o.createElement($o.Suspense,{fallback:$o.createElement(bo,{size:"small"})},$o.createElement(Bh,null,r.map((f,g,h)=>$o.createElement(zh,{key:f.key,title:f.title,active:f.key===i.key,isLast:g===h.length-1,rightElement:f.key===n.primarySpace?$o.createElement(N,{style:[d.textMuted,d.Uppercase,HT.mainLabel]},l("main")):null,...s({screen:{space:f.key,page:m}},()=>{var y;(y=u.current)==null||y.close()})}))))))}var HT=X.create({mainLabel:{letterSpacing:1.2},variantsPicker:{maxWidth:_C/2}});c();var KT=k(O());c();var XT=JSON.parse('{"publicContainer":"publicContainer_11UZS"}');function Wh(e){let{children:t,style:o}=e;return KT.createElement(ae,{style:[XT.publicContainer,o]},t)}var{PAGE_BODY_DESKTOP_H_PADDING:_B,TOC_DESKTOP_WIDTH:IB,PUBLIC_DESKTOP_HEADER_HEIGHT:RB,PUBLIC_MOBILE_HEADER_HEIGHT:PB}=xo,MB=K.createResponsiveComponent(A),TB=K.createResponsiveComponent(le);function UT(e){let{space:t}=e,o=Ei(),{headerBackgroundColor:n,headerDisabled:r,headerLinksColor:i,headerLogoURL:a}=En(t),s=ue.useMemo(()=>({...o,color:Vi(n)}),[n,o]);return ue.createElement(zr,{theme:s},r?ue.createElement(K.View,{desktopStyle:"hidden",mobileStyle:"visible"},ue.createElement(jT,{...e,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a})):ue.createElement(jT,{...e,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a}))}function jT(e){let{space:t,headerDisabled:o,headerBackgroundColor:n,headerLogoURL:r,headerLinksColor:i,revision:a,collection:s,collectionSpaces:l,currentPage:u}=e,[,d]=I(AB[o?"none":ni(t)==="default"?"defaultWithBorder":"default"]),m=wu(qo(Iu),ue.useState(!1)),g=na(u)==="docs",h=[Os.searchWrapper,p.Padding.largeLeft,p.Padding.smallRight],[y]=ue.useContext(Ea);return ue.createElement(ue.Fragment,null,ue.createElement(TB,{tag:"header",desktopStyle:Os.desktopHeight,mobileStyle:Os.mobileHeight,style:[d.spaceHeader,b.directionRow,b.alignCenter,o?null:{backgroundColor:n}]},ue.createElement(Wh,{style:[U.padding.smallHorizontal,U.flex.alignCenter,PT.withStickyHeader]},g?ue.createElement(MB,{desktopStyle:"hidden",mobileStyle:"visible",icon:S.Menu,style:p.Margin.smallRight,kind:"grey",rounded:!0,title:m.opened?"Hide Table of Content":"Show Table of Content",onPress:m.toggle}):null,ue.createElement(Mh,{space:t,collection:s,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:[Os.autoWidth,p.Padding.noneLeft,p.Padding.mediumRight,b.flexShrink1,b.justifyContentStart,g?null:p.Margin.smallLeft],desktopStyle:[Os.autoWidth,p.Padding.mediumLeft,p.Padding.largeRight,b.justifyContentStart]}),l&&(s==null?void 0:s.publishingType)==="variants"?ue.createElement(K.View,{mobileStyle:"hidden",desktopStyle:"visible"},ue.createElement(tu,{key:"variants-picker",backgroundColor:n,currentPage:u,collection:s,revision:a,variants:l,currentVariant:t})):null,ue.createElement(EB,{space:t,revision:a,linkColor:i}),t.themeModeTogglable?ue.createElement(K.View,{mobileStyle:"hidden",desktopStyle:"visible"},ue.createElement(kc,{content:t})):null,ue.createElement(zr,{theme:y},ue.createElement(K.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[h,Os.searchBarContainer,b.flex1]},ue.createElement(Dh,{contentTheme:ni(t),headerBackgroundColor:n})),ue.createElement(K.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[h]},ue.createElement(AT,{contentTheme:ni(t),headerBackgroundColor:n}))))),ue.createElement(K.View,{mobileStyle:"visible",desktopStyle:"hidden"},ue.createElement(zr,{theme:y},ue.createElement(DB,{space:t,revision:a}))))}function EB(e){let{space:t,revision:o,linkColor:n}=e;return ue.createElement(K.View,{style:[b.directionRow,b.justifyContentEnd,b.alignCenter,b.flex1,p.Padding.mediumLeft],mobileStyle:"hidden"},(t.headerLinks||[]).map((r,i,a)=>r.title?ue.createElement(LB,{key:r.title,space:t,revision:o,headerLink:r,linkColor:n}):null))}function LB(e){let{headerLink:t,space:o,revision:n,linkColor:r}=e,i=B.useInteractiveState({hoverDelay:250}),a=B.useInteractiveState(),s=l=>ue.createElement(Au,{ref:l.ref,style:[p.Padding.mediumHorizontal,r?{color:r}:null],title:t.title,contentRef:t.to,space:o,revision:n,...l.events});return t.links&&t.links.length>0?ue.createElement(Di,{opened:i.hovered||a.hovered,wrapper:Wr,anchor:({ref:l})=>s({ref:l,events:i.events})},ue.createElement(tn,{kind:"menu",preferredAlignment:"start"},ue.createElement(v,{...a.events},ue.createElement(Bh,null,t.links.map((l,u,d)=>ue.createElement(NB,{key:u,link:l,revision:n,isLast:u===d.length-1})))))):s({})}function NB(e){let{link:t,revision:o,isLast:n}=e,r=Hn(t.to,{space:o.space,revision:o.key});return ue.createElement(zh,{kind:"link",title:t.title,isLast:n,onPress:i=>{i.nativeEvent.metaKey||i.nativeEvent.ctrlKey||(i.preventDefault(),r.open())}})}function DB(e){let{space:t,revision:o}=e,[n,r]=ue.useState(!1),[,{headerLinksMobile:i}]=I(BB),a=n?S.ChevronDown:S.ChevronRight;return!t.headerLinks||t.headerLinks.length===0?null:ue.createElement(v,{style:[Os.headerLinksMobile,i,b.justifyContentCenter,p.Padding.medium]},ue.createElement(v,{style:[Os.headerLinksMobileButton]},ue.createElement(A,{size:"large",rightIcon:a,alignItems:"start",onPress:()=>r(s=>!s),style:[p.Padding.noneHorizontal]},"Links")),n?ue.createElement(v,null,t.headerLinks.map((s,l,u)=>s.title?ue.createElement(YT,{space:t,revision:o,link:s,isLast:l===u.length-1}):null)):null)}function YT(e){let{link:t,space:o,revision:n,isLast:r}=e,[i,a]=ue.useState(!1),s="links"in t?t.links||[]:[],l=i?S.ChevronDown:S.ChevronRight,u=ni(o);return ue.createElement(v,{style:[b.directionColumn]},ue.createElement(v,{style:[b.directionRow,b.alignCenter]},ue.createElement(Au,{style:[p.Padding.smallTop,r?null:p.Padding.smallBottom],kind:u==="bold"?"bold":"default",title:t.title,contentRef:t.to,space:o,revision:n}),s.length>0?ue.createElement(A,{size:"large",kind:"link",rightIcon:l,alignItems:"start",onPress:()=>a(d=>!d),style:[p.Padding.noneHorizontal]}):null),i?ue.createElement(v,{style:[p.Margin.smallLeft,p.Margin.smallBottom]},s.map((d,m,f)=>ue.createElement(YT,{key:m,space:o,revision:n,link:d,isLast:m===f.length-1}))):null)}var AB={none:D.create({spaceHeader:e=>({borderBottomWidth:1,borderBottomColor:e.colors.border.mid,zIndex:1})}),default:D.create({spaceHeader:{zIndex:1,position:"sticky",top:0}}),defaultWithBorder:D.create({spaceHeader:e=>({borderBottomWidth:1,borderBottomColor:e.colors.border.mid,zIndex:1,position:"sticky",top:0})})},BB=D.create({headerLinksMobile:e=>({backgroundColor:e.colors.background.main,borderBottomWidth:1,borderBottomColor:e.colors.border.main})}),Os=X.create({searchWrapper:{marginLeft:"auto"},searchBarContainer:{maxWidth:225},autoWidth:{width:"auto"},tocDesktop:{width:IB},headerLinks:{paddingHorizontal:_B-p.medium},headerLinksMobile:{minHeight:T.M},headerLinksMobileButton:{marginRight:"auto"},mobileHeight:{height:PB},desktopHeight:{height:RB}});c();var ho=k(O());c();var rr=k(O());z();c();var wi=k(O());z();function ZT(e){let{space:t,revision:o,page:n,analyticsContext:r}=e,i=hw(),[,a]=I(L),s=ce(),[{result:l,error:u}]=hp([iw(t.key,n.key,i)]);if(u)return null;let d=m=>{m!==(l==null?void 0:l.rating)&&(ee({...r,type:"public_content_page_feedback_post",rating:m}),oS(f=>{aw(f,{space:t.key,page:n.key,revision:o.key,visitorId:i,rating:m,previousRating:l==null?void 0:l.rating})}))};return wi.createElement(v,{style:[b.directionRow,b.alignCenter]},wi.createElement(v,null,wi.createElement(N,{style:[a.GroupTitle,a.textMuted]},s("was_it_helpful"))),wi.createElement(v,{style:[b.directionRow,b.alignCenter]},wi.createElement(IC,{tooltip:s("poor_content"),active:(l==null?void 0:l.rating)==="bad",rating:"bad",onPress:d}),wi.createElement(IC,{tooltip:s("ok_content"),active:(l==null?void 0:l.rating)==="ok",rating:"ok",onPress:d}),wi.createElement(IC,{tooltip:s("excellent_content"),active:(l==null?void 0:l.rating)==="good",rating:"good",onPress:d})))}function IC(e){let{active:t,tooltip:o,rating:n,onPress:r}=e;return wi.createElement(Vn,{tooltip:o},(i,a)=>wi.createElement(Be,{ref:a,onPress:()=>r(n),style:[p.Margin.smallLeft],accessibilityLabel:o,...i.events},wi.createElement(QM,{active:t,interactive:!0,rating:n,size:T.BUTTON_S})))}function $T(e){let{space:t,revision:o,page:n,analyticsContext:r}=e,[,i]=I(L),[,a]=I(zB),s=ce(),l=cu(n.edits),u=na(n),d=!!l,m=t.hasPublicFeedback,f=!t.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!m)return null;let g=rr.createElement(dg,null,rr.createElement(rr.Suspense,{fallback:null},rr.createElement(ZT,{space:t,revision:o,page:n,analyticsContext:r})));return rr.createElement(v,{style:[p.Padding.largeTop,a.footer]},rr.createElement(K.View,{tabletStyle:b.directionColumn,desktopStyle:b.directionRow,style:[b.alignCenter,b.justifySpaceBetween]},d?rr.createElement(K.View,{tabletStyle:p.Margin.mediumBottom,style:f?[]:[b.flex1]},rr.createElement(N,{style:[i.textMuted,i.Label]},s("last_modified",rr.createElement(f1,{value:l.updatedAt.toDate(),onlyDate:!1})))):null,f?rr.createElement(eu,{space:t,floating:!1}):null,m?rr.createElement(K.View,{tabletStyle:f?"hidden":"visible",desktopStyle:"visible"},g):null),f&&m?rr.createElement(K.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[b.directionRow,b.flex1,b.justifyContentCenter,p.Margin.largeTop]},g):null)}var zB=D.create({footer:e=>({borderTopColor:e.colors.border.mid,borderTopWidth:1})});c();var ki=k(O());z();var WB=B.createInteractiveComponent(wn),VB={[De]:null,[ze]:p.Margin.smallLeft,[Go]:null},QT=ki.memo(function(t){let{sections:o,activeSection:n}=t,[,r]=I(L),[,i]=I(JT),a=ce();return ki.createElement(v,{style:[i.pageOutline]},ki.createElement(v,{style:[b.directionRow,b.alignCenter,p.Padding.largeHorizontal,p.Margin.smallBottom]},ki.createElement(N,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),o.map(s=>s.type===null||s.type===$e?null:ki.createElement(qB,{key:s.key,section:s,active:n===s.key})))});function qB(e){let{section:t,active:o}=e,[,n]=I(L),[,r]=I(JT),{navigateToHash:i}=_e();return ki.createElement(B.TouchableOpacity,{style:[b.directionRow,p.Padding.largeHorizontal,r.sectionItem,o&&r.sectionItemActive],onPress:()=>{i(t.anchor)}},t.tag?ki.createElement(An,{backgroundColor:Ys[t.tag]||H.orange.base,style:[r.sectionTag,p.Margin.xsmallRight,b.alignSelfCenter]},ki.createElement(N,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},t.tag)):null,ki.createElement(WB.Child,{style:[n.Label,n.textMid,t.type&&VB[t.type],...o?[n.primary,n.Medium]:[]],hoverStyle:n.primary},t.title))}var JT=D.create({pageOutline:e=>({maxWidth:xo.MAX_PAGE_OUTLINE_WIDTH}),sectionItem:{marginTop:p.xsmall,marginBottom:p.xsmall,marginLeft:-1,borderLeftWidth:3,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:e=>({borderLeftColor:e.colors.primary.main}),sectionTag:{borderRadius:T.XXS,height:T.XXS,paddingHorizontal:p.small,justifyContent:"center"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:FB}=xo;function eE(e){var C;let{space:t,revision:o,screen:n,analyticsContext:r,collection:i,collectionSpaces:a,assetHostname:s,currentPage:l}=e,u=ce(),[d,m]=I(HB);Mx(t);let{headerDisabled:f}=En(t);if(ai(x=>{x.writeAsync([{type:"meta",name:"description",content:l&&"description"in l?l.description:""},{type:"meta",name:"og:description",content:l&&"description"in l?l.description:""},{type:"meta",name:"og:image",content:t.socialPreviewURL?li(t.socialPreviewURL,{height:640,width:1280,fit:"contain"}):KB(t,o,l)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),t.visibility==="in-collection"?(x.setTitle(l?l.title:u("page_not_found"),(i==null?void 0:i.publishedTitle)||(i==null?void 0:i.title)||ra),x.writeAsync([{type:"meta",name:"robots",content:(i==null?void 0:i.visibility)!=="public"?"noindex, nofollow":"index"}])):(x.setTitle(l?l.title:u("page_not_found"),t.publishedTitle||t.title||ra),x.writeAsync([{type:"meta",name:"robots",content:t.visibility!=="public"?"noindex, nofollow":"index"}]))}),ja(l?Am(t,l,{screen:"space",visibility:t.visibility,pageLayout:na(l),diffMode:!1}):wt(t,{screen:"space_page_notfound",visibility:t.visibility}),[t.key,l==null?void 0:l.key]),ix(t,(C=l==null?void 0:l.key)!=null?C:null),!l&&n.page){let[x]=Uc([XS(t.key,n.page)]);if(x&&o.pages[x.page])return ho.default.createElement(aO,{to:Ct(o,x.page)})}let g=na(l),h=g==="docs",y=g==="docs"||g==="editorial";return ho.default.createElement(ho.default.Fragment,null,ho.default.createElement(jB,{space:i||t,assetHostname:s}),ho.default.createElement(K.View,{style:[b.flex1,m.spacePageContainerBg],mobileStyle:b.directionColumn,desktopStyle:b.directionRow},ho.default.createElement(Wh,null,h?ho.default.createElement(FT,{space:t,revision:o,currentPage:(l==null?void 0:l.kind)==="sheet"?l:null,analyticsContext:r,collection:i,collectionSpaces:a}):null,ho.default.createElement(An,{style:[m.spacePageBody],backgroundColor:d.colors.background.main},ho.default.createElement(ho.default.Suspense,{fallback:ho.default.createElement(Dg,{withPageOutline:(l==null?void 0:l.layout)!=="landing"})},l&&l.kind==="sheet"?ho.default.createElement(GB,{screen:n,key:XB(n,o,l),space:t,revision:o,changeRequest:void 0,page:l,readOnly:!0,withComments:!1,withToC:h,analyticsContext:r,outline:y?QT:void 0,footer:ho.default.createElement($T,{space:t,revision:o,page:l,analyticsContext:r}),sideColumnStickyTop:p.large+(f?0:FB)}):ho.default.createElement(aR,{statusCode:404},ho.default.createElement(vu,{title:u("page_not_found"),action:ho.default.createElement(P1,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:t.key,page:""}}},u("back_to_home"))},u("page_not_found_long"))))))))}function GB(e){let{page:t,screen:o}=e,n=ck();return Ag(n,o,t.key),ho.default.createElement(Lg,{...e,scrollRef:n})}var HB=D.create({spacePageContainerBg:e=>({backgroundColor:e.colors.background.main}),spacePageBody:{flex:1}});function XB(e,t,o){let n=e.space;return n+=`/${e.changeRequest||"main"}`,n+=`/${t.conflicts?"conflicts":"normal"}`,n+=`/${o.key}`,e.diff&&(n+="/diff"),e.revision&&(n+="/revision"),n}function KB(e,t,o){let n=o&&t.rootPages[0]!==o.key?`/page/${o.key}`:"",{primaryColor:r,headerLogoURL:i}=Bp(e),a=ni(e),s=`color=${encodeURIComponent(r||"")}&logo=${encodeURIComponent(As(i||e.iconURL||""))}&theme=${encodeURIComponent(a||"")}`;return`${Jd()}/share/space/thumbnail/${e.key}${n}.png?${s}`}function jB(e){let{space:t,assetHostname:o}=e,n=lw(t,"public-content"),[r]=I(),[i,a]=ho.default.useState(n.iconURL||(n.emoji?`${o}${sw(n.emoji)}`:null));return ho.default.useEffect(()=>{if(i)return;let s=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=s,l.height=s,u.fillStyle=r.colors.background.main,u.fillRect(0,0,s,s);let d=.7;u.fillStyle=r.colors.text.main,u.font=`400 ${s*d}px gitbook-content-font`,u.textAlign="center",u.textBaseline="middle",u.fillText(t.title.slice(0,1),s/2,s/2),a(l.toDataURL("image/png"))},[t.title,a]),ai(s=>{s.writeAsync([{type:"link",rel:"icon",href:i?As(i):`${o}/public/images/icon-512.png`}])}),null}c();var Re=k(O());z();var UB=K.createResponsiveComponent(le),tE=200,YB=4*(tE+p.small);function oE(e){let{space:t,collection:o,revision:n}=e,[,r]=I(L),[,i]=I(QB),a=Re.useMemo(()=>(t==null?void 0:t.footer)||(o==null?void 0:o.footer),[t,o]);return Re.createElement(Re.Fragment,null,a?Re.createElement(UB,{tag:"footer",style:[b.alignCenter,i.footer]},Re.createElement(K.View,{desktopStyle:[ta.desktopContainer]},Re.createElement(K.View,{desktopStyle:b.directionRow,mobileStyle:b.directionColumn},a!=null&&a.logoURL?Re.createElement(K.View,{style:[b.directionRow,b.alignStart,p.Padding.xlargeTop,a!=null&&a.copyright?null:p.Padding.xlargeBottom],desktopStyle:p.Margin.xxlargeHorizontal,mobileStyle:p.Margin.largeHorizontal},Re.createElement(K.View,{desktopStyle:"visible",mobileStyle:"hidden"},Re.createElement(Eo,{source:{uri:a==null?void 0:a.logoURL},style:ta.footerImageDesktop,loading:"lazy"})),Re.createElement(K.View,{desktopStyle:"hidden",mobileStyle:"visible"},Re.createElement(v,{style:p.Margin.largeLeft},Re.createElement(Eo,{source:{uri:a==null?void 0:a.logoURL},style:ta.footerImageMobile,loading:"lazy"})))):null,a!=null&&a.linkGroups?Re.createElement(K.View,{style:[p.Padding.xlargeTop,a.logoURL?b.alignStart:b.alignCenter,b.flex1,a!=null&&a.copyright?null:p.Padding.xlargeBottom],mobileStyle:b.alignStart,tabletStyle:p.Padding.largeLeft},Re.createElement(K.View,{mobileStyle:"hidden",tabletStyle:"hidden",desktopStyle:a.linkGroups.length<3&&!a.logoURL?"visible":"hidden"},Re.createElement(ZB,{linkGroups:a.linkGroups,revision:n})),Re.createElement(K.View,{mobileStyle:"visible",tabletStyle:"visible",desktopStyle:a.linkGroups.length>=3||a.logoURL?"visible":"hidden"},Re.createElement($B,{linkGroups:a.linkGroups,revision:n}))):null),a!=null&&a.copyright?Re.createElement(K.View,{style:[b.flex1,p.Padding.xlargeVertical]},Re.createElement(N,{style:[ta.copyright,r.textMuted]},a==null?void 0:a.copyright)):null)):null)}function ZB(e){let{linkGroups:t,revision:o}=e,[,n]=I(L),r=[],i=t==null?void 0:t.map(({title:a})=>a);return t==null||t.forEach(a=>{var s;(s=a==null?void 0:a.links)==null||s.forEach((l,u)=>{if(r[u]===void 0)return r[u]=[l];r[u].push(l)})}),Re.createElement(v,{style:[b.flex1,b.justifyContentStart,b.directionRow]},Re.createElement(v,{style:ta.linkGroupColumnDesktop},Re.createElement(v,{style:[b.flex1]},i==null?void 0:i.map((a,s)=>Re.createElement(v,{key:a,style:[b.alignStart,s>0?p.Margin.smallTop:null]},Re.createElement(N,{style:[n.text,n.Heading3]},a))))),r.map((a,s)=>Re.createElement(v,{key:s,style:ta.linkGroupColumnDesktop},Re.createElement(nE,{links:a,revision:o,renderMode:"horizontal"}))))}function $B(e){let{linkGroups:t,revision:o}=e,[,n]=I(L);return Re.createElement(K.View,{style:[b.flex1,b.justifyContentStart,b.directionRow],desktopStyle:[ta.linkGroupColumnsDesktop,b.directionRow,b.wrap,b.flexShrink1],mobileStyle:b.directionColumn},t.map((r,i)=>Re.createElement(K.View,{key:i,desktopStyle:[ta.linkGroupColumnDesktop,p.Margin.xlargeTop],mobileStyle:[ta.linkGroupColumnMobile,p.Margin.xlargeTop,p.Margin.largeLeft]},Re.createElement(v,{style:b.alignStart},Re.createElement(N,{style:[n.text,n.Heading3]},r.title)),Re.createElement(nE,{links:r.links,revision:o,renderMode:"vertical"}))))}function nE(e){let{links:t,renderMode:o}=e,[,n]=I(L);return Re.createElement(K.View,{style:[b.alignStart,b.flex1,b.directionColumn],desktopStyle:o==="vertical"?p.Margin.largeTop:null,mobileStyle:p.Margin.smallTop},(t||[]).map((r,i)=>{let a=i===t.length-1;return r.title?Re.createElement(Re.Suspense,{fallback:null,key:r.title},Re.createElement(v,{style:[ta.referenceLink,o==="horizontal"&&i>0?p.Margin.smallTop:null]},Re.createElement(Au,{title:r.title,contentRef:r.to,style:[n.textMuted,n.Medium,o==="horizontal"?null:[p.Padding.smallTop,a?null:p.Padding.smallBottom]],...e}))):null}))}var QB=D.create({footer:e=>({backgroundColor:e.colors.background.mid})}),ta=X.create({linkGroupColumnsDesktop:{maxWidth:YB,marginTop:-p.xlarge},linkGroupColumnDesktop:{width:tE,marginLeft:p.small,paddingRight:p.xlarge},linkGroupColumnMobile:{width:"auto"},desktopContainer:{maxWidth:1280,width:"100%"},copyright:{textAlign:"center"},mobileHeight:{height:"auto"},referenceLink:{maxWidth:"100%"},footerImageDesktop:{maxHeight:150,maxWidth:150,objectFit:"contain"},footerImageMobile:{maxHeight:30,maxWidth:30,objectFit:"contain"}});c();var Qo=k(O());c();var yo=k(O());c();var Gd=k(O());function rE(e){let{query:t,space:o,onUpdateQuery:n,onSubmitAIQuery:r,allowEnterToOpen:i}=e,a=Gd.useCallback(()=>{n("")},[n]);return t.query?Gd.createElement(kT,{target:{space:o},query:t,onAnswerLoaded:a,onSubmitQuery:r}):Gd.createElement(OT,{target:{space:o},onSubmitAIQuery:r,allowEnterToOpen:i})}c();var RC=k(O());c();var La=k(O());function iE(e){let{space:t,onUpdateQuery:o,onSubmitAIQuery:n}=e,r=ce(),i=fT(),a=Ih(),s=_h(t.hasAISearch?{space:t}:null),l=La.useCallback(f=>{switch(f.type){case"recent-search":return{icon:S.Search.CSS,title:f.query,action:r("search")};case"recent-question":return{icon:S.AILens.CSS,title:f.question,action:r("search_ask")};case"recommended-question":return{icon:S.AILens.CSS,title:f.question,action:r("search_ask")};default:Ne(f)}},[r]),u=La.useCallback(f=>{switch(f){case"recent-search":return{title:r("search_blankslate_recent_searches")};case"recent-question":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),d=(f,g)=>{switch(f.type){case"recent-search":{o(f.query),ee(wt(t,{type:"search_pick_suggestion_recent_search",suggestionIndex:g}));break}case"recent-question":{n(f.question),ee(wt(t,{type:"ai_search_pick_suggestion_recent_search",suggestionIndex:g}));break}case"recommended-question":ee(wt(t,{type:"search_pick_suggestion_question"})),n(f.question);break;default:Ne(f)}},m=La.useMemo(()=>{let f=t.hasAISearch?a.map(h=>({type:"recent-question",question:h})):[],g=i.filter(h=>!a.includes(h)).map(h=>({type:"recent-search",query:h}));return[...f,...g,...s]},[i,a,s,t.hasAISearch]);return m.length===0?La.createElement(Ai,null,r("search_blankslate")):La.createElement(ae,{style:[U.flex.flex1,U.flex.column]},La.createElement(Ka,{data:m,getKey:JB,renderItem:l,renderGroup:u,groupItem:ez,getGroupKey:tz,onOpen:d,style:[U.padding.mediumHorizontal,U.padding.mediumVertical]}))}function JB(e){switch(e.type){case"recent-search":return`recent-search:${e.query}`;case"recent-question":return`recent-question:${e.question}`;case"recommended-question":return`recommended-question:${e.question}`;default:Ne(e)}}function ez(e){return e.type}function tz(e){return e}c();var Na=k(O());function aE(e){let{space:t}=e,o=Na.useDeferredValue(e.query),n=ce(),{navigate:r}=_e(),i=rk({query:o,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:t.key}]}),a=Na.useCallback(u=>{switch(u.type){case"page":return{title:u.title,icon:S.Page.CSS,subtitle:u.ancestors.filter(d=>d.kind!=="group"&&d.key!==u.page.key).map(d=>d.title).join(" \u203A "),action:n("search_goto_page")};case"section":return{title:u.title,body:u.body,icon:S.Hash.CSS,nested:!0,action:n("search_goto_section")};default:throw new Error("Unexpected item type")}},[n]),s=Na.useCallback(u=>{if(u)return{title:u.page.title}},[]),l=Na.useCallback((u,d)=>{if(!(u.type!=="page"&&u.type!=="section"))switch(ee(wt(t,{type:"public_content_search_open_result",resultType:u.type,resultIndex:d})),u.type){case"page":r({screen:{type:"space",space:u.space.key,page:u.path,hash:void 0,query:void 0}});break;case"section":r({screen:{type:"space",space:u.space.key,page:u.path,hash:u.anchor,query:void 0}});break;default:Ne(u)}},[]);return i.length===0?Na.createElement(Ai,null,n("search_blankslate_query",o)):Na.createElement(Ka,{data:i,getKey:oz,renderItem:a,renderGroup:s,groupItem:rz,getGroupKey:nz,onOpen:l,style:[U.padding.mediumHorizontal,U.padding.mediumVertical]})}function oz(e){return e.key}function nz(e){return e?e.page.key:""}function rz(e){return e.groups.find(t=>t.type==="page")}function sE(e){let{space:t,query:o,onUpdateQuery:n,onSubmitAIQuery:r}=e;return gT(o),yT(o,{space:t}),o?RC.createElement(aE,{space:t,query:o}):RC.createElement(iE,{space:t,onUpdateQuery:n,onSubmitAIQuery:r})}function cE(e){let{space:t}=e,[o,{open:n,close:r,setQuery:i}]=M1();return yr({[Fe.SEARCH_OPEN]:()=>{n()},"/":()=>{n()}},["all"],[]),yo.createElement(Tw,null,typeof o=="string"?yo.createElement(iz,{space:t,query:o,setQuery:i,close:r}):null)}function iz(e){let{space:t,query:o,setQuery:n,close:r}=e,i=ce(),a=yo.useRef(null),[s,l]=IT(),[u,d]=Li("search",[!!t.hasAISearch]);ja({screen:"search",screenTab:u},[u]);let m=yo.useCallback(h=>{var y;n(h),(y=a.current)==null||y.focus()},[n,a]),f=yo.useCallback(h=>{var y;t.hasAISearch&&(d("lens"),n(h),l(h),(y=a.current)==null||y.focus(),ee(wt(t,{type:"ai_search_submit",query:h})))},[!t.hasAISearch,d,n,l,a]),g=yo.useCallback(h=>{d(h),l(h==="search"?"":o)},[d,l]);return yo.useEffect(()=>{var h;(h=a.current)==null||h.focus()},[u]),yo.createElement(C1,{ref:a,inputIcon:u==="search"?S.Search.CSS:S.AILens.CSS,rightButton:t.hasAISearch?yo.createElement(ae,{style:[U.flex.row,U.flex.alignCenter]},u==="lens"&&o&&o!==s.query?yo.createElement(ae,{style:[U.margin.mediumRight,U.flex.row,U.flex.alignCenter]},yo.createElement(ae,{style:U.margin.xsmallRight},yo.createElement(pa,{style:[U.text.caption,U.textColor.muted]},"Enter")),yo.createElement(S.ArrowEnter.CSS,{style:[U.icons.xsmall,U.textColor.muted]})):null,yo.createElement(qk,{activeTab:u,tabs:[{key:"search",label:i("search")},{key:"lens",label:"Lens"}],onPress:g})):null,query:o,onQueryChange:n,onSubmitQuery:f,onClose:r,queryPlaceholder:i(u==="search"?"search_placeholder":"search_placeholder_ask")},u==="search"||!t.hasAISearch?yo.createElement(sE,{query:o,space:t,onUpdateQuery:m,onSubmitAIQuery:f}):yo.createElement(rE,{query:s,space:t,onUpdateQuery:m,onSubmitAIQuery:f,allowEnterToOpen:o.length===0}))}c();var Vh=k(O());var nu=new Map;typeof window<"u"&&(window.GitBook=window.GitBook||{addEventListener:(e,t)=>{nu.has(e)||nu.set(e,[]),nu.get(e).push(t)},removeEventListener:(e,t)=>{if(!nu.has(e))return;let o=nu.get(e),n=o.indexOf(t);n!==-1&&o.splice(n,1)}});function lE(e,...t){let o=nu.get(e);o&&o.forEach(n=>{n(...t)})}function uE(e){if(Vh.useContext(Lo).mode!=="public-content")throw new Error("useInjectIntegrationsScripts can only be used in public-content mode");Vh.useEffect(()=>(lE("load"),()=>{lE("unload")}),[e.key])}function qh(e){let{space:t,assetHostname:o,collection:n,collectionSpaces:r,usesCookies:i}=e,{locale:a}=Qo.useContext(Lo),{screen:s}=Wi(),l=ax(t.key,s),u=s.type==="space"&&typeof s.changeRequest=="string";if(u&&!l)throw new Rc.NotFound("Change request not found");let d=s.type==="space"&&s.revision,m=u&&l?l.revisionCurrent:d&&s.revision||t.revision,f=Zc({space:t.key,revision:m});if(!f)throw u?new Rc.NotFound("Change request not found"):s.type==="space"&&s.revision?new Rc.NotFound("Revision not found"):new Error("Expected revision");bx(t),uE(t);let g=nm(t)?t.organization:void 0,h=Qo.useMemo(()=>wt(t,{}),[t.key,g,t.collection]);if(s.type!=="space"||s.space!==t.key)throw new Error("screen should be the space we render");Qo.useEffect(()=>{if(t.searchKey)return N1(t.searchKey)},[t.searchKey]),ai(x=>{x.write({type:"font",font:t.font||"Inter",fontFamilyName:"gitbook-content-font"}),(s.revision||s.changeRequest||s.sideSheet)&&x.write({type:"meta",name:"robots",content:"noindex"}),x.setLang(a)}),RT(t.privacyPolicyURL,Vy(t)||i);let[y,C]=H1(f,s);return Qo.createElement(Qo.Fragment,null,y?Qo.createElement(mp,{to:{screen:y}}):null,Qo.createElement(UT,{space:t,revision:f,collection:n,currentPage:C,collectionSpaces:r}),Qo.createElement(eE,{space:t,revision:f,screen:s,analyticsContext:h,collection:n,collectionSpaces:r,assetHostname:o,currentPage:C}),Qo.createElement(oE,{space:t,revision:f,collection:n}),Qo.createElement(cE,{space:t,revision:f}),Qo.createElement(YM,null),Qo.createElement(iO,{organization:g,content:t,contentRef:ia(t.key)}))}c();var PC=k(O());c();function ru(e){return e?e.endsWith("/")?e:`${e}/`:""}function dE(e,t){return o=>{let n=`/${ru(e.basePath)}`;switch(o.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"quickstart":case"root":case"join":case"account_verification":case"integrations":case"import":case"template":case"welcome":case"contentkit_builder":throw new Error(`Cannot navigate to ${o.type} on public content`);case"home":{if(o.organization){let i=Fs.read({type:"organization",organization:o.organization});n=yu(i);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let i=Fs.read({type:"user",user:o.user});n=yu(i);break}case"collection":{let i=Fs.read({type:"collection",collection:o.collection});n=yu(i);break}case"space":{let i=Fs.read({type:"space",space:o.space});i.hostname===e.hostname&&(!e.basePath||i.pathname.startsWith(e.basePath))||t?(e.shareLink&&(n+=ru(e.shareLink)),i.pathname!==e.basePath&&(e.basePath?n+=ru(uS(i.pathname,ru(e.basePath))):n+=ru(i.pathname))):n=yu(i),n+=az(o);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:Ne(o)}let r;if(typeof o.query=="string"){let i=new URLSearchParams;i.set("q",o.query),r=`?${i.toString()}`}return{pathname:n,hash:o.hash,search:r}}}function az(e){let t="";return e.revision&&(t+=`~/revisions/${e.revision}/`),e.changeRequest&&(t+=`~/changes/${e.changeRequest}/`),t+=`${e.page[0]==="/"?e.page.slice(1):e.page}`,e.sideSheet&&(t=`${ru(t)}~/${e.sideSheet.type}${"tab"in e.sideSheet?`/${e.sideSheet.tab}`:""}`),t}c();function mE(e,t,o,n=[]){return r=>{let{spaceKey:i,pathname:a}=pS({currentSpaceKey:t,collectionSpaces:n,collection:o,pathname:r.pathname,paths:e}),s={type:"space",space:i,page:""};sz(s,JS(a)),r.hash&&(s.hash=r.hash.replace(/^#/,""));let u=new URLSearchParams(r.search).get("q");return typeof u=="string"&&(s.query=u),s}}function sz(e,t){ay(t,[{path:`/~/revisions/:revision/:page${Rm}`,onMatch:o=>{Object.assign(e,{page:o.params.page,revision:o.params.revision}),iu(e,o,t)}},{path:"/~/revisions/:revision",onMatch:o=>{Object.assign(e,{revision:o.params.revision,page:""}),iu(e,o,t)}},{path:`/~/changes/:changeRequest/:page${Rm}`,onMatch:o=>{Object.assign(e,{changeRequest:o.params.changeRequest,revision:void 0,page:o.params.page}),iu(e,o,t)}},{path:"/~/changes/:changeRequest",onMatch:o=>{Object.assign(e,{changeRequest:o.params.changeRequest,revision:void 0,page:""}),iu(e,o,t)}},{path:`/:page${Rm}`,onMatch:o=>{Object.assign(e,{page:o.params.page,diff:!1}),iu(e,o,t)}},{path:"/",onMatch:o=>{Object.assign(e,{diff:!1,page:""}),iu(e,o,t)}}])}function iu(e,t,o){ay(o,[{path:"/~/share/pdf",onMatch:n=>{Object.assign(e,{sideSheet:{type:"share",tab:"pdf"}})}}],{prefix:t.path})}function Fh(e,t,o,n,r){let i=ox(),a=(0,PC.useMemo)(()=>mE(e,o,n,r),[e.hostname,e.basePath,e.shareLink,o,n,r]),s={hostname:e.hostname,pathname:e.basePath},l=(0,PC.useMemo)(()=>dE({hostname:s.hostname,basePath:s.pathname,shareLink:e.shareLink},t),[e.hostname,e.basePath,e.shareLink]);return{forceHardNavigation:!i,getNavigationScreenFromLocation:a,getLocationForNavigationScreen:l}}function pE(e){let{space:t,ssrRequestPath:o,ssrRouterContext:n,basePath:r,hostname:i,customToken:a,shareLink:s,assetHostname:l,preview:u=!1,usesCookies:d=!1}=e,m=Fh({hostname:i,basePath:r,shareLink:s},u,t.key),{primaryColor:f}=En(t);return Tr.createElement(ku,{mode:"public-content",preview:u,locale:t.language},Tr.createElement(Tr.Suspense,{fallback:Tr.createElement(bo,{size:"large"})},Tr.createElement(zs,{primaryColor:f},Tr.createElement(Vd,null,Tr.createElement(Rh,{ssrRequestPath:o,ssrRouterContext:n},Tr.createElement(dp,{persist:!1,...m},Tr.createElement(Ap,null,a&&typeof window>"u"?Tr.createElement(bo,{size:"large"}):Tr.createElement(qh,{space:t,assetHostname:l,usesCookies:d}))))))))}c();var Jo=k(O());function fE(e){let{collection:t,basePath:o,hostname:n,customToken:r,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:s,shareLink:l,assetHostname:u,preview:d=!1,usesCookies:m=!1}=e,f=Fh({hostname:n,basePath:o,shareLink:l},d,void 0,t,i),{primaryColor:g}=En(t);if(!d&&t.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return Jo.createElement(ku,{mode:"public-content",preview:d,locale:t.language},Jo.createElement(zs,{primaryColor:g},Jo.createElement(Vd,null,Jo.createElement(Rh,{ssrRequestPath:a,ssrRouterContext:s},Jo.createElement(dp,{persist:!1,...f},Jo.createElement(Jo.Suspense,{fallback:Jo.createElement(bo,{size:"large"})},Jo.createElement(Ap,null,r&&typeof window>"u"?Jo.createElement(bo,{size:"large"}):Jo.createElement(cz,{collection:t,collectionSpaces:i,assetHostname:u,usesCookies:m}))))))))}function cz(e){let{screen:t}=Wi();if(t.type!=="space")throw new Error("screen should be a space");let[o]=Fr([ia(t.space)]);if(!o)throw new Error("the space should exist");let{primaryColor:n}=En(o);return Jo.createElement(ku,{locale:o.language},Jo.createElement(zs,{primaryColor:n},Jo.createElement(Vd,null,Jo.createElement(qh,{...e,space:o}))))}c();var ir=k(O());z();c();var Oc=k(O());var MC=st("preview:child");function gE(e,t){let[o,n]=Oc.useState(e),[r,i]=Oc.useState(void 0);return lz(o.footer),Oc.useEffect(()=>{t&&(window.addEventListener("message",a=>{if(a.data.source!=="gitbook-preview-parent"||(MC.info("receive message",a.origin,a.data),a.origin!==Jd()&&a.origin!=="https://web.archive.org/web/20230609172921/http://localhost:5001"))return;let s=nS(a.data.payload),l=a.data.previewID;MC.debug("update content with",s),n(s),i(l),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),MC.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[t]),[o,r]}function lz(e){let t=Oc.useRef(e);Vc(()=>{e&&e!==t.current&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"}),t.current=e},[e])}c();var hE=k(O());function TC(){hE.useEffect(()=>{typeof window>"u"},[])}function EC(e){let t="collection"in e?e.collection:e.space,[o,n]=gE(t,!!e.preview);return TC(),ir.createElement(GC,null,ir.createElement(DT,{content:o,isPreview:!!e.preview},ir.createElement(uz,{...e,content:o,previewID:n})))}function uz(e){let{content:t,previewID:o}=e;TC();let[n]=ir.useContext(Ea);return ir.createElement(zr,{theme:n},ir.createElement(_w,{theme:n},ir.createElement(F_,null,ir.createElement(Vk,null,ir.createElement(bw,{enabled:!0},"collection"in e?ir.createElement(fE,{...e,collection:t}):ir.createElement(pE,{...e,space:t})),o?ir.createElement(v,{testID:o}):null))))}c();function LC(e){let t=new URLSearchParams(window.location.search),o=window.location.hash;if(t.has("jwt_token")){t.delete("jwt_token");let i=t.toString();window.history.replaceState({},"",`${window.location.pathname}${i?`?${i}`:""}${o||""}`)}let{dsn:n,tracesSampling:r}={...Da.sentry,...Da.sentry.publicContent};ZC({dsn:n,release:YC,projectId:Da.firebase.projectId,tracesSampling:r}),window.location.hostname!=="localhost"&&tw(e.hostname),Gk({customToken:e.customToken,waitUserReady:!1})}c();function yE(e){e!=null&&e.firestore&&qs.fromJS(e.firestore),e!=null&&e.head&&ww.cache.fromJS(e.head),e!=null&&e.contentURLs&&Fs.fromJS(e.contentURLs),e!=null&&e.contentRefs&&di.fromJS(e.contentRefs),e!=null&&e.screenToContentRefs&&Xp.fromJS(e.screenToContentRefs),e!=null&&e.swaggers&&Js.fromJS(e.swaggers),e!=null&&e.api&&w1.fromJS(e.api)}c();var vE=st("browser-compatibility");function bE(){let e=["webcache.googleusercontent.com","translate.googleusercontent.com","translate.google.com"];return!window.location.hostname||e.includes(window.location.hostname)?(vE.warning("The application is served over an unsupported hostname and has been made static."),!1):dz()?!0:(vE.warning("Your browser is missing required features, the application has been made static."),!1)}function dz(){try{if("\u212B".normalize("NFKD")!=="A\u030A")return!1}catch(e){return!1}return!(!window.Intl||![].flat)}c();function CE(e){document.readyState==="interactive"||document.readyState==="complete"?e():document.addEventListener("DOMContentLoaded",()=>{e()})}c();var SE=k(Dy());function NC(e){return new Nr("ssr.deserializeFromHTML").wrapSync(()=>{let o=SE.default.decompress(e);return o?JSON.parse(o):null})}bE()&&CE(()=>{mz()});async function mz(){let e=window.__GITBOOK_INITIAL_PROPS__,t=NC(e);LC(t),window.__GITBOOK_LAZY_MODULES__&&await e1(window.__GITBOOK_LAZY_MODULES__);let o=window.__GITBOOK_INITIAL_STATE__,n=NC(o);n?(yE(n),Hh.registerComponent("PublicContentApplication",()=>EC),Hh.runApplication("PublicContentApplication",{hydrate:!0,rootTag:document.querySelector(".gitbook-root"),initialProps:t})):console.error("Invalid state received from server, content won't be interactive")}
/*! Bundled license information:

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

rangefix/rangefix.js:
  (*!
   * RangeFix v0.2.9
   * https://github.com/edg2s/rangefix
   *
   * Copyright 2014-17 Ed Sanders.
   * Released under the MIT license
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/public-S4O6DHZF.min.js.map


}
/*
     FILE ARCHIVED ON 17:29:21 Jun 09, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 22:13:48 Sep 14, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.521
  exclusion.robots: 0.019
  exclusion.robots.policy: 0.01
  esindex: 0.011
  cdx.remote: 47.84
  LoadShardBlock: 536.797 (3)
  PetaboxLoader3.resolve: 271.58 (3)
  PetaboxLoader3.datanode: 416.09 (4)
  load_resource: 225.471
*/