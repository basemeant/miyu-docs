var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

import{a as f1,b as v1,c as b1,d as Sg,e as eP,f as aP,g as oc,h as EP,i as WP}from"https://app.gitbook.com/public/app/chunks/chunk-3CBLDGUQ.min.js";import{a as CP,b as TP}from"https://app.gitbook.com/public/app/chunks/chunk-L7VKO7JN.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-7BABZLPL.min.js";import{a as L1,b as y9,c as IP,d as RP}from"https://app.gitbook.com/public/app/chunks/chunk-UFEMV6LD.min.js";import{a as Wr,b as Nu}from"https://app.gitbook.com/public/app/chunks/chunk-U65XC2SI.min.js";import{a as Tg}from"https://app.gitbook.com/public/app/chunks/chunk-ATR3K4HY.min.js";import{a as ma,b as _p,c as OO,d as PO}from"https://app.gitbook.com/public/app/chunks/chunk-TCCNHHJO.min.js";import{A as H1,B as jn,C as K1,D as Qs,E as X1,G as vS,H as iP,I as bS,J as Ru,L as PP,M as _P,a as wu,b as ii,c as mS,d as pe,e as yt,f as fg,g as Dp,h as D1,i as yS,j as gg,k as Ou,l as hg,m as N1,n as A1,o as B1,p as W1,q as yg,r as vg,s as F1,t as bg,u as z1,v as V1,w as q1,x as Js,y as Pu,z as G1}from"https://app.gitbook.com/public/app/chunks/chunk-D5FIKYL6.min.js";import{a as xg}from"https://app.gitbook.com/public/app/chunks/chunk-OZJU4WMG.min.js";import{a as us}from"https://app.gitbook.com/public/app/chunks/chunk-2U6Q6QGT.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-EBPPQMEZ.min.js";import{a as tP,b as OP,c as MP,d as LP}from"https://app.gitbook.com/public/app/chunks/chunk-KZCDVSU5.min.js";import{a as $1}from"https://app.gitbook.com/public/app/chunks/chunk-DUT3VZUO.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-JE3FFDV2.min.js";import{a as Eu}from"https://app.gitbook.com/public/app/chunks/chunk-V3LIX7YP.min.js";import{a as kg}from"https://app.gitbook.com/public/app/chunks/chunk-4MUGLFDA.min.js";import{a as Au,b as DP,c as NP}from"https://app.gitbook.com/public/app/chunks/chunk-FREAXY5P.min.js";import{a as Of,b as Sx,e as uO,f as gS,g as hn,h as Lp,i as vn,j as Bp,k as _g,l as oP,m as Ng,n as Vi,p as AP,q as BP}from"https://app.gitbook.com/public/app/chunks/chunk-I26DDSMS.min.js";import{a as ze,b as Fr,c as Ag}from"https://app.gitbook.com/public/app/chunks/chunk-27EFXGXQ.min.js";import{a as v9}from"https://app.gitbook.com/public/app/chunks/chunk-5A6FVULE.min.js";import{a as Og,b as Q1,d as Eg,e as yP}from"https://app.gitbook.com/public/app/chunks/chunk-AXLGA6MC.min.js";import{c as Bg}from"https://app.gitbook.com/public/app/chunks/chunk-KWZPJRDD.min.js";import{a as Ix,b as Dg}from"https://app.gitbook.com/public/app/chunks/chunk-QCIJEWPL.min.js";import{b as Op,c as Pp,e as kO,f as xO}from"https://app.gitbook.com/public/app/chunks/chunk-X4R5MODI.min.js";import{a as lg}from"https://app.gitbook.com/public/app/chunks/chunk-R6TA4JEV.min.js";import{a as ec}from"https://app.gitbook.com/public/app/chunks/chunk-PTLRTRBA.min.js";import{a as Dr,b as Rx,c as cu,d as Pf,e as Tx}from"https://app.gitbook.com/public/app/chunks/chunk-AI4MFKI3.min.js";import{a as vr,b as Rg,c as Sa,d as Du,f as ul}from"https://app.gitbook.com/public/app/chunks/chunk-LVAX7K4F.min.js";import{a as Fi}from"https://app.gitbook.com/public/app/chunks/chunk-KFOXRGNQ.min.js";import{b as hP}from"https://app.gitbook.com/public/app/chunks/chunk-BCKNCGCP.min.js";import{a as go,b as va,c as ds,d as vt,e as tc,g as kP,h as xP,j as SS}from"https://app.gitbook.com/public/app/chunks/chunk-2NIQAO4X.min.js";import{f as M1}from"https://app.gitbook.com/public/app/chunks/chunk-ORAD2DV4.min.js";import{a as nP,c as mP,d as fP,e as gP,g as SP,i as ll,j as wP}from"https://app.gitbook.com/public/app/chunks/chunk-R2GOVV7A.min.js";import{b as ms,c as Lg,d as Mu,e as wa,f as Lu,g as vP,h as bP}from"https://app.gitbook.com/public/app/chunks/chunk-4NLEJC7R.min.js";import{a as t1,b as ye}from"https://app.gitbook.com/public/app/chunks/chunk-NGX3IO2B.min.js";import{K as bx,Q as tg,R as jO,S as Rt,T as og,U as ZO,W as JO,Y as QO,Z as e1,_ as ee,ca as ng,da as pS,ea as nc,fa as sP,ia as cP,ja as lP,ka as uP,oa as dP,pa as pP,qa as Tu,ua as Ko,va as Wp,wa as Ye,xa as Mg}from"https://app.gitbook.com/public/app/chunks/chunk-YNVUVNIH.min.js";import{a as zi}from"https://app.gitbook.com/public/app/chunks/chunk-B5SNR67Q.min.js";import{a as GO,b as ho,c as Pg,e as Ap,f as Eo,g as rP,h as ps,i as ba}from"https://app.gitbook.com/public/app/chunks/chunk-PKUIVXJV.min.js";import{a as _u,b as wg,c as to,d as Cg,e as U1,f as Y1,g as j1,h as ne,i as Z1,j as J1,k as Iu,l as Np,m as ce,n as Ig}from"https://app.gitbook.com/public/app/chunks/chunk-L4RQGZDE.min.js";import{a as su,b as X,d as yr,f as Br}from"https://app.gitbook.com/public/app/chunks/chunk-NIUW4PZK.min.js";import{d as Se}from"https://app.gitbook.com/public/app/chunks/chunk-WH6U2RDG.min.js";import{$c as vu,$e as qO,Ac as dO,Ae as DO,Bc as pO,Be as Ys,Cc as ri,Db as xx,Dc as mO,De as NO,Df as YO,Ec as fO,Ee as jf,Ef as eg,Fc as gO,Fe as AO,Ff as Cu,Gc as hO,Ge as Rp,Gf as $O,Hc as yO,Hd as EO,Ib as Yb,Ic as vO,Jb as Za,Jc as bO,Jd as MO,Je as BO,Kc as SO,Kd as lS,Lc as sS,Ld as Yf,Le as Zf,Mc as wO,Me as WO,Nb as $b,Nc as CO,Ne as FO,Ob as Ox,Oc as Xf,Pc as kp,Pd as $f,Qb as jb,Qc as Ai,Rc as xp,Sc as gr,Tb as Px,Tc as Ct,Te as Tp,Ub as Zb,Uc as Yn,Ue as zO,Vb as Jb,Vc as fa,Wc as $n,We as dS,Xc as W,Yc as Ip,Zc as cS,_c as _O,_e as VO,a as kf,ac as Ex,ad as fn,b as Zo,bd as bu,c as tl,cc as Mx,cd as IO,d as hx,e as yx,f as ca,fd as RO,gd as eo,hd as ss,hf as al,ic as Bx,j as xf,jc as Mi,jd as Bi,jf as Jf,k as vx,kc as Wx,kf as HO,lc as gp,lf as KO,mc as Fx,mf as XO,nb as la,nc as zx,nf as UO,ob as Ei,qf as Qf,rd as Uf,sd as TO,tb as wx,tc as Vx,ub as Cx,vb as kx,ve as LO,we as uS,xc as qx,xe as Us,yc as Gx,zc as Kf,ze as Su}from"https://app.gitbook.com/public/app/chunks/chunk-MEIGRZK3.min.js";import{a as E1,b as di}from"https://app.gitbook.com/public/app/chunks/chunk-FUQY26ZJ.min.js";import{$ as O1,A as Ro,B as ft,C as ug,D as ga,I as Ce,J as To,L as y1,M as q,O as hr,P as dg,R as js,S as ha,T as Zs,U as S1,V as w1,W as C1,X as k1,Y as ya,Z as cl,_ as x1,a as d9,b as cs,c as rg,d as fS,e as o1,ea as P1,f as n1,fa as xu,g as r1,ga as li,h as Y,ha as _1,i as gn,ia as ui,j as u1,ja as Gt,ma as B,n as hS,na as I1,o as Go,oa as R1,p as Ep,pa as fo,q as yn,qa as pg,r as $s,ra as mg,sa as Mp,t as m1,ua as T1,v as ci,w as ku,x as g1,y as Ho,z as h1}from"https://app.gitbook.com/public/app/chunks/chunk-PBAWABAW.min.js";import{c as Ti,e as h9}from"https://app.gitbook.com/public/app/chunks/chunk-XGSU3VBN.min.js";import{$ as Qa,$a as is,A as Xx,Aa as os,Ab as sO,B as Ef,Ba as ni,Bb as xe,C as zt,Ca as Xn,Cb as f9,D as hp,Da as Un,Db as g9,E as p9,Ea as Ar,Eb as Z,Fa as po,Fb as Ni,Ga as bp,Gb as cO,H as Ux,Hb as lO,I as yp,Ia as mn,Ib as hu,J as Xs,Ja as Sp,Jb as yu,Ka as wp,La as du,Ma as Lf,Na as pa,Oa as pu,Pa as Df,Q as vp,Qa as Nf,R as Yx,Ra as Af,S as $x,Sa as eO,T as m9,Ta as ns,U as jx,V as oS,Va as Cp,W as Gn,Wa as rs,X as da,Xa as Bf,Y as Zx,Ya as Wf,Z as pn,Za as iS,_ as Ja,_a as _e,aa as Hn,ab as tO,b as Lx,ba as Li,bb as ht,c as eS,ca as Jx,cb as mu,da as Ae,db as aS,e as Dx,ea as Fe,eb as Ff,f as tS,fa as Je,fb as Qt,g as _f,ga as co,ha as lo,hb as rl,i as lu,ia as Vt,ib as oO,j as oi,ja as uo,jb as nO,k as Nx,ka as qo,kb as rO,l as Ax,la as de,lb as zf,ma as es,mb as Vf,na as qt,nb as as,o as ua,oa as _o,ob as qf,p as Hx,pa as nS,q as If,qa as Qx,qb as fu,ra as rS,rb as iO,s as uu,sa as ol,sb as Gf,ta as Mf,tb as Hf,u as Rf,ua as Kn,ub as aO,v as Ft,va as mr,vb as Io,w as Po,wa as Nr,wb as gu,xa as ts,xb as Di,y as Kx,ya as nl,yb as st,z as he,za as fr,zb as il}from"https://app.gitbook.com/public/app/chunks/chunk-63HWTRQG.min.js";import{a as it}from"https://app.gitbook.com/public/app/chunks/chunk-IMRT24PM.min.js";import{B as M,C as Wi,D as i1,E as K,F as a1,G as v,H as R,I as g,J as S,K as s1,L as ig,M as ag,N as sg,P as He,Q as cg,R as mo,S as Ke,T as c1,U as l1,V as sl,W as d1,X as p1,Y as ls,Z as ai,_ as P,aa as si,ba as A,ca as F,m as C,o as z,q as px,r as It,t as mx,u as fx,v as zn,w as Vn,x as Lr,y as gx}from"https://app.gitbook.com/public/app/chunks/chunk-TKDAYVPD.min.js";import{b as qn,c as Qb}from"https://app.gitbook.com/public/app/chunks/chunk-PCZ4IMU7.min.js";import{a as fp}from"https://app.gitbook.com/public/app/chunks/chunk-PSJDJH4W.min.js";import{b as De,c as Ne,d as ue,e as _x,f as Tf}from"https://app.gitbook.com/public/app/chunks/chunk-FLKK44UQ.min.js";import{b as Te,c as dx,d as y,f as s}from"https://app.gitbook.com/public/app/chunks/chunk-JSCW7V4P.min.js";var Q_=Te((Fne,J_)=>{s();var F8="Expected a function",j_=NaN,z8="[object Symbol]",V8=/^\s+|\s+$/g,q8=/^[-+]0x[0-9a-f]+$/i,G8=/^0b[01]+$/i,H8=/^0o[0-7]+$/i,K8=parseInt,X8=typeof window=="object"&&window&&window.Object===Object&&window,U8=typeof self=="object"&&self&&self.Object===Object&&self,Y8=X8||U8||Function("return this")(),$8=Object.prototype,j8=$8.toString,Z8=Math.max,J8=Math.min,AS=function(){return Y8.Date.now()};function Q8(o,t,e){var n,r,i,a,c,l,u=0,d=!1,p=!1,f=!0;if(typeof o!="function")throw new TypeError(F8);t=Z_(t)||0,BS(e)&&(d=!!e.leading,p="maxWait"in e,i=p?Z8(Z_(e.maxWait)||0,t):i,f="trailing"in e?!!e.trailing:f);function m(N){var T=n,E=r;return n=r=void 0,u=N,a=o.apply(E,T),a}function h(N){return u=N,c=setTimeout(k,t),d?m(N):a}function b(N){var T=N-l,E=N-u,L=t-T;return p?J8(L,i-E):L}function w(N){var T=N-l,E=N-u;return l===void 0||T>=t||T<0||p&&E>=i}function k(){var N=AS();if(w(N))return x(N);c=setTimeout(k,b(N))}function x(N){return c=void 0,f&&n?m(N):(n=r=void 0,a)}function O(){c!==void 0&&clearTimeout(c),u=0,n=l=r=c=void 0}function _(){return c===void 0?a:x(AS())}function I(){var N=AS(),T=w(N);if(n=arguments,r=this,l=N,T){if(c===void 0)return h(l);if(p)return c=setTimeout(k,t),m(l)}return c===void 0&&(c=setTimeout(k,t)),a}return I.cancel=O,I.flush=_,I}function BS(o){var t=typeof o;return!!o&&(t=="object"||t=="function")}function e3(o){return!!o&&typeof o=="object"}function t3(o){return typeof o=="symbol"||e3(o)&&j8.call(o)==z8}function Z_(o){if(typeof o=="number")return o;if(t3(o))return j_;if(BS(o)){var t=typeof o.valueOf=="function"?o.valueOf():o;o=BS(t)?t+"":t}if(typeof o!="string")return o===0?o:+o;o=o.replace(V8,"");var e=G8.test(o);return e||H8.test(o)?K8(o.slice(2),e?2:8):q8.test(o)?j_:+o}J_.exports=Q8});var tI=Te((Vne,eI)=>{s();eI.exports=function(){if(this)return this;Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0});try{return __global__}finally{delete Object.prototype.__global__}}()});var oI=Te((Gne,o3)=>{o3.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://web.archive.org/web/20231004051033/https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://web.archive.org/web/20231004051033/https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var rI=Te((Hne,nI)=>{s();nI.exports=oI().version});var sI=Te((Xne,aI)=>{s();var fl;if(typeof globalThis=="object")fl=globalThis;else try{fl=tI()}catch{}finally{if(!fl&&typeof window<"u"&&(fl=window),!fl)throw new Error("Could not determine global this")}var Xp=fl.WebSocket||fl.MozWebSocket,n3=rI();function iI(o,t){var e;return t?e=new Xp(o,t):e=new Xp(o),e}Xp&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(o){Object.defineProperty(iI,o,{get:function(){return Xp[o]}})});aI.exports={w3cwebsocket:Xp?iI:null,version:n3}});var tR=Te(XS=>{s();Object.defineProperty(XS,"__esModule",{value:!0});var M3=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},L3="src/index.js",D3=function(){function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),QI=C(),N3=B3(QI),A3=z();function B3(o){return o&&o.__esModule?o:{default:o}}function W3(o,t){var e={};for(var n in o)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e}function F3(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function JI(o,t){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:o}function z3(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(o,t):o.__proto__=t)}var eR=function(o){z3(t,o);function t(){var e,n,r,i;F3(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return i=(n=(r=JI(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r),r.state={width:1,height:1},r.measure=function(u){r.setState({width:u.nativeEvent.layout.width,height:u.nativeEvent.layout.height}),r.props.onLayout&&r.props.onLayout(u)},r.getAngle=function(){if(r.props.useAngle)return r.props.angle+"deg";var u=Math.atan2(r.state.width*(r.props.end.y-r.props.start.y),r.state.height*(r.props.end.x-r.props.start.x))+Math.PI/2;return u+"rad"},r.getColors=function(){return r.props.colors.map(function(u,d){var p=r.props.locations[d],f="";return p&&(f=" "+p*100+"%"),u+f}).join(",")},n),JI(r,i)}return D3(t,[{key:"render",value:function(){var n=this.props,r=n.start,i=n.end,a=n.colors,c=n.locations,l=n.useAngle,u=n.angleCenter,d=n.angle,p=n.style,f=n.children,m=W3(n,["start","end","colors","locations","useAngle","angleCenter","angle","style","children"]);return N3.default.createElement(A3.View,M3({},m,{style:[p,{backgroundImage:"linear-gradient("+this.getAngle()+","+this.getColors()+")"}],onLayout:this.measure,__source:{fileName:L3,lineNumber:76}}),f)}}]),t}(QI.PureComponent);eR.defaultProps={start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0};XS.default=eR});var tT=Te((Fpe,LB)=>{LB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/youtube.raw-KIFNDQS6.svg"});var oT=Te((zpe,DB)=>{DB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/soundcloud.raw-2NJLH377.svg"});var nT=Te((Vpe,NB)=>{NB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/loom.raw-3KUBFJOQ.svg"});var rT=Te((qpe,AB)=>{AB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/github.raw-G362N2HA.svg"});var iT=Te((Gpe,BB)=>{BB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/github.dark.raw-A2MHFBQG.svg"});var aT=Te((Hpe,WB)=>{WB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/framer.raw-BZOKEAUJ.svg"});var sT=Te((Kpe,FB)=>{FB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/framer.dark.raw-HVTXI7EB.svg"});var cT=Te((Xpe,zB)=>{zB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/codepen.raw-PGSLYKJU.svg"});var lT=Te((Upe,VB)=>{VB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/codepen.dark.raw-HNDMNQX3.svg"});var uT=Te((Ype,qB)=>{qB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/dribbble.raw-KBB5DOUQ.svg"});var dT=Te(($pe,GB)=>{GB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/trello.raw-5HIIOOAI.svg"});var pT=Te((jpe,HB)=>{HB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/typeform.raw-74VPCTO6.svg"});var mT=Te((Zpe,KB)=>{KB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/typeform.dark.raw-47MGSH5W.svg"});var fT=Te((Jpe,XB)=>{XB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/google-docs.raw-I6UHVZFS.svg"});var gT=Te((Qpe,UB)=>{UB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/google-sheets.raw-IGZ6R7IJ.svg"});var hT=Te((eme,YB)=>{YB.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/google-slides.raw-WGHORNC6.svg"});var yT=Te((tme,$B)=>{$B.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/google-forms.raw-7C25TP6G.svg"});var vM=Te((Ywe,tW)=>{tW.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var wM=Te(($we,SM)=>{"use strict";s();var Bw=vM();SM.exports=Ki;Ki.message=Bw;Ki.code=oW(Bw);Ki.codes=nW(Bw);Ki.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};Ki.empty={204:!0,205:!0,304:!0};Ki.retry={502:!0,503:!0,504:!0};function oW(o){var t={};return Object.keys(o).forEach(function(n){var r=o[n],i=Number(n);t[r.toLowerCase()]=i}),t}function nW(o){return Object.keys(o).map(function(e){return Number(e)})}function rW(o){var t=o.toLowerCase();if(!Object.prototype.hasOwnProperty.call(Ki.code,t))throw new Error('invalid status message: "'+o+'"');return Ki.code[t]}function bM(o){if(!Object.prototype.hasOwnProperty.call(Ki.message,o))throw new Error("invalid status code: "+o);return Ki.message[o]}function Ki(o){if(typeof o=="number")return bM(o);if(typeof o!="string")throw new TypeError("code must be a number or string");var t=parseInt(o,10);return isNaN(t)?rW(o):bM(t)}});var XM=Te((Iy,KM)=>{s();(function(o,t){typeof define=="function"&&define.amd?define(t):typeof Iy=="object"&&typeof Iy.nodeName!="string"?KM.exports=t():o.RangeFix=t()})(Iy,function(){var o,t={};t.isBroken=function(){var r,i,a,c,l,u,d,p;return o===void 0&&(i=document.createElement("p"),a=document.createElement("span"),c=document.createTextNode("aa"),l=document.createTextNode("aa"),u=document.createElement("img"),u.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),d=document.createRange(),o={},i.appendChild(c),i.appendChild(a),a.appendChild(u),a.appendChild(l),document.body.appendChild(i),d.setStart(c,1),d.setEnd(a,0),o.getClientRects=o.getBoundingClientRect=d.getClientRects().length>1,o.getClientRects||(d.setEnd(l,1),o.getClientRects=o.getBoundingClientRect=d.getClientRects().length===2),o.getBoundingClientRect||(d.setEnd(d.startContainer,d.startOffset),r=d.getBoundingClientRect(),o.getBoundingClientRect=r.top===0&&r.left===0),document.body.removeChild(i),p=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),o.ieZoom=!!p&&p<=10),o};function e(r){var i;return!r||screen.deviceXDPI===screen.logicalXDPI?r:"length"in r?Array.prototype.map.call(r,e):(i=screen.deviceXDPI/screen.logicalXDPI,{top:r.top/i,bottom:r.bottom/i,left:r.left/i,right:r.right/i,width:r.width/i,height:r.height/i})}function n(r,i){var a,c=0,l=1024;if(l>=i.length)return Array.prototype.push.apply(r,i);for(;c<i.length;)a=Array.prototype.push.apply(r,Array.prototype.slice.call(i,c,c+l)),c+=l;return a}return t.getClientRects=function(r){var i,a,c,l,u,d=this.isBroken();if(d.ieZoom)return e(r.getClientRects());if(!d.getClientRects)return r.getClientRects();i=[],c=[],a=r.endContainer,l=r.endOffset,u=document.createRange();function p(f){for(var m=0;f=f.previousSibling;)m++;return m}for(;a!==r.commonAncestorContainer;)u.setStart(a,0),u.setEnd(a,l),n(c,u.getClientRects()),l=p(a),a=a.parentNode;return u=r.cloneRange(),u.setEnd(a,l),n(i,u.getClientRects()),n(i,c),i},t.getBoundingClientRect=function(r){var i,a,c,l,u,d,p=this.getClientRects(r);if(p.length===0)return null;if(u=r.getBoundingClientRect(),d=this.isBroken(),d.ieZoom)return e(u);if(!d.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return p[0];for(i=0,a=p.length;i<a;i++)l=p[i],c?(c.left=Math.min(c.left,l.left),c.top=Math.min(c.top,l.top),c.right=Math.max(c.right,l.right),c.bottom=Math.max(c.bottom,l.bottom)):c={left:l.left,top:l.top,right:l.right,bottom:l.bottom};return c&&(c.width=c.right-c.left,c.height=c.bottom-c.top),c},t})});var jD=Te((d7e,uz)=>{uz.exports="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/default-page-cover-K4LPTE6Y.png"});var qN=Te((qze,VN)=>{"use strict";s();var QV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";VN.exports=QV});var XN=Te((Hze,KN)=>{"use strict";s();var eq=qN();function GN(){}function HN(){}HN.resetWarningCache=GN;KN.exports=function(){function o(n,r,i,a,c,l){if(l!==eq){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}o.isRequired=o;function t(){return o}var e={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:t,element:o,elementType:o,instanceOf:t,node:o,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:HN,resetWarningCache:GN};return e.PropTypes=e,e}});var YN=Te((Yze,UN)=>{s();UN.exports=XN()();var Xze,Uze});var t7=Te(HC=>{"use strict";s();Object.defineProperty(HC,"__esModule",{value:!0});var qC=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},tq=function(){function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),JN=C(),Jm=QN(JN),oq=YN(),Wo=QN(oq);function QN(o){return o&&o.__esModule?o:{default:o}}function nq(o,t){var e={};for(var n in o)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);return e}function rq(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function iq(o,t){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:o}function aq(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(o,t):o.__proto__=t)}var $N={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},sq=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],cq=function(t){return sq.forEach(function(e){return delete t[e]}),t},jN=function(t,e){e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.letterSpacing=t.letterSpacing,e.style.textTransform=t.textTransform},e7=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,ZN=function(){return e7?"_"+Math.random().toString(36).substr(2,12):void 0},GC=function(o){aq(t,o);function t(e){rq(this,t);var n=iq(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=function(r){n.input=r,typeof n.props.inputRef=="function"&&n.props.inputRef(r)},n.placeHolderSizerRef=function(r){n.placeHolderSizer=r},n.sizerRef=function(r){n.sizer=r},n.state={inputWidth:e.minWidth,inputId:e.id||ZN()},n}return tq(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var r=n.id;r!==this.props.id&&this.setState({inputId:r||ZN()})}},{key:"componentDidUpdate",value:function(n,r){r.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var n=this.input&&window.getComputedStyle(this.input);n&&(jN(n,this.sizer),this.placeHolderSizer&&jN(n,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var n=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?n=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:n=this.sizer.scrollWidth+2;var r=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;n+=r,n<this.props.minWidth&&(n=this.props.minWidth),n!==this.state.inputWidth&&this.setState({inputWidth:n})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var n=this.props.injectStyles;return e7&&n?Jm.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var n=[this.props.defaultValue,this.props.value,""].reduce(function(c,l){return c??l}),r=qC({},this.props.style);r.display||(r.display="inline-block");var i=qC({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=nq(this.props,[]);return cq(a),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=i,Jm.default.createElement("div",{className:this.props.className,style:r},this.renderStyles(),Jm.default.createElement("input",qC({},a,{ref:this.inputRef})),Jm.default.createElement("div",{ref:this.sizerRef,style:$N},n),this.props.placeholder?Jm.default.createElement("div",{ref:this.placeHolderSizerRef,style:$N},this.props.placeholder):null)}}]),t}(JN.Component);GC.propTypes={className:Wo.default.string,defaultValue:Wo.default.any,extraWidth:Wo.default.oneOfType([Wo.default.number,Wo.default.string]),id:Wo.default.string,injectStyles:Wo.default.bool,inputClassName:Wo.default.string,inputRef:Wo.default.func,inputStyle:Wo.default.object,minWidth:Wo.default.oneOfType([Wo.default.number,Wo.default.string]),onAutosize:Wo.default.func,onChange:Wo.default.func,placeholder:Wo.default.string,placeholderIsMinWidth:Wo.default.bool,style:Wo.default.object,value:Wo.default.any};GC.defaultProps={minWidth:1,injectStyles:!0};HC.default=GC});var y2=Te(Rk=>{"use strict";s();Object.defineProperty(Rk,"__esModule",{value:!0});var kG={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};Rk.default={container:kG}});var Tk=Te(Jd=>{"use strict";s();Object.defineProperty(Jd,"__esModule",{value:!0});Jd.ImageZoomState=Jd.ImageZoomProps=void 0;var xG=function(){function o(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.useHardwareTextureAndroid=!0,this.minScale=.6,this.maxScale=10,this.useNativeDriver=!1,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){},this.onStartShouldSetPanResponder=function(){return!0},this.onPanResponderTerminationRequest=function(){return!1}}return o}();Jd.ImageZoomProps=xG;var OG=function(){function o(){this.centerX=.5,this.centerY=.5}return o}();Jd.ImageZoomState=OG});var b2=Te(jl=>{"use strict";s();var PG=jl&&jl.__extends||function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},o(t,e)};return function(t,e){o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pf=jl&&jl.__assign||function(){return pf=Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r])}return o},pf.apply(this,arguments)};Object.defineProperty(jl,"__esModule",{value:!0});var bb=C(),Xt=z(),_G=y2(),v2=Tk(),IG=function(o){PG(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.state=new v2.ImageZoomState,e.lastPositionX=null,e.positionX=0,e.animatedPositionX=new Xt.Animated.Value(0),e.lastPositionY=null,e.positionY=0,e.animatedPositionY=new Xt.Animated.Value(0),e.scale=1,e.animatedScale=new Xt.Animated.Value(1),e.zoomLastDistance=null,e.zoomCurrentDistance=0,e.lastTouchStartTime=0,e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.centerDiffX=0,e.centerDiffY=0,e.lastClickTime=0,e.doubleClickX=0,e.doubleClickY=0,e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.imagePanResponder=Xt.PanResponder.create({onStartShouldSetPanResponder:e.props.onStartShouldSetPanResponder,onPanResponderTerminationRequest:e.props.onPanResponderTerminationRequest,onMoveShouldSetPanResponder:e.props.onMoveShouldSetPanResponder,onPanResponderGrant:function(n){if(e.lastPositionX=null,e.lastPositionY=null,e.zoomLastDistance=null,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.lastTouchStartTime=new Date().getTime(),e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.singleClickTimeout&&clearTimeout(e.singleClickTimeout),n.nativeEvent.changedTouches.length>1){var r=(n.nativeEvent.changedTouches[0].pageX+n.nativeEvent.changedTouches[1].pageX)/2;e.centerDiffX=r-e.props.cropWidth/2;var i=(n.nativeEvent.changedTouches[0].pageY+n.nativeEvent.changedTouches[1].pageY)/2;e.centerDiffY=i-e.props.cropHeight/2}e.longPressTimeout&&clearTimeout(e.longPressTimeout);var a=n.nativeEvent,c=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;if(e.longPressTimeout=setTimeout(function(){e.isLongPress=!0,e.props.onLongPress&&e.props.onLongPress({locationX:c,locationY:l,pageX:u,pageY:d})},e.props.longPressTime),n.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-e.lastClickTime<(e.props.doubleClickInterval||0)){if(e.lastClickTime=0,e.doubleClickX=n.nativeEvent.changedTouches[0].pageX,e.doubleClickY=n.nativeEvent.changedTouches[0].pageY,e.props.onDoubleClick&&e.props.onDoubleClick({locationX:n.nativeEvent.changedTouches[0].locationX,locationY:n.nativeEvent.changedTouches[0].locationY,pageX:e.doubleClickX,pageY:e.doubleClickY}),clearTimeout(e.longPressTimeout),e.isDoubleClick=!0,e.props.enableDoubleClickZoom){if(e.scale>1||e.scale<1)e.scale=1,e.positionX=0,e.positionY=0;else{var p=e.scale;e.scale=2;var f=e.scale-p;e.positionX=(e.props.cropWidth/2-e.doubleClickX)*f/e.scale,e.positionY=(e.props.cropHeight/2-e.doubleClickY)*f/e.scale}e.imageDidMove("centerOn"),Xt.Animated.parallel([Xt.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}),Xt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}),Xt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver})]).start()}}else e.lastClickTime=new Date().getTime()},onPanResponderMove:function(n,r){if(!e.isDoubleClick){if(n.nativeEvent.changedTouches.length<=1){var i=r.dx-(e.lastPositionX||0);e.lastPositionX===null&&(i=0);var a=r.dy-(e.lastPositionY||0);if(e.lastPositionY===null&&(a=0),e.lastPositionX=r.dx,e.lastPositionY=r.dy,e.horizontalWholeCounter+=i,e.verticalWholeCounter+=a,(Math.abs(e.horizontalWholeCounter)>5||Math.abs(e.verticalWholeCounter)>5)&&clearTimeout(e.longPressTimeout),e.props.panToMove){if(e.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(e.isHorizontalWrap=!0),e.props.imageWidth*e.scale>e.props.cropWidth){e.horizontalWholeOuterCounter>0?i<0?e.horizontalWholeOuterCounter>Math.abs(i)?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i:e.horizontalWholeOuterCounter<0&&(i>0?Math.abs(e.horizontalWholeOuterCounter)>i?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i),e.positionX+=i/e.scale;var c=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-c?(e.positionX=-c,e.horizontalWholeOuterCounter+=-1/1e10):e.positionX>c&&(e.positionX=c,e.horizontalWholeOuterCounter+=1/1e10),e.animatedPositionX.setValue(e.positionX)}else e.horizontalWholeOuterCounter+=i;e.horizontalWholeOuterCounter>(e.props.maxOverflow||0)?e.horizontalWholeOuterCounter=e.props.maxOverflow||0:e.horizontalWholeOuterCounter<-(e.props.maxOverflow||0)&&(e.horizontalWholeOuterCounter=-(e.props.maxOverflow||0)),e.horizontalWholeOuterCounter!==0&&e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(e.horizontalWholeOuterCounter)}e.props.imageHeight*e.scale>e.props.cropHeight?(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY)):e.props.enableSwipeDown&&!e.isHorizontalWrap&&(e.swipeDownOffset+=a,e.swipeDownOffset>0&&(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY),e.scale=e.scale-a/1e3,e.animatedScale.setValue(e.scale)))}}else if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.props.pinchToZoom){var l=void 0,u=void 0;n.nativeEvent.changedTouches[0].locationX>n.nativeEvent.changedTouches[1].locationX?(l=n.nativeEvent.changedTouches[1].pageX,u=n.nativeEvent.changedTouches[0].pageX):(l=n.nativeEvent.changedTouches[0].pageX,u=n.nativeEvent.changedTouches[1].pageX);var d=void 0,p=void 0;n.nativeEvent.changedTouches[0].locationY>n.nativeEvent.changedTouches[1].locationY?(d=n.nativeEvent.changedTouches[1].pageY,p=n.nativeEvent.changedTouches[0].pageY):(d=n.nativeEvent.changedTouches[0].pageY,p=n.nativeEvent.changedTouches[1].pageY);var f=u-l,m=p-d,h=Math.sqrt(f*f+m*m);if(e.zoomCurrentDistance=Number(h.toFixed(1)),e.zoomLastDistance!==null){var b=(e.zoomCurrentDistance-e.zoomLastDistance)/200,w=e.scale+b;w<(e.props.minScale||0)&&(w=e.props.minScale||0),w>(e.props.maxScale||0)&&(w=e.props.maxScale||0);var k=e.scale;e.scale=w,e.animatedScale.setValue(e.scale);var x=e.scale-k;e.positionX-=e.centerDiffX*x/e.scale,e.positionY-=e.centerDiffY*x/e.scale,e.animatedPositionX.setValue(e.positionX),e.animatedPositionY.setValue(e.positionY)}e.zoomLastDistance=e.zoomCurrentDistance}e.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(n,r){if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),!e.isDoubleClick&&!e.isLongPress){var i=Math.sqrt(r.dx*r.dx+r.dy*r.dy),a=n.nativeEvent,c=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;n.nativeEvent.changedTouches.length===1&&i<(e.props.clickDistance||0)?e.singleClickTimeout=setTimeout(function(){e.props.onClick&&e.props.onClick({locationX:c,locationY:l,pageX:u,pageY:d})},e.props.doubleClickInterval):(e.props.responderRelease&&e.props.responderRelease(r.vx,e.scale),e.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}}),e.resetScale=function(){e.positionX=0,e.positionY=0,e.scale=1,e.animatedScale.setValue(1)},e.panResponderReleaseResolve=function(){if(e.props.enableSwipeDown&&e.props.swipeDownThreshold&&e.swipeDownOffset>e.props.swipeDownThreshold){e.props.onSwipeDown&&e.props.onSwipeDown();return}if(e.props.enableCenterFocus&&e.scale<1&&(e.scale=1,Xt.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageWidth*e.scale<=e.props.cropWidth&&(e.positionX=0,Xt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale<=e.props.cropHeight&&(e.positionY=0,Xt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale>e.props.cropHeight){var n=(e.props.imageHeight*e.scale-e.props.cropHeight)/2/e.scale;e.positionY<-n?e.positionY=-n:e.positionY>n&&(e.positionY=n),Xt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}if(e.props.imageWidth*e.scale>e.props.cropWidth){var r=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-r?e.positionX=-r:e.positionX>r&&(e.positionX=r),Xt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}e.props.enableCenterFocus&&e.scale===1&&(e.positionX=0,e.positionY=0,Xt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start(),Xt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.imageDidMove("onPanResponderRelease")},e}return t.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},t.prototype.componentDidUpdate=function(e){(this.props.centerOn&&!e.centerOn||this.props.centerOn&&e.centerOn&&this.didCenterOnChange(e.centerOn,this.props.centerOn))&&this.centerOn(this.props.centerOn)},t.prototype.imageDidMove=function(e){this.props.onMove&&this.props.onMove({type:e,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},t.prototype.didCenterOnChange=function(e,n){return e.x!==n.x||e.y!==n.y||e.scale!==n.scale},t.prototype.centerOn=function(e){var n=this;this.positionX=e.x,this.positionY=e.y,this.scale=e.scale;var r=e.duration||300;Xt.Animated.parallel([Xt.Animated.timing(this.animatedScale,{toValue:this.scale,duration:r,useNativeDriver:!!this.props.useNativeDriver}),Xt.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:r,useNativeDriver:!!this.props.useNativeDriver}),Xt.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:r,useNativeDriver:!!this.props.useNativeDriver})]).start(function(){n.imageDidMove("centerOn")})},t.prototype.handleLayout=function(e){this.props.layoutChange&&this.props.layoutChange(e)},t.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},t.prototype.render=function(){var e={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},n=Xt.StyleSheet.flatten(this.props.style);return bb.createElement(Xt.View,{style:pf(pf(pf({},_G.default.container),n),{width:this.props.cropWidth,height:this.props.cropHeight}),...this.imagePanResponder.panHandlers},bb.createElement(Xt.Animated.View,{style:e,renderToHardwareTextureAndroid:this.props.useHardwareTextureAndroid},bb.createElement(Xt.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},t.defaultProps=new v2.ImageZoomProps,t}(bb.Component);jl.default=IG});var S2=Te(Kc=>{"use strict";s();var RG=Kc&&Kc.__createBinding||(Object.create?function(o,t,e,n){n===void 0&&(n=e),Object.defineProperty(o,n,{enumerable:!0,get:function(){return t[e]}})}:function(o,t,e,n){n===void 0&&(n=e),o[n]=t[e]}),TG=Kc&&Kc.__exportStar||function(o,t){for(var e in o)e!=="default"&&!t.hasOwnProperty(e)&&RG(t,o,e)};Object.defineProperty(Kc,"__esModule",{value:!0});var EG=b2();Kc.default=EG.default;TG(Tk(),Kc)});var Ek=Te(Sb=>{"use strict";s();Object.defineProperty(Sb,"__esModule",{value:!0});Sb.default=function(o,t,e){return{modalContainer:{backgroundColor:e,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:o,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:e},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:o,height:t,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:o,height:t,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:o,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:o,height:t},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};Sb.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var Dk=Te(wb=>{"use strict";s();Object.defineProperty(wb,"__esModule",{value:!0});var Mk=C(),Lk=z(),w2=Ek(),MG=function(){function o(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.useNativeDriver=!1,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(t,e){return Mk.createElement(Lk.View,{style:w2.simpleStyle.count},Mk.createElement(Lk.Text,{style:w2.simpleStyle.countText},t+"/"+e))},this.renderImage=function(t){return Mk.createElement(Lk.Image,t)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return o}();wb.Props=MG;var LG=function(){function o(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return o}();wb.State=LG});var x2=Te(Vs=>{"use strict";s();var DG=Vs&&Vs.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){o(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zl=Vs&&Vs.__assign||Object.assign||function(o){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r])}return o},NG=Vs&&Vs.__rest||function(o,t){var e={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&t.indexOf(n)<0&&(e[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(o);r<n.length;r++)t.indexOf(n[r])<0&&(e[n[r]]=o[n[r]]);return e};Object.defineProperty(Vs,"__esModule",{value:!0});var ot=C(),be=z(),C2=S2(),k2=Ek(),Nk=Dk(),AG=function(o){DG(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.state=new Nk.State,e.fadeAnim=new be.Animated.Value(0),e.standardPositionX=0,e.positionXNumber=0,e.positionX=new be.Animated.Value(0),e.width=0,e.height=0,e.styles=k2.default(0,0,"transparent"),e.hasLayout=!1,e.loadedIndex=new Map,e.handleLongPressWithIndex=new Map,e.imageRefs=[],e.resetImageByIndex=function(n){e.imageRefs[n]&&e.imageRefs[n].reset()},e.preloadImage=function(n){n<e.state.imageSizes.length&&e.loadImage(n+1)},e.handleHorizontalOuterRangeOffset=function(n){n===void 0&&(n=0),e.positionXNumber=e.standardPositionX+n,e.positionX.setValue(e.positionXNumber);var r=be.I18nManager.isRTL?-n:n;r<0?(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1):r>0&&(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1)},e.handleResponderRelease=function(n){n===void 0&&(n=0);var r=be.I18nManager.isRTL?-n:n,i=be.I18nManager.isRTL?e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0),a=be.I18nManager.isRTL?e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0);if(r>.7){e.goBack.call(e),(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1);return}else if(r<-.7){e.goNext.call(e),(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1);return}if(i)e.goBack.call(e);else if(a){e.goNext.call(e);return}else{e.resetPosition.call(e);return}},e.goBack=function(){if(e.state.currentShowIndex===0){e.resetPosition.call(e);return}e.positionXNumber=be.I18nManager.isRTL?e.standardPositionX-e.width:e.standardPositionX+e.width,e.standardPositionX=e.positionXNumber,be.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)-1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.goNext=function(){if(e.state.currentShowIndex===e.props.imageUrls.length-1){e.resetPosition.call(e);return}e.positionXNumber=be.I18nManager.isRTL?e.standardPositionX+e.width:e.standardPositionX-e.width,e.standardPositionX=e.positionXNumber,be.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)+1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.handleLongPress=function(n){e.props.saveToLocalByLongPress&&e.setState({isShowMenu:!0}),e.props.onLongPress&&e.props.onLongPress(n)},e.handleClick=function(){e.props.onClick&&e.props.onClick(e.handleCancel,e.state.currentShowIndex)},e.handleDoubleClick=function(){e.props.onDoubleClick&&e.props.onDoubleClick(e.handleCancel)},e.handleCancel=function(){e.hasLayout=!1,e.props.onCancel&&e.props.onCancel()},e.handleLayout=function(n){n.nativeEvent.layout.width!==e.width&&(e.hasLayout=!0,e.width=n.nativeEvent.layout.width,e.height=n.nativeEvent.layout.height,e.styles=k2.default(e.width,e.height,e.props.backgroundColor||"transparent"),e.forceUpdate(),e.jumpToCurrentImage())},e.saveToLocal=function(){e.props.onSave?e.props.onSave(e.props.imageUrls[e.state.currentShowIndex||0].url):(be.CameraRoll.saveToCameraRoll(e.props.imageUrls[e.state.currentShowIndex||0].url),e.props.onSaveToCamera(e.state.currentShowIndex)),e.setState({isShowMenu:!1})},e.handleLeaveMenu=function(){e.setState({isShowMenu:!1})},e.handleSwipeDown=function(){e.props.onSwipeDown&&e.props.onSwipeDown(),e.handleCancel()},e}return t.prototype.componentDidMount=function(){this.init(this.props)},t.getDerivedStateFromProps=function(e,n){return e.index!==n.prevIndexProp?{currentShowIndex:e.index,prevIndexProp:e.index}:null},t.prototype.componentDidUpdate=function(e,n){e.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),be.Animated.timing(this.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!this.props.useNativeDriver}).start())},t.prototype.init=function(e){var n=this;if(e.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new Nk.State);var r=[];e.imageUrls.forEach(function(i){r.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:e.index,prevIndexProp:e.index||0,imageSizes:r},function(){n.loadImage(e.index||0),n.jumpToCurrentImage(),be.Animated.timing(n.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!e.useNativeDriver}).start()})},t.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(be.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},t.prototype.loadImage=function(e){var n=this;if(this.state.imageSizes[e]&&!this.loadedIndex.has(e)){this.loadedIndex.set(e,!0);var r=this.props.imageUrls[e],i=Zl({},this.state.imageSizes[e]),a=function(){if(!(n.state.imageSizes[e]&&n.state.imageSizes[e].status!=="loading")){var u=n.state.imageSizes.slice();u[e]=i,n.setState({imageSizes:u})}};if(this.state.imageSizes[e].status!=="success"){if(this.state.imageSizes[e].width>0&&this.state.imageSizes[e].height>0){i.status="success",a();return}var c=!1,l=!1;if((!r.url||r.url.startsWith("file:"))&&(l=!0),r.width&&r.height){this.props.enablePreload&&l===!1&&be.Image.prefetch(r.url),i.width=r.width,i.height=r.height,i.status="success",a();return}be.Image.getSize(r.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=be.Image.resolveAssetSource(r.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch{i.status="fail",a()}})}}},t.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,be.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150,useNativeDriver:!!this.props.useNativeDriver}).start()},t.prototype.getContent=function(){var e=this,n=this.width,r=this.height,i=this.props.imageUrls.map(function(a,c){if((e.state.currentShowIndex||0)>c+1||(e.state.currentShowIndex||0)<c-1)return ot.createElement(be.View,{key:c,style:{width:n,height:r}});e.handleLongPressWithIndex.has(c)||e.handleLongPressWithIndex.set(c,e.handleLongPress.bind(e,a));var l=e.state.imageSizes[c]&&e.state.imageSizes[c].width,u=e.state.imageSizes[c]&&e.state.imageSizes[c].height,d=e.state.imageSizes[c];if(!d||!d.status)return ot.createElement(be.View,{key:c,style:{width:n,height:r}});if(l>n){var p=n/l;l*=p,u*=p}if(u>r){var f=r/u;l*=f,u*=f}var m=function(h){var b=h.children,w=NG(h,["children"]);return ot.createElement(C2.default,{cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,pinchToZoom:e.props.enableImageZoom,enableDoubleClickZoom:e.props.enableImageZoom,doubleClickInterval:e.props.doubleClickInterval,...w},b)};switch(d.status){case"loading":return ot.createElement(m,{key:c,style:Zl({},e.styles.modalContainer,e.styles.loadingContainer),imageWidth:n,imageHeight:r},ot.createElement(be.View,{style:e.styles.loadingContainer},e.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=Zl({},e.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=Zl({uri:a.url},a.props.source)),e.props.enablePreload&&e.preloadImage(e.state.currentShowIndex||0),ot.createElement(C2.default,{key:c,ref:function(h){return e.imageRefs[c]=h},cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,panToMove:!e.state.isShowMenu,pinchToZoom:e.props.enableImageZoom&&!e.state.isShowMenu,enableDoubleClickZoom:e.props.enableImageZoom&&!e.state.isShowMenu,doubleClickInterval:e.props.doubleClickInterval,minScale:e.props.minScale,maxScale:e.props.maxScale},e.props.renderImage(a.props));case"fail":return ot.createElement(m,{key:c,style:e.styles.modalContainer,imageWidth:e.props.failImageSource?e.props.failImageSource.width:n,imageHeight:e.props.failImageSource?e.props.failImageSource.height:r},e.props.failImageSource&&e.props.renderImage({source:{uri:e.props.failImageSource.url},style:{width:e.props.failImageSource.width,height:e.props.failImageSource.height}}))}});return ot.createElement(be.Animated.View,{style:{zIndex:9}},ot.createElement(be.Animated.View,{style:Zl({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),ot.createElement(be.View,{style:this.styles.arrowLeftContainer},ot.createElement(be.TouchableWithoutFeedback,{onPress:this.goBack},ot.createElement(be.View,null,this.props.renderArrowLeft()))),ot.createElement(be.View,{style:this.styles.arrowRightContainer},ot.createElement(be.TouchableWithoutFeedback,{onPress:this.goNext},ot.createElement(be.View,null,this.props.renderArrowRight()))),ot.createElement(be.Animated.View,{style:Zl({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&ot.createElement(be.View,{style:this.styles.watchOrigin},ot.createElement(be.TouchableOpacity,{style:this.styles.watchOriginTouchable},ot.createElement(be.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),ot.createElement(be.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},t.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?ot.createElement(be.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):ot.createElement(be.View,{style:this.styles.menuContainer},ot.createElement(be.View,{style:this.styles.menuShadow}),ot.createElement(be.View,{style:this.styles.menuContent},ot.createElement(be.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},ot.createElement(be.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),ot.createElement(be.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},ot.createElement(be.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},t.prototype.render=function(){var e=null;return e=ot.createElement(be.View,null,this.getContent(),this.getMenu()),ot.createElement(be.View,{onLayout:this.handleLayout,style:Zl({flex:1,overflow:"hidden"},this.props.style)},e)},t.defaultProps=new Nk.Props,t}(ot.Component);Vs.default=AG});var P2=Te(mf=>{"use strict";s();Object.defineProperty(mf,"__esModule",{value:!0});var O2=x2();mf.ImageViewer=O2.default;var BG=Dk();mf.ImageViewerPropsDefine=BG.Props;mf.default=O2.default});s();s();(function(){"use strict";var o="ListFormat"in Intl;function t(G,te){if(!(G instanceof te))throw new TypeError("Cannot call a class as a function")}function e(G,te){for(var $=0;$<te.length;$++){var Q=te[$];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(G,Q.key,Q)}}function n(G,te,$){return te&&e(G.prototype,te),$&&e(G,$),G}var r=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function c(G){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function($){return typeof $}:c=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},c(G)}function l(G){return typeof Symbol=="function"&&c(Symbol.iterator)==="symbol"?l=function($){return c($)}:l=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":c($)},l(G)}function u(G){if(G==null)throw new TypeError("Argument ".concat(G," cannot be converted to an Object"));return typeof G=="boolean"?new Boolean(G):typeof G=="number"?new Number(G):typeof G=="string"?new String(G):l(G)==="symbol"?new Object(G):G}var d;function p(G){d=G}function f(){return d}function m(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var h=new WeakMap,b={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function w(G,te,$){var Q=h.get(G);Q==null&&(Q=Object.create(null),h.set(G,Q)),Q[te]=$}function k(G,te){var $=h.get(G);if($==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return $[te]}function x(G,te){var $=h.get(G);return $!=null&&te in $}var O=/-u(?:-[0-9a-z]{2,8})+/gi;function _(G){return G.replace(O,"")}function I(G,te){for(var $=te;;){if(G.includes($))return $;var Q=$.lastIndexOf("-");if(Q===-1)return;Q>=2&&$.charAt(Q-2)==="-"&&(Q-=2),$=$.slice(0,Q)}}function N(G,te){var $=[],Q=!0,Re=!1,We=void 0;try{for(var Wt=te[Symbol.iterator](),rt;!(Q=(rt=Wt.next()).done);Q=!0){var mt=rt.value,gt=_(mt),Ut=I(G,gt);Ut!==void 0&&$.push(mt)}}catch(Fn){Re=!0,We=Fn}finally{try{!Q&&Wt.return!=null&&Wt.return()}finally{if(Re)throw We}}return $}function T(G,te){return N(G,te)}function E(G){return typeof G=="string"||l(G)==="symbol"}function L(G,te){if(l(G)!=="object")throw new TypeError("Given argument ".concat(G," must be of type Object"));if(!E(te))throw new TypeError("Given argument ".concat(te," must be a PropertyKey"));return G[te]}function V(G){return!!G}function j(G){return G+""}function oe(G,te,$,Q,Re){var We=L(G,te);if(We!==void 0){if($!=="boolean"&&$!=="string")throw new TypeError("Expected type ".concat($," to be 'boolean' or 'string"));if($==="boolean"&&(We=V(We)),$==="string"&&(We=j(We)),Q!==void 0&&!Q.includes(We))throw new RangeError("Value ".concat(We," out of range for options property ").concat(te));return We}else return Re}function H(G,te,$){var Q;return $!==void 0?($=u($),Q=oe($,"localeMatcher","string",a,"best fit")):Q="best fit",Q==="best fit"?T(G,te):N(G,te)}function J(G){var te=G.availableLocales,$=G.requestedLocales,Q=Object.create(null),Re=!0,We=!1,Wt=void 0;try{for(var rt=$[Symbol.iterator](),mt;!(Re=(mt=rt.next()).done);Re=!0){var gt=mt.value,Ut=_(gt),Fn=I(te,Ut);if(Fn!==void 0){if(Q.locale=Fn,gt!==Ut){var dr=gt.match(O);Q.extension=dr==null?"":dr[0]}return Q}}}catch(el){We=!0,Wt=el}finally{try{!Re&&rt.return!=null&&rt.return()}finally{if(We)throw Wt}}var pr=m();return Q.locale=pr,Q}function ie(G){return J(G)}function Ze(G,te,$,Q,Re){var We=$.localeMatcher,Wt=We==="lookup"?J({availableLocales:G,requestedLocales:te}):ie({availableLocales:G,requestedLocales:te}),rt=Wt.locale,mt=Object.create(null);mt.dataLocale=rt;var gt="-u";if(gt.length>2){var Ut=String.prototype.indexOf.call(rt,"-x-");if(Ut===-1)rt="".concat(rt).concat(gt);else{var Fn=rt.slice(0,Ut),dr=rt.slice(Ut);rt="".concat(Fn).concat(gt).concat(dr)}rt=Intl.getCanonicalLocales(rt)[0]}return mt.locale=rt,mt}function pt(G){if(Array.isArray(G)){for(var te=0,$=new Array(G.length);te<G.length;te++)$[te]=G[te];return $}}function nt(G){if(Symbol.iterator in Object(G)||Object.prototype.toString.call(G)==="[object Arguments]")return Array.from(G)}function wt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Jt(G){return pt(G)||nt(G)||wt()}function Le(G){if(G===void 0)return[];var te=Jt(G);if(te.some(function($){return typeof $!="string"}))throw new TypeError("All List items must be strings");return te}function dn(G){return Object.prototype.toString.call(G)==="[object Object]"}function Vo(G){return Array.isArray(G)||dn(G)}function Wn(G,te){for(var $=[],Q=String.prototype.indexOf.call(G,"{",0),Re=0,We=G.length;G[Q]!==void 0;){var Wt=String.prototype.indexOf.call(G,"}",Q);if(Wt<=Q)throw new TypeError("Expected endIndex: ".concat(Wt," to be greater than beginIndex: ").concat(Q));if(Q>Re){var rt=G.slice(Re,Q);$.push({type:"literal",value:rt})}var mt=G.slice(Q+1,Wt);if(te[Number(mt)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(mt));var gt=te[Number(mt)];if(Vo(gt.value)){var Ut=!0,Fn=!1,dr=void 0;try{for(var pr=gt.value[Symbol.iterator](),el;!(Ut=(el=pr.next()).done);Ut=!0){var Cf=el.value;$.push(Cf)}}catch(Ub){Fn=!0,dr=Ub}finally{try{!Ut&&pr.return!=null&&pr.return()}finally{if(Fn)throw dr}}}else $.push(gt);Re=Wt+1,Q=String.prototype.indexOf.call(G,"{",Re)}if(Re<We){var Xb=G.slice(Re,We);$.push({type:"literal",value:Xb})}return $}function sa(G,te){var $,Q=te.length;if(Q===0)return[];if(Q===2){$=k(G,"templatePair");var Re={type:"element",value:te[0]},We={type:"element",value:te[1]},Wt={0:Re,1:We};return Wn($,Wt)}for(var rt={type:"element",value:te[Q-1]},mt=[rt],gt=Q-2;gt>=0;){gt===0?$=k(G,"templateStart"):gt<Q-2?$=k(G,"templateMiddle"):$=k(G,"templateEnd");var Ut={type:"element",value:te[gt]},Fn={type:"element",value:mt},dr={0:Ut,1:Fn};mt=Wn($,dr),gt--}return mt}function Qc(G,te){var $=sa(G,te),Q="",Re=!0,We=!1,Wt=void 0;try{for(var rt=$[Symbol.iterator](),mt;!(Re=(mt=rt.next()).done);Re=!0){var gt=mt.value;Q+=gt.value}}catch(Ut){We=!0,Wt=Ut}finally{try{!Re&&rt.return!=null&&rt.return()}finally{if(We)throw Wt}}return Q}function lr(G,te){return sa(G,te)}var ur=function(){function G(){t(this,G);var te=arguments[0],$=arguments[1];if((this instanceof G?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var Q=Intl.getCanonicalLocales(te);$=$===void 0?Object.create(null):u($);var Re=Object.create(null),We=oe($,"localeMatcher","string",a,"best fit");Re.localeMatcher=We;var Wt=oe($,"type","string",r,"conjunction");w(this,"type",Wt);var rt=oe($,"style","string",i,"long");w(this,"style",rt);var mt=b.localeData,gt=Ze(b.availableLocales,Q,Re),Ut=gt.dataLocale,Fn=mt[Ut],dr=Fn.formats[Wt],pr=dr[rt];w(this,"templatePair",pr.Pair),w(this,"templateStart",pr.Start),w(this,"templateMiddle",pr.Middle),w(this,"templateEnd",pr.End),w(this,"locale",gt.locale),w(this,"initializedListFormat",this)}return n(G,[{key:"format",value:function($){var Q=this;if(!(Q instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!x(Q,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var Re=Le($);return Qc(Q,Re)}},{key:"formatToParts",value:function($){var Q=this;if(!(Q instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!x(Q,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var Re=Le($);return lr(Q,Re)}},{key:"resolvedOptions",value:function(){var $=this;if(!($ instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!x($,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var Q=k(this,"locale"),Re=k(this,"type"),We=k(this,"style");return{locale:Q,type:Re,style:We}}}],[{key:"supportedLocalesOf",value:function($){var Q=arguments[1],Re=b.availableLocales,We=Intl.getCanonicalLocales($);return H(Re,We,Q)}},{key:"__addLocaleData",value:function($){var Q=$.data,Re=$.locale,We=f();We==null&&p(Re),b.localeData[Re]=Q,b.availableLocales.includes(Re)||b.availableLocales.push(Re)}}]),G}();Object.defineProperty(ur.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function $a(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=ur}o||$a()})();s();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});var ux=y(z());s();s();function FP(){return`https://${ca.services.content.host}`}s();function zP(o,t){let e=[],n=0;for(;n<o.length;)e.push(o.slice(n,n+t)),n+=t;return e}function VP(o){let t=o.reduce((r,i)=>r+i.length,0),e=new Uint8Array(t),n=0;return o.forEach(r=>{e.set(r,n),n+=r.length}),e}s();function qP(o){return{type:"link",id:ma(),edits:{},...o}}s();var Fp=100;var wS=200;function GP(o){return o.replace(/(\r\n|\r|\n)/g," ")}function Wg(o){return GP(o).trim().slice(0,Fp).trim()||"Untitled"}function HP(o){return GP(o).trim().slice(0,wS).trim()}function b9(o){return _x()(["docs","editorial","landing"]).includes(o)}function Bu(o){return typeof o.cover?.yPos=="number"}function Wu(o){return o?.layout?typeof o.layout=="string"&&b9(o.layout)?o.layout:"custom":"docs"}function Fu(o){let t=Wu(o),e={docs:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!0,outline:!0,pagination:!0},editorial:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!0,pagination:!0},landing:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!1,pagination:!0}};switch(t){case"docs":return e.docs;case"editorial":return e.editorial;case"landing":return e.landing;case"custom":return typeof o?.layout=="object"?o.layout:e.docs;default:De(t)}}s();function KP(o,t){let{pageId:e,rename:n=!1}=t;return{...structuredClone(o),id:e,title:n?Wg(`Copy of ${o.title}`):o.title,git:void 0,pages:o.type==="link"?void 0:[]}}s();var S9=it("hive:revisions:diff");function CS(o,t){let e=[];return t.forEach(n=>{let r=o[n];if(!r){S9.warning(`Couldn't find page ${n} although it is referenced. This may indicate a bad page tree normalization.`);return}e.push({renderKey:n,page:r,pages:r.type==="link"?[]:CS(o,r.pages)})}),e}s();function XP(o,t){return{edits:kO([t]),...o,id:o.id||ma()}}s();function UP(o,t,e,n){if(e.blobId)return new URL(`/content/${t}/blobs/${e.blobId}/${e.name}`,o).toString();if(e.downloadURL)return n?n(e.downloadURL):e.downloadURL;throw new Error("File does not have a download URL")}s();s();function rc(o,t,e={}){let n;if(e.into){let r=W.getIn(o,["pages",e.into]);if(!r||!vu(r))throw new Error(`Cannot insert page into ${e.into}`);n=W.get(r,"pages")}else n=W.getIn(o,["rootPages"]);if(!n)throw new Error(`Cannot insert page into ${e.into}`);e.at!==void 0?W.insert(n,e.at,[t.id]):W.push(n,[t.id]),W.setIn(o,["pages",t.id],Yn(o)?fa(t):t)}function YP(o,t,e){let n=fn(o,e),r=n?W.get(n,"pages"):W.get(o,"rootPages"),i=W.findIndex(r,c=>c===e);if(i<0)return{at:i};let a=n?W.get(n,"id"):void 0;return t==="after"?{into:a,at:i+1}:{into:a,at:i}}function $P(o,t,e){let n=YP(o,"before",e);if(!(n.at===void 0||n?.at<0))return rc(o,t,n)}function Fg(o,t,e){let n=YP(o,"after",e);if(!(n.at===void 0||n?.at<0))return rc(o,t,n)}s();function qi(o,t,e){let n=W.getIn(o,["pages",t]);if(n)if(typeof e=="function"){e(n);return}else Object.entries(e).forEach(([r,i])=>{W.set(n,r,Yn(o)?fa(i):i)})}function jP(o,t,e){qi(o,t,n=>{if(!Ip(n))return;let r=Fu($n(n));W.set(n,"layout",{...r,...e})})}function ZP(o,t,e){qi(o,t,{title:Wg(e)})}function JP(o,t,e){qi(o,t,n=>{Ip(n)&&W.set(n,"description",HP(e))})}function kS(o,t){let{originalPageId:e,parentPageId:n}=t,r=t.newPageId||ma(),i=W.getIn(o,["pages",e]);if(!i)return;let a=KP(Yn(i)?$n(i):i,{pageId:r,rename:!n});n?rc(o,a,{into:n}):Fg(o,a,e);let c;if(vu(i)){let l=W.get(i,"pages");c=W.map(l,u=>{let d=ma();return kS(o,{originalPageId:u,parentPageId:a.id,newPageId:d}),d})}return qi(o,a.id,{pages:c}),r}s();s();s();function ic(o,t){let e=IO(o,t),n=[];return e.forEach(r=>{n.push(r),W.get(r,"type")!=="link"&&n.push(...ic(o,W.get(r,"id")))}),n}function QP(o,t,e){return W.getIn(o,["pages",e])?bu(o,e).some(i=>W.get(i,"id")===t):!1}function zp(o,t,e={}){let n=W.getIn(o,["pages",t]);if(!n)return;let r=fn(o,t);if(e.deleteEmptyGroupParent&&r&&W.get(r,"type")==="group"&&W.get(r,"pages").length===1)return zp(o,W.get(r,"id"));let i=[W.get(n,"id")];W.get(n,"type")!=="link"&&ic(o,t).forEach(u=>{i.push(W.get(u,"id"))}),[...W.entries(W.get(o,"pages"))].some(([,l])=>Ip(l)&&!i.includes(W.get(l,"id")))&&(W.delArrayValue(r?W.get(r,"pages"):W.get(o,"rootPages"),t),i.forEach(l=>{W.del(W.get(o,"pages"),l);let u=W.get(o,"conflicts");u&&W.getIn(u,["pages",l])&&W.delIn(u,["pages",l])}))}function w9(o,t,e){if(t===e)return!1;let n=W.getIn(o,["pages",t]),r=W.getIn(o,["pages",e]);if(!n||!r||_O(r)||cS(n))return!1;let i=bu(o,e);return!(W.findIndex(i,a=>W.get(a,"id")===t)>=0)}function zg(o,t,e,n={}){let r=W.getIn(o,["pages",t]),i=e?W.getIn(o,["pages",e]):void 0;if(i&&!vu(i))throw new Error("Cannot move page under a link");if(!r||e&&!w9(o,t,e))return;let a=W.get(o,"rootPages"),c=i?W.get(i,"pages"):a,l=typeof n.at=="number"?n.at:c.length,u=fn(o,t),d=u?W.get(u,"pages"):a,p=W.findIndex(d,m=>m===t),f=u?W.get(u,"id")===e:!e;l===p&&f||(p>=0&&(W.delArrayIndex(d,p,1),f&&(l=p<=l?l-1:l)),W.insert(c,l,[t]),n.deleteEmptyGroupParent&&u&&cS(u)&&W.get(u,"pages").length===0&&zp(o,W.get(u,"id")))}function e_(o,t,e){let n=fn(o,e),r=n?W.get(n,"pages"):W.get(o,"rootPages"),i=W.findIndex(r,a=>a===e);return{at:t==="after"?i+1:i,parentId:n?W.get(n,"id"):void 0}}function t_(o,t,e){let{at:n,parentId:r}=e_(o,"before",e);n<0||zg(o,t,r,{at:n})}function o_(o,t,e){let{at:n,parentId:r}=e_(o,"after",e);n<0||zg(o,t,r,{at:n})}s();function n_(o,t){if(W.getIn(o,["files",t.id]))throw new Error("File with same ID already exists in revision");let n=W.get(o,"files");W.set(n,t.id,t)}function r_(o,t){W.delIn(o,["files",t])}function i_(o,t,e){let n=W.getIn(o,["files",t]);if(!n)throw new Error("File doesn't exist in revision");Object.entries(e).forEach(([r,i])=>{W.set(n,r,Yn(o)?fa(i):i)})}s();var ac=it("normalizeRevision");function s_(o){let t=W.get(o,"id"),e=W.get(o,"contentId"),n=W.get(o,"pages"),r=W.get(o,"rootPages"),i=W.get(o,"conflicts"),a=W.values(W.get(o,"parents")),c=new Set(W.keys(n)),l;if(a.length>3)throw new Error(`Revision ${e}/${t} has more than 3 parents`);if(a.includes(t)){let m=a.filter(h=>h!==t);if(m.length===0)throw new Error(`Revision ${e}/${t} has no more parents after removing itself as parent`);W.set(o,"parents",m),ac.warning(`${e}/${t}: updated parents to remove itself as parent. New parents:`,m)}let u=W.get(o,"customFields");u?a_(u):W.set(o,"customFields",{});let d=m=>{let h=[];if(m.forEach(b=>{p(b)&&h.push(b)}),h.length!==m.length)return h},p=m=>{if(!c.has(m))return!1;c.delete(m);let h=W.get(n,m);if(!h)return!1;let b=W.get(h,"customFields");if(b&&a_(b),W.get(h,"type")==="link")return C9(e,t,m,h),!0;let w=h;l===void 0&&W.get(h,"type")==="document"&&(l=W.get(h,"id"));let k=d(W.get(w,"pages"));return k&&(W.set(w,"pages",k),ac.warning(`${e}/${t}: updated children for page ${m}. New children pages:`,k)),!0},f=d(r);if(f&&(W.set(o,"rootPages",f),ac.warning(`${e}/${t}: normalized rootPages. New root pages:`,f)),c.size>0){let m=Array.from(c);W.push(r,m),ac.warning(`${e}/${t}: made pages with invalid parent into rootPages. Pages:`,m)}if(!l){let m=OO();rc(o,m),ac.warning(`${e}/${t}: created empty page document ${m.id} as none were found. `)}if(i!==void 0){let m=W.get(i,"pages"),h=W.keys(m),b=h.reduce((w,k)=>{let x=W.get(m,k),O=W.get(n,k);return(x===!1||x==="deleted-in-base")&&!O||O&&W.get(O,"type")==="link"?w.add(k):w},new Set);b.size>0&&(b.size===h.length?(W.del(o,"conflicts"),ac.warning(`${e}/${t}: normalized conflicts. All were invalid and have been removed.`)):(b.forEach(w=>{W.del(m,w)}),ac.warning(`${e}/${t}: normalized conflicts. New conflicts:`,i)))}}function a_(o){for(let[t,e]of W.entries(o)){let n=W.get(e,"value");typeof n!="string"&&typeof n!="number"&&typeof n!="boolean"&&!Array.isArray($n(n))&&W.del(o,t)}}function C9(o,t,e,n){let r=W.get(n,"target");(typeof r!="object"||typeof W.get(r,"kind")!="string")&&(ac.warning(`${o}/${t}: normalized invalid link ${e}, with target ${JSON.stringify($n(r))}`),W.set(n,"type","document"),W.set(n,"pages",[]),W.del(n,"target"))}s();function c_(o){return W.get(o,"conflicts")!==void 0}function k9(o,t,e){if(!c_(o))return;let n=W.getIn(o,["conflicts","pages"]);n&&W.has(n,t)&&W.set(n,t,e),x9(o)}function x9(o){if(!c_(o))return;let t=W.getIn(o,["conflicts","pages"]);if(t){for(let[,e]of W.entries(t))if(e!==!1)return;W.del(o,"conflicts")}}function l_(o,t){k9(o,t,!1)}s();function u_(o,t,e=void 0){qi(o,t,n=>{if(W.get(n,"type")!=="document")return;let i={ref:e,yPos:0};W.set(n,"cover",Yn(o)?fa(i):i)})}function d_(o,t){qi(o,t,e=>{W.get(e,"type")==="document"&&W.del(e,"cover")})}function p_(o,t,e){qi(o,t,n=>{if(W.get(n,"type")!=="document")return;let i=W.get(n,"cover");i&&W.set(i,"yPos",e)})}s();function m_(o,t="Page",e=!1){let n=W.get(o,"pages"),i=W.values(n).map(l=>W.get(l,"title")),a=new Set(i);if(!e&&!a.has(t))return t;let c=l=>{let u=` ${l}`,d=`${t.slice(0,Fp-u.length)}${u}`;return a.has(d)?c(l+1):d};return c(1)}s();function f_(o){W.get(o,"customFields")||W.set(o,"customFields",{})}function g_(o,t){f_(o),y_(o,t)}function h_(o,t,e){let n=W.getIn(o,["pages",t]);n&&(f_(n),y_(n,e))}function y_(o,t){Object.entries(t).forEach(([e,n])=>{W.getIn(o,["customFields",e])?W.setIn(o,["customFields",e,"value"],n.value):W.setIn(o,["customFields",e],Yn(o)?fa(n):n)})}s();function v_(o,t){let e=W.get(o,"edits");W.set(o,"edits",Pp(e,Array.isArray(t)?t:[t]))}s();function b_(o,t,e){let n=W.getIn(o,["pages",t,"edits"]);if(!n)return;let r=(()=>Array.isArray(e)?Pp(n,e):typeof e=="string"?Pp(n,[e]):xO(n,e))();W.setIn(o,["pages",t,"edits"],r)}s();function Vg(o){return o.getMap("data")}s();var S_=ri(o=>({id:o.get("id"),type:o.get("type"),contentId:o.get("contentId"),conflicts:$n(o.get("conflicts")),parents:o.get("parents").toArray(),mergedFrom:o.get("mergedFrom"),rolledBackBy:o.get("rolledBackBy"),git:$n(o.get("git")),rootPages:o.get("rootPages").toArray(),pages:O9(o.get("pages")),files:P9(o.get("files")),edits:$n(o.get("edits")),customFields:$n(o.get("customFields"))})),O9=ri(o=>{let t={};return o.forEach((e,n)=>{t[n]=Yn(e)?w_(e):$n(e)}),t}),P9=ri(o=>{let t={};return o.forEach((e,n)=>{t[n]=Yn(e)?w_(e):$n(e)}),t}),w_=ri(o=>$n(o));s();var C_={insertPage:rc,insertPageAfter:Fg,insertPageBefore:$P,removePage:zp,updatePage:qi,updatePageLayout:jP,movePage:zg,movePageAfter:o_,movePageBefore:t_,addPageCover:u_,removePageCover:d_,movePageCover:p_,renamePage:ZP,setPageDescription:JP,duplicatePage:kS,resolveConflict:l_,insertFile:n_,removeFile:r_,updateFile:i_,getPageParent:fn,getUniquePageTitle:m_,updateRevisionCustomFields:g_,updatePageCustomFields:h_,markRevisionAsEdited:v_,markPageAsEdited:b_};function k_(o){let t={revision:o};for(let e in C_)t[e]=(...n)=>C_[e](o,...n);return t}s();s();s();var yo=y(m9()),ve=yo.Reader,Gi=yo.Writer,D=yo.util,U=yo.roots.default||(yo.roots.default={}),SU=U.PromptInitMessage=(()=>{function o(t){if(t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id=0,o.prototype.index=0,o.prototype.count=0,o.prototype.stateVector=D.newBuffer([]),o.prototype.version=0,o.create=function(e){return new o(e)},o.encode=function(e,n){return n||(n=Gi.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.stateVector),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.PromptInitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.stateVector=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("stateVector"))throw D.ProtocolError("missing required 'stateVector'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!D.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!D.isInteger(e.count))return"count: integer expected";if(!(e.stateVector&&typeof e.stateVector.length=="number"||D.isString(e.stateVector)))return"stateVector: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},o.fromObject=function(e){if(e instanceof U.PromptInitMessage)return e;let n=new U.PromptInitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.stateVector!=null&&(typeof e.stateVector=="string"?D.base64.decode(e.stateVector,n.stateVector=D.newBuffer(D.base64.length(e.stateVector)),0):e.stateVector.length>=0&&(n.stateVector=e.stateVector)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},o.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.stateVector="":(r.stateVector=[],n.bytes!==Array&&(r.stateVector=D.newBuffer(r.stateVector))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.stateVector!=null&&e.hasOwnProperty("stateVector")&&(r.stateVector=n.bytes===String?D.base64.encode(e.stateVector,0,e.stateVector.length):n.bytes===Array?Array.prototype.slice.call(e.stateVector):e.stateVector),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?U.UpdateFormatVersion[e.version]===void 0?e.version:U.UpdateFormatVersion[e.version]:e.version),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/PromptInitMessage"},o})(),wU=U.InitMessage=(()=>{function o(t){if(t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id=0,o.prototype.index=0,o.prototype.count=0,o.prototype.update=D.newBuffer([]),o.prototype.version=0,o.create=function(e){return new o(e)},o.encode=function(e,n){return n||(n=Gi.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.InitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw D.ProtocolError("missing required 'update'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!D.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!D.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||D.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},o.fromObject=function(e){if(e instanceof U.InitMessage)return e;let n=new U.InitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?D.base64.decode(e.update,n.update=D.newBuffer(D.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},o.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=D.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?D.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?U.UpdateFormatVersion[e.version]===void 0?e.version:U.UpdateFormatVersion[e.version]:e.version),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/InitMessage"},o})(),CU=U.UpdateMessage=(()=>{function o(t){if(t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id=0,o.prototype.index=0,o.prototype.count=0,o.prototype.update=D.newBuffer([]),o.prototype.version=0,o.create=function(e){return new o(e)},o.encode=function(e,n){return n||(n=Gi.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.UpdateMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw D.ProtocolError("missing required 'update'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!D.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!D.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||D.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},o.fromObject=function(e){if(e instanceof U.UpdateMessage)return e;let n=new U.UpdateMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?D.base64.decode(e.update,n.update=D.newBuffer(D.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},o.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=D.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?D.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?U.UpdateFormatVersion[e.version]===void 0?e.version:U.UpdateFormatVersion[e.version]:e.version),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdateMessage"},o})(),_9=U.StoredUpdate=(()=>{function o(t){if(t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.update=D.newBuffer([]),o.prototype.version=0,o.create=function(e){return new o(e)},o.encode=function(e,n){return n||(n=Gi.create()),n.uint32(18).bytes(e.update),n.uint32(24).int32(e.version),n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.StoredUpdate;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 2:{i.update=e.bytes();break}case 3:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("update"))throw D.ProtocolError("missing required 'update'",{instance:i});if(!i.hasOwnProperty("version"))throw D.ProtocolError("missing required 'version'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!(e.update&&typeof e.update.length=="number"||D.isString(e.update)))return"update: buffer expected";switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},o.fromObject=function(e){if(e instanceof U.StoredUpdate)return e;let n=new U.StoredUpdate;switch(e.update!=null&&(typeof e.update=="string"?D.base64.decode(e.update,n.update=D.newBuffer(D.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},o.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=D.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?D.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?U.UpdateFormatVersion[e.version]===void 0?e.version:U.UpdateFormatVersion[e.version]:e.version),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/StoredUpdate"},o})(),kU=U.UpdatePresenceMessage=(()=>{function o(t){if(this.data={},this.positions={},t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id=0,o.prototype.data=D.emptyObject,o.prototype.positions=D.emptyObject,o.create=function(e){return new o(e)},o.encode=function(e,n){if(n||(n=Gi.create()),n.uint32(8).int32(e.id),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(26).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.UpdatePresenceMessage,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.data[a]=c;break}case 3:{i.positions===D.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",c=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!D.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(e.positions!=null&&e.hasOwnProperty("positions")){if(!D.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||D.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},o.fromObject=function(e){if(e instanceof U.UpdatePresenceMessage)return e;let n=new U.UpdatePresenceMessage;if(e.id!=null&&(n.id=e.id|0),e.data){if(typeof e.data!="object")throw TypeError(".UpdatePresenceMessage.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.positions){if(typeof e.positions!="object")throw TypeError(".UpdatePresenceMessage.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?D.base64.decode(e.positions[r[i]],n.positions[r[i]]=D.newBuffer(D.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},o.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults&&(r.id=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?D.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdatePresenceMessage"},o})(),xU=U.AckMessage=(()=>{function o(t){if(t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id=0,o.prototype.message=0,o.create=function(e){return new o(e)},o.encode=function(e,n){return n||(n=Gi.create()),n.uint32(8).int32(e.id),n.uint32(16).int32(e.message),n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.AckMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.message=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("message"))throw D.ProtocolError("missing required 'message'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isInteger(e.id)?D.isInteger(e.message)?null:"message: integer expected":"id: integer expected"},o.fromObject=function(e){if(e instanceof U.AckMessage)return e;let n=new U.AckMessage;return e.id!=null&&(n.id=e.id|0),e.message!=null&&(n.message=e.message|0),n},o.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.message=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AckMessage"},o})(),OU=U.BroadcastPresencesMessage=(()=>{function o(t){if(this.presences={},t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id=0,o.prototype.presences=D.emptyObject,o.prototype.selfClientId="",o.create=function(e){return new o(e)},o.encode=function(e,n){if(n||(n=Gi.create()),n.uint32(8).int32(e.id),e.presences!=null&&Object.hasOwnProperty.call(e,"presences"))for(let r=Object.keys(e.presences),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]),U.Presence.encode(e.presences[r[i]],n.uint32(18).fork()).ldelim().ldelim();return n.uint32(26).string(e.selfClientId),n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.BroadcastPresencesMessage,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.presences===D.emptyObject&&(i.presences={});let u=e.uint32()+e.pos;for(a="",c=null;e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=U.Presence.decode(e,e.uint32());break;default:e.skipType(d&7);break}}i.presences[a]=c;break}case 3:{i.selfClientId=e.string();break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("selfClientId"))throw D.ProtocolError("missing required 'selfClientId'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.presences!=null&&e.hasOwnProperty("presences")){if(!D.isObject(e.presences))return"presences: object expected";let n=Object.keys(e.presences);for(let r=0;r<n.length;++r){let i=U.Presence.verify(e.presences[n[r]]);if(i)return"presences."+i}}return D.isString(e.selfClientId)?null:"selfClientId: string expected"},o.fromObject=function(e){if(e instanceof U.BroadcastPresencesMessage)return e;let n=new U.BroadcastPresencesMessage;if(e.id!=null&&(n.id=e.id|0),e.presences){if(typeof e.presences!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences={};for(let r=Object.keys(e.presences),i=0;i<r.length;++i){if(typeof e.presences[r[i]]!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences[r[i]]=U.Presence.fromObject(e.presences[r[i]])}}return e.selfClientId!=null&&(n.selfClientId=String(e.selfClientId)),n},o.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.presences={}),n.defaults&&(r.id=0,r.selfClientId=""),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.presences&&(i=Object.keys(e.presences)).length){r.presences={};for(let a=0;a<i.length;++a)r.presences[i[a]]=U.Presence.toObject(e.presences[i[a]],n)}return e.selfClientId!=null&&e.hasOwnProperty("selfClientId")&&(r.selfClientId=e.selfClientId),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastPresencesMessage"},o})(),PU=U.BroadcastOperationMessage=(()=>{function o(t){if(t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id=0,o.prototype.operation=null,o.create=function(e){return new o(e)},o.encode=function(e,n){return n||(n=Gi.create()),n.uint32(8).int32(e.id),U.ContentOperation.encode(e.operation,n.uint32(18).fork()).ldelim(),n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.BroadcastOperationMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.operation=U.ContentOperation.decode(e,e.uint32());break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("operation"))throw D.ProtocolError("missing required 'operation'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";{let n=U.ContentOperation.verify(e.operation);if(n)return"operation."+n}return null},o.fromObject=function(e){if(e instanceof U.BroadcastOperationMessage)return e;let n=new U.BroadcastOperationMessage;if(e.id!=null&&(n.id=e.id|0),e.operation!=null){if(typeof e.operation!="object")throw TypeError(".BroadcastOperationMessage.operation: object expected");n.operation=U.ContentOperation.fromObject(e.operation)}return n},o.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.operation=null),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.operation!=null&&e.hasOwnProperty("operation")&&(r.operation=U.ContentOperation.toObject(e.operation,n)),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastOperationMessage"},o})(),dl=U.Message=(()=>{function o(e){if(e)for(let n=Object.keys(e),r=0;r<n.length;++r)e[n[r]]!=null&&(this[n[r]]=e[n[r]])}o.prototype.promptInit=null,o.prototype.init=null,o.prototype.update=null,o.prototype.updatePresence=null,o.prototype.broadcastPresences=null,o.prototype.broadcastOperation=null,o.prototype.ack=null;let t;return Object.defineProperty(o.prototype,"message",{get:D.oneOfGetter(t=["promptInit","init","update","updatePresence","broadcastPresences","broadcastOperation","ack"]),set:D.oneOfSetter(t)}),o.create=function(n){return new o(n)},o.encode=function(n,r){return r||(r=Gi.create()),n.promptInit!=null&&Object.hasOwnProperty.call(n,"promptInit")&&U.PromptInitMessage.encode(n.promptInit,r.uint32(10).fork()).ldelim(),n.init!=null&&Object.hasOwnProperty.call(n,"init")&&U.InitMessage.encode(n.init,r.uint32(18).fork()).ldelim(),n.update!=null&&Object.hasOwnProperty.call(n,"update")&&U.UpdateMessage.encode(n.update,r.uint32(26).fork()).ldelim(),n.updatePresence!=null&&Object.hasOwnProperty.call(n,"updatePresence")&&U.UpdatePresenceMessage.encode(n.updatePresence,r.uint32(34).fork()).ldelim(),n.broadcastPresences!=null&&Object.hasOwnProperty.call(n,"broadcastPresences")&&U.BroadcastPresencesMessage.encode(n.broadcastPresences,r.uint32(42).fork()).ldelim(),n.broadcastOperation!=null&&Object.hasOwnProperty.call(n,"broadcastOperation")&&U.BroadcastOperationMessage.encode(n.broadcastOperation,r.uint32(50).fork()).ldelim(),n.ack!=null&&Object.hasOwnProperty.call(n,"ack")&&U.AckMessage.encode(n.ack,r.uint32(58).fork()).ldelim(),r},o.encodeDelimited=function(n,r){return this.encode(n,r).ldelim()},o.decode=function(n,r){n instanceof ve||(n=ve.create(n));let i=r===void 0?n.len:n.pos+r,a=new U.Message;for(;n.pos<i;){let c=n.uint32();switch(c>>>3){case 1:{a.promptInit=U.PromptInitMessage.decode(n,n.uint32());break}case 2:{a.init=U.InitMessage.decode(n,n.uint32());break}case 3:{a.update=U.UpdateMessage.decode(n,n.uint32());break}case 4:{a.updatePresence=U.UpdatePresenceMessage.decode(n,n.uint32());break}case 5:{a.broadcastPresences=U.BroadcastPresencesMessage.decode(n,n.uint32());break}case 6:{a.broadcastOperation=U.BroadcastOperationMessage.decode(n,n.uint32());break}case 7:{a.ack=U.AckMessage.decode(n,n.uint32());break}default:n.skipType(c&7);break}}return a},o.decodeDelimited=function(n){return n instanceof ve||(n=new ve(n)),this.decode(n,n.uint32())},o.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let r={};if(n.promptInit!=null&&n.hasOwnProperty("promptInit")){r.message=1;{let i=U.PromptInitMessage.verify(n.promptInit);if(i)return"promptInit."+i}}if(n.init!=null&&n.hasOwnProperty("init")){if(r.message===1)return"message: multiple values";r.message=1;{let i=U.InitMessage.verify(n.init);if(i)return"init."+i}}if(n.update!=null&&n.hasOwnProperty("update")){if(r.message===1)return"message: multiple values";r.message=1;{let i=U.UpdateMessage.verify(n.update);if(i)return"update."+i}}if(n.updatePresence!=null&&n.hasOwnProperty("updatePresence")){if(r.message===1)return"message: multiple values";r.message=1;{let i=U.UpdatePresenceMessage.verify(n.updatePresence);if(i)return"updatePresence."+i}}if(n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")){if(r.message===1)return"message: multiple values";r.message=1;{let i=U.BroadcastPresencesMessage.verify(n.broadcastPresences);if(i)return"broadcastPresences."+i}}if(n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")){if(r.message===1)return"message: multiple values";r.message=1;{let i=U.BroadcastOperationMessage.verify(n.broadcastOperation);if(i)return"broadcastOperation."+i}}if(n.ack!=null&&n.hasOwnProperty("ack")){if(r.message===1)return"message: multiple values";r.message=1;{let i=U.AckMessage.verify(n.ack);if(i)return"ack."+i}}return null},o.fromObject=function(n){if(n instanceof U.Message)return n;let r=new U.Message;if(n.promptInit!=null){if(typeof n.promptInit!="object")throw TypeError(".Message.promptInit: object expected");r.promptInit=U.PromptInitMessage.fromObject(n.promptInit)}if(n.init!=null){if(typeof n.init!="object")throw TypeError(".Message.init: object expected");r.init=U.InitMessage.fromObject(n.init)}if(n.update!=null){if(typeof n.update!="object")throw TypeError(".Message.update: object expected");r.update=U.UpdateMessage.fromObject(n.update)}if(n.updatePresence!=null){if(typeof n.updatePresence!="object")throw TypeError(".Message.updatePresence: object expected");r.updatePresence=U.UpdatePresenceMessage.fromObject(n.updatePresence)}if(n.broadcastPresences!=null){if(typeof n.broadcastPresences!="object")throw TypeError(".Message.broadcastPresences: object expected");r.broadcastPresences=U.BroadcastPresencesMessage.fromObject(n.broadcastPresences)}if(n.broadcastOperation!=null){if(typeof n.broadcastOperation!="object")throw TypeError(".Message.broadcastOperation: object expected");r.broadcastOperation=U.BroadcastOperationMessage.fromObject(n.broadcastOperation)}if(n.ack!=null){if(typeof n.ack!="object")throw TypeError(".Message.ack: object expected");r.ack=U.AckMessage.fromObject(n.ack)}return r},o.toObject=function(n,r){r||(r={});let i={};return n.promptInit!=null&&n.hasOwnProperty("promptInit")&&(i.promptInit=U.PromptInitMessage.toObject(n.promptInit,r),r.oneofs&&(i.message="promptInit")),n.init!=null&&n.hasOwnProperty("init")&&(i.init=U.InitMessage.toObject(n.init,r),r.oneofs&&(i.message="init")),n.update!=null&&n.hasOwnProperty("update")&&(i.update=U.UpdateMessage.toObject(n.update,r),r.oneofs&&(i.message="update")),n.updatePresence!=null&&n.hasOwnProperty("updatePresence")&&(i.updatePresence=U.UpdatePresenceMessage.toObject(n.updatePresence,r),r.oneofs&&(i.message="updatePresence")),n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")&&(i.broadcastPresences=U.BroadcastPresencesMessage.toObject(n.broadcastPresences,r),r.oneofs&&(i.message="broadcastPresences")),n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")&&(i.broadcastOperation=U.BroadcastOperationMessage.toObject(n.broadcastOperation,r),r.oneofs&&(i.message="broadcastOperation")),n.ack!=null&&n.hasOwnProperty("ack")&&(i.ack=U.AckMessage.toObject(n.ack,r),r.oneofs&&(i.message="ack")),i},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Message"},o})(),_U=U.Presence=(()=>{function o(t){if(this.data={},this.positions={},t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.data=D.emptyObject,o.prototype.joinTimestamp=D.Long?D.Long.fromBits(0,0,!1):0,o.prototype.updateTimestamp=D.Long?D.Long.fromBits(0,0,!1):0,o.prototype.clientId="",o.prototype.positions=D.emptyObject,o.create=function(e){return new o(e)},o.encode=function(e,n){if(n||(n=Gi.create()),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(10).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(n.uint32(16).int64(e.joinTimestamp),n.uint32(24).int64(e.updateTimestamp),n.uint32(34).string(e.clientId),e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(42).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.Presence,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.data[a]=c;break}case 2:{i.joinTimestamp=e.int64();break}case 3:{i.updateTimestamp=e.int64();break}case 4:{i.clientId=e.string();break}case 5:{i.positions===D.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",c=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("joinTimestamp"))throw D.ProtocolError("missing required 'joinTimestamp'",{instance:i});if(!i.hasOwnProperty("updateTimestamp"))throw D.ProtocolError("missing required 'updateTimestamp'",{instance:i});if(!i.hasOwnProperty("clientId"))throw D.ProtocolError("missing required 'clientId'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!D.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(!D.isInteger(e.joinTimestamp)&&!(e.joinTimestamp&&D.isInteger(e.joinTimestamp.low)&&D.isInteger(e.joinTimestamp.high)))return"joinTimestamp: integer|Long expected";if(!D.isInteger(e.updateTimestamp)&&!(e.updateTimestamp&&D.isInteger(e.updateTimestamp.low)&&D.isInteger(e.updateTimestamp.high)))return"updateTimestamp: integer|Long expected";if(!D.isString(e.clientId))return"clientId: string expected";if(e.positions!=null&&e.hasOwnProperty("positions")){if(!D.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||D.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},o.fromObject=function(e){if(e instanceof U.Presence)return e;let n=new U.Presence;if(e.data){if(typeof e.data!="object")throw TypeError(".Presence.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.joinTimestamp!=null&&(D.Long?(n.joinTimestamp=D.Long.fromValue(e.joinTimestamp)).unsigned=!1:typeof e.joinTimestamp=="string"?n.joinTimestamp=parseInt(e.joinTimestamp,10):typeof e.joinTimestamp=="number"?n.joinTimestamp=e.joinTimestamp:typeof e.joinTimestamp=="object"&&(n.joinTimestamp=new D.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber())),e.updateTimestamp!=null&&(D.Long?(n.updateTimestamp=D.Long.fromValue(e.updateTimestamp)).unsigned=!1:typeof e.updateTimestamp=="string"?n.updateTimestamp=parseInt(e.updateTimestamp,10):typeof e.updateTimestamp=="number"?n.updateTimestamp=e.updateTimestamp:typeof e.updateTimestamp=="object"&&(n.updateTimestamp=new D.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber())),e.clientId!=null&&(n.clientId=String(e.clientId)),e.positions){if(typeof e.positions!="object")throw TypeError(".Presence.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?D.base64.decode(e.positions[r[i]],n.positions[r[i]]=D.newBuffer(D.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},o.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults){if(D.Long){let a=new D.Long(0,0,!1);r.joinTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.joinTimestamp=n.longs===String?"0":0;if(D.Long){let a=new D.Long(0,0,!1);r.updateTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updateTimestamp=n.longs===String?"0":0;r.clientId=""}let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.joinTimestamp!=null&&e.hasOwnProperty("joinTimestamp")&&(typeof e.joinTimestamp=="number"?r.joinTimestamp=n.longs===String?String(e.joinTimestamp):e.joinTimestamp:r.joinTimestamp=n.longs===String?D.Long.prototype.toString.call(e.joinTimestamp):n.longs===Number?new D.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber():e.joinTimestamp),e.updateTimestamp!=null&&e.hasOwnProperty("updateTimestamp")&&(typeof e.updateTimestamp=="number"?r.updateTimestamp=n.longs===String?String(e.updateTimestamp):e.updateTimestamp:r.updateTimestamp=n.longs===String?D.Long.prototype.toString.call(e.updateTimestamp):n.longs===Number?new D.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber():e.updateTimestamp),e.clientId!=null&&e.hasOwnProperty("clientId")&&(r.clientId=e.clientId),e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?D.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Presence"},o})(),IU=U.ContentOperation=(()=>{function o(t){if(this.payload={},t)for(let e=Object.keys(t),n=0;n<e.length;++n)t[e[n]]!=null&&(this[e[n]]=t[e[n]])}return o.prototype.id="",o.prototype.status=0,o.prototype.createdAt=D.Long?D.Long.fromBits(0,0,!1):0,o.prototype.updatedAt=D.Long?D.Long.fromBits(0,0,!1):0,o.prototype.updateId=0,o.prototype.expireAfter=0,o.prototype.cursor=0,o.prototype.target=0,o.prototype.payload=D.emptyObject,o.create=function(e){return new o(e)},o.encode=function(e,n){if(n||(n=Gi.create()),n.uint32(10).string(e.id),n.uint32(16).int32(e.status),n.uint32(24).int64(e.createdAt),n.uint32(32).int64(e.updatedAt),n.uint32(40).int32(e.updateId),n.uint32(48).int32(e.expireAfter),n.uint32(56).int32(e.cursor),n.uint32(64).int32(e.target),e.payload!=null&&Object.hasOwnProperty.call(e,"payload"))for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.uint32(74).fork().uint32(10).string(r[i]).uint32(18).string(e.payload[r[i]]).ldelim();return n},o.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},o.decode=function(e,n){e instanceof ve||(e=ve.create(e));let r=n===void 0?e.len:e.pos+n,i=new U.ContentOperation,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.string();break}case 2:{i.status=e.int32();break}case 3:{i.createdAt=e.int64();break}case 4:{i.updatedAt=e.int64();break}case 5:{i.updateId=e.int32();break}case 6:{i.expireAfter=e.int32();break}case 7:{i.cursor=e.int32();break}case 8:{i.target=e.int32();break}case 9:{i.payload===D.emptyObject&&(i.payload={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.payload[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("status"))throw D.ProtocolError("missing required 'status'",{instance:i});if(!i.hasOwnProperty("createdAt"))throw D.ProtocolError("missing required 'createdAt'",{instance:i});if(!i.hasOwnProperty("updatedAt"))throw D.ProtocolError("missing required 'updatedAt'",{instance:i});if(!i.hasOwnProperty("updateId"))throw D.ProtocolError("missing required 'updateId'",{instance:i});if(!i.hasOwnProperty("expireAfter"))throw D.ProtocolError("missing required 'expireAfter'",{instance:i});if(!i.hasOwnProperty("cursor"))throw D.ProtocolError("missing required 'cursor'",{instance:i});if(!i.hasOwnProperty("target"))throw D.ProtocolError("missing required 'target'",{instance:i});return i},o.decodeDelimited=function(e){return e instanceof ve||(e=new ve(e)),this.decode(e,e.uint32())},o.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isString(e.id))return"id: string expected";switch(e.status){default:return"status: enum value expected";case 0:case 1:case 2:case 3:break}if(!D.isInteger(e.createdAt)&&!(e.createdAt&&D.isInteger(e.createdAt.low)&&D.isInteger(e.createdAt.high)))return"createdAt: integer|Long expected";if(!D.isInteger(e.updatedAt)&&!(e.updatedAt&&D.isInteger(e.updatedAt.low)&&D.isInteger(e.updatedAt.high)))return"updatedAt: integer|Long expected";if(!D.isInteger(e.updateId))return"updateId: integer expected";if(!D.isInteger(e.expireAfter))return"expireAfter: integer expected";if(!D.isInteger(e.cursor))return"cursor: integer expected";if(!D.isInteger(e.target))return"target: integer expected";if(e.payload!=null&&e.hasOwnProperty("payload")){if(!D.isObject(e.payload))return"payload: object expected";let n=Object.keys(e.payload);for(let r=0;r<n.length;++r)if(!D.isString(e.payload[n[r]]))return"payload: string{k:string} expected"}return null},o.fromObject=function(e){if(e instanceof U.ContentOperation)return e;let n=new U.ContentOperation;switch(e.id!=null&&(n.id=String(e.id)),e.status){default:if(typeof e.status=="number"){n.status=e.status;break}break;case"STARTING":case 0:n.status=0;break;case"RUNNING":case 1:n.status=1;break;case"SUCCESS":case 2:n.status=2;break;case"ERROR":case 3:n.status=3;break}if(e.createdAt!=null&&(D.Long?(n.createdAt=D.Long.fromValue(e.createdAt)).unsigned=!1:typeof e.createdAt=="string"?n.createdAt=parseInt(e.createdAt,10):typeof e.createdAt=="number"?n.createdAt=e.createdAt:typeof e.createdAt=="object"&&(n.createdAt=new D.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber())),e.updatedAt!=null&&(D.Long?(n.updatedAt=D.Long.fromValue(e.updatedAt)).unsigned=!1:typeof e.updatedAt=="string"?n.updatedAt=parseInt(e.updatedAt,10):typeof e.updatedAt=="number"?n.updatedAt=e.updatedAt:typeof e.updatedAt=="object"&&(n.updatedAt=new D.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber())),e.updateId!=null&&(n.updateId=e.updateId|0),e.expireAfter!=null&&(n.expireAfter=e.expireAfter|0),e.cursor!=null&&(n.cursor=e.cursor|0),e.target!=null&&(n.target=e.target|0),e.payload){if(typeof e.payload!="object")throw TypeError(".ContentOperation.payload: object expected");n.payload={};for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.payload[r[i]]=String(e.payload[r[i]])}return n},o.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.payload={}),n.defaults){if(r.id="",r.status=n.enums===String?"STARTING":0,D.Long){let a=new D.Long(0,0,!1);r.createdAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.createdAt=n.longs===String?"0":0;if(D.Long){let a=new D.Long(0,0,!1);r.updatedAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updatedAt=n.longs===String?"0":0;r.updateId=0,r.expireAfter=0,r.cursor=0,r.target=0}e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.status!=null&&e.hasOwnProperty("status")&&(r.status=n.enums===String?U.ContentOperationStatus[e.status]===void 0?e.status:U.ContentOperationStatus[e.status]:e.status),e.createdAt!=null&&e.hasOwnProperty("createdAt")&&(typeof e.createdAt=="number"?r.createdAt=n.longs===String?String(e.createdAt):e.createdAt:r.createdAt=n.longs===String?D.Long.prototype.toString.call(e.createdAt):n.longs===Number?new D.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber():e.createdAt),e.updatedAt!=null&&e.hasOwnProperty("updatedAt")&&(typeof e.updatedAt=="number"?r.updatedAt=n.longs===String?String(e.updatedAt):e.updatedAt:r.updatedAt=n.longs===String?D.Long.prototype.toString.call(e.updatedAt):n.longs===Number?new D.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber():e.updatedAt),e.updateId!=null&&e.hasOwnProperty("updateId")&&(r.updateId=e.updateId),e.expireAfter!=null&&e.hasOwnProperty("expireAfter")&&(r.expireAfter=e.expireAfter),e.cursor!=null&&e.hasOwnProperty("cursor")&&(r.cursor=e.cursor),e.target!=null&&e.hasOwnProperty("target")&&(r.target=e.target);let i;if(e.payload&&(i=Object.keys(e.payload)).length){r.payload={};for(let a=0;a<i.length;++a)r.payload[i[a]]=e.payload[i[a]]}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,yo.util.toJSONOptions)},o.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/ContentOperation"},o})(),RU=U.ContentOperationStatus=(()=>{let o={},t=Object.create(o);return t[o[0]="STARTING"]=0,t[o[1]="RUNNING"]=1,t[o[2]="SUCCESS"]=2,t[o[3]="ERROR"]=3,t})(),fs=U.UpdateFormatVersion=(()=>{let o={},t=Object.create(o);return t[o[0]="UNSPECIFIED"]=0,t[o[1]="V1"]=1,t[o[2]="V2"]=2,t})();var I9=.9*1024*1024;function x_(o,t=0){let e=t;return{newMessageID:()=>(e+=1,e),write:n=>{if(n.init){let r=n.init;OS(r.update,(i,a,c)=>{o(qg({init:{...r,index:a,count:c,update:i}}),r.id)})}else if(n.update){let r=n.update;OS(r.update,(i,a,c)=>{o(qg({update:{...r,index:a,count:c,update:i}}),r.id)})}else if(n.promptInit){let r=n.promptInit;OS(r.stateVector,(i,a,c)=>{o(qg({promptInit:{...r,index:a,count:c,stateVector:i}}),r.id)})}else o(qg(n),n[Object.keys(n)[0]].id)}}}function qg(o){let t=dl.verify(o);if(t)throw new Error(`ProtoBufObject message is not valid: ${t}`);let e=dl.create(o);return dl.encode(e).finish()}function OS(o,t){zP(o,I9).forEach((n,r,i)=>{t(n,r,i.length)})}s();function O_(o){let t=new Map,e=(n,r)=>{if(!n.id||n.index===void 0||n.count===void 0)return r(n);let i=t.get(n.id)||[];if(i.push(n),t.set(n.id,i),i.length===n.count){let a=VP(i.sort((l,u)=>(l.index||0)-(u.index||0)).map(l=>"update"in l?l.update:l.stateVector)),c=r({...n,..."update"in n?{update:a}:{stateVector:a}});return t.delete(n.id),c}};return n=>R9(n,{promptInit:r=>e(r,i=>o.promptInit(i)),init:r=>e(r,i=>o.init(i)),update:r=>e(r,i=>o.update(i)),updatePresence:o.updatePresence,broadcastOperation:o.broadcastOperation,broadcastPresences:o.broadcastPresences,ack:o.ack})}function R9(o,t){let e=dl.decode(o),n=dl.toObject(e);if(n.promptInit)return t.promptInit(n.promptInit);if(n.init)return t.init(n.init);if(n.update)return t.update(n.update);if(n.updatePresence)return t.updatePresence(n.updatePresence);if(n.broadcastOperation)return t.broadcastOperation(n.broadcastOperation);if(n.broadcastPresences)return t.broadcastPresences(n.broadcastPresences);if(n.ack)return t.ack(n.ack)}s();var FU=it("datasync:storage");function PS(o,t,e,n){switch(t){case null:case void 0:case fs.UNSPECIFIED:case fs.V1:{let r=Array.isArray(e)?CO(e):e;gO(o,r,n);break}case fs.V2:{let r=Array.isArray(e)?Xf(e):e;fO(o,r,n);break}default:De(t)}}s();var __=ri(o=>{let t=o.getAttribute("data");return Xs.create({key:o.getAttribute("key"),nodes:Gg(o),data:t?_S(t):void 0})}),Gg=ri(o=>ua.create(o.toArray().map(t=>{if(t instanceof gr)return I_(t);if(t instanceof Ct)return T9(t);throw new Error(`Unknown node type: ${t}`)}))),T9=ri(o=>{let e=o.toDelta().map(n=>Xx.create({text:n.insert,marks:E9(n.attributes||{})}));return Ef.create({key:o.getAttribute("key"),leaves:ua.create(e)})}),I_=ri(o=>{let t=o.getAttribute("key");switch(o.nodeName){case"block":{let e=o,n=e.getAttribute("data"),r=e.getAttribute("fragments");return zt.create({key:t,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:n?_S(n):void 0,nodes:Gg(o),fragments:r?P_(r):void 0})}case"inline":{let e=o,n=e.getAttribute("data"),r=e.getAttribute("fragments");return yp.create({key:t,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:n?_S(n):void 0,nodes:Gg(o),fragments:r?P_(r):void 0})}case"fragment":{let e=o;return Ux.create({key:t,type:e.getAttribute("type"),fragment:e.getAttribute("fragment"),nodes:Gg(o)})}default:throw new Error(`Unknown object type: ${o.nodeName}`)}}),P_=ri(o=>Hx.create(o.toArray().map(t=>{if(!(t instanceof gr))throw new Error(`Unknown node type: ${t}`);let e=I_(t);return[e.fragmentKey,e]})));function E9(o){return If.create(Object.keys(o).map(t=>Kx.create({type:t,data:o[t]})))}var _S=ri(o=>uu.create(o.toJSON()));s();function pl(o){let t=o.object;switch(t){case"block":return L9(o);case"inline":return D9(o);case"text":return A9(o);default:throw new Error(`Unknown node type: ${t}`)}}function M9(o){return o.toArray().map(t=>pl(t))}function IS(o,t){o.delete(0,o.length),o.insert(0,M9(t))}function L9(o,t=new gr(o.object)){return t.setAttribute("key",o.key),o.isVoid?t.setAttribute("isVoid",o.isVoid):t.removeAttribute("isVoid"),t.setAttribute("type",o.type),T_(t,o.data),IS(t,o.nodes),R_(t,o.fragments),t}function D9(o,t=new gr(o.object)){return t.setAttribute("key",o.key),o.isVoid?t.setAttribute("isVoid",o.isVoid):t.removeAttribute("isVoid"),t.setAttribute("type",o.type),T_(t,o.data),IS(t,o.nodes),R_(t,o.fragments),t}function N9(o,t=new xp){return t.delete(0,t.length),o.forEach(e=>{t.push([RS(e)])}),t}function R_(o,t){if(t.size===0){o.removeAttribute("fragments");return}let e=o.getAttribute("fragments");e||(e=new xp,o.setAttribute("fragments",e)),N9(t,e)}function RS(o,t=new gr(o.object)){return t.setAttribute("key",o.key),o.type&&t.setAttribute("type",o.type),o.fragment&&t.setAttribute("fragment",o.fragment),IS(t,o.nodes),t}function A9(o,t=new Ct){let e=0;return t.setAttribute("key",o.key),t.delete(0,t.length),o.leaves.forEach(n=>{t.insert(e,n.text,Hg(n.marks)),e+=n.text.length}),t}function Hg(o){if(o.size===0)return{};let t={};return o.forEach(e=>{t[e.type]=e.data.toObject()}),t}function T_(o,t){if(t.size===0){o.removeAttribute("data");return}let e=o.getAttribute("data");e||(e=new Ai,o.setAttribute("data",e)),TS(t,e)}function TS(o,t=new Ai){return t.clear(),o.forEach((e,n)=>{t.set(n,zu(e))}),t}function zu(o){if(o==null||typeof o=="number"||typeof o=="string"||typeof o=="boolean")return o;if(Array.isArray(o)){let t=new kp;return o.forEach(e=>{t.push([zu(e)])}),t}else{let t=new Ai;return Object.keys(o).forEach(e=>{t.set(e,zu(o[e]))}),t}}s();s();function bn(o,t){let e=o;for(let n=0;n<t.length;n++){let r=t[n];if(e instanceof Ct)throw new Error("Invalid path, expected a node with descendants");if(r<e.length)e=e.get(r);else{let i=e.getAttribute("fragments");i&&(e=i.get(r-e.length))}if(!e)throw new Error("Invalid path, expected a node")}return e}function ml(o,t){let e=t.slice(0,-1),n=bn(o,e);if(n instanceof Ct)throw new Error("Invalid path, expected a node with descendants");let r=t[t.length-1];return{parent:n,index:r}}function Vp(o,t){let e=o.getAttribute("data");e||(e=new Ai,o.setAttribute("data",e));let n=e;for(let r=0;r<t.length;r++){let i=t[r],a=n,c=a.get(i);if(c===void 0){let[l,u]=B9(t.slice(r+1));return a.set(i,l),u}else{if(!(c instanceof Ai))throw new Error(`Invalid data path (${t.slice(0,r+1).join(".")}), expected a map`);n=c}}return n}function B9(o){let t=new Ai,e=t;for(let n=0;n<o.length;n++){let r=new Ai;e.set(o[n],r),e=r}return[t,e]}function ES(o,t){o.operations.forEach(([e,n,r])=>{W9(t,e,n.document,r.document)})}function W9(o,t,e,n){switch(t.type){case"insert_text":F9(o,e,t);break;case"remove_text":z9(o,e,t);break;case"add_mark":V9(o,t);break;case"remove_mark":q9(o,t);break;case"remove_node":G9(o,t);break;case"insert_node":H9(o,t);break;case"set_node":Y9(o,t);break;case"move_node":K9(o,e,n,t);break;case"split_node":X9(o,e,t);break;case"merge_node":U9(o,e,t);break;case"insert_fragment":$9(o,t);break;case"remove_fragment":j9(o,t);break;case"set_data":Z9(o,t);break;case"remove_data":J9(o,t);break;case"insert_array_data":Q9(o,t);break;case"remove_array_data":e8(o,t);break;case"set_selection":break;default:throw new Error(`Unsupported operation type: ${t.type}`)}}function F9(o,t,e){let n=bn(o,[...e.path]);if(!(n instanceof Ct))throw new Error("Invalid operation path, expected a text node");n.insert(e.offset,e.text,Hg(e.marks))}function z9(o,t,e){let n=bn(o,[...e.path]);if(!(n instanceof Ct))throw new Error("Invalid operation path, expected a text node");n.delete(e.offset,e.text.length)}function V9(o,t){let e=bn(o,[...t.path]);if(!(e instanceof Ct))throw new Error("Invalid operation path, expected a text node");e.format(t.offset,t.length,Hg(If.create([t.mark])))}function q9(o,t){let e=bn(o,[...t.path]);if(!(e instanceof Ct))throw new Error("Invalid operation path, expected a text node");e.format(t.offset,t.length,{[t.mark.type]:null})}function G9(o,t){let{parent:e,index:n}=ml(o,[...t.path]);e.delete(n)}function H9(o,t){let{parent:e,index:n}=ml(o,[...t.path]);e.insert(n,[pl(t.node)])}function K9(o,t,e,n){let{parent:r,index:i}=ml(o,[...n.path]),{parent:a,index:c}=ml(o,[...n.newPath]),l=e.assertPath(n.path),u=t.assertNode(l.key),d=pl(u);r.delete(i),a.insert(c,[d])}function X9(o,t,e){let{parent:n,index:r}=ml(o,[...e.path]),i=t.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for split_node");let a=i.nodes.get(r);if(!a)throw new Error("Node not found in parent nodes");let c=i.nodes.get(r+1);if(!c)throw new Error("New node not found in parent nodes");n.delete(r),n.insert(r,[pl(a),pl(c)])}function U9(o,t,e){let{parent:n,index:r}=ml(o,[...e.path]),i=t.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for merge_node");let a=i.nodes.get(r-1);if(!a)throw new Error("Merged node not found in parent nodes");n.delete(r-1,2),n.insert(r-1,[pl(a)])}function Y9(o,t){let e=bn(o,[...t.path]);if(typeof t.properties!="string"){if("key"in t.properties&&t.properties.key!==void 0&&e.setAttribute("key",t.properties.key),"type"in t.properties&&t.properties.type!==void 0&&e.setAttribute("type",t.properties.type),"isVoid"in t.properties&&t.properties.isVoid!==void 0){if(e instanceof Ct)throw new Error("Should not set isVoid on a text");e.setAttribute("isVoid",t.properties.isVoid)}if("data"in t.properties&&t.properties.data!==void 0){if(e instanceof Ct)throw new Error("Should not set data on a text");TS(uu.create(t.properties.data),e.getAttribute("data"))}}}function $9(o,t){let e=bn(o,[...t.path]);if(e instanceof Ct)throw new Error("Expect a fragment node");let n=e,r=t.fragmentPath[t.fragmentPath.length-1]-1,i=RS(t.node),a=n.getAttribute("fragments");a||(a=new xp,n.setAttribute("fragments",a)),a.insert(r,[i])}function j9(o,t){let e=bn(o,[...t.path]);if(e instanceof Ct)throw new Error("Expect a fragment node");let n=e,r=t.fragmentPath[t.fragmentPath.length-1]-1;n.getAttribute("fragments").delete(r)}function Z9(o,t){let e=bn(o,[...t.path]);if(e instanceof Ct)throw new Error("Should not set data on a text");let n=zu(t.data),r=Vp(e,t.dataPath.slice(0,-1)),i=t.dataPath[t.dataPath.length-1];r.set(i,n)}function J9(o,t){let e=bn(o,[...t.path]);if(e instanceof Ct)throw new Error("Should not set data on a text");let n=Vp(e,t.dataPath.slice(0,-1)),r=t.dataPath[t.dataPath.length-1];n.delete(r)}function Q9(o,t){let e=bn(o,[...t.path]);if(e instanceof Ct)throw new Error("Should not set data on a text");let n=Vp(e,t.dataPath.slice(0,-1)),r=t.dataPath[t.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof kp))return;let a=zu(t.data);i.insert(t.dataIndex,[a])}function e8(o,t){let e=bn(o,[...t.path]);if(e instanceof Ct)throw new Error("Should not set data on a text");let n=Vp(e,t.dataPath.slice(0,-1)),r=t.dataPath[t.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof kp))return;let a;for(;a=i.toArray().findIndex(c=>c===t.data)!==-1;)i.delete(a)}s();function qp(o){return o.get("data",gr)}s();function L_(o,t,e){let n=qp(t);return hp.isBlockRange(e)?{anchor:e.anchorBlock?M_(n,o,e.anchorBlock):void 0,focus:e.focusBlock?M_(n,o,e.focusBlock):void 0}:{anchor:e.anchorKey?E_(n,o,e.anchorKey,e.anchorOffset):void 0,focus:e.focusKey?E_(n,o,e.focusKey,e.focusOffset):void 0}}function D_(o,t){if(!(!t.anchor||!t.focus)){if(t.anchor.type instanceof Ct){if(!(t.focus.type instanceof Ct))return;let e=t.anchor.type.getAttribute("key"),n=t.focus.type.getAttribute("key");return he.create({anchorKey:e,anchorOffset:t.anchor.index,focusKey:n,focusOffset:t.focus.index}).normalize(o)}if(t.anchor.type instanceof gr){if(!(t.focus.type instanceof gr))return;let e=t.anchor.type.getAttribute("key"),n=t.focus.type.getAttribute("key"),r=o.getDescendant(e),i=o.getDescendant(n);if(!r||!i||!r.isBlock()||!i.isBlock())return;let a=r.nodes.get(t.anchor.index),c=i.nodes.get(t.focus.index);return!a||!c?void 0:hp.create({anchorBlock:a.key,focusBlock:c?.key}).normalize(o)}}}function E_(o,t,e,n){let r=t.getPath(e);return r?{type:bn(o,r),index:n,assoc:0}:void 0}function M_(o,t,e){let n=t.getPath(e);return n?{type:bn(o,n.slice(0,-1)),index:n[n.length-1],assoc:0}:void 0}s();var t8=it("hive-core:normalizeYDocument");function N_(o){let t=new Set,e=new Set;return A_(o,t,e),e.size>0&&t8.warning(`Found ${e.size} duplicated keys in Y document. This is a bug in Hive.`),e.size}function A_(o,t,e){B_(o,t,e);let n=o.getAttribute("fragments");n&&o8(n,t,e)}function o8(o,t,e){B_(o,t,e)}function B_(o,t,e){let n=0;o.forEach((r,i)=>{let a=r.getAttribute("key");if(t.has(a)){e.add(a),pO(o),o.delete(i-n),n++;return}t.add(a),!(r instanceof Ct)&&A_(r,t,e)})}s();s();s();s();s();s();s();var Jo=crypto;var hs=new TextEncoder,zr=new TextDecoder,$Y=2**32;var W_=o=>{let t=atob(o),e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},sc=o=>{let t=o;t instanceof Uint8Array&&(t=zr.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return W_(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};s();s();s();var Kg=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var e;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(e=Error.captureStackTrace)===null||e===void 0||e.call(Error,this,this.constructor)}};var br=class extends Kg{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};s();s();var Xg=Jo.getRandomValues.bind(Jo);s();s();s();s();s();s();s();s();s();function l8(o){return typeof o=="object"&&o!==null}function Zn(o){if(!l8(o)||Object.prototype.toString.call(o)!=="[object Object]")return!1;if(Object.getPrototypeOf(o)===null)return!0;let t=o;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(o)===t}s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();var k8=Symbol();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();var DS=sc;s();function NS(o){if(typeof o!="string")throw new br("JWTs must use Compact JWS serialization, JWT must be a string");let{1:t,length:e}=o.split(".");if(e===5)throw new br("Only JWTs using Compact JWS serialization can be decoded");if(e!==3)throw new br("Invalid JWT");if(!t)throw new br("JWTs must contain a payload");let n;try{n=DS(t)}catch{throw new br("Failed to parse the base64url encoded payload")}let r;try{r=JSON.parse(zr.decode(n))}catch{throw new br("Failed to parse the decoded payload as JSON")}if(!Zn(r))throw new br("Invalid JWT Claims Set");return r}s();s();s();s();function $_(o){let t=NS(o);return{expiration:t.exp?t.exp*1e3:Date.now()+6*60*60*1e3,payload:{userId:t.userId,content:t.content}}}s();var W8=new wu(Jf,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"name",weight:.7},{name:"keywords",weight:.3}]});function $g(o){return W8.search(o).map(t=>t.item)}s();var oh=y(C());s();var uI=y(fp(),1),dI=y(Q_(),1);s();var cI=y(fp(),1),lI=y(sI(),1);var Ss=it("HiveSocket");var jg=class{constructor(t){this.state="closed";this.openBackoffDelay=1e3;this.pendingMessages=[];this.events=new cI.EventEmitter;this.getSocketURL=t}async open(){if(this.webSocket)throw new Error("WebSocket already opened");this.clearScheduledReconnection();let t=await this.getSocketURL();return new Promise((e,n)=>{Ss.info("Opening WebSocket:",t),this.webSocket=new lI.default.w3cwebsocket(t),this.setState("connecting");try{this.webSocket.binaryType="arraybuffer"}catch{}this.webSocket.onopen=()=>{Ss.warning("WebSocket opened"),this.setState("open"),this.sendPendingMessages(),e()},this.webSocket.onclose=r=>{let i=this.state;if(this.close("closed"),i==="connecting"){Ss.error("Websocket closed before initial connection",r),n(new Error("Websocket closed before initial connection"));return}i==="open"&&(Ss.warning("WebSocket unexpectedly closed, reconnecting:",r.code,r.reason),this.scheduleReconnection())},this.webSocket.onerror=r=>{let i=this.state;if(this.close("errored"),i==="connecting"){Ss.error("Websocket error with initial connection",r);let a=new Error("Websocket errored before being opened");su(a,{attachments:[{name:"operations.json",type:"application/json",body:JSON.stringify(r)}]}),n(a);return}Ss.error("WebSocket error, reconnecting:",r),this.scheduleReconnection()},this.webSocket.onmessage=r=>{let i=r.data;i instanceof ArrayBuffer&&this.events.emit("message",new Uint8Array(i))}})}close(t="closed"){this.setState(t),this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0),this.webSocket&&(Ss.info("Closing WebSocket"),this.webSocket.close(),this.webSocket=void 0)}scheduleReconnection(){this.openBackoffTimer||(this.webSocket&&this.close(),Ss.info("Scheduling reconnection in",this.openBackoffDelay,"ms"),this.openBackoffTimer=setTimeout(()=>{this.open(),this.openBackoffDelay=Math.min(this.openBackoffDelay*2,3e4)},this.openBackoffDelay))}async forceScheduledReconnection(){if(!this.openBackoffTimer)throw new Error("No scheduled reconnection");await this.open()}clearScheduledReconnection(){this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0)}listen(t,e){return this.events.addListener(t,e),()=>{this.events.removeListener(t,e)}}send(t){if(this.state!=="open"||!this.webSocket){this.pendingMessages.push(t);return}this.webSocket.send(t)}sendPendingMessages(){let t=this.webSocket;this.state!=="open"||!t||(this.pendingMessages.forEach(e=>t.send(e)),this.pendingMessages=[])}setState(t){this.state!==t&&(Ss.info("socket changing state from",this.state,"to",t),this.state=t,this.events.emit("state",t))}};var Sr=it("hive:HiveDataSyncClient");var qu=class{constructor(t,e={}){this.state="closed";this.operation=null;this.clientId=null;this.socket=null;this.encoder=null;this.currentPresence=null;this.beforeTransactionPresence=null;this.pendingMessages=new Set;this.pendingMessagesResolves=[];this.destroyed=!1;this.events=new uI.EventEmitter;this.batchUpdates=[];let{YType:n=Ai,readOnly:r=!1}=e;if(typeof globalThis.window>"u")throw new Error("HiveDataSyncClient can only be used in the browser, or in node process when running tests");this.client=t,this.doc=new mO,this.presences=[],this.YType=n,this.#e=r;let i=this.doc.get("data",n);this.undoManager=new wO(i,{trackedOrigins:new Set(["local"])}),this.undoManager.on("stack-item-added",a=>{a.stackItem.meta.set("positionsBefore",this.beforeTransactionPresence?.positions),a.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-updated",a=>{a.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-popped",a=>{let c=a.type==="undo"?this.undoManager.redoStack:this.undoManager.undoStack,l=c[c.length-1];l&&(l.meta.set("positions",a.stackItem.meta.get("positionsBefore")),l.meta.set("positionsBefore",a.stackItem.meta.get("positions")));let u=a.stackItem.meta.get("positionsBefore");u&&this.events.emit("restorePositions",u)}),this.doc.on("updateV2",(a,c)=>{c!=="remote"&&(this.dangerouslyPaused?this.dangerouslyPaused.push(a):this.batchUpdate(a)),Sr.info("call update listeners"),this.events.emit("update",c)})}#e;updateState(){let t="closed";if(this.socket)switch(this.socket.state){case"connecting":t="connecting";break;case"open":this.doc.isSynced?t="open":t="connecting";break;case"errored":t="errored";break}t!==this.state&&(this.state=t,this.events.emit("state",t))}get presence(){return this.currentPresence||null}get readOnly(){return this.#e??!1}setReadOnly(t){this.readOnly&&!t?this.sendPromptInit():!this.readOnly&&t&&this.flushBatchUpdates(),this.#e=t}get clock(){let t=this.doc.get("data",this.YType);return dO(t)}open(t,e,n,r={}){if(this.assertNotDestroyed(),this.socket)return this.socket.state==="errored"?Promise.reject(new Error("Connection failed to establish with the server")):this.doc.isSynced?void 0:this.doc.whenSynced;Sr.info("opening datasync socket",e,n,r);let i=this.client.getSocket(t,e,n,r);this.socket=i;let a=()=>{this.doc.emit("sync",[!0]),Sr.info("connection is ready"),this.updateState()},c=O_({promptInit:d=>{this.sendInit(d.stateVector)},init:({update:d,version:p})=>{PS(this.doc,p,d,"remote"),a()},update:({update:d,version:p})=>{PS(this.doc,p,d,"remote")},updatePresence:()=>{},broadcastOperation:d=>{this.operation={...d.operation,payload:d.operation.payload||{},createdAt:Number(d.operation.createdAt),updatedAt:Number(d.operation.updatedAt)},this.events.emit("operation",this.operation)},broadcastPresences:d=>{Sr.info("received broadcast presences message");let p=this.clientId;this.clientId=d.selfClientId,p!==d.selfClientId&&(Sr.info("client id changed to",d.selfClientId),this.events.emit("clientId",d.selfClientId)),this.presences=Object.values(d.presences||{}).map(f=>({clientId:f.clientId,joinTimestamp:Number(f.joinTimestamp),updateTimestamp:Number(f.updateTimestamp),data:f.data||{},positions:Object.fromEntries(Object.entries(f.positions||{}).map(([m,h])=>[m,SO(h)]))})).sort((f,m)=>f.joinTimestamp-m.joinTimestamp),this.events.emit("presences")},ack:d=>{this.ackMessage(d.message)}});this.encoder=x_((d,p)=>{this.pendingMessages.add(p),i.send(d)}),i.listen("state",d=>{this.updateState(),d==="open"?(this.sendPromptInit(),this.sendPresence()):this.doc.emit("sync",[!1])}),i.listen("message",d=>{c(d)});let l=new Ei(`hive:datasync:open:${e}`);l.setLabels(n),l.wrapPromise(i.open());let u=new Ei(`hive:datasync:sync:${e}`);return u.setLabels(n),u.wrapPromise(this.doc.whenSynced)}close(){if(this.assertNotDestroyed(),!this.socket){Sr.info("closing datasync, but socket is already closed");return}Sr.info("closing datasync socket"),this.socket.close(),this.socket=null,this.encoder=null}destroy(){this.close(),this.batchDebounceFlush?.cancel(),this.undoManager.destroy(),this.doc.destroy(),this.events.removeAllListeners(),this.destroyed=!0}listen(t,e){return this.assertNotDestroyed(),this.events.addListener(t,e),()=>{this.events.removeListener(t,e)}}waitForSync(){if(this.assertNotDestroyed(),this.pendingMessages.size!==0)return Sr.info("waiting for sync, pending messages count is",this.pendingMessages.size),new Promise(t=>{this.pendingMessagesResolves.push(t)})}transact(t){return this.assertNotDestroyed(),Sr.info("start transaction on document"),this.beforeTransactionPresence=this.currentPresence,this.doc.transact(()=>t(this.doc),"local")}setPresence(t){this.assertNotDestroyed(),Sr.info("set presence",t),this.currentPresence={data:t.data||this.currentPresence?.data||{},positions:Object.fromEntries(Object.entries(t.positions||{}).map(([e,n])=>n?[e,vO(n.type,n.index,n.assoc)]:null).filter(ue))},this.sendPresence()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}stopCapturing(){this.undoManager.stopCapturing()}hasBatchingEnabled(){return!!this.batchDebounceFlush}hasBatchedUpdates(){return this.batchUpdates.length>0}resetBatchingInterval(t,e=t*5){t?(this.batchDebounceFlush?.cancel(),this.batchDebounceFlush=(0,dI.default)(()=>{this.flushBatchUpdates()},t,{maxWait:e})):(this.flushBatchUpdates(),this.batchDebounceFlush=void 0)}disableBatching(){this.resetBatchingInterval(0)}flushBatchUpdates(){if(this.readOnly||(this.batchDebounceFlush?.cancel(),this.batchUpdates.length===0))return;let t=this.batchUpdates;this.batchUpdates=[];let e=Xf(t);this.sendUpdate(e)}sendPresence(){!this.encoder||!this.currentPresence||(Sr.info("sending presence to server"),this.encoder.write({updatePresence:{id:this.encoder.newMessageID(),data:this.currentPresence.data,positions:Object.fromEntries(Object.entries(this.currentPresence.positions).map(([t,e])=>[t,bO(e)]))}}))}sendPromptInit(){this.encoder&&(Sr.info("sending prompt to init to server"),this.encoder.write({promptInit:{id:this.encoder.newMessageID(),stateVector:yO(this.doc),version:fs.V2}}))}sendInit(t){!this.encoder||this.readOnly||(Sr.info("sending init to server"),this.encoder.write({init:{id:this.encoder.newMessageID(),update:hO(this.doc,t),version:fs.V2}}))}batchUpdate(t){if(!this.readOnly){if(!this.batchDebounceFlush){this.sendUpdate(t);return}this.batchUpdates.push(t),this.batchDebounceFlush()}}sendUpdate(t){!this.encoder||this.readOnly||(Sr.info("sending update to server",t.byteLength),this.encoder.write({update:{id:this.encoder.newMessageID(),update:t,version:fs.V2}}))}ackMessage(t){this.pendingMessages.delete(t),this.pendingMessages.size===0&&(this.pendingMessagesResolves.forEach(e=>e()),this.pendingMessagesResolves=[])}assertNotDestroyed(){if(this.destroyed)throw new Error("datasync is destroyed")}dangerouslyPauseSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}async dangerouslyResumeSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}};s();var pI=y(fp(),1);var Up=class{constructor(t,e,n={}){this.events=new pI.default;this.manager=t,this.contentId=e.contentId,this.branchId=e.branchId,this.dataSync=new qu(t.client,{readOnly:n.readOnly}),this._change=k_(Vg(this.dataSync.doc)),this.dataSync.listen("update",()=>{this.dataSync.doc.transact(()=>{s_(Vg(this.dataSync.doc))},"local"),this.#e=S_(Vg(this.dataSync.doc)),this.events.emit("update")})}#e;get revision(){return this.#e}get presences(){return this.dataSync.presences}keepAlive(){return this.manager.keepAlive(this)}open(t={}){return this.dataSync.presence||this.dataSync.setPresence({data:t}),this.dataSync.open(this.contentId,"/branches/:branchId/datasync",{branchId:this.branchId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(t,e){return t==="update"?(this.events.addListener(t,e),()=>{this.events.removeListener(t,e)}):this.dataSync.listen(t,e)}openPage(t){let e=this.dataSync.presence;this.manager.touch(this),e&&this.dataSync.setPresence({data:{...e.data,pageId:t}})}syncChange(t){return this.manager.touch(this),this.dataSync.transact(n=>t(this._change))}async change(t){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");let e=this.syncChange(t);return await this.waitForSync(),e}};s();var mI=y(fp(),1);var Yp=class{constructor(t,e,n={}){this.events=new mI.EventEmitter;this.manager=t,this.contentId=e.contentId,this.branchId=e.branchId,this.pageId=e.pageId,this.singleEditBatchingInterval=n.singleEditBatchingInterval??1500,this.#e=vp.create(),this.dataSync=new qu(t.client,{YType:gr,readOnly:n.readOnly}),this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.dataSync.listen("restorePositions",r=>{let i=this.createSelectionFromRelatives(this.value.document,r);i=i?i.normalize(this.value.document):he.create(),this.#e.selection.isFocused&&(i=i.focus()),this.#e=this.#e.merge({selection:i}),this.events.emit("value")}),this.dataSync.listen("update",r=>{r==="local"||this.createSlateValue(),this.events.emit("value")}),this.dataSync.listen("presences",()=>{this.dataSync.presences.length>0?this.dataSync.hasBatchingEnabled()&&this.dataSync.disableBatching():this.dataSync.hasBatchingEnabled()||this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.updateSelections()}),this.dataSync.listen("state",r=>{r==="open"&&this.updateSelections()})}#e;get value(){return this.#e}createSlateValue(){let t=qp(this.dataSync.doc);this.dataSync.doc.transact(()=>N_(t),"local");let e=__(t);this.#e=this.dataSync.doc.transact(()=>{let n=this.value.selection,r=cO[e.data.get("schemaType")||"document"],i=vp.create({document:e},{normalize:!1}).setSchema(r);if(i.document!==e)throw new Error("Document should not be modified by creation of Value");let a=i.change({save:!1}).normalize();a.value.document!==i.document&&(i=i.merge({document:a.value.document}),ES(a,t));let c=this.dataSync.presence?this.createSelectionFromRelatives(i.document,this.dataSync.presence.positions):void 0;return c&&(c=c.normalize(e)),c&&n.isFocused&&(c=c.focus()),i=i.merge({selection:c??he.create()}),i},"local")}keepAlive(){return this.manager.keepAlive(this)}open(t={}){return this.dataSync.presence||this.dataSync.setPresence({data:t}),this.dataSync.open(this.contentId,"/branches/:branchId/pages/:pageId/document/datasync",{branchId:this.branchId,pageId:this.pageId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(t,e){return this.events.addListener(t,e),()=>{this.events.removeListener(t,e)}}applyChange(t){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");this.manager.touch(this);let e=this.value;if(this.#e=t.value,e.document!==t.value.document?(this.dataSync.transact(n=>{ES(t,qp(n))}),this.updateSelections()):this.events.emit("value"),t.value.selection!==e.selection){let n=t.value.selection;this.dataSync.setPresence({data:{...this.dataSync.presence?.data||{}},positions:L_(t.value.document,this.dataSync.doc,n)})}t.value.selection.isBlurred&&this.dataSync.flushBatchUpdates()}async change(t){let e=this.value.change();return t(e),this.applyChange(e),this.waitForSync()}updateSelections(){this.dataSync.state!=="open"?this.selections=ua.create():this.selections=ua.create(this.dataSync.presences.map(t=>{let e=this.createSelectionFromRelatives(this.value.document,t.positions);return e?e.merge({data:uu.create({clientId:t.clientId,...t.data})}):null}).filter(ue)),this.events.emit("selections")}undo(){return this.dataSync.undo()}redo(){return this.dataSync.redo()}createSelectionFromRelatives(t,e){let n=this.dataSync.doc;return D_(t,{anchor:e.anchor&&sS(e.anchor,n)||void 0,focus:e.focus&&sS(e.focus,n)||void 0})}};s();var Zg=class{constructor(t,e={}){this.browserCache=e.browserCache,this.cache=qn({getKey:n=>n,getValue:async n=>{let r=await t(n),i=Array.isArray(r)?r:[r],a={};if(i.forEach(c=>{let l=$_(c),u={token:c,metadata:l};Object.keys(l.payload.content).forEach(d=>{a[d]=u,n!==d&&this.cache.write(d,u)})}),!a[n])throw new Ti.Forbidden(`No authentication for content "${n}"`);return a[n]},ttl:n=>n.metadata.expiration-(Date.now()+5*60*1e3),effects:this.browserCache?[this.browserCache.effect]:[]})}async getParsedToken(t){return await this.cache.readAsync(t)}async getToken(t){let{token:e}=await this.getParsedToken(t);return e}async clearCache(){this.cache.clearAll(),this.browserCache&&await this.browserCache.clearCache()}};s();var fI=it("hive:HiveDataSyncManager"),WS=2,Jg=class{constructor(t,e={}){this.syncs=new Map;this.ids=new WeakMap;this.gcClock=0;this.client=t,this.ttl=e.ttl??1e3*60*5}close(t){let e=this.ids.get(t);if(!e)throw new Error("Unknown sync client");let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");n.sync.destroy(),this.syncs.delete(e),this.ids.delete(t)}closeAll(){this.stopGarbageCollect(),[...this.syncs.values()].map(t=>t.sync.close()),this.syncs=new Map,this.ids=new WeakMap}touch(t){let e=this.ids.get(t);if(!e)return!1;let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");return n.clock=this.gcClock,!0}keepAlive(t){this.touch(t);let e=setInterval(()=>{this.touch(t)||n()},this.ttl/2),n=()=>{e&&clearInterval(e),e=void 0};return n}branch(t,e,n){let r=n?.readOnly??!1,i=this.getSync(`${t}/${e}`,()=>new Up(this,{contentId:t,branchId:e},{readOnly:r}),n);if(i&&!(i instanceof Up))throw new Error(`Expected HiveBranchRevision, got ${i.constructor.name}`);return i}pageDocument(t,e,n,r){let i=this.getSync(`${t}/${e}/${n}`,()=>new Yp(this,{contentId:t,branchId:e,pageId:n},r),r);if(i&&!(i instanceof Yp))throw new Error(`Expected HiveBranchDocument, got ${i.constructor.name}`);return i}getSync(t,e,n){let r=n?.readOnly??!1,i=this.syncs.get(t);if(i)return i.sync.dataSync.setReadOnly(r),i.sync;if(n?.autoInit===!1)return;let a=e();return this.syncs.set(t,{sync:a,clock:this.gcClock}),this.ids.set(a,t),a.dataSync.listen("clientId",c=>{this.clientId=c}),fI.info(`initialize sync for "${t}"`),this.startGarbageCollect(),a}garbageCollect(){this.gcClock+=1;for(let[t,{sync:e,clock:n}]of this.syncs.entries())if(n<this.gcClock-WS){let r=(this.gcClock-n)*(this.ttl/WS);fI.info(`garbage collection "${t}", last active ~${r}ms ago`),this.close(e)}this.syncs.size===0&&this.stopGarbageCollect()}startGarbageCollect(){this.gcInterval||(this.gcInterval=setInterval(()=>this.garbageCollect(),this.ttl/WS))}stopGarbageCollect(){this.gcInterval&&(clearInterval(this.gcInterval),this.gcInterval=void 0)}};s();var Qg=class{constructor(t){this.branchesCache=qn({getValue:async t=>{try{return await this.client.getBranch(t.contentId,t.branchId)}catch(e){if(e.statusCode===404)return;throw e}}});this.revisionsCache=qn({getValue:async t=>{try{return await this.client.getRevision(t.contentId,t.revisionId)}catch(e){if(e.statusCode===404)return;throw e}}});this.branchesHistoryCache=qn({getValue:async t=>await this.client.getBranchHistory(t.contentId,t.branchId,{page:t.initialRevisionId,limit:t.size,...t.git!==void 0?{git:t.git}:{}})});this.documentsCache=qn({getValue:async t=>{try{return await this.client.getDocument(t.contentId,t.documentId)}catch(e){if(e.statusCode===404)return;throw e}},toJS:t=>t!==void 0?$x(t):"undefined",fromJS:t=>t!=="undefined"?Yx(t):void 0});this.client=t}getBranchHistory(t,e,n){return cu(this.branchesHistoryCache.readCacheState({contentId:t,branchId:e,initialRevisionId:n.page,size:n.limit,...n.git!==void 0?{git:n.git}:{}}))}getBranchRevision(t,e){let n=this.client.sync.branch(t,e,{autoInit:!1});return n?n.revision:Pf(cu(this.branchesCache.readCacheState({contentId:t,branchId:e})),r=>{if(r)return this.getRevision(t,r.revision)})}getBranchPageDocument(t,e,n){let r=this.client.sync.pageDocument(t,e,n,{autoInit:!1});return r?r.value.document:Pf(cu(this.branchesCache.readCacheState({contentId:t,branchId:e})),i=>{if(i)return Pf(this.getRevision(t,i.revision),a=>{if(a){let c=a.pages[n];return c?.type!=="document"?void 0:c.document?this.getDocument(t,c.document):yu(c.id).document}})})}getRevision(t,e){return cu(this.revisionsCache.readCacheState({contentId:t,revisionId:e}))}getDocument(t,e){return cu(this.documentsCache.readCacheState({contentId:t,documentId:e}))}toJSON(){return{documents:this.documentsCache.toJS(),revisions:this.revisionsCache.toJS(),branches:this.branchesCache.toJS()}}fromJSON(t){t.documents&&this.documentsCache.fromJS(t.documents),t.revisions&&this.revisionsCache.fromJS(t.revisions),t.branches&&this.branchesCache.fromJS(t.branches)}};s();s();var gI=y(fp(),1);var eh=class{constructor(t,e,n,r,i){this.id=void 0;this.state=null;this.events=new gI.default;this.client=t,this.contentId=e,this.path=n,this.pathParams=r,i&&(this.id=i)}async start(t={}){if(this.id)throw new Error("Operation already started");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})).json();return this.setState(n),n}async update(t){if(!this.id)throw new Error("Operation not started or HiveContentOperation() is called without an existing operation ID");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...t,id:this.id})})).json();return this.setState(n),n}async markAsSucceeded(){return this.update({status:2})}setState(t){this.id=t.id,this.state=t,this.events.emit("update",t)}listen(t){return this.events.on("update",t),()=>{this.events.off("update",t)}}};var r3=it("hive-client"),hI=typeof globalThis.window<"u"||!1,th=class{constructor(t,e,n={}){this.isRunningAtEdge=hI;let r;this.getEndpoint=typeof t=="string"?()=>Promise.resolve(t):async()=>(r||(r=await t()),r),this.auth=new Zg(e,{browserCache:n.tokensBrowserCache}),this.store=new Qg(this),this.sync=new Jg(this),this.clientId=ma(),n.locationHint&&(this.isRunningAtEdge=n.locationHint)}close(){this.sync.closeAll()}async clearAuthCache(){await this.auth.clearCache(),this.close()}getSocket(t,e,n,r){if(!this.isRunningAtEdge||!hI)throw new Error("HiveClient#getSocket can only be called from the edge");let i=async()=>{let a=yI(t,e,n),c=await this.auth.getToken(t),l=await this.getEndpoint(),u=new URL(a,l);if(u.protocol=u.protocol.replace("http","ws"),r)for(let[d,p]of Object.entries(r))u.searchParams.set(d,p);return u.searchParams.set("authToken",c),u.toString()};return new jg(i)}async getBranch(t,e){return await(await this.request(t,"/branches/:branchId",{path:{branchId:e}})).json()}async getBranchRevision(t,e,n){return await(await this.request(t,"/branches/:branchId/save",{path:{branchId:e},query:n?{mask:n.join(",")}:{}},{method:"POST"})).json()}async saveBranch(t,e){return{revisionId:(await this.getBranchRevision(t,e,["id"])).id}}async getBranchHistory(t,e,n={}){let{limit:r=10,page:i,git:a,refresh:c}=n;return await(await this.request(t,"/branches/:branchId/history",{path:{branchId:e},query:{limit:r.toString(),...i?{page:i}:{},...a!==void 0?{git:`${a}`}:{},...c!==void 0?{refresh:`${c}`}:{}}})).json()}async getRevision(t,e,n){return await(await this.request(t,"/revisions/:revisionId",{path:{revisionId:e},query:n?{mask:n.join(",")}:{}})).json()}getRevisionInfo(t,e){return this.getRevision(t,e,uO)}async mergeBranch(t,e){if(!this.isRunningAtEdge)throw new Error("HiveClient#mergeBranch can only be called from the edge");return await(await this.request(t,"/branches/:branchId/merge",{path:{branchId:e}},{method:"POST"})).json()}async rollbackBranch(t,e,n){await this.request(t,"/branches/:branchId/rollback",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})}async updateBranch(t,e){return await(await this.request(t,"/branches/:branchId/update",{path:{branchId:e}},{method:"POST"})).json()}async checkoutBranch(t,e,n,r={}){return(await this.request(t,"/branches/:branchId/checkout",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...i3(r.operationId)},body:JSON.stringify(n)})).json()}async getDocument(t,e){let r=await(await this.request(t,"/documents/:documentId",{path:{documentId:e}},{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})).arrayBuffer();return oS(new Uint8Array(r))}async getPageDocument(t,e,n){if(!this.isRunningAtEdge)throw new Error("HiveClient#getPageDocument can only be called from the edge");let i=await(await this.request(t,"/branches/:branchId/pages/:pageId/document",{path:{branchId:e,pageId:n}})).arrayBuffer();return oS(new Uint8Array(i))}async createDocument(t,e,n={}){return await(await this.request(t,"/documents",{query:n.documentId?{documentId:n.documentId}:{}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/octet-stream"},body:jx(n.skipNormalization?e:lO(e),{preserveKeys:!0})})).json()}async createRevision(t,e){return await(await this.request(t,"/revisions",{},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}getContentOperation(t,e,n,r){return new eh(this,t,e,n,r)}getBranchContentOperation(t,e,n){return this.getContentOperation(t,"/branches/:branchId/operation",{branchId:e},n)}async createFileBlob(t,e,n){let r=await this.request(t,"/blobs",{query:{name:e.name}},{method:"POST",headers:{Accept:"application/json","Content-Type":e.contentType},body:n}),{blobId:i}=await r.json();return{blobId:i,downloadURL:UP(await this.getEndpoint(),t,{blobId:i,name:e.name})}}async updateRevisionMetadata(t,e,n){return await(await this.request(t,"/revisions/:revisionId",{path:{revisionId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).json()}async duplicateContent(t,e){return(await this.request(t.contentId,"/branches/:branchId/duplicate",{path:{branchId:t.branchId}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({origin:e,page:t.pageId})})).json()}async triggerAlarm(t,e={force:!1}){t.pageId?await this.request(t.contentId,"/branches/:branchId/pages/:pageId/document/alarm",{path:{branchId:t.branchId,pageId:t.pageId},query:{force:String(e.force)}},{method:"POST"}):await this.request(t.contentId,"/branches/:branchId/alarm",{path:{branchId:t.branchId},query:{force:String(e.force)}},{method:"POST"})}async request(t,e,n,r={},i={}){let{retries:a=3}=i,{path:c={},query:l={}}=n,u=ma(),d=new Ei(`hive:request:${(r.method||"GET").toLowerCase()}:${e}`);return d.label("contentId",t),d.setLabels({requestId:u,clientId:this.clientId,locationHint:this.isRunningAtEdge,...n}),d.wrap(async()=>{let p=yI(t,e,c),f=await this.auth.getToken(t),m=await this.getEndpoint(),h=new URL(p,m);h.search=new URLSearchParams(l).toString();let b=new Headers(r.headers||{});b.set("Authorization",`Bearer ${f}`),b.set("X-Request-Id",u),b.set("X-Client-Id",this.clientId),typeof this.isRunningAtEdge=="string"&&b.set("X-Hive-Location-Hint",this.isRunningAtEdge);let w=await vI(()=>fetch(h.toString(),{...r,headers:b}),a),k=w.headers.get("cf-ray");if(d.label("rayId",k),!w.ok)try{let x="";try{x=(await w.clone().json()).error.message}catch{x=`Unexpected text response: ${await w.text()}`}throw Ti.fromStatusCode(w.status,x)}catch(x){throw x.statusCode?x:new Error(`Unexpected response with status code ${w.status}: ${x.message}`)}return w})}};function yI(o,t,e){for(let[n,r]of Object.entries(e))t=t.replace(`:${n}`,r);return`content/${o}${t}`}function i3(o){return o?{"X-Content-Operation-Id":o}:{}}async function vI(o,t=3,e=500){if(t<=0)return o();try{let n=await o();if(n.status===504||n.status===503)throw Ti.fromStatusCode(n.status,n.statusText);return n}catch(n){if(r3.error("retry because of error",n,{attemptsLeft:t,delay:e}),t>0)return await new Promise(r=>setTimeout(r,e)),vI(o,t-1,e*2);throw n}}function FS(o){let{children:t}=o,e=oh.useMemo(()=>{if(o.client)return o.client;let n=new th(o.endpoint,o.fetchContentAuthToken,{tokensBrowserCache:o.tokensBrowserCache});return o.store&&n.store.fromJSON(o.store),n},[o.client,o.endpoint,o.fetchContentAuthToken,o.store]);return oh.createElement(t1.Provider,{value:e},t)}s();var Gu=y(C());var a3=Gu.createContext(null);function Yt(){return Gu.useContext(a3)}s();var bI=y(C());function SI(o){let e=ye().sync.pageDocument(o.branch.contentId,o.branch.branchId,o.pageId,{readOnly:o.readOnly}),n=e.open(o.presence);if(n)throw n;return bI.useEffect(()=>{let r=e.keepAlive();return()=>{e.dataSync.state==="open"&&e.dataSync.setPresence({positions:{}}),r()}},[e]),e}s();var uc=y(C());function wI(o){let t=uc.useMemo(()=>({getCurrentValue:()=>o.value,subscribe:a=>o.listen("value",a)}),[o]),e=uc.useMemo(()=>({getCurrentValue:()=>o.selections,subscribe:a=>o.listen("selections",a)}),[o]),n=uc.useSyncExternalStore(t.subscribe,t.getCurrentValue),r=uc.useSyncExternalStore(e.subscribe,e.getCurrentValue),i=uc.useCallback(a=>{o.applyChange(a)},[o]);return[n,r,i]}s();var nh=y(C());function CI(o){let t=o.dataSync,e=nh.useMemo(()=>({getCurrentValue:()=>t.presences,subscribe:n=>t.listen("presences",n)}),[t]);return nh.useSyncExternalStore(e.subscribe,e.getCurrentValue)}s();var kI=y(C());function xI(o){return kI.useMemo(()=>({onKeyDown(t,e){if(mS.isRedo(t))return o.redo(),t.preventDefault(),e;if(mS.isUndo(t))return o.undo(),t.preventDefault(),e}}),[o])}s();var zS=y(C());function OI(o){let t=zS.default.useMemo(()=>({getCurrentValue:()=>{if(o)return o.clock},subscribe:e=>o?o.listen("update",e):()=>{}}),[o]);return zS.default.useSyncExternalStore(t.subscribe,t.getCurrentValue,()=>{})}s();function PI(o){let{r:t,g:e,b:n}=c1(o);return Math.sqrt(.299*(t*t)+.587*(e*e)+.114*(n*n))}function Ca(o){return PI(o)>150?"light":"dark"}function rh(o){let t=PI(o);return t>240?"lightest":t>215?"light":t>190?"semiLight":t>165?"medium":t>140?"semiDark":t>115?"dark":"darkest"}s();var Hu=y(C()),ih=y(d9());function _I(o=2e3){let[t,e]=Hu.useState(!1),n=Hu.useRef(null);return Hu.useEffect(()=>(!t&&typeof window<"u"&&(n.current=setTimeout(()=>(0,ih.unstable_runWithPriority)(ih.unstable_IdlePriority,()=>e(!0)),o)),()=>{n.current&&clearTimeout(n.current)}),[]),t}s();var II=y(C());function RI(){let o=II.useRef();return ku(()=>{o.current=window},[]),o}s();var Ku=y(C());function TI(){let o=Ku.useRef(new WeakMap);return Ku.useCallback(t=>(o.current.has(t)||o.current.set(t,Ku.createRef()),o.current.get(t)),[])}s();var EI=y(C());function ah(o,t){let e=Go(o);EI.default.useEffect(()=>{let n=()=>e.current(),r=window.setTimeout(n,t);return()=>window.clearTimeout(r)},[t])}s();var $p=y(C());s();var MI=y(C());function sh(o,t=500){let e=MI.useRef(0);return n=>e.current&&Date.now()-e.current<t?(o(n),e.current=0,!0):(e.current=Date.now(),!1)}s();var LI=y(C());function DI(o,t){let{scope:e=document,exact:n=!1}=t||{},r=Go(o);LI.useEffect(()=>{if(!o)return;let i=a=>{(n?a.target===e:e.contains(a.target))&&a.key==="Tab"&&(a.defaultPrevented||a.preventDefault(),r.current?.(a.shiftKey))};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[r,!!o,e,n])}function NI(o){let{anchor:t,children:e,wrapper:n,onClose:r,...i}=o,a=$p.useRef(null);return js({...i,onClose:r},a),$p.createElement(ha,{ref:a,opened:i.opened,anchor:t,wrapper:n},$p.createElement(dg.Provider,{value:r},e))}s();var ka=y(C()),AI=y(z());function ch(o,t={}){let e=ka.createContext(null);function n(i){let{children:a,...c}=i,l=typeof o=="object"?o:o(i),[u,d]=ka.useState(l),[p,f]=ka.useState(!1),m=h=>{let{layout:b}=h.nativeEvent;(!u||t.width!==!1&&b.width!==u.width||t.height!==!1&&b.height!==u.height)&&(d(b),f(!0))};return ka.createElement(e.Provider,{value:{ready:p,dimensions:u}},ka.createElement(AI.View,{...c,onLayout:m},a))}function r(){let i=ka.useContext(e);if(!i||!i.dimensions)throw new Error("Dimensions not available");return[i.dimensions,i.ready]}return{View:n,useDimensions:r}}s();var gl=y(C()),dh=y(z());s();var lh=y(C()),uh=y(z());var s3=X.createResponsiveComponent(uh.TouchableOpacity);function BI(o){let[,t]=P(u3),{close:e}=fo(),n=xu()==="mobile",r=o.closeable||n,i=()=>{o.onClose&&o.onClose(),e(o.id)},a=cl({mount:c3,unmount:l3});return lh.createElement(uh.View,{ref:a},lh.createElement(s3,{mobileStyle:t.toastMobile,desktopStyle:t.toastDesktop,onPress:()=>{o.onOpen&&o.onOpen(),r&&i()}},lh.createElement(di,{...o,onClose:r?i:void 0,style:t.alert,mainBackground:!0})))}var c3={duration:ya.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},l3={duration:ya.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},u3=F.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:g.small},toastMobile:{width:"100%",minWidth:0},alert:o=>({...o.shadows.pop,borderColor:o.colors.border.main})});function WI(o){let t=zn(R1),e=zn(I1),n=gl.useRef(null),r=m3[t];return gl.createElement(hr,{ref:n},gl.createElement(X.View,{style:[p3.toaster],mobileStyle:r.mobile,desktopStyle:r.desktop},gl.createElement(x1,null,e.map(i=>gl.createElement(BI,{...i,key:i.id})))))}var p3=dh.StyleSheet.create({toaster:{position:"fixed",zIndex:200}}),m3={"bottom-right":dh.StyleSheet.create({desktop:{bottom:g.medium,right:g.medium},mobile:{bottom:g.medium,right:g.medium,left:g.medium}}),"bottom-right-with-bar":dh.StyleSheet.create({desktop:{bottom:g.xxlarge,right:g.medium},mobile:{bottom:g.xxlarge+g.xlarge+g.medium,right:g.medium,left:g.medium}})};s();var Vr=y(C()),ws=y(z());var f3=q.createInteractiveComponent(Br);function xa(o){let{icon:t,title:e,subtitle:n,details:r,style:i,buttons:a=[],...c}=o,[,l]=P(A);return Vr.createElement(us,{style:[S.alignCenter,g.Padding.medium,i],...c},t?Vr.createElement(g3,{icon:t}):null,Vr.createElement(ws.View,{style:[S.flex1]},Vr.createElement(ws.View,{style:[S.directionRow,S.alignCenter]},Vr.createElement(f3.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary,descendantOf:us.interactiveHandle},e),n?Vr.createElement(Br,{style:[l.Label,l.textMuted,g.Margin.mediumLeft]},n):null),r?Vr.createElement(ws.View,null,Vr.createElement(ws.Text,{style:[l.Label,l.textMid]},r)):null),a.length>0?Vr.createElement(ws.View,{style:[S.directionRow,S.alignCenter,g.Margin.mediumLeft]},a.map((u,d)=>u?Vr.createElement(ws.View,{style:[g.Margin.smallLeft],key:d},u):null)):null)}function g3(o){let{icon:t}=o,[,e]=P(A),n=q.useInteractiveComponent(t);return Vr.createElement(ws.View,{style:[g.Margin.mediumRight]},Vr.createElement(n.Child,{size:R.S,style:[e.textMuted],hoverStyle:e.primary}))}s();async function FI(o){let t=()=>{let n=o;for(;n&&(n=n.parentElement,!(n===document.querySelector("body")||n?.hasAttribute("data-virtualparent"))););return n},e;return new Promise(n=>{let r=t();if(!r||!r.firstChild)return;let i=()=>{e.disconnect(),n()},a=!1;e=new IntersectionObserver(l=>{let[u]=l;u.isIntersecting&&requestAnimationFrame(()=>{i(),a=!0})},{rootMargin:"-50% 0% -50% 0%"});let c=()=>{Sg(r,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"}),setTimeout(()=>{a||c()},500)};c(),e.observe(r)})}s();var KS=y(C());s();var Ht=y(C()),XI=y(z());s();var Qe=y(C()),Sn=y(z());s();var Oe=y(C()),$t=y(z());var zI=Oe.forwardRef(function(t,e){let{command:n,query:r,active:i,executeCommand:a,onHoverIn:c}=t,[l,u]=P(A),[,d]=P(h3),[p,f]=yn(!1),m=u.text,h=u.textMid,b=u.primary,w=l.colors.background.main;i&&(m=u.textStandout,h=u.textMid,w=l.colors.background.muted);let k=[u.Bold],x=Oe.useCallback(()=>{let I=a(n);I instanceof Promise&&f(()=>I)},[n,a]),O=Oe.useCallback(()=>c(n),[n,c]),_=q.useInteractiveState({onHoverIn:O});return Oe.createElement(yr,{ref:e,component:$t.TouchableOpacity,..._.events,onMouseDown:I=>{I.preventDefault()},onPress:x,backgroundColor:w,style:[S.directionRow,S.alignCenter,d.commandItem,g.Margin.smallHorizontal,g.Padding.xsmallVertical,g.Padding.smallHorizontal,{height:VS(n)}],testID:n.testID},p?Oe.createElement($t.View,{style:[g.Padding.mediumRight]},Oe.createElement(Ce,{size:"medium"})):n.icon?Oe.createElement($t.View,{style:[g.Padding.mediumRight]},Oe.createElement(Oe.Suspense,{fallback:Oe.createElement($t.View,{style:{width:R.ICON_M,height:R.ICON_M}})},Oe.createElement(n.icon,{size:R.ICON_M,style:b}))):null,Oe.createElement($t.View,{style:S.flex1},Oe.createElement($t.View,{style:S.directionRow},Oe.createElement($t.View,{style:S.flex1},n.title?Oe.createElement($t.View,null,Oe.createElement($t.Text,{style:[u.Label,m,n.subtitle?u.Bold:u.Medium],numberOfLines:1},Oe.createElement(Og,{query:r,text:n.title,highlight:k}))):null,n.subtitle?Oe.createElement($t.View,null,Oe.createElement($t.Text,{style:[u.Caption,h],numberOfLines:1},Oe.createElement(Og,{query:r,text:n.subtitle,highlight:k}))):null)),n.body?Oe.createElement($t.View,{style:[d.commandBody,g.Padding.smallLeft,g.Margin.smallTop]},n.body.map((I,N)=>Oe.createElement($t.View,{key:N},Oe.createElement($t.Text,{style:[u.Caption,u.textMid],numberOfLines:1},Oe.createElement(Og,{query:r,text:I,highlight:k}))))):null),n.label?Oe.createElement($t.View,null,Oe.createElement(M1,{size:"medium",kind:n.label.kind,icon:n.label.icon},n.label.title)):Oe.createElement(Oe.Fragment,null,n.descendant?Oe.createElement($t.View,{style:[g.Padding.mediumLeft]},Oe.createElement(v.ChevronRight,{size:R.ICON_S,style:[u.textMuted]})):null,n.type===1?Oe.createElement($t.View,{style:[g.Padding.mediumLeft]},Oe.createElement(ec,{value:n.selected,onValueChange:x,size:R.ICON_S})):null,n.type===0?Oe.createElement($t.View,{style:[g.Padding.mediumLeft]},Oe.createElement(xg,{value:n.selected,onValueChange:x,size:R.ICON_S})):null,n.type===2?Oe.createElement($t.View,{style:[g.Padding.mediumLeft]},Oe.createElement(kg,{value:n.enabled,onValueChange:()=>{}})):null))});function VS(o){let t=0;return t+=2*g.small,t+=Math.max(o.title&&He.Label.lineHeight||0,o.icon?R.ICON_M:0,typeof o.selected=="boolean"||typeof o.enabled=="boolean"?R.ICON_S:0),o.subtitle&&(t+=He.Caption.lineHeight||0),o.body&&(t+=g.small,t+=o.body.length*(He.Caption.lineHeight||0)),t}var h3=F.create({commandItem:o=>({borderRadius:o.radiuses.medium}),commandBody:o=>({borderLeftWidth:1,borderLeftColor:o.colors.border.mid})});s();function ph({getItemHeight:o,getItemSeparatorHeight:t=()=>0,getSectionSeparatorHeight:e=()=>0,getSectionHeaderHeight:n=()=>0,getSectionFooterHeight:r=()=>0,listHeaderHeight:i=0,stickySectionHeadersEnabled:a}){return(c,l)=>{let u=0,d=typeof i=="function"?i():i,p=0,f=c.length;for(let m=0;m<f&&(p<l||m===0);m++){let h=c[m],b=c[m].data,w=b.length,k=c[m-1],x=c[m+1],O={section:h,index:m},_=e({section:h,index:m,leadingItem:void 0,trailingItem:b[0],leadingSection:k,trailingSection:x});d+=u+_+(a&&m===1?n({section:c[0],index:0}):0),u=a&&m===0?0:n(O),m!==0&&p++;for(let I=0;I<w&&(p<l||m===0&&I===0);I++){d+=u;let N=b[I],T=I>0&&I<w-1?t({item:N,section:h,index:I,leadingItem:b[I-1],trailingItem:b[I+1],leadingSection:k,trailingSection:x}):0;u=o({item:N,section:h,index:I})+T,p++}if(p<l&&(d+=e({section:h,index:m,leadingItem:b[b.length-1],trailingItem:void 0,leadingSection:k,trailingSection:x})),p<l){let I=e({section:h,index:m,leadingItem:b[b.length-1],trailingItem:void 0,leadingSection:k,trailingSection:x});d+=u+I,u=r(O),p++}}return{index:l,length:u,offset:d}}}function VI(o){let{computed:{listId:t,items:e,sections:n,areMoreLoading:r},withKeyboardInteractions:i,palette:a,setPalette:c,setTopPalette:l}=o,u=xu(),d=Qe.useRef(null),p=TI(),f=Qe.useCallback(async L=>{let V=await Z1(a,L);V?c(V):l(null)},[c,l]),m=Qe.useCallback(L=>{c(V=>{if(!V)return null;let j=p(L),oe=J1(V,L,j);return oe||(V.descendant?{...V,descendant:void 0}:V)})},[c,p]),h=Qe.useCallback(()=>{c(L=>L?.parent?null:L)},[c]),b=Qe.useCallback(L=>{let V=-1;return{sectionIndex:n.findIndex(oe=>(V=oe.data.findIndex(H=>H.key===L),V>=0)),itemIndex:V,viewPosition:.5}},[n]),w=Qe.useCallback(L=>d.current?.scrollToLocation(b(L.key)),[b]),k=eP({active:i,items:e,onSelect:f,onOpen:m,onClose:h,scrollTo:w}),x=n.length>1,O=Qe.useCallback(L=>{k.hoverItem(L),m(L)},[k.hoverItem,m]),_=Qe.useMemo(()=>ph({getItemHeight:({item:L})=>VS(L),getSectionSeparatorHeight:({section:L,leadingItem:V,leadingSection:j,trailingItem:oe,trailingSection:H})=>j&&!V&&!L.group.title?2*(g.small-1)+1:H&&!oe?R.S/4:0,getSectionHeaderHeight:({section:L})=>x&&L.group.title?R.S:0}),[x]),I=Qe.useMemo(()=>x?({section:L})=>L.group.title?Qe.createElement(v3,{group:L.group}):null:void 0,[x]),N=Qe.useCallback(L=>Qe.createElement(b3,{...L}),[]),T=Qe.useCallback(({item:L})=>Qe.createElement(zI,{ref:p(L),active:u==="desktop"&&L.key===k.cursor.current?.key,command:L,query:a.query.text,executeCommand:f,onHoverIn:O}),[f,p,k.cursor.current?.key,O,u,a.query.text]),E=r;if(!E&&e.length===0){let L=a.placeholder||(Np(a)?null:"No items found");return L?Qe.createElement(y3,{placeholder:L}):null}return Qe.createElement(Sn.View,{style:[S.flex1]},Qe.createElement(Sn.SectionList,{key:t,ref:d,sections:n,extraData:k.cursor,getItemLayout:_,renderItem:T,SectionSeparatorComponent:N,renderSectionHeader:I,contentContainerStyle:[g.Padding.smallVertical],ListFooterComponent:E?Qe.createElement(Sn.View,{style:[S.directionRow,S.justifyContentCenter,g.Padding.medium]},Qe.createElement(Ce,{size:"large"})):null}))}function y3(o){let{placeholder:t}=o,[,e]=P(A);return Qe.createElement(Sn.View,{style:[g.Padding.smallHorizontal,g.Padding.mediumVertical]},Qe.createElement(Sn.View,{style:[g.Padding.mediumHorizontal]},Qe.createElement(Sn.Text,{style:[e.Caption,e.textMuted]},t)))}function v3(o){let{group:t}=o,[,e]=P(A);return Qe.createElement(Sn.View,{style:[S3.paletteGroupHeader,S.directionRow,S.alignCenter,g.Padding.smallHorizontal]},Qe.createElement(Sn.View,{style:[g.Padding.smallHorizontal]},Qe.createElement(Sn.Text,{style:[e.GroupTitle,e.textMuted]},t.title)))}function b3(o){let{leadingSection:t,section:e,leadingItem:n,trailingSection:r,trailingItem:i}=o,[,a]=P(w3);return t&&!n&&!e.group.title?Qe.createElement(Sn.View,{style:a.paletteDividerUntitled}):(r&&!i&&(Sn.View,a.paletteDividerFooter),null)}var S3=Sn.StyleSheet.create({paletteGroupHeader:{height:R.S}}),w3=F.create({paletteDividerUntitled:(o,t)=>({marginTop:g.small-1,marginBottom:g.small-1,borderTopColor:t.color==="light"?o.colors.border.mid:o.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:R.S/4}});s();var Xu=y(C()),Uu=y(z());function qI(o){let{error:t}=o,[,e]=P(A);return console.error(t),Xu.createElement(Uu.View,{style:[S.directionRow,S.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal]},Xu.createElement(Uu.View,{style:[g.Padding.mediumRight,g.Padding.xsmallTop]},Xu.createElement(v.Warning,{size:R.ICON_S,style:e.danger})),Xu.createElement(Uu.View,{style:[S.flex1,S.directionRow,S.alignCenter]},Xu.createElement(Uu.Text,{style:[e.danger,e.Label]},la(t))))}s();var wr=y(C()),Cs=y(z());var GI=wr.forwardRef(function(t,e){let{palette:n,setPalette:r,withItems:i,placement:a}=t,[,c]=P(C3),[l,u]=P(A),[d,p]=$s(n.query.text,[n]),f=h=>{p(h),r(b=>!n||!b?n:Iu({...b,descendant:void 0},h))},m=h=>{(h.nativeEvent.key==="Escape"||h.nativeEvent.key==="Backspace"&&n.query.text.length===0)&&r(null)};return wr.createElement(Cs.View,{style:i&&c.paletteInputWrapperWithBottomBorder},wr.createElement(Cs.View,{style:[S.directionRow,S.alignCenter]},n.parent&&a==="right"?wr.createElement(Cs.View,{style:[g.Padding.smallLeft]},wr.createElement(v.ChevronLeft,{size:R.ICON_M,style:u.textMuted})):null,wr.createElement(Cs.View,{style:[S.flex1,S.directionRow,S.alignCenter,c.paletteInput,g.Margin.small]},wr.createElement(Cs.View,{style:[S.flex1]},wr.createElement(Cs.TextInput,{ref:e,value:d,placeholder:n.search,placeholderTextColor:l.colors.text.muted,onChangeText:f,onKeyPress:m,style:[u.Caption,u.text,g.Padding.mediumHorizontal,g.Padding.smallVertical]})),wr.createElement(X.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[g.Margin.smallHorizontal]},wr.createElement(B,{icon:v.X,size:"large",onPress:()=>r(null)}))),n.parent&&a==="left"?wr.createElement(Cs.View,{style:[g.Padding.smallRight]},wr.createElement(v.ChevronRight,{size:R.ICON_M,style:u.textMuted})):null))}),C3=F.create({paletteInputWrapperWithBottomBorder:(o,t)=>({borderBottomColor:t.color==="light"?o.colors.border.mid:o.colors.sidebar.itemBorder,borderBottomWidth:1}),paletteInput:o=>({backgroundColor:o.colors.background.muted,borderRadius:o.radiuses.large})});s();var Yu=y(C());function HI(o){let[t,e]=Yu.useState(!1),n=Ep(()=>new WeakMap),r=Yu.useRef(null);return Yu.useMemo(()=>{let i=[],a=[],c;o.groups.forEach(d=>{let p;try{p=k3(o,d)}catch(f){c=f;return}if(p instanceof Promise){let f=n.current.get(d);f&&i.push(f),a.push(p)}else p&&(n.current.set(d,p),i.push(p))});let l=i.filter(d=>d.data.length>0).sort((d,p)=>d.priority>p.priority?-1:d.priority<p.priority?1:0),u=l.reduce((d,p)=>(d.push(...p.data),d),[]);if(a.length>0){e(!0);let d=r.current=Promise.all(a);d.then(()=>{d===r.current&&(e(!1),r.current=null)}).catch(p=>su(new Error(p)))}return{listId:Date.now(),items:u,sections:l,areMoreLoading:t,error:c}},[o.groups,o.query,t,n])}function k3(o,t){try{let e=typeof t.commands=="function"?t.commands(o):t.commands,n=typeof t.commands!="function"||t.commands.length===0,r=t.priority||5;if(n){let i=x3(o.query.text,e);r=i.reduce((a,c)=>typeof c.score<"u"?Math.max((1-c.score)*10,a):a,r),e=i.map(a=>a.item)}return{group:t,priority:r,data:e}}catch(e){if(e instanceof Promise)return e;throw e}}function x3(o,t){return o?new wu(t,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(o):t.map(n=>({item:n,score:void 0}))}s();var HS=y(Tf()),hh=y(C());var qS=204,mh=246,GS=384,O3=630,fh=180,gh=355;function KI(o,t,e){let n=hh.useMemo(()=>_3(t,e),[t.position,!!t.parent,e]),r=hh.useCallback(l=>P3(l,t.position),[t.position]),[i,a,c]=g1(o,r,n);return[i,a,c]}function P3(o,t){let e,n=t?.width||"medium";switch(n){case"small":e={width:qS,maxWidth:qS,minWidth:qS,minHeight:0,height:fh,maxHeight:gh};break;case"medium":e={width:mh,maxWidth:mh,minWidth:mh,minHeight:0,height:fh,maxHeight:gh};break;case"large":e={width:GS,maxWidth:GS,minWidth:GS,minHeight:0,height:fh,maxHeight:gh};break;case"anchor":let r=Math.max(mh,o.width),i=(0,HS.default)(o.width,r,O3);e={width:(0,HS.default)(o.width,r,i),maxWidth:i,minWidth:r,minHeight:0,height:fh,maxHeight:gh};break;default:De(n)}return e}function _3(o,t){let e={cover:o.position?.cover,spacingWithAnchor:g.small};return o.parent?(e.offset={top:-g.small},e.spacingWithAnchor=g.medium,e.allowedPlacements=t==="left"?["left","right"]:["right","left"]):o.position?.width==="anchor"&&(e.allowedPlacements=["bottom","top"]),e}var I3=X.createResponsiveComponent(yr);function UI(o){let{paletteState:{palette:t},setPaletteState:e}=o,n=Ht.useRef(null),r=()=>e(null),i=C1({mount:M.animations.fadeIn,unmount:M.animations.fadeOut});js({opened:!0,closeOnEsc:!Np(t),closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:r},n),f1();let a=Ht.useRef(null);return r1({ref:a,onInteractOutside:r}),Ht.createElement(hr,{ref:n},Ht.createElement(Y,{ref:i,style:[M.position.fixed,M.floating.backdrop]},Ht.createElement(Y,{ref:a},Ht.createElement(YI,{...o,setTopPaletteState:e}))))}function YI(o){let{paletteState:{palette:t,anchorRef:e},setPaletteState:n,setTopPaletteState:r,parentPlacement:i}=o,[a,c]=KI(e,t,i),l=cl(ya.slideToL[c]);return Ht.createElement(Ht.Fragment,null,Ht.createElement(R3,{ref:l,palette:t,setPalette:p=>{n(f=>{if(!f)return null;let m=typeof p=="function"?p(f.palette):p;return m?{...f,palette:m}:null})},setTopPalette:p=>{r(f=>{if(!f)return null;let m=typeof p=="function"?p(f.palette):p;return m?{...f,palette:m}:null})},positionStyle:a,placement:c}),t.descendant?Ht.createElement(YI,{paletteState:t.descendant,setTopPaletteState:r,setPaletteState:p=>{n(f=>f?{...f,palette:{...f.palette,descendant:(typeof p=="function"?p(f.palette.descendant||null):p)||void 0}}:null)},parentPlacement:c}):null)}var R3=Ht.forwardRef(function(t,e){let{palette:n,setPalette:r,setTopPalette:i,positionStyle:a,placement:c}=t,l=Ht.useRef(null),[u,d]=P(T3),p=HI(n),f=!n.descendant;return Ht.useEffect(()=>{if(n.descendant)return;let m=l.current;m&&(document.activeElement===m||(m.select(),m.focus()))},[n]),Ht.createElement(XI.TouchableWithoutFeedback,{onPress:m=>m.preventDefault()},Ht.createElement(I3,{ref:e,backgroundColor:u.colors.background.main,style:[d.palette],mobileStyle:d.paletteMobile,desktopStyle:[d.paletteInline,a],onStartShouldSetResponder:()=>!0},Np(n)?Ht.createElement(GI,{ref:l,palette:n,setPalette:r,withItems:p.items.length>0,placement:c}):null,p.error?Ht.createElement(qI,{error:p.error}):Ht.createElement(VI,{computed:p,palette:n,withKeyboardInteractions:f,setPalette:r,setTopPalette:i})))}),T3=F.create({palette:o=>({borderRadius:o.radiuses.xlarge,borderColor:o.colors.border.main,borderWidth:1,overflow:"hidden",...o.shadows.pop}),paletteMobile:{position:"absolute",marginTop:0,top:g.small,left:g.small,right:g.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute"}});function $I(o){let[t,e]=Vn(j1);return KS.createElement(w1,null,t?KS.createElement(UI,{paletteState:t,setPaletteState:e}):null)}s();var jI=y(C());var E3=[al["1f44d"],al["1f389"],al["1f604"],al["1f602"],al["1f44f"],al["1f44e"]];function $u(o,t={}){let{withSearch:e=!0,max:n=5}=t;return ne({search:e?"Select an emoji\u2026":void 0,groups:[{key:"emojis",commands:r=>(r.query.text?$g(r.query.text):E3).slice(0,n).map(a=>({key:a.code,title:a.shortname,icon:c=>jI.createElement(Eo,{...c,code:a.code}),trigger:()=>o(a.code)}))}]})}s();var dc=y(C()),ks=y(z());var xs=dc.forwardRef(function(t,e){let{displayMode:n="inline",value:r,style:i,placeholder:a,readOnly:c,onChangeText:l,...u}=t,[d]=P(),p=!c&&l,f=dc.useMemo(()=>p&&n==="inline"?Cg(r||a||"",ks.StyleSheet.flatten([i])):0,[n,r,a,i,p]);if(!p){let m=dc.createElement(ks.Text,{style:[i],selectable:!0},r);return n==="inline"?m:dc.createElement(ks.View,{style:ZI.inputModeBlock},m)}return dc.createElement(ks.TextInput,{ref:e,placeholderTextColor:d.colors.text.muted,...u,value:r,onChangeText:l,placeholder:a,style:[i,n==="inline"?{width:f}:ZI.inputModeBlock]})}),ZI=ks.StyleSheet.create({inputModeBlock:{width:"100%"}});s();var yh=[{key:"blue",color:K.primary.base,title:"Blue"},{key:"purple",color:K.violet.base,title:"Purple"},{key:"orange",color:K.orange.base,title:"Orange"},{key:"red",color:K.scarlet.base,title:"Red"},{key:"yellow",color:K.YELLOW,title:"Yellow"},{key:"green",color:K.green.base,title:"Green"}],vh=[{key:"blue",color:K.primary.xlight,title:"Blue"},{key:"purple",color:K.violet.xlight,title:"Purple"},{key:"orange",color:K.orange.xlight,title:"Orange"},{key:"red",color:K.scarlet.xlight,title:"Red"},{key:"yellow",color:K.YELLOW_XXLIGHT,title:"Yellow"},{key:"green",color:K.green.xlight,title:"Green"}],Wce=[K.primary.light,K.violet.light,K.fuchsia.light,K.scarlet.light,K.orange.light,K.green.light];s();var Ve=y(C()),pi=y(z());s();var oR=9,US=Jf.reduce((o,t)=>{let e=o.find(r=>r.key===t.category);if(!e)return console.warn("Unknown emoji category","emoji"),o;(!e.data.length||e.data[e.data.length-1].emojis.length===oR)&&e.data.push({key:"",emojis:[]});let n=e.data[e.data.length-1];return n.key+=t.code,n.emojis.push(t),o},[{key:"people",title:"People",Icon:v.EmojiReaction,data:[]},{key:"nature",title:"Nature",Icon:v.RoleEditor,data:[]},{key:"food",title:"Food",Icon:v.Food,data:[]},{key:"activity",title:"Activity",Icon:v.Music,data:[]},{key:"travel",title:"Travel",Icon:v.EmojiBike,data:[]},{key:"objects",title:"Objects",Icon:v.EmojiWatch,data:[]},{key:"symbols",title:"Symbols",Icon:v.HeartOutlined,data:[]},{key:"flags",title:"Flags",Icon:v.EmojiFlag,data:[]}]);function nR(o){let t=$g(o);return{key:"search",title:"Results",data:V3(t,oR),Icon:v.Search}}function V3(o,t){let e=o.length;if(e===0)return[];let n=Math.ceil(e/t);return Array.from({length:n},(r,i)=>{let a=i*t,c=o.slice(a,a+t);return{key:c.map(l=>l.code).join("-"),emojis:c}})}function Sh(o){let{onPick:t,onRemove:e}=o,[n,r]=Ve.useState(""),[i,a]=Ve.useState(""),c=Ve.useRef(null);Ve.useEffect(()=>{let u=requestAnimationFrame(()=>{c.current&&c.current.focus()});return()=>{cancelAnimationFrame(u)}},[c]);let l=u=>{r(u),a(u)};return Ve.createElement(pi.View,{style:jp.emojiPicker},Ve.createElement(pi.View,{style:[jp.emojiPickerSearch,S.directionRow]},Ve.createElement(to,{kind:"search",size:"medium",ref:c,icon:v.Search,placeholder:"Search",value:n,onChangeText:l,cleareable:!0,style:S.flex1}),e?Ve.createElement(B,{icon:v.Trashcan,onPress:e,title:"Remove Emoji",size:"medium",kind:"secondary",style:g.Margin.smallLeft}):null),Ve.createElement(H3,{query:i,onPick:t}))}var q3=ph({getItemHeight:()=>bh,getSectionHeaderHeight:()=>rR,stickySectionHeadersEnabled:!0}),G3=({section:o})=>Ve.createElement(K3,{category:o}),H3=Ve.memo(function(t){let{query:e,onPick:n}=t,r=Ve.useRef(null),i=e?[nR(e)]:US,a=l=>{r.current&&r.current.scrollToLocation({sectionIndex:l,itemIndex:0})},c=Ve.useCallback(({item:l})=>Ve.createElement(X3,{row:l,onPick:n}),[n]);return Ve.createElement(Ve.Fragment,null,!e&&Ve.createElement(pi.View,{style:jp.emojiPickerCategories},US.map((l,u)=>Ve.createElement(B,{key:l.key,icon:l.Icon,onPress:()=>{a(u)}}))),Ve.createElement(pi.SectionList,{ref:r,sections:i,stickySectionHeadersEnabled:!0,renderItem:c,renderSectionHeader:G3,getItemLayout:q3}))}),K3=Ve.memo(function(t){let{category:e}=t,[,n]=P(iR),[,r]=P(A);return Ve.createElement(pi.View,{style:[n.emojiCategoryHeader]},Ve.createElement(pi.Text,{style:[r.GroupTitle,r.text]},e.title))},(o,t)=>o.category.title===t.category.title),X3=Ve.memo(function(t){let{row:e,onPick:n}=t;return Ve.createElement(pi.View,{style:jp.emojiRow},e.emojis.map(r=>Ve.createElement(U3,{key:r.code,code:r.code,onPick:n})))},(o,t)=>o.row.key===t.row.key&&o.onPick===t.onPick),U3=Ve.memo(function(t){let{code:e,onPick:n}=t,[,r]=P(iR);return Ve.createElement(q.TouchableOpacity,{onPress:()=>n(e),style:[jp.emojiItem],activeStyle:r.emojiItemHovered},Ve.createElement(Eo,{code:e,size:24}))}),bh=40,rR=26,iR=F.create({emojiCategoryHeader:o=>({height:rR,backgroundColor:o.colors.background.main,paddingLeft:g.medium,paddingRight:g.medium,paddingTop:g.small,paddingBottom:g.small}),emojiItemHovered:o=>({backgroundColor:o.colors.itemHover})}),jp=pi.StyleSheet.create({emojiPicker:{display:"flex",width:376,height:314},emojiPickerSearch:{padding:g.small},emojiPickerCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:g.small,paddingBottom:0,paddingTop:0},emojiRow:{display:"flex",flexDirection:"row",paddingLeft:g.small,paddingRight:g.small},emojiItem:{width:bh,height:bh,borderRadius:bh,display:"flex",alignItems:"center",justifyContent:"center",outlineStyle:"none"}});s();var Zp=y(C());s();var Os=JSON.parse('{"container":"container_UPXwU","darkestParentBackground":"darkestParentBackground_8TVPV","darkParentBackground":"darkParentBackground_ziFwB","semiDarkParentBackground":"semiDarkParentBackground_wgu6B","mediumParentBackground":"mediumParentBackground_BIBSL","semiLightParentBackground":"semiLightParentBackground_Yx9Vw","lightParentBackground":"lightParentBackground_INb4a","lightestParentBackground":"lightestParentBackground_FL4je","toggle":"toggle_siihR","toggleLightMode":"toggleLightMode_-FLG4","toggleDarkMode":"toggleDarkMode_uS4t3","toggleSwitch":"toggleSwitch_NtUzX","toggleButton":"toggleButton_ePBfn","toggleIcon":"toggleIcon_-vIfn"}');function aR(o){let{onValueChange:t,value:e=!1,backgroundColor:n,mode:r="switch",accesibilityLabel:i="Switch to dark mode"}=o,a=()=>{t()},c=r==="switch"?e?v.ThemeDark.CSS:v.ThemeLight.CSS:e?v.ThemeLight.CSS:v.ThemeDark.CSS,l=rh(n);return r==="switch"?Zp.default.createElement(Y,{as:"button",type:"button",role:"switch","aria-label":i,"aria-checked":e,onClick:a,style:[Os.container,Os[`${l}ParentBackground`]]},Zp.default.createElement(Y,{style:[Os.toggle,Os.toggleSwitch,M.backgroundColor.main,M.margin.xsmall,e?Os.toggleDarkMode:Os.toggleLightMode]},Zp.default.createElement(c,{style:[Os.toggleIcon,M.padding.xsmall]}))):Zp.default.createElement(Gt,{label:i,role:"switch",iconOnly:!0,leadingIcon:c,rounded:!0,style:Os.toggleButton,kind:"muted",onClick:a,"aria-checked":e,"aria-label":i,preventFocusOnPress:!0})}s();s();s();function Jp(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}var bt=y(C(),1);s();var pc=y(C(),1);var j3=pc.default.createContext(null);j3.displayName="PressResponderContext";var Qp=null,Z3=new Set,sR=!1,hl=!1,YS=!1;function $S(o,t){for(let e of Z3)e(o,t)}function J3(o){return!(o.metaKey||!o1()&&o.altKey||o.ctrlKey||o.key==="Control"||o.key==="Shift"||o.key==="Meta")}function cR(o){hl=!0,J3(o)&&(Qp="keyboard",$S("keyboard",o))}function ju(o){Qp="pointer",(o.type==="mousedown"||o.type==="pointerdown")&&(hl=!0,$S("pointer",o))}function Q3(o){n1(o)&&(hl=!0,Qp="virtual")}function eB(o){o.target===window||o.target===document||(!hl&&!YS&&(Qp="virtual",$S("virtual",o)),hl=!1,YS=!1)}function tB(){hl=!1,YS=!0}function lR(){if(typeof window>"u"||sR)return;let o=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){hl=!0,o.apply(this,arguments)},document.addEventListener("keydown",cR,!0),document.addEventListener("keyup",cR,!0),document.addEventListener("click",Q3,!0),window.addEventListener("focus",eB,!0),window.addEventListener("blur",tB,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",ju,!0),document.addEventListener("pointermove",ju,!0),document.addEventListener("pointerup",ju,!0)):(document.addEventListener("mousedown",ju,!0),document.addEventListener("mousemove",ju,!0),document.addEventListener("mouseup",ju,!0)),sR=!0}typeof document<"u"&&(document.readyState!=="loading"?lR():document.addEventListener("DOMContentLoaded",lR));function uR(){return Qp}function oB(o){if(uR()==="virtual"){let t=document.activeElement;fS(()=>{document.activeElement===t&&document.contains(o)&&rg(o)})}else rg(o)}function nB(o){if(!(o instanceof HTMLElement)&&!(o instanceof SVGElement))return!1;let{display:t,visibility:e}=o.style,n=t!=="none"&&e!=="hidden"&&e!=="collapse";if(n){let{getComputedStyle:r}=o.ownerDocument.defaultView,{display:i,visibility:a}=r(o);n=i!=="none"&&a!=="hidden"&&a!=="collapse"}return n}function rB(o,t){return!o.hasAttribute("hidden")&&(o.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?o.hasAttribute("open"):!0)}function dR(o,t){return o.nodeName!=="#comment"&&nB(o)&&rB(o,t)&&(!o.parentElement||dR(o.parentElement,o))}var jS=bt.default.createContext(null),Tt=null;function pR(o){let{children:t,contain:e,restoreFocus:n,autoFocus:r}=o,i=(0,bt.useRef)(),a=(0,bt.useRef)(),c=(0,bt.useRef)([]),{parentNode:l}=(0,bt.useContext)(jS)||{},u=(0,bt.useMemo)(()=>new tm({scopeRef:c}),[c]);cs(()=>{let f=l||oo.root;if(oo.getTreeNode(f.scopeRef)&&Tt&&!Ch(Tt,f.scopeRef)){let m=oo.getTreeNode(Tt);m&&(f=m)}f.addChild(u),oo.addNode(u)},[u,l]),cs(()=>{let f=oo.getTreeNode(c);f.contain=e},[e]),cs(()=>{let f=i.current.nextSibling,m=[];for(;f&&f!==a.current;)m.push(f),f=f.nextSibling;c.current=m},[t]),uB(c,n,e),cB(c,e),pB(c,n,e),lB(c,r),(0,bt.useEffect)(()=>{if(c){let f=document.activeElement,m=null;if(wn(f,c.current)){for(let h of oo.traverse())wn(f,h.scopeRef.current)&&(m=h);m===oo.getTreeNode(c)&&(Tt=m.scopeRef)}return()=>{let h=oo.getTreeNode(c).parent.scopeRef;(c===Tt||Ch(c,Tt))&&(!h||oo.getTreeNode(h))&&(Tt=h),oo.removeTreeNode(c)}}},[c]);let d=(0,bt.useMemo)(()=>iB(c),[]),p=(0,bt.useMemo)(()=>({focusManager:d,parentNode:u}),[u,d]);return bt.default.createElement(jS.Provider,{value:p},bt.default.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),t,bt.default.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function mR(){var o;return(o=(0,bt.useContext)(jS))===null||o===void 0?void 0:o.focusManager}function iB(o){return{focusNext(t={}){let e=o.current,{from:n,tabbable:r,wrap:i,accept:a}=t,c=n||document.activeElement,l=e[0].previousElementSibling,u=mc(yl(e),{tabbable:r,accept:a},e);u.currentNode=wn(c,e)?c:l;let d=u.nextNode();return!d&&i&&(u.currentNode=l,d=u.nextNode()),d&&Ps(d,!0),d},focusPrevious(t={}){let e=o.current,{from:n,tabbable:r,wrap:i,accept:a}=t,c=n||document.activeElement,l=e[e.length-1].nextElementSibling,u=mc(yl(e),{tabbable:r,accept:a},e);u.currentNode=wn(c,e)?c:l;let d=u.previousNode();return!d&&i&&(u.currentNode=l,d=u.previousNode()),d&&Ps(d,!0),d},focusFirst(t={}){let e=o.current,{tabbable:n,accept:r}=t,i=mc(yl(e),{tabbable:n,accept:r},e);i.currentNode=e[0].previousElementSibling;let a=i.nextNode();return a&&Ps(a,!0),a},focusLast(t={}){let e=o.current,{tabbable:n,accept:r}=t,i=mc(yl(e),{tabbable:n,accept:r},e);i.currentNode=e[e.length-1].nextElementSibling;let a=i.previousNode();return a&&Ps(a,!0),a}}}var JS=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],aB=JS.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";JS.push('[tabindex]:not([tabindex="-1"]):not([disabled])');var sB=JS.join(':not([hidden]):not([tabindex="-1"]),');function yl(o){return o[0].parentElement}function wh(o){let t=oo.getTreeNode(Tt);for(;t&&t.scopeRef!==o;){if(t.contain)return!1;t=t.parent}return!0}function cB(o,t){let e=(0,bt.useRef)(),n=(0,bt.useRef)(null);cs(()=>{let r=o.current;if(!t){n.current&&(cancelAnimationFrame(n.current),n.current=null);return}let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!wh(o))return;let u=document.activeElement,d=o.current;if(!wn(u,d))return;let p=mc(yl(d),{tabbable:!0},d);p.currentNode=u;let f=l.shiftKey?p.previousNode():p.nextNode();f||(p.currentNode=l.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,f=l.shiftKey?p.previousNode():p.nextNode()),l.preventDefault(),f&&Ps(f,!0)},a=l=>{(!Tt||Ch(Tt,o))&&wn(l.target,o.current)?(Tt=o,e.current=l.target):wh(o)&&!ZS(l.target,o)?e.current?e.current.focus():Tt&&kh(Tt.current):wh(o)&&(e.current=l.target)},c=l=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{wh(o)&&!ZS(document.activeElement,o)&&(Tt=o,document.body.contains(l.target)?(e.current=l.target,e.current.focus()):Tt&&kh(Tt.current))})};return document.addEventListener("keydown",i,!1),document.addEventListener("focusin",a,!1),r.forEach(l=>l.addEventListener("focusin",a,!1)),r.forEach(l=>l.addEventListener("focusout",c,!1)),()=>{document.removeEventListener("keydown",i,!1),document.removeEventListener("focusin",a,!1),r.forEach(l=>l.removeEventListener("focusin",a,!1)),r.forEach(l=>l.removeEventListener("focusout",c,!1))}},[o,t]),(0,bt.useEffect)(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function fR(o){return ZS(o)}function wn(o,t){return t.some(e=>e.contains(o))}function ZS(o,t=null){if(o instanceof Element&&o.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:e}of oo.traverse(oo.getTreeNode(t)))if(wn(o,e.current))return!0;return!1}function Ch(o,t){var e;let n=(e=oo.getTreeNode(t))===null||e===void 0?void 0:e.parent;for(;n;){if(n.scopeRef===o)return!0;n=n.parent}return!1}function Ps(o,t=!1){if(o!=null&&!t)try{oB(o)}catch{}else if(o!=null)try{o.focus()}catch{}}function kh(o,t=!0){let e=o[0].previousElementSibling,n=mc(yl(o),{tabbable:t},o);n.currentNode=e;let r=n.nextNode();t&&!r&&(n=mc(yl(o),{tabbable:!1},o),n.currentNode=e,r=n.nextNode()),Ps(r)}function lB(o,t){let e=bt.default.useRef(t);(0,bt.useEffect)(()=>{e.current&&(Tt=o,wn(document.activeElement,Tt.current)||kh(o.current)),e.current=!1},[o])}function uB(o,t,e){cs(()=>{if(t||e)return;let n=o.current,r=i=>{let a=i.target;wn(a,o.current)?Tt=o:fR(a)||(Tt=null)};return document.addEventListener("focusin",r,!1),n.forEach(i=>i.addEventListener("focusin",r,!1)),()=>{document.removeEventListener("focusin",r,!1),n.forEach(i=>i.removeEventListener("focusin",r,!1))}},[o,t,e])}function dB(o){let t=oo.getTreeNode(Tt);for(;t&&t.scopeRef!==o;){if(t.nodeToRestore)return!1;t=t.parent}return t?.scopeRef===o}function pB(o,t,e){let n=(0,bt.useRef)(typeof document<"u"?document.activeElement:null);cs(()=>{let r=o.current;if(!t||e)return;let i=()=>{(!Tt||Ch(Tt,o))&&wn(document.activeElement,o.current)&&(Tt=o)};return document.addEventListener("focusin",i,!1),r.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{document.removeEventListener("focusin",i,!1),r.forEach(a=>a.removeEventListener("focusin",i,!1))}},[o,e]),cs(()=>{if(!t)return;oo.getTreeNode(o).nodeToRestore=n.current;let r=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey)return;let a=document.activeElement;if(!wn(a,o.current))return;let c=oo.getTreeNode(o).nodeToRestore,l=mc(document.body,{tabbable:!0});l.currentNode=a;let u=i.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(c)||c===document.body)&&(c=null,oo.getTreeNode(o).nodeToRestore=null),(!u||!wn(u,o.current))&&c){l.currentNode=c;do u=i.shiftKey?l.previousNode():l.nextNode();while(wn(u,o.current));i.preventDefault(),i.stopPropagation(),u?Ps(u,!0):fR(c)?Ps(c,!0):a.blur()}};return e||document.addEventListener("keydown",r,!0),()=>{e||document.removeEventListener("keydown",r,!0);let i=oo.getTreeNode(o).nodeToRestore;if(t&&i&&(wn(document.activeElement,o.current)||document.activeElement===document.body&&dB(o))){let a=oo.clone();requestAnimationFrame(()=>{if(document.activeElement===document.body){let c=a.getTreeNode(o);for(;c;){if(c.nodeToRestore&&document.body.contains(c.nodeToRestore)){Ps(c.nodeToRestore);return}c=c.parent}for(c=a.getTreeNode(o);c;){if(c.scopeRef&&oo.getTreeNode(c.scopeRef)){kh(c.scopeRef.current,!0);return}c=c.parent}}})}}},[o,t,e])}function mc(o,t,e){let n=t?.tabbable?sB:aB,r=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var a;return!(t==null||(a=t.from)===null||a===void 0)&&a.contains(i)?NodeFilter.FILTER_REJECT:i.matches(n)&&dR(i)&&(!e||wn(i,e))&&(!t?.accept||t.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(r.currentNode=t.from),r}var em=class{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,e,n){let r=this.fastMap.get(e??null),i=new tm({scopeRef:t});r.addChild(i),i.parent=r,this.fastMap.set(t,i),n&&(i.nodeToRestore=n)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let e=this.fastMap.get(t),n=e.parent;for(let i of this.traverse())i!==e&&e.nodeToRestore&&i.nodeToRestore&&e.scopeRef.current&&wn(i.nodeToRestore,e.scopeRef.current)&&(i.nodeToRestore=e.nodeToRestore);let r=e.children;n.removeChild(e),r.size>0&&r.forEach(i=>n.addChild(i)),this.fastMap.delete(e.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let e of t.children)yield*this.traverse(e)}clone(){let t=new em;for(let e of this.traverse())t.addTreeNode(e.scopeRef,e.parent.scopeRef,e.nodeToRestore);return t}constructor(){Jp(this,"fastMap",new Map),this.root=new tm({scopeRef:null}),this.fastMap.set(null,this.root)}},tm=class{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){Jp(this,"children",new Set),Jp(this,"contain",!1),this.scopeRef=t.scopeRef}},oo=new em;var mi=y(C());s();var QS=JSON.parse('{"toolbar":"toolbar_hJES6","toolbarGroup":"toolbarGroup_mD69e"}');var gR=mi.default.forwardRef(function(t,e){let{disabled:n=!1,orientation:r="horizontal",children:i,onTabToExit:a}=t;return mi.default.createElement(Y,{role:"toolbar",style:QS.toolbar,ref:e,"aria-orientation":r},mi.default.createElement(pR,{restoreFocus:!0},mi.default.createElement(mB,{disabled:n,orientation:r,onTabToExit:a},i)))});function mB(o){let{children:t,disabled:e,orientation:n,onTabToExit:r}=o,i=mR();return mi.default.createElement(mi.default.Fragment,null,mi.default.Children.map(t,a=>a?typeof a=="object"?mi.default.cloneElement(a,{onKeyDown(c){({ArrowLeft:()=>{n==="horizontal"&&(i.focusPrevious(),c.preventDefault())},ArrowRight:()=>{n==="horizontal"&&(i.focusNext(),c.preventDefault())},ArrowUp:()=>{n==="vertical"&&(i.focusPrevious(),c.preventDefault())},ArrowDown:()=>{n==="vertical"&&(i.focusNext(),c.preventDefault())},Home:()=>{i.focusFirst(),c.preventDefault()},End:()=>{i.focusLast(),c.preventDefault()},Tab:()=>{r?.(c.shiftKey),c.preventDefault()}})[c.key]?.()},kind:a.props?.kind??"menuitem",disabled:a.props?.disabled||e}):a:null))}function om(o){let{onKeyDown:t,label:e,disabled:n=!1,children:r}=o;return mi.default.createElement(Y,{role:"group",as:"span",style:QS.toolbarGroup,"aria-label":e},mi.default.Children.map(r,i=>i?mi.default.cloneElement(i,{onKeyDown:t,kind:i.props.kind??"menuitem",disabled:i.props.disabled||n}):null))}s();var Zu=y(C());function hR(o){let{children:t,...e}=o;return Zu.createElement(d1,null,Zu.createElement(P1,null,Zu.createElement(v1,null,Zu.createElement($I,{...e}),Zu.createElement(WI,null),t)))}s();var Ju=y(C());s();var fc=JSON.parse('{"buttonTabs":"buttonTabs_ihLP4","buttonTabsItem":"buttonTabsItem_9vRT7","buttonTabsItemActive":"buttonTabsItemActive_PnjM4","buttonTabsItemIcon":"buttonTabsItemIcon_wUvLo","buttonTabsItemText":"buttonTabsItemText_Oa-uN","buttonTabsSizeMedium":"buttonTabsSizeMedium_Cra41","buttonTabsItemDisabled":"buttonTabsItemDisabled_XW4rD"}');function yR(o){let{tabs:t,activeTab:e,onPress:n,size:r="medium"}=o;return Ju.createElement(Y,{style:[fc.buttonTabs,r==="medium"&&fc.buttonTabsSizeMedium]},t.map(i=>{let a=e===i.key,c=i.icon;return Ju.createElement(ui,{key:i.key,tooltip:i.tooltip},(l,u)=>Ju.createElement(E1,{ref:u,onPress:()=>{i.disabled||n(i.key)},style:[fc.buttonTabsItem,{[fc.buttonTabsItemActive]:a,[fc.buttonTabsItemDisabled]:i.disabled}],...l.domEvents},c?Ju.createElement(c,{style:fc.buttonTabsItemIcon}):null,i.label?Ju.createElement(gn,{style:[fc.buttonTabsItemText]},i.label):null))}))}s();var nm=y(C());s();var ew=JSON.parse('{"grabber":"grabber_p72PX","grabberIcon":"grabberIcon_ebrbU"}');var vR=nm.forwardRef(function(t,e){let{style:n,size:r="small"}=t;return nm.createElement(Y,{ref:e,style:[n,ew.grabber]},nm.createElement(v.GrabberVertical.CSS,{style:[ew.grabberIcon,M.icons[r]]}))});s();var xh=y(C());var bR=it("auth"),tw=Ix(o=>{let{customToken:t,waitUserReady:e=!0}=o;if(typeof window>"u")throw new Error("initializeAuth should not be called during SSR");return!t&&!e?{customToken:t}:new Ei("auth.initialize").wrap(async()=>{if(t)try{bR.info("authenticating with custom token before subscribing to auth"),await kf.auth().signInWithCustomToken(t),await kf.auth().currentUser?.getIdToken(!0)}catch(r){bR.critical("Error during auth with custom token",r)}return e!==!1&&await new Promise((r,i)=>{let a=kf.auth().onAuthStateChanged(()=>{a(),r()},i)}),{customToken:t}})});function SR(o){return tw.readAsync(o)}function Oh(o){let{children:t}=o;if(typeof window<"u"){if(tw.state==="unstarted")throw new Error("initializeAuth should have been called before useWaitFirebaseAuth");tw.read({})}return xh.createElement(xh.Fragment,null,t)}s();s();s();function Qu(){return Qu=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},Qu.apply(this,arguments)}var ed;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(ed||(ed={}));var wR=function(o){return o};var CR="beforeunload";var fB="popstate";function OR(o){o===void 0&&(o={});var t=o,e=t.window,n=e===void 0?document.defaultView:e,r=n.history;function i(){var T=n.location,E=T.pathname,L=T.search,V=T.hash,j=r.state||{};return[j.idx,wR({pathname:E,search:L,hash:V,state:j.usr||null,key:j.key||"default"})]}var a=null;function c(){if(a)m.call(a),a=null;else{var T=ed.Pop,E=i(),L=E[0],V=E[1];if(m.length){if(L!=null){var j=d-L;j&&(a={action:T,location:V,retry:function(){I(j*-1)}},I(j))}}else x(T)}}n.addEventListener(fB,c);var l=ed.Pop,u=i(),d=u[0],p=u[1],f=xR(),m=xR();d==null&&(d=0,r.replaceState(Qu({},r.state,{idx:d}),""));function h(T){return typeof T=="string"?T:ow(T)}function b(T,E){return E===void 0&&(E=null),wR(Qu({pathname:p.pathname,hash:"",search:""},typeof T=="string"?nw(T):T,{state:E,key:gB()}))}function w(T,E){return[{usr:T.state,key:T.key,idx:E},h(T)]}function k(T,E,L){return!m.length||(m.call({action:T,location:E,retry:L}),!1)}function x(T){l=T;var E=i();d=E[0],p=E[1],f.call({action:l,location:p})}function O(T,E){var L=ed.Push,V=b(T,E);function j(){O(T,E)}if(k(L,V,j)){var oe=w(V,d+1),H=oe[0],J=oe[1];try{r.pushState(H,"",J)}catch{n.location.assign(J)}x(L)}}function _(T,E){var L=ed.Replace,V=b(T,E);function j(){_(T,E)}if(k(L,V,j)){var oe=w(V,d),H=oe[0],J=oe[1];r.replaceState(H,"",J),x(L)}}function I(T){r.go(T)}var N={get action(){return l},get location(){return p},createHref:h,push:O,replace:_,go:I,back:function(){I(-1)},forward:function(){I(1)},listen:function(E){return f.push(E)},block:function(E){var L=m.push(E);return m.length===1&&n.addEventListener(CR,kR),function(){L(),m.length||n.removeEventListener(CR,kR)}}};return N}function kR(o){o.preventDefault(),o.returnValue=""}function xR(){var o=[];return{get length(){return o.length},push:function(e){return o.push(e),function(){o=o.filter(function(n){return n!==e})}},call:function(e){o.forEach(function(n){return n&&n(e)})}}}function gB(){return Math.random().toString(36).substr(2,8)}function ow(o){var t=o.pathname,e=t===void 0?"/":t,n=o.search,r=n===void 0?"":n,i=o.hash,a=i===void 0?"":i;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function nw(o){var t={};if(o){var e=o.indexOf("#");e>=0&&(t.hash=o.substr(e),o=o.substr(0,e));var n=o.indexOf("?");n>=0&&(t.search=o.substr(n),o=o.substr(0,n)),o&&(t.pathname=o)}return t}var rw=it("history");function PR(){let o=OR(),t=[],e=!1,n=()=>{let i=t.shift();return i?(i(),!1):!0},r=i=>{e?t.push(i):i()};return{get location(){return o.location},listen:i=>o.listen(a=>{i({location:a.location,action:a.action})}),push:i=>{let{state:a,...c}=i;r(()=>{rw.info("push",c,a),o.push(c,a)})},replace:i=>{let{state:a,...c}=i;r(()=>{rw.info("replace",c,a),o.replace(c,a)})},go:i=>{r(()=>{rw.info("go",i),o.go(i)})},transaction:i=>{if(e)i();else{let a=o.listen(()=>{n()&&a()});e=!0,i(),e=!1,n()&&a()}}}}s();function IR(o){let{basename:t="",location:e="/",context:n}=o,r=(a,c)=>{n.action=c,n.location=hB(t,_R(a)),n.url=ow(n.location)};return{staticContext:n,location:yB(t,_R(nw(e))),push:a=>{r(a,"PUSH")},replace:a=>{r(a,"REPLACE")},go:()=>{},listen:()=>()=>{},transaction:a=>{a()}}}function RR(o){return o.charAt(0)==="/"?o:`/${o}`}function hB(o,t){return o?{...t,pathname:RR(o)+t.pathname}:t}function yB(o,t){if(!o||!t.pathname)return t;let e=RR(o);return t.pathname.indexOf(e)!==0?t:{...t,pathname:t.pathname.substr(e.length)}}function _R(o){let t={hash:"",search:"",pathname:"",...o,key:"",state:void 0};return t.search&&t.search.charAt(0)!=="?"&&(t.search=`?${t.search}`),t.hash&&t.hash.charAt(0)!=="#"&&(t.hash=`#${t.hash}`),t}s();var vl=y(C()),TR=y(O1());function iw(o){let{history:t,children:e}=o,n=vl.useMemo(()=>t||PR(),[t]),r=vl.useMemo(()=>({getCurrentValue:()=>n.location,subscribe:a=>n.listen(a)}),[n]),i=(0,TR.useSubscription)(r);return vl.createElement(mP.Provider,{value:n},vl.createElement(fP.Provider,{value:i},e))}function ER(o){let{children:t,...e}=o,n=IR(e);return vl.createElement(iw,{history:n},t)}s();var aw=y(C());function MR(o,t){let{navigate:e}=Se(),n=Sa(),r=EO(o),i=(0,aw.useCallback)(l=>e({screen:{sideSheet:{type:o,tab:l}}},{replace:!0}),[e,o]),a=(0,aw.useCallback)(()=>e({screen:{sideSheet:void 0}}),[e]),c=("sideSheet"in n.screen&&n.screen.sideSheet&&"tab"in n.screen.sideSheet&&n.screen.sideSheet.tab?n.screen.sideSheet.tab:t)??r[0];return{opened:"sideSheet"in n.screen&&n.screen.sideSheet?.type===o,selectedTab:c,changeSelectedTab:i,close:a}}s();var vB=It({key:"firestoreReacheable",default:!0,effects:[o=>{typeof window>"u"||fetch("https://web.archive.org/web/20231004051033/https://firestore.googleapis.com/$discovery/rest").catch(()=>{o.setSelf(!1)})}]});function LR(){return zn(vB)}s();var bB=(o,t)=>{ms.write(o,t,"cached")};function DR(o){return Ox(t=>(t.listenToDocument(bB),o(t)))}s();var NR=y(C());var sw=It({key:"hoveredCommentNodeAtom",default:null}),gde=mx({key:"newCommentValueAtom",default:()=>hu("","comment")});function AR(){let o=Lr(sw);return NR.useMemo(()=>({highlight:(t,e={highlighting:!0,postButton:!0})=>{let n=t?Di.getOriginalKey(t):null;o(r=>n?(r&&r.node===n&&r.postButton&&(e.postButton=r.postButton),{node:n,...e}):null)}}),[o])}s();var WR=y(C());var BR=It({key:"filesManagerAtom",default:null});function Et(){let o=Lr(BR),t=gx();return WR.useMemo(()=>({prompt:e=>new Promise(n=>{o({options:e,onComplete:n})}),isOpen:()=>{let{isModified:e}=t(BR);return e}}),[o])}s();var FR=y(C());var cw=It({key:"mediaGalleryState",default:{medias:[],currentIndex:0}});function td(){let o=Lr(cw);return FR.useMemo(()=>({open:(t,e=0)=>{o({medias:t,currentIndex:e})}}),[o])}s();var rm=It({key:"mobileToCOpenedAtom",default:!1});s();function SB(o){return o.themePreset?K.PRIMARY:o.primaryColor??K.PRIMARY}function wB(o,t,e){let n=K.WHITE,r=K.darkModeGreyScale.dark;switch(o){case"default":return t==="dark"?r:n;case"bold":return e;case"contrast":return t==="dark"?n:r;case"custom":return K.fuchsia.light;default:De(o)}}function CB(o,t,e){switch(o){case"default":case"contrast":return t;case"bold":case"custom":return Ca(e)==="light"?K.lightModeText.base:K.darkModeText.base;default:De(o)}}function zR(o){return Wx(o.headerTheme,o.themeMode)==="none"}function kB(o,t){let{primaryColor:e,headerBackgroundColor:n,headerLinksColor:r}=o.themeCustomizations?.[t]||{},a=zR(o)?"default":Mi(o),c=SB(o),l=e??c,u=wB(a,t,l),d=n??u,p=CB(a,l,d);return{primaryColor:l,headerBackgroundColor:d,headerLinksColor:r??p}}function xB(o,t){let e=t??o.themeMode??gp,{headerLogoURL:n,footerLogoURL:r}=o.themeCustomizations?.[e]||{};return{headerLogoURL:n??o.logoURL,footerLogoURL:r??o.footer?.logoURL}}function Ph(o,t){let e=t??o.themeMode??gp;return{...kB(o,e),...xB(o,e),headerDisabled:zR(o)}}s();var VR=y(C());var OB=it("app:events"),PB=o=>(o[0]==='"'&&(o=o.slice(1,-1)),o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function _B(){let o=document.cookie?document.cookie.split("; "):[],t={};for(let e=0;e<o.length;e++){let n=o[e].split("="),r=n.slice(1).join("=");try{let i=decodeURIComponent(n[0]);t[i]=PB(r)}catch(i){OB.warning(`Couldn't parse cookie ${o[e]}. Error: `,i)}}return t}function qR(o,t){return VR.useEffect(()=>{IB(o,t)},[o.key,t]),null}async function IB(o,t){if(!o.integrations||!t)return;let e=await e1(),n=_B(),r=window.location.href,i=document.referrer,a=window.navigator.userAgent;(await nc()).analytics.trackViewInSpaceById(o.key,{pageId:t,visitor:{anonymousId:e,cookies:n,userAgent:a},url:r,referrer:i})}s();function GR(o,t){let e=t.type==="space"&&typeof t.changeRequest=="string"?t.changeRequest:void 0;return OP(o,e)}s();var HR=y(C());function _h(o){let t=BO(o),[e]=wa([t]);return HR.useEffect(()=>{!e&&o&&xx(t,{url:o})},[e,o]),[e||{url:o}]}s();var KR=y(C());function XR(o){let t=o?new URL(o).hostname:null,[e]=vP([t?UO(t):null]);return KR.useMemo(()=>{if(!e||!o)return;let n=Cu(eg(e),o);if(!n)return;let r=e.find(i=>i.name===n.integrationKey);if(r)return{integration:r,block:n.block}},[e,o])}s();var Ih=y(C());function UR(o){let t=Ih.useContext(Ko),e=t.preview||t.mode!=="public-content"||!o?.intercom?.enabled?void 0:o?.intercom?.appID,n=_I();return Wi(r=>{n&&e&&r.writeAsync({type:"script",src:`https://web.archive.org/web/20231004051033/https://widget.intercom.io/widget/${e}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:e})}})}),Ih.useEffect(()=>()=>{window.Intercom&&(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}s();var im=y(C());var lw=im.default.createContext(()=>({getCurrentValue:()=>[],subscribe:()=>()=>{}})),bl=new Map;function YR(o){let{withComments:t,spaceKey:e,pageKey:n,changeRequestKey:r,children:i}=o,a={space:e,page:n,changeRequest:r||null},[c]=wa([t?wx(TO(a),Cx("resolved","==",null),kx("postedAt","asc")):null]);im.default.useEffect(()=>{let u=(c||[]).reduce((d,p)=>p.node?{...d,[p.node]:[...d[p.node]??[],p]}:d,{});bl.forEach((d,p)=>{let f=u[p]??[],[m,h]=d||[[],[]];RB(f,m)||(bl.set(p,[f,h]),h.forEach(b=>b()))})},[c]);let l=im.default.useCallback(u=>({getCurrentValue:()=>{let d=bl.get(u);return d?d[0]:[]},subscribe:d=>{let p=bl.get(u),[f,m]=p||[[],[]];return bl.set(u,[f,[...m,d]]),()=>{let h=bl.get(u),[b,w]=h||[[],[]],k=w.filter(x=>x!==d);bl.set(u,[b,k])}}}),[]);return im.default.createElement(lw.Provider,{value:l},i)}function RB(o,t){return o.length!==t.length?!1:o.every(e=>{let n=t.find(r=>e.key===r.key);return n?TB(e,n):!1})}function TB(o,t){return!(o.key!==t.key||o.resolved!==t.resolved||jb(o.replies)!==jb(t.replies))}s();var uw=1024,$R=uw*1024;function am(o){return o>$R?`${(o/$R).toFixed(0)}MB`:o>uw?`${(o/uw).toFixed(0)}KB`:`${o}B`}function jR(o){return Us(o)?"Image":Su(o)?"Code":o.contentType==="application/pdf"?"PDF":o.contentType.startsWith("text/")?"Text":"Binary"}s();var Rh=y(C());function JR(o){let t=(0,Rh.useContext)(Ko);EB(t,o),Ep(()=>QR(t,o));let e=Ep(()=>ZR(t,o));(0,Rh.useEffect)(()=>(e.current=ZR(t,o),()=>{e.current&&window.gtag("config",e.current,{update:!0,groups:"not_tracking_views"})}),[o?.googleAnalytics?.enabled,o?.googleAnalytics?.trackingPrivateViews,o?.googleAnalytics?.trackingID,t])}function dw(o){return!!(o.googleAnalytics?.enabled&&typeof o.googleAnalytics.trackingID=="string")}function EB(o,t){Wi(e=>{pw(o,t)||e.writeSafe({type:"script",src:`https://web.archive.org/web/20231004051033/https://www.googletagmanager.com/gtag/js?l=dataLayer&id=${t?.googleAnalytics?.trackingID}`})})}function QR(o,t){pw(o,t)||typeof window>"u"||window?.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(...e){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",t.googleAnalytics.trackingID))}function ZR(o,t){if(pw(o,t)||typeof window>"u")return;window?.gtag||QR(o,t),window.gtag("config",t.googleAnalytics.trackingID,{send_page_view:!1,anonymize_ip:!0,groups:"tracking_views"});let e=ng()==="rejected";return window.gtag("consent","default",{ad_storage:e?"denied":"granted",analytics_storage:e?"denied":"granted"}),t?.googleAnalytics?.trackingID}function pw(o,t){return!t||!t.googleAnalytics||!dw(t)||o.preview||o.mode!=="public-content"&&!t?.googleAnalytics?.trackingPrivateViews}s();s();var tt=y(C()),Ji=y(z());s();var _r=y(C());s();var od=y(C()),mw=y(z());function eT(o){let{node:t,editor:e}=o,{readOnly:n}=e,[,r]=P(MB),i=()=>{e.change(a=>{a.unwrapInlineByKey(t.key)})};return od.createElement(vn,{preferredAlignment:"start",kind:"large"},od.createElement(mw.View,{style:[r.annotationPopover,g.Padding.mediumHorizontal,g.Padding.mediumVertical]},od.createElement(jn,{fragment:pa}),n?null:od.createElement(mw.View,{style:[r.toolbar]},od.createElement(B,{size:"small",kind:"secondary",icon:v.Trashcan,title:"Remove annotation",onPress:i}))))}var MB=F.create({annotationPopover:{maxHeight:300},toolbar:{position:"absolute",top:g.medium,right:g.medium}});s();var Do=y(C());s();var fw=JSON.parse('{"hitArea":"hitArea_oHT6S","buttonWrapper":"buttonWrapper_3J38G","hideTransition":"hideTransition_k0Mlc"}');s();function et(o,t,e=[]){return ne({groups:[...e,{key:"block",commands:[{key:"delete",title:"Delete",icon:v.Trashcan,trigger:()=>{o.change(n=>{if(Po(n.value.selection))return n.deleteBlockRangeForward();n.removeNodeByKey(t).focus()})}}]}]})}s();var xn=y(C());s();var vT=[{key:"youtube",title:"Youtube",icon:tT()},{key:"soundcloud",title:"Soundcloud",icon:oT()},{key:"loom",title:"Loom",icon:nT()},{key:"github",title:"GitHub Gist",icon:rT(),iconDark:iT()},{key:"framer",title:"Framer",icon:aT(),iconDark:sT()},{key:"codepen",title:"Codepen",icon:cT(),iconDark:lT()},{key:"dribbble",title:"Dribbble",icon:uT()},{key:"trello",title:"Trello",icon:dT()},{key:"typeform",title:"Typeform",icon:pT(),iconDark:mT()},{key:"google-docs",title:"Google Docs",icon:fT()},{key:"google-sheets",title:"Google Sheets",icon:gT()},{key:"google-slides",title:"Google Slides",icon:hT()},{key:"google-form",title:"Google Forms",icon:yT()}];s();var Oa=y(C()),bT=y(z());s();var _s=y(C());var Is=ch(o=>o.isPDF?{width:793.92,height:1123.2}:{width:750,height:500},{height:!1}),gw={uploadFiles:()=>{throw new Error("uploadFiles is not implemented, it should be passed as a prop to the ContentEditor component")},updateFile:()=>{throw new Error("updateFile is not implemented, it should be passed as a prop to the ContentEditor component")},logAnalyticsEvent:()=>{},blockLayoutComponent:({children:o})=>_s.createElement(_s.Fragment,null,o),integrationBlocksContext:null,integrationBlocksRemote:PP(()=>{throw new Error("not implemented")}),integrationsBlocksSubscription:{getCurrentValue:()=>({}),subscribe:()=>()=>{}}},Be=_s.createContext(gw),fi=_s.createContext({sections:fu(),active:null,selected:null,setActive:()=>{}}),gc=_s.createContext("left"),Cr=_s.createContext("root");function ST(o){let{onInsert:t,onClose:e}=o,{logAnalyticsEvent:n}=Oa.useContext(Be),[r,i]=Oa.useState(""),a=oi(r),c=()=>{if(!a)return;let l=_f(r);t(zf.createEmbedBlock(l)),n({type:"edit_page_document_insert_block",from:"embed",blockType:pn,embedHostname:new URL(l).hostname})};return Oa.createElement(ho,{title:"Embed a URL",subtitle:"Insert a URL to embed a live preview. Works with YouTube, Google Drive, Vimeo, and more.",onClose:e,footer:Oa.createElement(bT.View,{style:[S.directionRow,S.justifyContentEnd]},Oa.createElement(B,{kind:"secondary",onPress:e,style:g.Margin.smallRight},"Cancel"),Oa.createElement(B,{kind:"primary",disabled:!a,onPress:c},"Insert"))},Oa.createElement(to,{autoFocus:!0,label:"URL",value:r,onChangeText:i,onSubmit:c,placeholder:"Paste a URL or type it",feedback:a||!r?{type:"none"}:{type:"danger"}}))}s();var ut=y(C()),Rs=y(z());s();var sm=y(C()),wT=sm.default.createContext(null);function CT(o){let{value:t,children:e}=o,n=sm.default.useMemo(()=>({space:t.space,page:t.page,..."changeRequest"in t&&t.changeRequest?{changeRequest:t.changeRequest}:{},..."revision"in t&&t.revision?{revision:t.revision}:{}}),[t.space,t.page,"changeRequest"in t?t.changeRequest:void 0,"revision"in t?t.revision:void 0]);return sm.default.createElement(wT.Provider,{value:n},e)}function at(){let o=sm.default.useContext(wT);if(o===null)throw new Error("useContentReferenceContext expects a ContentReferenceContextProvider above it");return o}s();var yw=y(C());s();var Hi=qn({getKey:o=>{let[,...t]=o;return Qb(t)},getValue:async([o,t,e,n])=>{let r=[];return!t||!AO(t,e)?[null,r,!1]:await Rp(async()=>[await NO(t,e,{hiveClient:o,firestoreReader:{getDocument:a=>(r.some(c=>Za(c)===Za(a))||r.push(a),ms.readAsync(a)),getCollection:a=>(r.some(c=>Za(a)===Za(c))||r.push(a),ms.readAsync(a))}}),r,!1],[null,r,!0])},toJS(o){return[o[0],o[1].map(Zb),o[2]]},fromJS(o){return[o[0],o[1].map(Jb),o[2]]}}),Th=qn({getKey:o=>{let[,...t]=o;return Qb(t)},getValue:async([o,t,e])=>{let n=[];return await Rp(async()=>[await jf(t,e,{hiveClient:o,firestoreReader:{getDocument:i=>(n.some(a=>Za(a)===Za(i))||n.push(i),ms.readAsync(i)),getCollection:i=>(n.some(a=>Za(i)===Za(a))||n.push(i),ms.readAsync(i))}}),n,!1],[null,n,!0])},toJS(o){return[o[0],o[1].map(Zb),o[2]]},fromJS(o){return[o[0],o[1].map(Jb),o[2]]}});s();var Pa=y(C());s();var kT=vg("0dc87861cc2f97f4b8aa90517de6c6f7d7add292c36eff9ffb4a127ad3126faa",()=>import("https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent-S4TQ2GUV.min.js"));function xT(o){let{content:t}=o,{selectedTab:e,changeSelectedTab:n,opened:r,close:i}=MR("share");return Pa.createElement(vt,null,r?Pa.createElement(ho,{size:"xlarge",onClose:i},Pa.createElement(Pa.Suspense,{fallback:Pa.createElement(tP,{sidebar:Pa.createElement(To,{size:"large"})},Pa.createElement(To,{size:"large"}))},Pa.createElement(kT,{tab:e||MP(t),onChangeTab:n,...o}))):null)}s();var Eh=y(C());function hc(){let{navigate:o,getNavigationURL:t,getNavigationLinkProps:e}=Se();return Eh.useMemo(()=>{let r=(l,u)=>{let d=eo(l,u);if(d!==null)return t({current:hw(d)})},i=(l,u)=>{let d=eo(l,u);if(d!==null)return e({current:hw(d)})},a=(l,u={})=>{let{replace:d=!1}=u;o({current:hw(l,u)},{replace:d})};return{getNavigationHref:r,getNavigationProps:i,navigateToPagePath:a,navigateToPage:(l,u,d)=>{let p=eo(l,u);p!==null&&a(p,d)}}},[o])}function hw(o,t={}){let{preserveSideSheet:e=!1,preserveComments:n=!0,sideSheet:r}=t;return i=>({page:o,...!e&&!r?{sideSheet:void 0}:{},...r?{sideSheet:r}:{},comments:n&&i.type==="space"&&i.sideSheet?.type==="comments"?{...i.sideSheet,node:void 0}:void 0})}function OT(o){let{to:t}=o;return Eh.createElement(Tg,{to:{screen:{page:t,sideSheet:void 0}}})}function kn(o,t,e,n={}){let{document:r,...i}=t,{space:a}=t,{withSearch:c=!0,accept:l=["url","user","anchor","page","space","collection","file"],position:u}=n,d=[];return l.includes("url")&&d.push({key:"url",commands:p=>{let{text:f}=p.query;if(!f||!lu(f))return[];let m=$f(f);if(m){let[h]=Th.read([e,m,i]),[b]=Hi.read([e,h,i]);if(h&&b)return[{key:f,title:b.text,icon:v.ArrowUpRight,trigger:()=>{o(h)}}]}return[{key:f,title:`Link to "${f}"`,icon:v.Link,trigger:()=>{o({kind:"url",url:f})}}]}}),l.includes("anchor")&&r&&d.push({key:"anchors",commands:()=>_T(r,{},o)}),l.includes("page")&&t.space&&d.push(PT({spaceId:t.space,changeRequestId:"changeRequest"in t?t.changeRequest:void 0},e,o,{accept:l,withSearch:c,targetCurrentSpace:!0})),l.includes("space")&&d.push({key:"spaces",commands:p=>ll.read({query:p.query.text,types:["spaces"]}).map(m=>m.index!=="spaces"?null:{key:m.object.objectID,icon:({size:h})=>yw.createElement(Bg,{space:m.object,size:h}),title:m.object.title,trigger:()=>{o({kind:"space",space:m.object.objectID})},descendant:l.includes("page")?()=>ne({search:c?"Select page\u2026":void 0,groups:[PT({spaceId:m.object.objectID,changeRequestId:void 0},e,o,{accept:l,withSearch:c,targetCurrentSpace:m.object.objectID===a})]}):void 0}).filter(ue)}),l.includes("collection")&&d.push({key:"collections",commands:p=>ll.read({query:p.query.text,types:["collections"]}).map(m=>m.index!=="collections"?null:{key:m.object.objectID,title:m.object.title,trigger:()=>{o({kind:"collection",collection:m.object.objectID})}}).filter(ue)}),l.includes("user")&&d.push({key:"users",commands:p=>ll.read({query:p.query.text,hitsPerPage:8,types:["users"]}).map(m=>m.index!=="users"?null:{key:m.object.objectID,icon:({size:h})=>yw.createElement(ul,{user:m.object,size:h}),title:m.object.displayName,subtitle:m.object.email,trigger:()=>{o({kind:"user",user:m.object.objectID})}}).filter(ue)}),ne({search:c?"Type url or reference\u2026":void 0,groups:d,position:u})}function jB(o,t,e,n,r){return ne({search:"Select page or heading\u2026",groups:[{key:"page",commands:[{key:"pick",title:`Link to "${t.title}"`,icon:v.Page,trigger:()=>{n({kind:"page",page:t.id,space:r.targetCurrentSpace?void 0:o})}}]},{key:"anchors",commands:()=>ZB(o,t,e,{page:t.id,space:r.targetCurrentSpace?void 0:o},n)}]})}function PT(o,t,e,n){let{accept:r,withSearch:i,targetCurrentSpace:a}=n;return{key:"space",commands:()=>{let c=Dr(t.store.getBranchRevision(o.spaceId,o.changeRequestId?Uf(o.changeRequestId):Kf));return c?Object.values(c.pages).filter(l=>l.type!=="link").map(l=>({key:l.id,title:l.title,subtitle:eo(c,l.id),icon:l.type==="group"?v.AddPageGroup:v.Page,trigger:()=>{e({kind:"page",page:l.id,space:a?void 0:o.spaceId})},descendant:r&&r.includes("anchor")&&l.type==="document"?()=>({...jB(o.spaceId,l,t,e,{targetCurrentSpace:a}),...i?{}:{search:void 0}}):void 0})):[]}}}function ZB(o,t,e,n,r){if(!t.document)return[];let i=Dr(e.store.getDocument(o,t.document));return i?_T(i,n,r):[]}function _T(o,t,e){return Hf(o).filter(r=>!!r.anchor).map(r=>{let i=(()=>{switch(r.type){case Ae:return v.Heading1;case Fe:return v.Heading2;case Je:return v.Heading3;case _o:return v.Swagger;case Nr:return v.BlockExpandable;case mr:case Kn:return v.Tabs;case null:return v.Hash;default:De(r.type)}})();return{key:r.key,icon:i,title:r.title,trigger:()=>{e({kind:"anchor",anchor:r.anchor,...t})}}})}s();var rd=y(C());s();var Sl=y(C()),IT=y(z());function nd(o){let{file:t,size:e=R.ICON_M}=o,[,n]=P(QB);return Sl.createElement(IT.View,{style:[n.fileTileIcon,{width:e,height:e}]},t&&Us(t)?Sl.createElement(Ho,{style:n.fileTilePreview,source:{uri:zi(t.downloadURL,{width:e})},accessibilityLabel:t.name}):Sl.createElement(JB,{file:t,size:e*.65}))}function JB(o){let{file:t,...e}=o;return t?Su(t)?Sl.createElement(v.Swagger,{...e}):Sl.createElement(v.Paperclip,{...e}):Sl.createElement(v.Trashcan,{...e})}var QB=F.create({fileTileIcon:o=>({backgroundColor:o.colors.background.muted,color:o.colors.text.muted,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:R.RADIUS_M}),fileTilePreview:{width:"100%",height:"100%",resizeMode:"cover",borderRadius:R.RADIUS_M,objectFit:"contain"}});function vw(o){let{navigate:t,getNavigationURL:e}=Se(),n=ye(),r=at(),[i,a]=rd.useState(""),c=o.map(h=>[n,h,r,i]),l=Hi.readMultiple(c),u=Hi.readCacheUpdatesKey(c),d=bP(l.map(h=>h[1]).flat()),p=Yt(),f=OI(p?.dataSync),m=typeof f<"u"?`${f}`:"";return rd.useEffect(()=>{a(`${d}${m}`)},[d,m]),rd.useMemo(()=>l.map(([h,b,w],k)=>{let x=o[k];return h?{title:h.text,icon:e5(x,h),secondaryIcon:t5(x),secondaryIconDescription:o5(x,h),href:typeof h.target=="string"?h.target:e({screen:h.target}),open:()=>{typeof h.target=="string"?rP(h.target):t({screen:h.target})},resolution:h}:{title:w?"Access denied":"Broken link",icon:void 0,href:"",open:()=>{}}}),[u,e,t])}function $e(o){return vw(o?[o]:[])[0]||{title:"Broken link",icon:null,href:"",open:()=>{}}}function e5(o,t){if(o.kind==="url")return v.ExternalLink;if(t.extra?.user)return ft(ul,{user:t.extra.user});if(t.extra?.file)return ft(nd,{file:t.extra.file});if(t.extra?.space)return ft(Bg,{space:t.extra.space});if(t.extra?.page&&t.extra.page.emoji)return ft(Eo,{code:t.extra.page.emoji})}function t5(o){switch(o.kind){case"user":return v.AtSign;case"anchor":return v.Hash;case"page":return v.Page;case"space":return v.Space;case"collection":return v.Collection;case"url":return v.ExternalLink}}function o5(o,t){switch(o.kind){case"user":return"User mention";case"anchor":return"Link to a page's anchor";case"page":return"Link to a page";case"space":return"Link to a space";case"collection":return"Link to a acollection";case"url":return"External URL"}}function Lh(o){let{label:t,labelDescription:e,value:n,onChangeValue:r,placeholder:i,accept:a,size:c="large",disabled:l=!1}=o,[u,d]=ut.useState(!1),[p,f]=ut.useState(!1),[m,h]=ut.useState(""),b=ut.useRef(null),w=ut.useRef(null),[,k]=P(r5),x=ce(b),O=ye(),_=at();ut.useEffect(()=>{if(!m||!u||u&&!p){x.close();return}x.opened?x.typeQuery(m):x.open(Iu(kn(T=>{r(T),f(!1),w.current&&w.current.blur()},_,O,{withSearch:!1,position:{width:"anchor"},accept:a}),m))},[m,u]),ut.useEffect(()=>{u&&w.current&&w.current.focus()},[u]);let I=T=>{h(T),f(!0)},N=()=>{m||(f(!1),r()),lu(m)&&(r({kind:"url",url:m}),f(!1)),d(!1)};return ut.createElement(Rs.View,null,t?ut.createElement(Rs.View,{style:g.Margin.smallBottom},ut.createElement(_u,null,t),e?ut.createElement(Rs.View,{style:g.Margin.xsmallTop},ut.createElement(wg,null,e)):null):null,u||!n?ut.createElement(to,{testID:"contentRef.input",ref:w,wrapperRef:b,size:c,value:m,onChangeText:I,onBlur:N,onFocus:()=>d(!0),placeholder:i,disabled:l}):ut.createElement(Rs.TouchableOpacity,{testID:"contentRef.fakeInput",onPress:()=>d(!0),style:[k.input,Y1[c],S.directionRow,S.alignCenter]},ut.createElement(ut.Suspense,{fallback:ut.createElement(Ce,{size:"small"})},ut.createElement(n5,{value:n,size:c}))))}function n5(o){let{value:t,size:e}=o,[,n]=P(A),r=$e(t);return ut.createElement(Rs.View,{style:[S.flex1,S.directionRow,S.alignCenter]},r.icon?ut.createElement(Rs.View,{style:[g.Margin.smallRight]},ut.createElement(r.icon,{size:R.ICON_S,style:n.textMuted})):null,ut.createElement(Rs.View,{style:[S.flex1]},ut.createElement(Br,{style:[U1[e],n.text],testID:"contentRef.resolvedTitle"},r.title)))}var r5=F.create({input:o=>({backgroundColor:o.colors.background.main,borderWidth:1,borderColor:o.colors.border.main})});s();async function RT(o,t,e){let[n]=await Hi.readAsync([o,t,e]);return{uri:n?.target}}function Dh(o,t){let n=(ls().color==="light"?null:t)||o,r=$e(n);if(!r.href)return null;let i=r.resolution?.extra?.file;return{uri:r.href,width:i?.dimensions?.width,height:i?.dimensions?.height}}s();function yc(o,t){return{href:o.href,onPress:e=>{if(t&&t(e),e){if(e.isDefaultPrevented()||e.nativeEvent.metaKey||e.nativeEvent.ctrlKey)return;e.preventDefault()}o.open()}}}s();var bw=y(C());function TT(o){let{block:t,style:e,size:n=R.ICON_M}=o;return t.icon?bw.createElement(Ho,{source:{uri:zi(t.icon,{width:n})},style:[{width:n,height:n,borderRadius:n/8}]}):bw.createElement(v.Integrations,{size:n,style:e})}s();s();var xr=y(C());s();var pd=y(C());s();var vo=y(C()),Cl=y(z());s();var Nh=y(C()),ET=y(z());function MT(o){let{description:t,readOnly:e,blockProps:n}=o,{node:r}=n;return!t||e&&"fragment"in t&&rs(r.fragments.get(t.fragment))?null:Nh.createElement(ET.View,{style:g.Margin.mediumTop},"text"in t?Nh.createElement(Ru,{markdown:t.text}):Nh.createElement(jn,{fragment:t.fragment}))}s();var cm=y(C()),LT=y(z());s();var wl={get:K.primary.base,post:K.green.base,put:K.orange.base,options:K.violet.base,head:K.orange.base,delete:K.scarlet.base,patch:K.orange.base,connect:K.orange.base,trace:K.orange.base};var i5=X.createResponsiveComponent(yr);function Ah(o){let{readOnly:t,method:e,setMethod:n}=o,[,r]=P(A),[,i]=P(a5),a=cm.default.useRef(null),c=ce(a),l=ne({groups:[{key:"methods",commands:Au.map(p=>({key:p,title:p.toUpperCase(),trigger:()=>{n&&n(p)}}))}]}),u=()=>{c.open(l)},d=cm.default.createElement(i5,{style:i.badge,backgroundColor:wl[e]||K.orange.base,mobileStyle:[i.mobileMethodBadge],desktopStyle:[i.httpMethodBadge]},cm.default.createElement(X.Text,{desktopStyle:[r.GroupTitle,r.Bold],mobileStyle:[r.MobileCaption,r.Bold],style:[r.textInsideColor,r.Bold,r.Uppercase]},e));return t?d:cm.default.createElement(LT.TouchableOpacity,{ref:a,onPress:u},d)}var a5=F.create({badge:{width:"fit-content"},httpMethodBadge:{borderRadius:R.XS,height:R.XS,paddingHorizontal:g.small,justifyContent:"center"},mobileMethodBadge:{borderRadius:R.XXS,height:R.XXS,paddingHorizontal:g.small,justifyContent:"center"}});var DT=X.createResponsiveComponent(q.View),s5=X.createResponsiveComponent(q.View.Child);function NT(o){let{readOnly:t,blockProps:e,baseUrl:n,summary:r,path:i,method:a,description:c,opened:l,setOpened:u}=o,{node:d,editor:p}=e,[,f]=P(A),m=vo.default.useRef(),h=vo.default.useRef(),b=vo.default.useRef();function w(){u(!l)}let k=q.useInteractiveComponent(l?v.ChevronDown:v.ChevronRight);return vo.default.createElement(Cl.View,{style:[S.directionColumn,S.flex1,g.Padding.smallBottom]},vo.default.createElement(X.View,{style:[S.alignCenter,g.Padding.medium,S.wrap],mobileStyle:S.flex1,desktopStyle:S.directionRow},vo.default.createElement(q.TouchableOpacity,{style:g.Padding.mediumRight,onPress:w},vo.default.createElement(k.Child,{size:R.ICON_M,style:f.textMuted,activeStyle:f.primary})),vo.default.createElement(Cl.View,{style:[g.Margin.mediumRight]},vo.default.createElement(Ah,{readOnly:t,method:a,setMethod:x=>{p.change(O=>{xe.setMethod(O,d.key,x)})}})),vo.default.createElement(DT,{style:[S.wrap],mobileStyle:[S.flex1]},vo.default.createElement(Wr,{ref:m,component:xs,value:n,placeholder:"https://web.archive.org/web/20231004051033/https://api.gitbook.com/v1",onChangeText:x=>{p.change(O=>{xe.setBaseUrl(O,d.key,x)})},style:[f.Label,f.textMuted,Bh.breakWord],selectTextOnFocus:!0,readOnly:t,onSubmitEditing:()=>{h.current&&h.current.focus()}})),vo.default.createElement(DT,{style:[S.directionRow],mobileStyle:[Bh.mobileEndpoint,g.Padding.xsmallTop]},vo.default.createElement(Wr,{ref:h,component:xs,value:i,placeholder:"/users",onChangeText:x=>{p.change(O=>{xe.setPath(O,d.key,x)})},style:[f.Label,f.text,f.Bold,Bh.breakWord],selectTextOnFocus:!0,readOnly:o.readOnly,onSubmitEditing:()=>{b.current&&b.current.focus()}}),vo.default.createElement(s5,{style:[g.Margin.xsmallLeft,Ke.hidden],hoverStyle:[Ke.visible],mobileStyle:{display:"none"}},vo.default.createElement(mg,{size:"xsmall",content:`${n}${i}`})))),vo.default.createElement(Cl.View,{style:Bh.headerBody},vo.default.createElement(Cl.View,null,vo.default.createElement(Wr,{ref:b,component:xs,value:r,placeholder:"Operation summary",onChangeText:x=>{p.change(O=>{xe.setSummary(O,d.key,x)})},style:[f.Heading3,f.text],readOnly:t,displayMode:"block",onSubmitEditing:()=>{p.change(x=>{if(l&&c&&"fragment"in c){let O=d.fragments.get(c.fragment);O&&x.collapseToStartOf(O)}else ht(x,d);x.focus()})}})),l?vo.default.createElement(MT,{readOnly:t,description:c,blockProps:e}):null))}var Bh=Cl.StyleSheet.create({breakWord:{wordWrap:"anywhere"},mobileEndpoint:{paddingLeft:g.medium+R.ICON_M,flexBasis:"100%",flexGrow:1},headerBody:{paddingLeft:g.medium+R.ICON_M+g.medium}});s();var Cm=y(C()),hM=y(z());s();var lm=y(C()),AT=y(z());function BT(o){let{blockProps:t}=o,{editor:e,node:n}=t,r=lm.useRef(null),i=ce(r),a=ne({groups:[{key:"parameters",commands:Sw.map(({location:l,title:u,description:d})=>({key:l,title:u,subtitle:d,trigger:()=>{e.change(p=>{xe.addParameter(p,n.key,l)})}}))}]}),c=()=>{i.open(a)};return lm.createElement(AT.View,null,lm.createElement(B,{ref:r,title:"Add Parameter",icon:i.opened?v.X:v.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>c()}))}var Sw=[{location:"path",title:"Path",description:"Params in the URL path"},{location:"query",title:"Query",description:"Params in the query string"},{location:"header",title:"Header",description:"Params sent in headers"},{location:"cookie",title:"Cookie",description:"Params set via cookie"},{location:"body",title:"Body",description:"Params passed in body"}];s();var Sm=y(C()),wm=y(z());s();var bo=y(C()),dd=y(z());s();var en=y(C());s();var WT=y(C(),1),Wh=(0,WT.createContext)({dragDropManager:void 0});s();var PE=y(v9(),1);s();s();function gi(o){return"Minified Redux error #"+o+"; visit https://redux.js.org/Errors?code="+o+" for the full message or use the non-minified dev environment for full errors. "}var FT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ww=function(){return Math.random().toString(36).substring(7).split("").join(".")},zT={INIT:"@@redux/INIT"+ww(),REPLACE:"@@redux/REPLACE"+ww(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ww()}};function c5(o){if(typeof o!="object"||o===null)return!1;for(var t=o;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(o)===t}function Cw(o,t,e){var n;if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(gi(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(gi(1));return e(Cw)(o,t)}if(typeof o!="function")throw new Error(gi(2));var r=o,i=t,a=[],c=a,l=!1;function u(){c===a&&(c=a.slice())}function d(){if(l)throw new Error(gi(3));return i}function p(b){if(typeof b!="function")throw new Error(gi(4));if(l)throw new Error(gi(5));var w=!0;return u(),c.push(b),function(){if(w){if(l)throw new Error(gi(6));w=!1,u();var x=c.indexOf(b);c.splice(x,1),a=null}}}function f(b){if(!c5(b))throw new Error(gi(7));if(typeof b.type>"u")throw new Error(gi(8));if(l)throw new Error(gi(9));try{l=!0,i=r(i,b)}finally{l=!1}for(var w=a=c,k=0;k<w.length;k++){var x=w[k];x()}return b}function m(b){if(typeof b!="function")throw new Error(gi(10));r=b,f({type:zT.REPLACE})}function h(){var b,w=p;return b={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(gi(11));function O(){x.next&&x.next(d())}O();var _=w(O);return{unsubscribe:_}}},b[FT]=function(){return this},b}return f({type:zT.INIT}),n={dispatch:f,subscribe:p,getState:d,replaceReducer:m},n[FT]=h,n}s();s();s();s();function se(o,t,...e){if(l5()&&t===void 0)throw new Error("invariant requires an error message argument");if(!o){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(t.replace(/%s/g,function(){return e[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function l5(){return typeof process<"u"&&!0}s();function VT(o,t,e){return t.split(".").reduce((n,r)=>n&&n[r]?n[r]:e||null,o)}function qT(o,t){return o.filter(e=>e!==t)}function Fh(o){return typeof o=="object"}function GT(o,t){let e=new Map,n=i=>{e.set(i,e.has(i)?e.get(i)+1:1)};o.forEach(n),t.forEach(n);let r=[];return e.forEach((i,a)=>{i===1&&r.push(a)}),r}function HT(o,t){return o.filter(e=>t.indexOf(e)>-1)}s();s();var id="dnd-core/INIT_COORDS",vc="dnd-core/BEGIN_DRAG",ad="dnd-core/PUBLISH_DRAG_SOURCE",bc="dnd-core/HOVER",Sc="dnd-core/DROP",wc="dnd-core/END_DRAG";function kw(o,t){return{type:id,payload:{sourceClientOffset:t||null,clientOffset:o||null}}}var u5={type:id,payload:{clientOffset:null,sourceClientOffset:null}};function KT(o){return function(e=[],n={publishSource:!0}){let{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,c=o.getMonitor(),l=o.getRegistry();o.dispatch(kw(i)),d5(e,c,l);let u=f5(e,c);if(u==null){o.dispatch(u5);return}let d=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");p5(a),d=a(u)}o.dispatch(kw(i,d));let f=l.getSource(u).beginDrag(c,u);if(f==null)return;m5(f),l.pinSource(u);let m=l.getSourceType(u);return{type:vc,payload:{itemType:m,item:f,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!r}}}}function d5(o,t,e){se(!t.isDragging(),"Cannot call beginDrag while dragging."),o.forEach(function(n){se(e.getSource(n),"Expected sourceIds to be registered.")})}function p5(o){se(typeof o=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function m5(o){se(Fh(o),"Item must be an object.")}function f5(o,t){let e=null;for(let n=o.length-1;n>=0;n--)if(t.canDragSource(o[n])){e=o[n];break}return e}s();function g5(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function h5(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){g5(o,r,e[r])})}return o}function XT(o){return function(e={}){let n=o.getMonitor(),r=o.getRegistry();y5(n),S5(n).forEach((a,c)=>{let l=v5(a,c,r,n),u={type:Sc,payload:{dropResult:h5({},e,l)}};o.dispatch(u)})}}function y5(o){se(o.isDragging(),"Cannot call drop while not dragging."),se(!o.didDrop(),"Cannot call drop twice during one drag operation.")}function v5(o,t,e,n){let r=e.getTarget(o),i=r?r.drop(n,o):void 0;return b5(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function b5(o){se(typeof o>"u"||Fh(o),"Drop result must either be an object or undefined.")}function S5(o){let t=o.getTargetIds().filter(o.canDropOnTarget,o);return t.reverse(),t}s();function UT(o){return function(){let e=o.getMonitor(),n=o.getRegistry();w5(e);let r=e.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(e,r),n.unpinSource()),{type:wc}}}function w5(o){se(o.isDragging(),"Cannot call endDrag while not dragging.")}s();s();function um(o,t){return t===null?o===null:Array.isArray(o)?o.some(e=>e===t):o===t}function YT(o){return function(e,{clientOffset:n}={}){C5(e);let r=e.slice(0),i=o.getMonitor(),a=o.getRegistry(),c=i.getItemType();return x5(r,a,c),k5(r,i,a),O5(r,i,a),{type:bc,payload:{targetIds:r,clientOffset:n||null}}}}function C5(o){se(Array.isArray(o),"Expected targetIds to be an array.")}function k5(o,t,e){se(t.isDragging(),"Cannot call hover while not dragging."),se(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<o.length;n++){let r=o[n];se(o.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");let i=e.getTarget(r);se(i,"Expected targetIds to be registered.")}}function x5(o,t,e){for(let n=o.length-1;n>=0;n--){let r=o[n],i=t.getTargetType(r);um(i,e)||o.splice(n,1)}}function O5(o,t,e){o.forEach(function(n){e.getTarget(n).hover(t,n)})}s();function $T(o){return function(){if(o.getMonitor().isDragging())return{type:ad}}}function jT(o){return{beginDrag:KT(o),publishDragSource:$T(o),hover:YT(o),drop:XT(o),endDrag:UT(o)}}var zh=class{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let t=this,{dispatch:e}=this.store;function n(i){return(...a)=>{let c=i.apply(t,a);typeof c<"u"&&e(c)}}let r=jT(this);return Object.keys(r).reduce((i,a)=>{let c=r[a];return i[a]=n(c),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,e){this.isSetUp=!1,this.handleRefCountChange=()=>{let n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=e,t.subscribe(this.handleRefCountChange)}};s();s();function P5(o,t){return{x:o.x+t.x,y:o.y+t.y}}function ZT(o,t){return{x:o.x-t.x,y:o.y-t.y}}function JT(o){let{clientOffset:t,initialClientOffset:e,initialSourceClientOffset:n}=o;return!t||!e||!n?null:ZT(P5(t,n),e)}function QT(o){let{clientOffset:t,initialClientOffset:e}=o;return!t||!e?null:ZT(t,e)}s();var sd=[],Vh=[];sd.__IS_NONE__=!0;Vh.__IS_ALL__=!0;function eE(o,t){return o===sd?!1:o===Vh||typeof t>"u"?!0:HT(t,o).length>0}var qh=class{subscribeToStateChange(t,e={}){let{handlerIds:n}=e;se(typeof t=="function","listener must be a function."),se(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId,i=()=>{let a=this.store.getState(),c=a.stateId;try{c===r||c===r+1&&!eE(a.dirtyHandlerIds,n)||t()}finally{r=c}};return this.store.subscribe(i)}subscribeToOffsetChange(t){se(typeof t=="function","listener must be a function.");let e=this.store.getState().dragOffset,n=()=>{let r=this.store.getState().dragOffset;r!==e&&(e=r,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;let e=this.registry.getSource(t);return se(e,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:e.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;let e=this.registry.getTarget(t);if(se(e,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;let n=this.registry.getTargetType(t),r=this.getItemType();return um(n,r)&&e.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;let e=this.registry.getSource(t,!0);if(se(e,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;let n=this.registry.getSourceType(t),r=this.getItemType();return n!==r?!1:e.isDragging(this,t)}isOverTarget(t,e={shallow:!1}){if(!t)return!1;let{shallow:n}=e;if(!this.isDragging())return!1;let r=this.registry.getTargetType(t),i=this.getItemType();if(i&&!um(r,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let c=a.indexOf(t);return n?c===a.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return JT(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return QT(this.store.getState().dragOffset)}constructor(t,e){this.store=t,this.registry=e}};s();s();s();s();s();var tE=typeof window<"u"?window:self,oE=tE.MutationObserver||tE.WebKitMutationObserver;function xw(o){return function(){let e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),o()}}}function _5(o){let t=1,e=new oE(o),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var nE=typeof oE=="function"?_5:xw;var Gh=class{enqueueTask(t){let{queue:e,requestFlush:n}=this;e.length||(n(),this.flushing=!0),e[e.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let e=this.index;if(this.index++,t[e].call(),this.index>this.capacity){for(let n=0,r=t.length-this.index;n<r;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=nE(this.flush),this.requestErrorThrow=xw(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};s();s();var Hh=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,e){this.onError=t,this.release=e,this.task=null}};var Kh=class{create(t){let e=this.freeTasks,n=e.length?e.pop():new Hh(this.onError,r=>e[e.length]=r);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var rE=new Gh,I5=new Kh(rE.registerPendingError);function iE(o){rE.enqueueTask(I5.create(o))}s();s();var dm="dnd-core/ADD_SOURCE",pm="dnd-core/ADD_TARGET",mm="dnd-core/REMOVE_SOURCE",kl="dnd-core/REMOVE_TARGET";function aE(o){return{type:dm,payload:{sourceId:o}}}function sE(o){return{type:pm,payload:{targetId:o}}}function cE(o){return{type:mm,payload:{sourceId:o}}}function lE(o){return{type:kl,payload:{targetId:o}}}s();function uE(o){se(typeof o.canDrag=="function","Expected canDrag to be a function."),se(typeof o.beginDrag=="function","Expected beginDrag to be a function."),se(typeof o.endDrag=="function","Expected endDrag to be a function.")}function dE(o){se(typeof o.canDrop=="function","Expected canDrop to be a function."),se(typeof o.hover=="function","Expected hover to be a function."),se(typeof o.drop=="function","Expected beginDrag to be a function.")}function Xh(o,t){if(t&&Array.isArray(o)){o.forEach(e=>Xh(e,!1));return}se(typeof o=="string"||typeof o=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}s();var qr;(function(o){o.SOURCE="SOURCE",o.TARGET="TARGET"})(qr||(qr={}));s();var R5=0;function pE(){return R5++}function T5(o){let t=pE().toString();switch(o){case qr.SOURCE:return`S${t}`;case qr.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${o}`)}}function mE(o){switch(o[0]){case"S":return qr.SOURCE;case"T":return qr.TARGET;default:throw new Error(`Cannot parse handler ID: ${o}`)}}function fE(o,t){let e=o.entries(),n=!1;do{let{done:r,value:[,i]}=e.next();if(i===t)return!0;n=!!r}while(!n);return!1}var Uh=class{addSource(t,e){Xh(t),uE(e);let n=this.addHandler(qr.SOURCE,t,e);return this.store.dispatch(aE(n)),n}addTarget(t,e){Xh(t,!0),dE(e);let n=this.addHandler(qr.TARGET,t,e);return this.store.dispatch(sE(n)),n}containsHandler(t){return fE(this.dragSources,t)||fE(this.dropTargets,t)}getSource(t,e=!1){return se(this.isSourceId(t),"Expected a valid source ID."),e&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return se(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return se(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return se(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return mE(t)===qr.SOURCE}isTargetId(t){return mE(t)===qr.TARGET}removeSource(t){se(this.getSource(t),"Expected an existing source."),this.store.dispatch(cE(t)),iE(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){se(this.getTarget(t),"Expected an existing target."),this.store.dispatch(lE(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){let e=this.getSource(t);se(e,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=e}unpinSource(){se(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,e,n){let r=T5(t);return this.types.set(r,e),t===qr.SOURCE?this.dragSources.set(r,n):t===qr.TARGET&&this.dropTargets.set(r,n),r}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}};s();s();s();var E5=(o,t)=>o===t;function gE(o,t){return!o&&!t?!0:!o||!t?!1:o.x===t.x&&o.y===t.y}function hE(o,t,e=E5){if(o.length!==t.length)return!1;for(let n=0;n<o.length;++n)if(!e(o[n],t[n]))return!1;return!0}function yE(o=sd,t){switch(t.type){case bc:break;case dm:case pm:case kl:case mm:return sd;case vc:case ad:case wc:case Sc:default:return Vh}let{targetIds:e=[],prevTargetIds:n=[]}=t.payload,r=GT(e,n);if(!(r.length>0||!hE(e,n)))return sd;let a=n[n.length-1],c=e[e.length-1];return a!==c&&(a&&r.push(a),c&&r.push(c)),r}s();function M5(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function L5(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){M5(o,r,e[r])})}return o}var vE={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function bE(o=vE,t){let{payload:e}=t;switch(t.type){case id:case vc:return{initialSourceClientOffset:e.sourceClientOffset,initialClientOffset:e.clientOffset,clientOffset:e.clientOffset};case bc:return gE(o.clientOffset,e.clientOffset)?o:L5({},o,{clientOffset:e.clientOffset});case wc:case Sc:return vE;default:return o}}s();function D5(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function cd(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){D5(o,r,e[r])})}return o}var N5={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function SE(o=N5,t){let{payload:e}=t;switch(t.type){case vc:return cd({},o,{itemType:e.itemType,item:e.item,sourceId:e.sourceId,isSourcePublic:e.isSourcePublic,dropResult:null,didDrop:!1});case ad:return cd({},o,{isSourcePublic:!0});case bc:return cd({},o,{targetIds:e.targetIds});case kl:return o.targetIds.indexOf(e.targetId)===-1?o:cd({},o,{targetIds:qT(o.targetIds,e.targetId)});case Sc:return cd({},o,{dropResult:e.dropResult,didDrop:!0,targetIds:[]});case wc:return cd({},o,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return o}}s();function wE(o=0,t){switch(t.type){case dm:case pm:return o+1;case mm:case kl:return o-1;default:return o}}s();function CE(o=0){return o+1}function A5(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function B5(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){A5(o,r,e[r])})}return o}function kE(o={},t){return{dirtyHandlerIds:yE(o.dirtyHandlerIds,{type:t.type,payload:B5({},t.payload,{prevTargetIds:VT(o,"dragOperation.targetIds",[])})}),dragOffset:bE(o.dragOffset,t),refCount:wE(o.refCount,t),dragOperation:SE(o.dragOperation,t),stateId:CE(o.stateId)}}function xE(o,t=void 0,e={},n=!1){let r=W5(n),i=new qh(r,new Uh(r)),a=new zh(r,i),c=o(a,t,e);return a.receiveBackend(c),a}function W5(o){let t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Cw(kE,o&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var $h=y(C(),1);function F5(o,t){if(o==null)return{};var e=z5(o,t),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(e[n]=o[n])}return e}function z5(o,t){if(o==null)return{};var e={},n=Object.keys(o),r,i;for(i=0;i<n.length;i++)r=n[i],!(t.indexOf(r)>=0)&&(e[r]=o[r]);return e}var OE=0,Yh=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),_E=(0,$h.memo)(function(t){var{children:e}=t,n=F5(t,["children"]);let[r,i]=V5(n);return(0,$h.useEffect)(()=>{if(i){let a=IE();return++OE,()=>{--OE===0&&(a[Yh]=null)}}},[]),(0,PE.jsx)(Wh.Provider,{value:r,children:e})});function V5(o){if("manager"in o)return[{dragDropManager:o.manager},!1];let t=q5(o.backend,o.context,o.options,o.debugMode),e=!o.context;return[t,e]}function q5(o,t=IE(),e,n){let r=t;return r[Yh]||(r[Yh]={dragDropManager:xE(o,t,e,n)}),r[Yh]}function IE(){return window}s();s();s();s();var RE=y(h9(),1),Zh=y(C(),1);s();var jh=y(C(),1),Gr=typeof window<"u"?jh.useLayoutEffect:jh.useEffect;function TE(o,t,e){let[n,r]=(0,Zh.useState)(()=>t(o)),i=(0,Zh.useCallback)(()=>{let a=t(o);(0,RE.default)(n,a)||(r(a),e&&e())},[n,o,e]);return Gr(i),[n,i]}function EE(o,t,e){let[n,r]=TE(o,t,e);return Gr(function(){let a=o.getHandlerId();if(a!=null)return o.subscribeToStateChange(r,{handlerIds:[a]})},[o,r]),n}function Jh(o,t,e){return EE(t,o||(()=>({})),()=>e.reconnect())}s();var ME=y(C(),1);function Qh(o,t){let e=[...t||[]];return t==null&&typeof o!="function"&&e.push(o),(0,ME.useMemo)(()=>typeof o=="function"?o():o,e)}s();var Ow=y(C(),1);function LE(o){return(0,Ow.useMemo)(()=>o.hooks.dragSource(),[o])}function DE(o){return(0,Ow.useMemo)(()=>o.hooks.dragPreview(),[o])}s();var FE=y(C(),1);s();var Pw=!1,_w=!1,ey=class{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){se(!Pw,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Pw=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Pw=!1}}isDragging(){if(!this.sourceId)return!1;se(!_w,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return _w=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{_w=!1}}subscribeToStateChange(t,e){return this.internalMonitor.subscribeToStateChange(t,e)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,e){return this.internalMonitor.isOverTarget(t,e)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}};s();var Iw=!1,ty=class{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,e){return this.internalMonitor.subscribeToStateChange(t,e)}canDrop(){if(!this.targetId)return!1;se(!Iw,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Iw=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Iw=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}};s();function NE(o,t,e){let n=e.getRegistry(),r=n.addTarget(o,t);return[r,()=>n.removeTarget(r)]}function AE(o,t,e){let n=e.getRegistry(),r=n.addSource(o,t);return[r,()=>n.removeSource(r)]}s();s();function fm(o,t,e,n){let r=e?e.call(n,o,t):void 0;if(r!==void 0)return!!r;if(o===t)return!0;if(typeof o!="object"||!o||typeof t!="object"||!t)return!1;let i=Object.keys(o),a=Object.keys(t);if(i.length!==a.length)return!1;let c=Object.prototype.hasOwnProperty.bind(t);for(let l=0;l<i.length;l++){let u=i[l];if(!c(u))return!1;let d=o[u],p=t[u];if(r=e?e.call(n,d,p,u):void 0,r===!1||r===void 0&&d!==p)return!1}return!0}s();function gm(o){return o!==null&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"current")}s();var hm=y(C(),1);function G5(o){if(typeof o.type=="string")return;let t=o.type.displayName||o.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function H5(o){return(t=null,e=null)=>{if(!(0,hm.isValidElement)(t)){let i=t;return o(i,e),i}let n=t;return G5(n),K5(n,e?i=>o(i,e):o)}}function oy(o){let t={};return Object.keys(o).forEach(e=>{let n=o[e];if(e.endsWith("Ref"))t[e]=o[e];else{let r=H5(n);t[e]=()=>r}}),t}function BE(o,t){typeof o=="function"?o(t):o.current=t}function K5(o,t){let e=o.ref;return se(typeof e!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),e?(0,hm.cloneElement)(o,{ref:n=>{BE(e,n),BE(t,n)}}):(0,hm.cloneElement)(o,{ref:t})}var ny=class{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){let t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){let t=this.dragSource,e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return e&&this.disconnectDragSource(),this.handlerId?t?(e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),e):(this.lastConnectedDragSource=t,e):e}reconnectDragPreview(t=!1){let e=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!e){this.lastConnectedDragPreview=e;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!fm(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!fm(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=oy({dragSource:(e,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,gm(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,gm(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}};s();var ry=class{get connectTarget(){return this.dropTarget}reconnect(){let t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();let e=this.dropTarget;if(this.handlerId){if(!e){this.lastConnectedDropTarget=e;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=e,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,e,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!fm(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=oy({dropTarget:(e,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,gm(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}};s();var WE=y(C(),1);function hi(){let{dragDropManager:o}=(0,WE.useContext)(Wh);return se(o!=null,"Expected drag drop context"),o}function zE(o,t){let e=hi(),n=(0,FE.useMemo)(()=>new ny(e.getBackend()),[e]);return Gr(()=>(n.dragSourceOptions=o||null,n.reconnect(),()=>n.disconnectDragSource()),[n,o]),Gr(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}s();var VE=y(C(),1);function qE(){let o=hi();return(0,VE.useMemo)(()=>new ey(o),[o])}s();s();var ay=y(C(),1);s();var iy=class{beginDrag(){let t=this.spec,e=this.monitor,n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(e):n={},n??null}canDrag(){let t=this.spec,e=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(e):!0}isDragging(t,e){let n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):e===t.getSourceId()}endDrag(){let t=this.spec,e=this.monitor,n=this.connector,{end:r}=t;r&&r(e.getItem(),e),n.reconnect()}constructor(t,e,n){this.spec=t,this.monitor=e,this.connector=n}};function GE(o,t,e){let n=(0,ay.useMemo)(()=>new iy(o,t,e),[t,e]);return(0,ay.useEffect)(()=>{n.spec=o},[o]),n}s();var HE=y(C(),1);function KE(o){return(0,HE.useMemo)(()=>{let t=o.type;return se(t!=null,"spec.type must be defined"),t},[o])}function XE(o,t,e){let n=hi(),r=GE(o,t,e),i=KE(o);Gr(function(){if(i!=null){let[c,l]=AE(i,r,n);return t.receiveHandlerId(c),e.receiveHandlerId(c),l}},[n,t,e,r,i])}function Cc(o,t){let e=Qh(o,t);se(!e.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=qE(),r=zE(e.options,e.previewOptions);return XE(e,n,r),[Jh(e.collect,n,r),LE(r),DE(r)]}s();s();var UE=y(C(),1);function YE(o){return(0,UE.useMemo)(()=>o.hooks.dropTarget(),[o])}s();var $E=y(C(),1);function jE(o){let t=hi(),e=(0,$E.useMemo)(()=>new ry(t.getBackend()),[t]);return Gr(()=>(e.dropTargetOptions=o||null,e.reconnect(),()=>e.disconnectDropTarget()),[o]),e}s();var ZE=y(C(),1);function JE(){let o=hi();return(0,ZE.useMemo)(()=>new ty(o),[o])}s();s();var QE=y(C(),1);function eM(o){let{accept:t}=o;return(0,QE.useMemo)(()=>(se(o.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}s();var cy=y(C(),1);s();var sy=class{canDrop(){let t=this.spec,e=this.monitor;return t.canDrop?t.canDrop(e.getItem(),e):!0}hover(){let t=this.spec,e=this.monitor;t.hover&&t.hover(e.getItem(),e)}drop(){let t=this.spec,e=this.monitor;if(t.drop)return t.drop(e.getItem(),e)}constructor(t,e){this.spec=t,this.monitor=e}};function tM(o,t){let e=(0,cy.useMemo)(()=>new sy(o,t),[t]);return(0,cy.useEffect)(()=>{e.spec=o},[o]),e}function oM(o,t,e){let n=hi(),r=tM(o,t),i=eM(o);Gr(function(){let[c,l]=NE(i,r,n);return t.receiveHandlerId(c),e.receiveHandlerId(c),l},[n,t,r,e,i.map(a=>a.toString()).join("|")])}function Jn(o,t){let e=Qh(o,t),n=JE(),r=jE(e.options);return oM(e,n,r),[Jh(e.collect,n,r),YE(r)]}var ld=y(z());s();var uM=y(C());s();s();s();s();function Rw(o){let t=null;return()=>(t==null&&(t=o()),t)}function nM(o,t){return o.filter(e=>e!==t)}function rM(o,t){let e=new Set,n=i=>e.add(i);o.forEach(n),t.forEach(n);let r=[];return e.forEach(i=>r.push(i)),r}var ly=class{enter(t){let e=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(t));return this.entered=rM(this.entered.filter(n),[t]),e===0&&this.entered.length>0}leave(t){let e=this.entered.length;return this.entered=nM(this.entered.filter(this.isNodeInDocument),t),e>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}};s();s();var uy=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){let e={};Object.keys(this.config.exposeProperties).forEach(n=>{let r=this.config.exposeProperties[n];r!=null&&(e[n]={value:r(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,e)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,e){return e===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}};s();var ym={};dx(ym,{FILE:()=>Tw,HTML:()=>Lw,TEXT:()=>Mw,URL:()=>Ew});s();var Tw="__NATIVE_FILE__",Ew="__NATIVE_URL__",Mw="__NATIVE_TEXT__",Lw="__NATIVE_HTML__";s();function dy(o,t,e){let n=t.reduce((r,i)=>r||o.getData(i),"");return n??e}var py={[Tw]:{exposeProperties:{files:o=>Array.prototype.slice.call(o.files),items:o=>o.items,dataTransfer:o=>o},matchesTypes:["Files"]},[Lw]:{exposeProperties:{html:(o,t)=>dy(o,t,""),dataTransfer:o=>o},matchesTypes:["Html","text/html"]},[Ew]:{exposeProperties:{urls:(o,t)=>dy(o,t,"").split(`
`),dataTransfer:o=>o},matchesTypes:["Url","text/uri-list"]},[Mw]:{exposeProperties:{text:(o,t)=>dy(o,t,""),dataTransfer:o=>o},matchesTypes:["Text","text/plain"]}};function iM(o,t){let e=py[o];if(!e)throw new Error(`native type ${o} has no configuration`);let n=new uy(e);return n.loadDataTransfer(t),n}function my(o){if(!o)return null;let t=Array.prototype.slice.call(o.types||[]);return Object.keys(py).filter(e=>{let n=py[e];return n?.matchesTypes?n.matchesTypes.some(r=>t.indexOf(r)>-1):!1})[0]||null}s();s();var aM=Rw(()=>/firefox/i.test(navigator.userAgent)),Dw=Rw(()=>!!window.safari);s();var vm=class{interpolate(t){let{xs:e,ys:n,c1s:r,c2s:i,c3s:a}=this,c=e.length-1;if(t===e[c])return n[c];let l=0,u=a.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));let m=e[d];if(m<t)l=d+1;else if(m>t)u=d-1;else return n[d]}c=Math.max(0,u);let p=t-e[c],f=p*p;return n[c]+r[c]*p+i[c]*f+a[c]*p*f}constructor(t,e){let{length:n}=t,r=[];for(let h=0;h<n;h++)r.push(h);r.sort((h,b)=>t[h]<t[b]?-1:1);let i=[],a=[],c=[],l,u;for(let h=0;h<n-1;h++)l=t[h+1]-t[h],u=e[h+1]-e[h],a.push(l),i.push(u),c.push(u/l);let d=[c[0]];for(let h=0;h<a.length-1;h++){let b=c[h],w=c[h+1];if(b*w<=0)d.push(0);else{l=a[h];let k=a[h+1],x=l+k;d.push(3*x/((x+k)/b+(x+l)/w))}}d.push(c[c.length-1]);let p=[],f=[],m;for(let h=0;h<d.length-1;h++){m=c[h];let b=d[h],w=1/a[h],k=b+d[h+1]-m-m;p.push((m-b-k)*w),f.push(k*w*w)}this.xs=t,this.ys=e,this.c1s=d,this.c2s=p,this.c3s=f}};var X5=1;function Nw(o){let t=o.nodeType===X5?o:o.parentElement;if(!t)return null;let{top:e,left:n}=t.getBoundingClientRect();return{x:n,y:e}}function bm(o){return{x:o.clientX,y:o.clientY}}function U5(o){var t;return o.nodeName==="IMG"&&(aM()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(o)))}function Y5(o,t,e,n){let r=o?t.width:e,i=o?t.height:n;return Dw()&&o&&(i/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:i}}function sM(o,t,e,n,r){let i=U5(t),c=Nw(i?o:t),l={x:e.x-c.x,y:e.y-c.y},{offsetWidth:u,offsetHeight:d}=o,{anchorX:p,anchorY:f}=n,{dragPreviewWidth:m,dragPreviewHeight:h}=Y5(i,t,u,d),b=()=>{let N=new vm([0,.5,1],[l.y,l.y/d*h,l.y+h-d]).interpolate(f);return Dw()&&i&&(N+=(window.devicePixelRatio-1)*h),N},w=()=>new vm([0,.5,1],[l.x,l.x/u*m,l.x+m-u]).interpolate(p),{offsetX:k,offsetY:x}=r,O=k===0||k,_=x===0||x;return{x:O?k:w(),y:_?x:b()}}s();var fy=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,e){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=e}};function $5(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function cM(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){$5(o,r,e[r])})}return o}var gy=class{profile(){var t,e;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){let t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var e;(e=this.window)===null||e===void 0||e.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,e,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,e),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,e,n){this.sourceNodes.set(t,e),this.sourceNodeOptions.set(t,n);let r=a=>this.handleDragStart(a,t),i=a=>this.handleSelectStart(a);return e.setAttribute("draggable","true"),e.addEventListener("dragstart",r),e.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),e.removeEventListener("dragstart",r),e.removeEventListener("selectstart",i),e.setAttribute("draggable","false")}}connectDropTarget(t,e){let n=a=>this.handleDragEnter(a,t),r=a=>this.handleDragOver(a,t),i=a=>this.handleDrop(a,t);return e.addEventListener("dragenter",n),e.addEventListener("dragover",r),e.addEventListener("drop",i),()=>{e.removeEventListener("dragenter",n),e.removeEventListener("dragover",r),e.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let t=this.monitor.getSourceId(),e=this.sourceNodeOptions.get(t);return cM({dropEffect:this.altKeyPressed?"copy":"move"},e||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let t=this.monitor.getSourceId(),e=this.sourcePreviewNodeOptions.get(t);return cM({anchorX:.5,anchorY:.5,captureDraggingState:!1},e||{})}isDraggingNativeItem(){let t=this.monitor.getItemType();return Object.keys(ym).some(e=>ym[e]===t)}beginDragNativeItem(t,e){this.clearCurrentDragSourceNode(),this.currentNativeSource=iM(t,e),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;let e=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},e)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,e){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(e))}handleDragEnter(t,e){this.dragEnterTargetIds.unshift(e)}handleDragOver(t,e){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(e)}handleDrop(t,e){this.dropTargetIds.unshift(e)}constructor(t,e,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{let i=this.sourceNodes.get(r);return i&&Nw(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{let r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;let{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;let a=bm(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});let{dataTransfer:c}=r,l=my(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){let d=this.monitor.getSourceId(),p=this.sourceNodes.get(d),f=this.sourcePreviewNodes.get(d)||p;if(f){let{anchorX:m,anchorY:h,offsetX:b,offsetY:w}=this.getCurrentSourcePreviewNodeOptions(),O=sM(p,f,a,{anchorX:m,anchorY:h},{offsetX:b,offsetY:w});c.setDragImage(f,O.x,O.y)}}try{c?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(r.target);let{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(c&&!c.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;let{dataTransfer:c}=r,l=my(c);l&&this.beginDragNativeItem(l,c)},this.handleTopDragEnter=r=>{let{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,i.length>0&&this.actions.hover(i,{clientOffset:bm(r)}),i.some(c=>this.monitor.canDropOnTarget(c))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{let{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=bm(r),this.scheduleHover(i),(i||[]).some(c=>this.monitor.canDropOnTarget(c))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;r.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}else my(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{let{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:bm(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{let i=r.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(r.preventDefault(),i.dragDrop()))},this.options=new fy(e,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new ly(this.isNodeInDocument)}};s();var hy;function Aw(){return hy||(hy=new Image,hy.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),hy}var lM=function(t,e,n){return new gy(t,e,n)};function dM(o){return uM.createElement(_E,{backend:lM},o.children)}s();function pM(o){switch(o.type){case"space":return{kind:"space",space:o.id};case"collection":return{kind:"collection",collection:o.id};case"page":return{kind:"page",space:o.space,page:o.id};case"block":case"tab":case"swagger-response":case"swagger-parameter":throw new Error(`Invalid DND item "${o.type}"`);default:De(o)}}s();var mM=y(C());function Ia(o,t){let[e,n,r]=Cc(o,t);return(0,mM.useEffect)(()=>{r(Aw(),{captureDraggingState:!0})},[r]),[e,n,r]}var fM=q.createInteractiveHandle("swagger-row");function yy(o){let{dragItem:t,columns:e,isLast:n,children:r,palette:i,onDropBefore:a,onDropAfter:c,onInsertBefore:l,onInsertAfter:u,readOnly:d,opened:p,setOpened:f,node:m,ancestors:h}=o,[,b]=P(j5),w=ud({node:m,ancestors:h}),[{dragging:k},x]=Ia({type:t.type,item:t,canDrag:()=>!o.readOnly,collect:V=>({dragging:V.isDragging()})}),[O,_]=Jn({accept:t.type,drop:(V,j)=>{j.didDrop()||a(V)},canDrop:V=>t.id!==V.id&&t.blockKey===V.blockKey,collect:V=>({highlighted:V.isOver()&&V.canDrop()})}),[I,N]=Jn({accept:t.type,drop:(V,j)=>{j.didDrop()||c(V)},canDrop:V=>t.id!==V.id&&t.blockKey===V.blockKey,collect:V=>({highlighted:V.isOver()&&V.canDrop()})}),T=en.useRef(null),E=ci(T,x),L=ce(T);return en.createElement(ld.View,null,en.createElement(ld.View,null,en.createElement(q.View,{handle:fM,style:[S.directionRow,S.alignCenter,g.Padding.largeRight,k?Ke.translucent:Ke.visible]},d?null:en.createElement(X.View,{style:[S.justifyContentCenter,w.controlButtons?.position],mobileStyle:"hidden"},en.createElement(q.View.Child,{descendantOf:fM,activeStyle:Ke.visible,inactiveStyle:L.opened?{}:Ke.hidden},en.createElement(B,{ref:E,icon:v.GrabberVertical,size:w.controlButtons?.size,rounded:!0,kind:"secondary",title:`Click for options.
Drag to move.`,onPress:()=>{L.open(i())}}))),en.createElement(X.View,{style:[S.flex1,S.directionRow],mobileStyle:[S.wrap,S.alignStart,g.Padding.smallVertical],desktopStyle:[S.alignStart,g.Padding.mediumVertical]},e.map((V,j)=>en.createElement(X.View,{key:j,style:[g.Padding.smallRight],desktopStyle:[V.desktopSize],mobileStyle:[b.columnResetWidth,V.mobileSize]},V.content))),r&&f?en.createElement(ld.View,{style:[g.Margin.mediumLeft]},en.createElement(B,{icon:p?v.ChevronDown:v.ChevronRight,onPress:()=>f(!p)})):null),p?en.createElement(ld.View,null,r):null,n?null:en.createElement(ld.View,{style:b.borderLine})),d?null:en.createElement(Dp,{ref:_,position:"top",dropHovered:O.highlighted,button:{kind:"secondary",icon:v.Plus,onPress:l}}),n&&!d?en.createElement(Dp,{ref:N,position:"bottom",dropHovered:I.highlighted,button:{kind:"secondary",icon:v.Plus,onPress:u}}):null)}var j5=F.create({borderLine:o=>({height:1,backgroundColor:o.colors.border.muted}),controlButtonWrapper:{position:"absolute",top:0,bottom:0,left:-R.BUTTON_S/2,width:R.BUTTON_S},columnResetWidth:{width:"auto"}});s();var xl=y(C()),kc=y(z());function vy(o){let{title:t,button:e,children:n}=o,[,r]=P(A);return xl.createElement(kc.View,{style:g.Margin.largeTop},xl.createElement(kc.View,{style:[S.directionRow,S.alignCenter,g.Padding.mediumBottom]},xl.createElement(kc.View,{style:S.flex1},xl.createElement(kc.Text,{style:[r.Heading3,r.text]},t)),e?xl.createElement(kc.View,{style:g.Padding.smallHorizontal},e):null),xl.createElement(kc.View,null,n))}function by(o){let{readOnly:t,blockProps:e,parameter:n,isLast:r,beforeOrderIndex:i,afterOrderIndex:a}=o,{node:c,editor:l}=e,[,u]=P(A),d=bo.useRef(),p={id:n.key,type:"swagger-parameter",blockKey:c.key,previewLabel:"Move parameter"},{name:f="",type:m="",required:h,description:b,properties:w={},items:k}=n.value,[,x]=P(Q5),[O,_]=bo.useState(!1),I=Object.keys(w).length,N=I>0||!!k,T=c.fragments.get(n.key),E=H=>{l.change(J=>{xe.setParameterName(J,c.key,n.key,H)})},L=H=>{l.change(J=>{xe.setParameterType(J,c.key,n.key,H)})},V=H=>{l.change(J=>{xe.setParameterRequired(J,c.key,n.key,H)})},j=()=>{l.change(H=>{xe.removeParameter(H,c.key,n.key)})},oe=m==="object"&&I>0?Object.entries(w).map(([H,J],ie)=>bo.createElement(by,{key:H,...o,isLast:ie===I-1,parameter:{key:H,value:J}})):m==="array"&&k?bo.createElement(by,{...o,isLast:!0,parameter:{key:"items",value:k}}):null;return bo.createElement(yy,{...N?{opened:O,setOpened:_}:{},...e,readOnly:o.readOnly,dragItem:p,isLast:r,palette:()=>ne({groups:[{key:"edit-parameter",commands:[{key:"delete-parameter",title:"Delete",icon:v.Trashcan,trigger:j}]}]}),columns:[{content:t?bo.createElement(dd.Text,{selectable:!0,style:[u.Code,u.textMid]},f,h?bo.createElement(dd.Text,{style:[u.danger]},"*"):null):bo.createElement(xs,{placeholder:"id",onChangeText:E,value:f,style:[u.Code,u.textMid],selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{d.current&&d.current.focus()}}),desktopSize:x.parameterColumnNameDesktop,mobileSize:x.parameterColumnNameMobile},{content:bo.createElement(xs,{ref:d,placeholder:"String",onChangeText:L,value:m,style:[u.Label,u.textMid],readOnly:t,selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{l.change(H=>{T&&H.collapseToStartOf(T).focus()})}}),desktopSize:x.parameterColumnTypeDesktop,mobileSize:x.parameterColumnTypeMobile},{content:bo.createElement(bo.Fragment,null,b?bo.createElement(dd.Text,{style:[u.Label,u.textMid]},b):T?bo.createElement(Cr.Provider,{value:"swaggerParameter"},bo.createElement(jn,{fragment:n.key})):null),desktopSize:S.flex1,mobileSize:!b&&(!T||T.isEmpty)?x.parameterDescriptionEmptyColumnMobile:null},t?null:{content:bo.createElement(nP,{value:h?"required":"optional",items:[{label:"Required",value:"required"},{label:"Optional",value:"optional"}],onValueChange:H=>V(H==="required")})}].filter(ue),onInsertBefore:()=>{l.change(H=>{xe.addParameter(H,c.key,n.value.in,{before:i,after:n.value.orderIndex})})},onDropBefore:H=>{l.change(J=>{xe.moveParameter(J,c.key,H.id,n.value.in,{before:i,after:n.value.orderIndex})})},onInsertAfter:()=>{l.change(H=>{xe.addParameter(H,c.key,n.value.in,{before:n.value.orderIndex,after:a})})},onDropAfter:H=>{l.change(J=>{xe.moveParameter(J,c.key,H.id,n.value.in,{after:a,before:n.value.orderIndex})})}},oe&&bo.createElement(dd.View,{style:[x.borderTop]},oe))}var Q5=F.create({parameterColumnNameDesktop:{width:200},parameterColumnNameMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%",marginBottom:g.small},parameterColumnTypeDesktop:{width:90},parameterColumnTypeMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%"},parameterDescriptionEmptyColumnMobile:{display:"none"},borderTop:o=>({borderTopWidth:1,borderTopColor:o.colors.border.muted})});function gM(o){let{parametersGroup:t,location:e,isLast:n,...r}=o,[,i]=P(A),a=Sw.find(({location:c})=>c===e);return Sm.createElement(wm.View,{style:g.Margin.smallTop},Sm.createElement(wm.View,null,Sm.createElement(wm.Text,{style:[i.Label,i.Bold,i.text]},a.title)),t.map((c,l)=>{let u=t[l-1],d=t[l+1],p=l===t.length-1;return Sm.createElement(by,{key:c.key,...r,parameter:c,isLast:p,beforeOrderIndex:u?.value.orderIndex,afterOrderIndex:d?.value.orderIndex})}))}function yM(o){let{parameters:t,readOnly:e,blockProps:n}=o,r=eW(t),i=Object.keys(r).length,a=xe.SORTED_PARAMETERS_LOCATIONS.filter(c=>!!r[c]);return Cm.createElement(vy,{title:"Parameters",button:o.readOnly?null:Cm.createElement(BT,{blockProps:n})},a.length>0?a.map((c,l)=>{let u=r[c];return Cm.createElement(gM,{key:c,readOnly:e,blockProps:n,location:c,parametersGroup:u,isLast:l===i-1})}):Cm.createElement(hM.Text,null,"No parameters"))}function eW(o){return o.reduce((t,e)=>{let n=t[e.value.in]||[];return t[e.value.in]=[...n,e],t},{})}s();var km=y(C()),xM=y(z());s();var Sy=y(wM());var iW={2:K.green.base,3:K.primary.base,4:K.orange.base,5:K.scarlet.base},aW=Object.entries(Sy.message).map(([o,t])=>({code:o,message:t})),sW=new wu(aW,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"code",weight:.6},{name:"message",weight:.4}]});function Ww(o){return iW[Math.floor(o/100)]||K.lightModeGreyScale.dark}function cW(o){return sW.search(o).map(t=>t.item)}function Fw({code:o,message:t}){let e=t||Sy.message[o];return e?`${o}: ${e}`:`${o}`}function kM(o){let[t,e]=o.split(": ");return{code:Number(t),message:e}}var CM=[200,201,204,400,401,403,404,500].map(o=>{let t=String(o),e=Sy.message[t];return{code:t,message:e}});function wy(o,t){let e={key:"responses",commands:r=>(r.query.text?cW(r.query.text):CM).slice(0,CM.length).map(a=>{let c=Fw(a);return{key:a.code,title:c,icon:ft(v.Dot,{style:{color:Ww(parseInt(a.code,10))}}),trigger:()=>{o(c)}}})},n=t?[{key:"edit-response",commands:[{key:"delete-response",title:"Delete response",icon:v.Trashcan,trigger:()=>{t()}}]},e]:[e];return ne({search:"Type status code\u2026",groups:n})}function OM(o){let{blockProps:t}=o,{node:e,editor:n}=t,r=km.useRef(null),i=ce(r),a=wy(l=>{n.change(u=>{xe.addResponse(u,e.key,l)})}),c=()=>{i.open(a)};return km.createElement(xM.View,null,km.createElement(B,{ref:r,title:"Add Response",icon:i.opened?v.X:v.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>c()}))}s();var tn=y(C()),Es=y(z());s();var Ts=y(C()),MM=y(z());s();var Ol=y(C());function PM(o){let{examples:t}=o,e=Object.keys(t),n=Ol.useRef(null),r=ce(n),[i,a]=Ol.useState(e[0]);return i?Ol.createElement(q1,{code:t[i],syntax:lW(i),showToolbar:r.opened,toolbar:e.length>1?Ol.createElement(B,{kind:"secondary",size:"small",ref:n,rightIcon:v.ChevronDown,onPress:()=>{r.open(ne({groups:[{key:"media-types",commands:e.map(c=>({key:c,title:c,trigger:()=>{a(c)}}))}]}))}},i):null}):null}function lW(o){return o.includes("json")?"js":o.includes("xml")?"xml":"js"}s();var Pe=y(C()),So=y(z());function _M(o){let[,t]=P(EM);return Pe.createElement(So.ScrollView,{style:[t.container],horizontal:!0},Pe.createElement(zw,{...o,isRoot:!0}))}function zw(o){let{schema:t}=o;if(t.type){let e=t.description||t.title;switch(t.type){case"object":return Pe.createElement(IM,{name:"",properties:t.properties,requiredProperties:t.required,description:e,...o});case"array":return Pe.createElement(RM,{name:"",items:t.items,description:e,...o});default:return Pe.createElement(TM,{name:"",type:t.type,description:e,...o})}}else return t.anyOf?Pe.createElement(Cy,{type:"anyOf",options:t.anyOf}):t.oneOf?Pe.createElement(Cy,{type:"oneOf",options:t.oneOf}):t.allOf?Pe.createElement(Cy,{type:"allOf",options:t.allOf}):null}function IM(o){let{name:t,isRequired:e=!1,isRoot:n=!1,properties:r={},requiredProperties:i=[],description:a=""}=o,[c,l]=Pe.useState(!1);return Pe.createElement(xy,{name:t,type:"object",expandable:{expanded:c,setExpanded:l},required:e,isRoot:n,description:a},c?Object.entries(r).map(([u,d])=>{switch(d.type){case"object":let p=d.anyOf||d.oneOf||d.allOf;return p?Pe.createElement(Cy,{key:u,name:u,description:d.description||d.title,type:d.anyOf?"anyOf":d.oneOff?"oneOf":"allOf",options:p}):Pe.createElement(IM,{key:u,name:u,properties:d.properties,requiredProperties:d.required,isRequired:i.includes(u),description:d.description});case"array":return Pe.createElement(RM,{key:u,name:u,items:d.items,isRequired:i.includes(u),description:d.description});default:return Pe.createElement(TM,{key:u,name:u,type:d.type,isRequired:i.includes(u),description:d.description})}}):null)}function RM(o){let{name:t,isRequired:e=!1,isRoot:n=!1,items:r={},description:i=""}=o,[a,c]=Pe.useState(!1);return Pe.createElement(xy,{name:t,type:`array[${r.type||""}]`,expandable:{expanded:a,setExpanded:c},description:i,required:e,isRoot:n},a?Pe.createElement(zw,{schema:r}):null)}var ky=R.ICON_S;function Cy(o){let{name:t,type:e,options:n=[],isRoot:r=!1,description:i="",isRequired:a=!1}=o,[c,l]=Pe.useState(!1);return Pe.createElement(xy,{type:t?e:"",name:t||e,expandable:{expanded:c,setExpanded:l},description:i,isRoot:r,required:a,specialKeyword:!0},c?n.map((u,d)=>Pe.createElement(zw,{key:d,schema:u})):null)}function TM(o){let{name:t,type:e,isRequired:n=!1,isRoot:r=!1,description:i=""}=o;return Pe.createElement(xy,{name:t,type:e,isRoot:r,required:n,description:i})}function xy(o){let{name:t,type:e,description:n,required:r,isRoot:i,expandable:a,specialKeyword:c,children:l}=o,[,u]=P(A),[,d]=P(EM),p=[u.Body,u.Bold,u.text],f=[g.Margin.xsmallLeft];return Pe.createElement(So.View,{style:[S.directionColumn,i?null:g.Margin.mediumTop]},Pe.createElement(So.View,{style:[S.directionRow,S.alignCenter]},Pe.createElement(So.TouchableOpacity,{onPress:a?()=>a.setExpanded(m=>!m):void 0},a?a.expanded?Pe.createElement(v.ChevronDown,{size:ky,style:[u.textMuted]}):Pe.createElement(v.ChevronRight,{size:ky,style:[u.textMuted]}):Pe.createElement(So.View,{style:[d.placeholderIconWidth,d.placeHolderIconHeight]})),Pe.createElement(So.View,{style:[S.directionRow,f]},t?Pe.createElement(So.View,{style:[g.Margin.mediumRight]},c?Pe.createElement(So.Text,{style:p},t):Pe.createElement(So.Text,{selectable:!0,style:p},t,r?Pe.createElement(So.Text,{style:[u.danger,d.textFontCode]},"*"):null)):null,e?Pe.createElement(So.Text,{style:[u.Body,u.primary,d.textFontCode]},e):null)),Pe.createElement(So.View,{style:[S.directionRow]},Pe.createElement(So.View,{style:d.placeholderIconWidth},a?.expanded?Pe.createElement(So.View,{style:d.verticalLine}):null),Pe.createElement(So.View,{style:[S.directionColumn,f,g.Padding.mediumRight,d.descriptionWidth]},n?Pe.createElement(So.View,{style:[g.Margin.xsmallTop]},Pe.createElement(Ru,{markdown:n,kind:"secondary"})):null,l)))}var EM=F.create({container:o=>({backgroundColor:o.colors.background.muted,padding:g.medium,borderRadius:o.radiuses.medium}),textFontCode:{fontFamily:ig},placeholderIconWidth:{width:ky},placeHolderIconHeight:{height:ky},verticalLine:o=>({width:1,height:"100%",backgroundColor:o.colors.border.main,marginHorizontal:"auto"}),descriptionWidth:{maxWidth:600}});function Oy(o){let{examples:t,schema:e}=o,[n,r]=Ts.useState("example");return Ts.createElement(MM.View,null,Ts.createElement(tc,null,Ts.createElement(tc.Tab,{active:n==="example",onPress:()=>r("example")},"Example"),e?Ts.createElement(tc.Tab,{active:n==="schema",onPress:()=>r("schema")},"Schema"):null),n==="example"?Ts.createElement(PM,{examples:t||{}}):null,n==="schema"&&e?Ts.createElement(_M,{schema:e}):null)}function DM(o){let{response:t,isLast:e,beforeOrderIndex:n,afterOrderIndex:r,blockProps:i}=o,{node:a,editor:c}=i,[,l]=P(A),[u,d]=tn.useState(!1),p={id:t.key,type:"swagger-response",blockKey:a.key,previewLabel:"Move response"},{status:f,description:m}=t.value,h="Response description",{code:b}=kM(f),w=a.fragments.get(t.key),k=w?rs(w):!1,x=t.value.examples||{},O=t.value.schema,_=!o.readOnly||w&&!k||Object.keys(x).length>0||typeof O<"u",I=N=>{c.change(T=>{xe.setResponseDescription(T,a.key,t.key,N)})};return tn.createElement(yy,{...i,readOnly:o.readOnly,dragItem:p,isLast:e,opened:u,setOpened:d,palette:()=>wy(N=>{c.change(T=>{xe.setResponseStatus(T,a.key,t.key,N)})},()=>{c.change(N=>{xe.removeResponse(N,a.key,t.key)})}),columns:[{content:tn.createElement(Es.View,{style:[S.directionRow,S.alignCenter]},tn.createElement(Es.View,{style:[g.Margin.smallRight]},tn.createElement(v.Dot,{style:{color:Ww(b)},size:R.ICON_M})),tn.createElement(Es.View,{style:S.flex1},tn.createElement(Es.Text,{style:[l.Label,l.Bold,l.text]},f))),desktopSize:LM.responseColumnStatusDesktop,mobileSize:LM.responseColumnStatusMobile},{content:tn.createElement(Wr,{component:xs,placeholder:o.readOnly?void 0:h,onChangeText:I,value:m,style:[l.Label,l.textMid],readOnly:o.readOnly,displayMode:"block",onSubmitEditing:()=>{c.change(N=>{u&&w?N.collapseToStartOf(w):ht(N,a),N.focus()})}}),desktopSize:S.flex1}],onDropAfter:N=>{c.change(T=>{xe.moveResponse(T,a.key,N.id,{before:t.value.orderIndex,after:r})})},onDropBefore:N=>{c.change(T=>{xe.moveResponse(T,a.key,N.id,{before:n,after:t.value.orderIndex})})},onInsertBefore:()=>{c.change(N=>{xe.addResponse(N,a.key,parseInt(t.value.status,10)-1,{before:n,after:t.value.orderIndex})})},onInsertAfter:()=>{c.change(N=>{xe.addResponse(N,a.key,parseInt(t.value.status,10)+1,{before:t.value.orderIndex,after:r})})}},_?tn.createElement(Es.View,{style:[S.flex1,g.Margin.mediumVertical]},w?tn.createElement(tn.Fragment,null,tn.createElement(Cr.Provider,{value:"swaggerResponse"},tn.createElement(jn,{fragment:t.key}))):tn.createElement(Oy,{examples:x,schema:O})):null)}var LM=Es.StyleSheet.create({responseColumnStatusDesktop:{width:290},responseColumnStatusMobile:{flexBasis:"100%",flexGrow:1,flexShrink:0}});s();var xm=y(C()),NM=y(z());function AM(o){let{readOnly:t,responses:e,blockProps:n}=o;return xm.createElement(vy,{title:"Responses",button:t?null:xm.createElement(OM,{blockProps:n})},xm.createElement(NM.View,{style:e.length>0&&g.Padding.mediumBottom},e.map((r,i)=>{let a=e[i-1],c=e[i+1];return xm.createElement(DM,{key:r.key,...o,response:r,isLast:i===e.length-1,beforeOrderIndex:a?.value.orderIndex,afterOrderIndex:c?.value.orderIndex})})))}s();var Mo=y(C()),kr=y(z());s();s();s();var BM=yg("429837f8b383ed2c4f85d02026ce73e42335b6233c1dc303af2b0f50fedfe256",()=>import("https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/chunks/parseSwaggerFile.lazy-SLMQMDFT.min.js"));var WM=BM;var Pl=qn({getValue:async o=>{let t=(await WM.load()).default;return await t(o)},toJS:o=>dW(o),fromJS:o=>pW(o)});function Om(o,t){if(!o)return null;t||(t={path:Object.keys(o.paths)[0],method:"get"},t.method=Object.keys(o.paths[t.path])[0]);let n=o.paths[t.path]?.[t.method];if(!n)return null;let r=Object.keys(o.paths).indexOf(t.path),i=Au.indexOf(t.method);return i=i>-1?i:Au.length,{operation:n,path:t.path,httpMethod:t.method,index:r*Au.length+i}}function dW(o){return JSON.parse(JSON.stringify(o,DP()))}function pW(o){return JSON.parse(JSON.stringify(o),NP())}function Pm(o){let{onClose:t,data:e,multi:n,buttonText:r,onSelect:i,onRequestChangeSource:a}=o,c=ye();if(!("ref"in e))throw new Error("SwaggerConfigurationOperation used with a manual API block, only OpenAPI is supported");let l=at(),[u]=Hi.read([c,e.ref,l]);if(typeof u?.target!="string")throw new Error("SwaggerConfigurationOperation only handles refs with target as string");let{result:d}=Pl.readSafe(u.target),p=d?.paths||{},f=Object.keys(p).reduce((x,O)=>{let _=p[O];return x.concat(Object.keys(_).map(I=>({path:O,method:I})))},[]),m=Om(d,e.method&&e.path?{method:e.method,path:e.path}:void 0),[h,b]=Mo.default.useState(m?{[m.index]:{path:m.path,method:m.httpMethod}}:{}),w=()=>{let x=Object.keys(h).map(Number).sort((O,_)=>O-_);i(x.map(O=>h[O])),t()},k=(x,O,_)=>{if(!n){b({[O]:x});return}if(_&&b({...h,[O]:x}),!_){let I={...h};delete I[O],b(I)}};return Mo.default.createElement(ho,{onClose:t,title:"Choose API operation",footer:Mo.default.createElement(kr.View,{style:[S.directionRow,S.justifySpaceBetween]},Mo.default.createElement(kr.View,{style:[S.directionRow,S.justifyContentStart]},Mo.default.createElement(B,{size:"large",kind:"secondary",onPress:()=>{a()}},"Change API source")),Mo.default.createElement(kr.View,{style:[S.directionRow,S.flex1,S.justifyContentEnd]},Mo.default.createElement(B,{size:"large",kind:"primary",onPress:()=>{w()}},typeof r=="string"?r:r(Object.keys(h).length))))},Mo.default.createElement(kr.FlatList,{data:f,renderItem:({item:x})=>{let O=Om(d,x);if(!O)return null;let _=!!h[O.index];return Mo.default.createElement(mW,{key:O.index,index:O.index,item:x,operation:O.operation,multi:n,selected:_,onSelect:k})}}))}function mW(o){let{item:t,selected:e,onSelect:n,operation:r,index:i,multi:a}=o,[,c]=P(A);return Mo.default.createElement(ds,{style:g.Padding.smallHorizontal,onPress:()=>n(t,i,a?!e:!0),layout:"wide",title:Mo.default.createElement(kr.View,{style:[S.directionRow,S.flex1,S.alignCenter]},Mo.default.createElement(kr.View,{style:[{minWidth:R.L},g.Margin.smallRight]},Mo.default.createElement(Ah,{readOnly:!0,method:t.method})),Mo.default.createElement(kr.View,{style:[S.flex1]},Mo.default.createElement(kr.Text,{style:[c.Code,c.text,fW.apiPath]},t.path),Mo.default.createElement(kr.Text,{style:[c.Caption,c.textMuted]},r?.summary))),buttons:[a?Mo.default.createElement(ec,{value:e,onValueChange:l=>n(t,i,l)}):Mo.default.createElement(xg,{value:e,onValueChange:()=>n(t,i,!0)})]})}var fW=kr.StyleSheet.create({apiPath:{fontSize:ag.xsmall,wordWrap:"anywhere"}});function FM(o,t){let e=Qs(),[n,r]=pd.useState(null),i=Et(),[a,c]=pd.useState(t),l=yi(e,o),u=p=>{let m=e.value.document.assertBlock(p).data.toFrozenObject();return[{key:"swagger",commands:[{key:"pickSource",title:"Choose OpenAPI source\u2026",icon:v.Paperclip,trigger:()=>{i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([h])=>{h&&(c({ref:h}),r("swagger"))})}},a&&"ref"in a?{key:"pickMethod",title:"Choose API operation",icon:v.Swagger,trigger:()=>{r("swagger")}}:null,{key:"defaultExpanded",icon:v.ChevronsVertical,type:2,enabled:!!m.expanded,title:"Expanded",trigger:()=>(e.change(h=>{m.expanded?h.setDataByKey(p,["expanded"],!1):h.setDataByKey(p,["expanded"],!0)}),et(e,p,u(p)))}].filter(ue)},...l?[l]:[]]};return[et(e,o,u(o)),pd.createElement(vt,null,n==="swagger"?pd.createElement(Pm,{data:a,buttonText:"Update Block",onRequestChangeSource:()=>{r(null),i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([p])=>{p&&c({ref:p}),r("swagger")})},onSelect:([p])=>{e.change(f=>{f.setNodeByKey(o,{data:{...a,method:p?.method,path:p?.path}})})},onClose:()=>r(null)}):null)]}s();var _y=y(C());s();var Hr=y(C()),xc=y(z());function Py(o){let{opened:t,setOpened:e,readOnly:n,parameters:r,header:i,requestBody:a,responses:c,blockProps:l,description:u}=o,[,d]=P(A);return Hr.default.createElement(Hr.default.Fragment,null,Hr.default.createElement(NT,{blockProps:l,readOnly:n,opened:t,setOpened:e,description:u.description,...i}),Hr.default.createElement(xc.View,{style:gW.operationBody},t?Hr.default.createElement(Hr.default.Fragment,null,Hr.default.createElement(yM,{blockProps:l,readOnly:n,...r}),a?Hr.default.createElement(xc.View,{style:g.Margin.largeTop},Hr.default.createElement(xc.View,null,Hr.default.createElement(xc.Text,{style:[d.Label,d.Bold,d.text]},"Body")),Hr.default.createElement(Oy,{examples:a.examples,schema:a.schema})):null,Hr.default.createElement(AM,{blockProps:l,readOnly:n,...c})):null))}var gW=xc.StyleSheet.create({operationBody:{padding:g.medium,paddingLeft:g.medium+R.ICON_M+g.medium,paddingTop:0}});function zM(o){let{blockProps:t,data:e,opened:n,setOpened:r}=o,{editor:i}=t;if("ref"in e)throw new Error("trying to render a swagger block that is refering to a swagger file");let{readOnly:a}=i,{baseUrl:c,method:l,path:u,summary:d}=e,{parameters:p={},responses:f={}}=e,m=_y.default.useMemo(()=>xe.defaultParameterSortedKeys(p).map(w=>({key:w,value:p[w]})),[p]),h=_y.default.useMemo(()=>xe.defaultResponseSortedKeys(f).map(w=>({key:w,value:f[w]})),[f]);return _y.default.createElement(Py,{blockProps:t,readOnly:a,opened:n,setOpened:r,header:{baseUrl:c,method:l,summary:d,path:u},parameters:{parameters:m},description:{description:{fragment:"description"}},responses:{responses:h}})}s();var Oc=y(C());function VM(o){let{blockProps:t,data:e,opened:n,setOpened:r,readOnly:i}=o;if(!("ref"in e))throw new Error("trying to render a swagger block that is not refering to a swagger file");let c=$e(e.ref).href,{result:l,error:u}=Pl.readSafe(c),d=Om(l,e.path&&e.method?{path:e.path,method:e.method}:void 0),{operation:p,path:f,httpMethod:m}=d||{operation:{parameters:[],responses:[],summary:"",description:""},httpMethod:"",path:""},h=Oc.default.useMemo(()=>p.parameters.sort(({in:w},{in:k})=>xe.SORTED_PARAMETERS_LOCATIONS.indexOf(w)<xe.SORTED_PARAMETERS_LOCATIONS.indexOf(k)?-1:1).reduce((w,k,x)=>{let O=w[x-1],_=eS(O?{before:O.value.orderIndex}:{});return w.push({key:Yb(),value:{...k,orderIndex:_}}),w},[]),[p.parameters]),b=Oc.default.useMemo(()=>p.responses.sort(({status:w},{status:k})=>w<k?-1:1).reduce((w,k,x)=>{let O=w[x-1],_=eS(O?{before:O.value.orderIndex}:{});return w.push({key:Yb(),value:{...k,status:Fw({code:k.status}),orderIndex:_}}),w},[]),[p.responses]);if(u)return i?Oc.default.createElement(_m,null):Oc.default.createElement(di,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:la(u)});if(!d){if(i)return Oc.default.createElement(_m,null);let w=e.method&&e.path?`${e.method?.toUpperCase()} "${e.path}"`:"";return Oc.default.createElement(di,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:`Could not find the operation ${w} in the OpenAPI file.`})}return Oc.default.createElement(Py,{blockProps:t,readOnly:!0,opened:n,setOpened:r,header:{baseUrl:l?.baseUrl||"",method:m,summary:p.summary||"",path:f},parameters:{parameters:h},requestBody:p.requestBody,responses:{responses:b},description:{description:p.description?{text:p.description}:void 0}})}function qM(o){let{node:t,isFocused:e,editor:n}=o,r=t.data.toFrozenObject(),[i,a]=FM(t.key,r),[c,l]=P(hW),{sections:u}=xr.default.useContext(fi),{current:d}=lg(),p=u.get(t.key),f=Ye(),[m,h]=xr.default.useState(f||e||!!r.expanded);xr.default.useEffect(()=>{d&&r.expanded&&h(!0)},[r.expanded]);let b=xr.default.createElement(yr,{style:[l.blockSwagger,m&&l.blockSwaggerOpened],backgroundColor:c.colors.background.main,nativeID:p},xr.default.createElement(xr.default.Suspense,{fallback:xr.default.createElement(To,{size:"small"})},"ref"in r?xr.default.createElement(VM,{readOnly:n?.readOnly,blockProps:o,data:r,opened:m,setOpened:h}):xr.default.createElement(zM,{blockProps:o,data:r,opened:m,setOpened:h})));return xr.default.createElement(xr.default.Fragment,null,a,xr.default.createElement(fe,{palette:i,...o},!("ref"in r)&&m?b:xr.default.createElement(Mt,{...o},b)))}var hW=F.create({blockSwagger:o=>({borderRadius:o.radiuses.large,borderColor:o.colors.border.mid,borderWidth:1}),blockSwaggerOpened:o=>({...o.shadows.spread})});s();var GM=y(C());var yW=It({key:"lastSwaggerReference",default:{}});function HM(o){let[t,e]=Vn(yW),n=at(),r=ye(),i=n.space?Dr(r.store.getBranchRevision(n.space,"changeRequest"in n&&n.changeRequest?Uf(n.changeRequest):Kf)):void 0,a=i?t[i.contentId]:null,c=GM.default.useCallback(d=>{i&&e({...t,[i.contentId]:d})},[i?.contentId,e]);if(a?.kind==="url")return[a,c];if(a?.kind==="file"&&i?.files[a.file])return[a,c];let l=xe.getProbableRef(o.value.document);if(l)return[l,c];let u=Object.values(i?.files||{}).filter(d=>Su(d)).sort((d,p)=>{let f=Op(d.edits)?.updatedAt;return(Op(p.edits)?.updatedAt||0)-(f||0)});return[u.length?{kind:"file",file:u[0].id}:null,c]}s();var n0=y(C());s();s();var QM=y(XM()),Lo=y(C()),Il=y(z());s();var wo=y(C());s();var Im=y(C()),$M=y(z());function jM(o){return ne({search:"Pick a color\u2026",groups:[{key:"text",title:"Color",commands:yh.map(t=>UM(o,t,!1))},{key:"background",title:"Background",commands:vh.map(t=>UM(o,t,!0))}]})}function UM(o,t,e){let n=o.value.activeMarks.find(a=>a.type===bp),r=e?"background":"text",i=n&&n.data.get(r)===t.key;return{key:`${e?"background_":"foreground_"}${t.key}`,title:t.title,type:1,selected:!!i,icon:({size:a})=>e?Im.createElement(YM,{size:a,backgroundColor:t.color,color:K.BLACK}):Im.createElement(YM,{size:a,backgroundColor:K.WHITE,color:t.color}),trigger:()=>{o.change(a=>{n&&a.removeMark(n),i||a.addMark({type:bp,data:{background:"default",text:"default",...n?n.data.toObject():{},[r]:t.key}})})}}}function YM(o){let{size:t=R.ICON_S,color:e,backgroundColor:n}=o;return Im.createElement($M.View,{style:[S.directionRow,S.alignCenter,S.justifyContentCenter,{width:t+2,height:t+2,borderRadius:R.RADIUS_M,backgroundColor:n}]},Im.createElement(v.Type,{style:{color:e,fontSize:t*.9}}))}s();var Or=({type:o,editor:t})=>()=>{t.change(e=>{e.toggleMark(o),e.focus()})},_l=({palette:o,editor:t,contentReferenceContext:e,isInLink:n,hiveClient:r,insertAtRange:i})=>()=>{if(n){t.change(c=>{c.unwrapInline({type:mn}).focus()});return}t.change(c=>{Ty(c)});let a=kn(c=>{t.change(l=>{i?rl.insertContentReferenceAtRange(l,c,i):rl.insertContentReference(l,c)})},{...e,document:t.value.document},r);return o.open(a),a},Ry=({editor:o})=>()=>{o.change(t=>{Ff.wrapWithAnnotation(t),t.focus()})};function ZM(o){let{value:t,editor:e,palette:n}=o,r=ye(),i=at(),a=t.activeMarks.map(h=>h.type),{startBlock:c,document:l}=t;Ne(c);let u=t.hasInline(mn),p=!(c.type===da),f=()=>{e.change(h=>{Ty(h)}),n.open(jM(e))},m=()=>{e.change(h=>{h.removeAllMarks().focus()})};return wo.createElement(gR,{onTabToExit:()=>{e.change(h=>{h.focus()})}},p?wo.createElement(om,null,Bf(c)?null:wo.createElement(Gt,{leadingIcon:v.Bold.CSS,active:a.has(Xn),onPress:Or({type:Xn,editor:e}),tooltipTitle:"*Bold*",tooltipBadge:wo.createElement(hn,{inverted:!0,shortcut:ze.EDITOR_BOLD}),label:"Bold",iconOnly:!0,preventFocusOnPress:!0}),wo.createElement(Gt,{leadingIcon:v.Italic.CSS,active:a.has(Un),onPress:Or({type:Un,editor:e}),tooltipTitle:"_Italic_",tooltipBadge:wo.createElement(hn,{inverted:!0,shortcut:ze.EDITOR_ITALIC}),label:"Italic",iconOnly:!0,preventFocusOnPress:!0}),wo.createElement(Gt,{leadingIcon:v.Strikethrough.CSS,active:a.has(Ar),onPress:Or({type:Ar,editor:e}),tooltipTitle:"~~Strikethrough~~",tooltipBadge:wo.createElement(hn,{inverted:!0,shortcut:ze.EDITOR_STRIKETHROUGH}),label:"Strikethrough",iconOnly:!0,preventFocusOnPress:!0}),wo.createElement(Gt,{leadingIcon:v.Code.CSS,active:a.has(po),onPress:Or({type:po,editor:e}),tooltipTitle:"`Code`",tooltipBadge:wo.createElement(hn,{inverted:!0,shortcut:ze.EDITOR_CODE}),label:"Code",iconOnly:!0,preventFocusOnPress:!0})):null,wo.createElement(om,null,is({document:l,block:c},mn)?wo.createElement(Gt,{leadingIcon:v.Link.CSS,onPress:_l({palette:n,editor:e,contentReferenceContext:i,isInLink:u,hiveClient:r}),active:u,tooltipTitle:"Link",tooltipBadge:wo.createElement(hn,{inverted:!0,shortcut:ze.EDITOR_LINK}),label:"Link",iconOnly:!0,preventFocusOnPress:!0}):null,is({document:l,block:c},Lf)&&Ff.isSelectionAnnotable(t)?wo.createElement(Gt,{leadingIcon:v.Annotation.CSS,onPress:Ry({editor:e}),active:u,tooltipTitle:"Annotate",tooltipBadge:wo.createElement(hn,{inverted:!0,shortcut:ze.EDITOR_ANNOTATION}),label:"Annotate",iconOnly:!0,preventFocusOnPress:!0}):null),p?wo.createElement(om,null,wo.createElement(Gt,{tooltipTitle:"Color",leadingIcon:v.Highlight.CSS,onPress:f,label:"Color",iconOnly:!0,preventFocusOnPress:!0})):null,wo.createElement(om,{disabled:a.isEmpty()},wo.createElement(Gt,{leadingIcon:v.PublishStatusUnpublished.CSS,onPress:m,tooltipTitle:"Clear formatting",label:"Clear formatting",iconOnly:!0,preventFocusOnPress:!0})))}function e0(o){let{value:t,selection:e}=o,n=Qs(),r=ye(),i=at(),[a,c]=Lo.useState(null),[l,u]=Lo.useState(!1),d=Lo.useRef(null),p=Go(a),f=Lo.useRef(null),m=Lo.useRef(null),h=ce(d,{onClose:()=>{n.change(L=>{o0(L),L.focus()})}}),{width:b,height:w}=(0,Il.useWindowDimensions)(),k=q.useInteractiveState(),x=!t.isInVoid,O=t.hasInline(mn),_=!Bf(t.startBlock),I=!!x,N=I&&a,T=l&&e.isFocused&&e.isExpanded;Fr(x?{..._?{[ze.EDITOR_BOLD]:Or({type:Xn,editor:n})}:{},[ze.EDITOR_ITALIC]:Or({type:Un,editor:n}),[ze.EDITOR_CODE]:Or({type:po,editor:n}),[ze.EDITOR_STRIKETHROUGH]:Or({type:Ar,editor:n}),[ze.EDITOR_LINK]:_l({palette:h,editor:n,contentReferenceContext:i,hiveClient:r,isInLink:O}),[ze.EDITOR_ANNOTATION]:Ry({editor:n})}:{},"editor-selection-expanded",[e,i,_,n,O,x,h]),Fr(x?{..._?{[ze.EDITOR_BOLD]:Or({type:Xn,editor:n})}:{},[ze.EDITOR_ITALIC]:Or({type:Un,editor:n}),[ze.EDITOR_CODE]:Or({type:po,editor:n}),[ze.EDITOR_STRIKETHROUGH]:Or({type:Ar,editor:n})}:{},"editor-selection-collapsed",[e,_,n,x]),Lo.useEffect(()=>{!I||h.opened||(f.current=e,c(JM(n)))},[e]);let E=m1(200);return Lo.useEffect(()=>{if(!I)return;let L=()=>{h.opened||(p.current&&c(null),E(()=>{c(JM(n))}))};return window.addEventListener("scroll",L,!0),()=>{window.removeEventListener("scroll",L,!0)}},[h,I,p,E]),Lo.useLayoutEffect(()=>{m.current?.updatePosition()},[b,w]),Lo.useLayoutEffect(()=>{let L=setTimeout(()=>{u(e.isExpanded)},200);return()=>{u(!1),clearTimeout(L)}},[e.isExpanded]),N?Lo.createElement(hr,null,Lo.createElement(Il.View,{ref:d,pointerEvents:"none",style:[vW.formattingMenuWrapper,a],dataSet:{"hide-on-drag":!0}},T?Lo.createElement(vn,{ref:m,kind:"menu",preferredPlacement:"top",chromeless:!0},Lo.createElement(Il.View,{style:[S.directionRow,g.Padding.xsmall],...k.events},Lo.createElement(ZM,{value:t,editor:n,palette:h}))):null)):null}function JM(o){let t=window.getSelection();if(!t||t.rangeCount<1)return null;let e=t.getRangeAt(0),n=QM.default.getBoundingClientRect(e);if(!n)return null;let r=t.anchorNode;if(!r||!G1(o,r))return null;let i=r?t0(r):null,a=15,c={top:n.top+window.pageYOffset,left:n.left+window.scrollX,width:n.width,height:n.height};if(c.width<a&&(c.left-=(a-c.width)/2,c.width=a),i){let l=i.getBoundingClientRect();if(c.top<l.top||c.top+c.height>l.bottom)return null}return c}function t0(o){if(o instanceof HTMLElement){let t=getComputedStyle(o,null);if(t.getPropertyValue("overflow")==="auto"||t.getPropertyValue("overflow")==="scroll"||t.getPropertyValue("overflow-y")==="auto"||t.getPropertyValue("overflow-y")==="scroll")return o}return o.parentNode?t0(o.parentNode):null}var vW=Il.StyleSheet.create({formattingMenuWrapper:{position:"absolute",zIndex:100,animationDelay:"250ms"}});function Ey(o){let{anchorRef:t,editor:e,range:n}=o,r=ye(),i=Et(),a=at(),c=ce(t,{onClose:()=>{c.close(),!i.isOpen()&&e.change(l=>l.focus())}});return n0.default.useMemo(()=>[{key:"inline-image",title:"Inline image",icon:v.Image,trigger:()=>{e.change(l=>l.blur()),i.prompt({title:"Select image",accept:"images",acceptURL:!0}).then(l=>{e.change(u=>{if(Po(u.value.selection))return u;let d=n??u.value.textSelection;l.forEach(p=>{u.insertInlineAtRange(d,Io.createImageInline(p))}),u.focus()})})}},{key:"emoji",title:"Emoji",icon:v.EmojiReaction,trigger:()=>$u(l=>{e.change(u=>{if(Po(u.value.selection))return u;let d=n??u.value.textSelection;u.insertInlineAtRange(d,Vf.createEmoji(l)).focus()})})},{key:"link",title:"Link",icon:v.Link,trigger:_l({hiveClient:r,palette:c,editor:e,contentReferenceContext:a,isInLink:!1,insertAtRange:n})},{key:"inline-math",title:"Math & TeX",icon:v.MathTeX,trigger:()=>{e.change(l=>{if(Po(l.value.selection))return l;let u=n??l.value.textSelection;l.insertInlineAtRange(u,il.createMathInline()).focus()})}}],[n,e,e.value.selection,c,a,i,r])}function r0(o,t,e,n="replace",r){let[i,a]=xn.useState(null),c=Et(),l=Tu(),{integrationsBlocksSubscription:u,logAnalyticsEvent:d}=xn.useContext(Be),p=u.getCurrentValue,f=ai(),[m,h]=HM(o),b=at(),w=ye(),k=Ey({anchorRef:r,editor:o}),x=xn.useCallback(()=>{a(null)},[]),O=xn.useCallback((T,E="end")=>{x(),md(o,e.key,T,n,E)},[x,o,e.key,n]),_=xn.useCallback((T,E="end")=>{x();let L;T.forEach((V,j)=>{md(o,L||e.key,V,j===0?n:"after",E),L=V.key})},[x,o,t.key,e.key,n]),I=xn.useCallback(T=>{let{blockType:E,...L}=T;d({type:"edit_page_document_insert_block",from:"palette",blockType:E,...L})},[d]),N=xn.useMemo(()=>{let T=(E,L=()=>!0)=>Object.entries(E).map(([V,j])=>L(V)?j.map(oe=>({key:`${V}.${oe.id}`,title:oe.title,icon:ft(TT,{block:oe}),trigger:()=>{oe.urlUnfurl&&oe.urlUnfurl.length>0?a("embed"):(O(gu.createIntegrationBlock(V,oe.id)),I({blockType:ni,integration:V,integrationBlock:oe.id}))}})):[]).flat();return ne({search:"Insert block\u2026",groups:[{key:"inline-controls",commands:n==="replace"&&e.isEmpty?k:[]},{key:"texts",commands:[_e(t,de)?{key:"paragraph",title:"Paragraph",icon:v.Paragraph,trigger:()=>{O(zt.create({type:de})),I({blockType:de})}}:null].filter(ue)},{key:"headings",commands:[_e(t,Ae)?{key:"heading_1",title:"Heading 1",icon:v.Heading1,keywords:["h1","Title 1","Header 1"],trigger:()=>{O(zt.create({type:Ae})),I({blockType:Ae})}}:null,_e(t,Fe)?{key:"heading_2",title:"Heading 2",icon:v.Heading2,keywords:["h2","Title 2","Header 2"],trigger:()=>{O(zt.create({type:Fe})),I({blockType:Fe})}}:null,_e(t,Je)?{key:"heading_3",title:"Heading 3",keywords:["h3","Title 3","Header 3"],icon:v.Heading3,trigger:()=>{O(zt.create({type:Je})),I({blockType:Je})}}:null].filter(ue)},{key:"lists",commands:[_e(t,lo)?{key:"list_ul",title:"Unordered list",keywords:["ul","Bullet list","Dot list"],icon:v.ListUnordered,trigger:()=>{O(st.createList(lo)),I({blockType:lo})}}:null,_e(t,Vt)?{key:"list_ol",title:"Ordered list",keywords:["ol","Numbered List"],icon:v.ListOrdered,trigger:()=>{O(st.createList(Vt)),I({blockType:Vt})}}:null,_e(t,uo)?{key:"list_tasks",title:"Task list",keywords:["Checkbox","Checklist","Tick","Todo list"],icon:v.ListTasks,trigger:()=>{O(st.createList(uo)),I({blockType:uo})}}:null].filter(ue)},{key:"dividers",commands:[_e(t,es)?{key:"divider",title:"Divider",keywords:["Horizontal rule","Separator","Thematic break","hr"],icon:v.Divider,trigger:()=>{O(zt.create({type:es})),I({blockType:es})}}:null].filter(ue)},{key:"panels",commands:[_e(t,co)?{key:"hint",title:"Hint",keywords:["Info","Alert","Callout"],icon:v.InfoCircle,trigger:()=>{O(aO.create()),I({blockType:co})}}:null,_e(t,qt)?{key:"quote",title:"Quote",keywords:["Blockquote","Citation"],icon:v.Quote,trigger:()=>{O(sO.create()),I({blockType:qt})}}:null,_e(t,Gn)?{key:"code",title:"Code Block",keywords:["Syntax","Snippet"],icon:v.Code,trigger:()=>{O(Qt.createCodeBlock("// Some code")),I({blockType:Gn})}}:null].filter(ue)},{key:"others",commands:[_e(t,Qa)?{key:"files",title:"Insert files\u2026",keywords:["Assets","Upload"],icon:v.Files,trigger:()=>{c.prompt({title:"Select files"}).then(E=>{let L=E.map(V=>V.kind==="file"?qf.createFileBlock(V):null).filter(ue);_(L,"end"),I({blockType:Qa,files:L.length})})}}:null,_e(t,Hn)?{key:"images",title:"Insert images\u2026",keywords:["Photo","Picture","JPEG","jpg","png","GIF"],icon:v.Image,trigger:()=>{c.prompt({title:"Select images",accept:"images",acceptURL:!0}).then(E=>{O(zt.create({type:Hn,isVoid:!0,nodes:E.map(L=>Io.createImageBlock(L))})),I({blockType:Hn,images:E.length})})}}:null,_e(t,pn)?{key:"embed",title:"Embed a url\u2026",keywords:["music","video","audio","design","iframe"],icon:v.ExternalLink,trigger:()=>{a("embed")}}:null,_e(t,fr)?{key:"table",title:"Table",keywords:["Spreadsheet"],icon:v.Table,trigger:()=>{O(Z.createTable()),I({blockType:fr,tableView:"grid"})}}:null,_e(t,fr)?{key:"table-cards",title:"Cards",keywords:["Grid"],icon:v.Cards,trigger:()=>{O(Z.createTable({view:"cards"})),I({blockType:fr,tableView:"cards"})}}:null,_e(t,Kn)?{key:"tabs",title:"Tabs",icon:v.Tabs,trigger:()=>{O(Ni.createTabs(),"start"),I({blockType:Kn})}}:null,_e(t,Nr)?{key:"expandable",title:"Expandable",keywords:["collapsible","toggle"],icon:v.BlockExpandable,trigger:()=>{O(as.createExpandableBlock(),(E,L)=>{E.collapseToStartOf(as.getTitleFragment(L)).focus()}),I({blockType:Nr})}}:null,_e(t,Ja)?{key:"drawing",title:"Drawing",keywords:["sketch","draw","excalidraw"],icon:v.EditDrawing,trigger:()=>{O(rO.createDrawingBlock()),I({blockType:Ja})}}:null,_e(t,ol)?{key:"math",title:"Math & TeX",keywords:["Formula"],icon:v.MathTeX,trigger:()=>{O(il.createMathBlock()),I({blockType:ol})}}:null,_e(t,_o)?{key:"api-method",title:"API Method",icon:v.Swagger,keywords:["api"],trigger:()=>{O(xe.createBlock()),I({blockType:_o})}}:null,_e(t,_o)?{key:"swagger",title:"OpenAPI",icon:v.Swagger,keywords:["api","swagger"],trigger:()=>{m?a({ref:m}):c.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([E])=>{E&&(h(E),a({ref:E}))})}}:null,_e(t,os)?{key:"content-ref",title:"Page Link",icon:v.PageLink,keywords:["references"],trigger:()=>kn(E=>{O(rl.createContentRefBlock(E)),I({blockType:os,contentRefKind:E.kind})},b,w,{accept:["page","space","collection"]})}:null].filter(ue)},_e(t,ni)?{key:"integrations",commands:()=>{let E=p();return T(E)}}:null,_e(t,ni)?{key:"integrations",commands:()=>{let E=p(),[L]=Lg([XO()]),V=eg(L);return T(V,j=>!E[j])}}:null,_e(t,pn)?{key:"embeds",commands:vT.map(E=>({key:E.key,title:E.title,icon:({size:L})=>xn.createElement(Ho,{source:{uri:(f.color==="dark"?E.iconDark:null)||E.icon},style:{width:L,height:L}}),trigger:()=>{a("embed")}}))}:null].filter(ue)})},[O,l.uid,b,o,f.color,p]);return[xn.createElement(vt,null,i==="embed"?xn.createElement(ST,{onInsert:O,onClose:x}):i&&"ref"in i?xn.createElement(Pm,{onClose:x,data:i,multi:!0,buttonText:T=>`Insert ${T} blocks`,onRequestChangeSource:()=>{a(null),c.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([T])=>{T&&a({ref:T})})},onSelect:T=>{I({blockType:_o,swaggerOperations:T.map.length,swaggerSource:i.ref.kind}),_(T.map(E=>xe.createBlockWithRef(i.ref,E.path,E.method))),x()}}):null),N]}function md(o,t,e,n,r){o.change(i=>{let a=o.value.document.getParent(t);if(!a)return;let c=a.getChildIndex(t);if(c<0)return;if(n==="replace")e.object==="block"?i.replaceNodeByKey(t,e):i.replaceWithDocumentByKey(t,e);else{let u=n==="after"?c+1:c;e.object==="block"?i.insertNodeByKey(a.key,u,e):i.insertDocumentByKey(a.key,u,e)}let l=i.value.document.getNode(e.object==="block"?e.key:e.nodes.first().key);l&&(Ft(i.value.selection)?r==="start"?i.collapseToStartOf(l).focus():r==="end"?i.collapseToEndOf(l).focus():r(i,l):i.selectBlock(hp.create({anchorBlock:l.key,focusBlock:l.key})))})}var My={insert:{label:"Insert block",title:`Click to add below
${gS("alt")} + click to add above`},options:{label:"Block controls",title:`Click for options. ${gS(ze.EDITOR_MODIFIER_PALETTE)}
Drag to move.`}};function i0(o){let{optionsPalette:t,node:e,editor:n,parent:r,layout:i,dragHandleRef:a,isDragging:c,isFocused:l,isHovered:u}=o,d=b1(),p=Do.useRef(!1),[f,m]=Do.useState("replace"),h=Do.useRef(null),b=ce(h),[w,k]=r0(n,r,e,f,h),x=Do.useRef(null),O=ce(x,{onClose:()=>{n.change(J=>{J.focus()})}}),_=()=>{p.current=!!d.current,e.isEmpty&&p.current?b.open(k):O.open((typeof t=="function"?t():t)||et(n,e.key)),n.change(J=>{e&&Ft(J.value.selection)&&!J.value.selection.hasEdgeIn(e)&&J.collapseToStartOf(e),J.blur()})},I=ci(x,a);Fr(l?{...e.isEmpty?{[ze.EDITOR_PALETTE]:_}:{},[ze.EDITOR_MODIFIER_PALETTE]:()=>i.withOptionsButton?O.open((typeof t=="function"?t():t)||et(n,e.key)):!1}:{},"editor-selection-collapsed",[l,O,t,n,e.isEmpty,e.key]);let N=u||O.opened||b.opened,[T,E]=Do.useState(!1),L=Do.useRef(null),V=i.withInsertButton,j=V?["fade","slide"]:["fade"],oe=hS(M.animations,["distance-s","enter","right",...j],N),H=hS(M.animations,["distance-s","exit","right",...j],T&&!N);return Do.useEffect(()=>{function J(Ze){E(Ze.animationName.includes("Enter"))}function ie(){E(!1)}return V&&(L.current?.addEventListener("animationend",J),L.current?.addEventListener("animationcancel",ie)),()=>{L.current?.removeEventListener("animationcancel",ie),L.current?.removeEventListener("animationend",J)}},[V]),Do.createElement(Y,{contentEditable:!1,style:[fw.hitArea],inlineStyle:i.hitArea.inlineStyle},w,Do.createElement(Y,{ref:L,style:[fw.buttonWrapper,oe,H,V?M.flex.justifyContentEnd:M.flex.justifyContentStart],inlineStyle:i.position},i.withInsertButton?Do.createElement(Do.Fragment,null,Do.createElement(Gt,{contentEditable:!1,kind:"muted",iconOnly:!0,leadingIcon:v.Plus.CSS,label:My.insert.label,preventFocusOnPress:!0,tooltipTitle:My.insert.title,onPressStart:J=>m(J.altKey?"before":"after"),onPress:J=>{b.open(k)},onPressEnd:()=>m("replace"),size:i.size,style:yS,ref:h})):Do.createElement(Y,{ref:h,id:"palette-ref--"}),i.withOptionsButton?Do.createElement(Gt,{contentEditable:!1,kind:"muted",ref:I,size:i.size,iconOnly:!0,label:My.options.label,leadingIcon:v.GrabberVertical.CSS,tooltipTitle:My.options.title,preventFocusOnPress:!0,tooltipDisabled:c,onPress:()=>_(),style:yS}):null))}s();var je=y(C());var R0=y(z());s();var fd=y(C()),s0=y(z());s();var a0=y(z());var Rl={added:K.green.base,deleted:K.scarlet.base,modified:K.primary.base},Ly=a0.StyleSheet.create({added:{color:Rl.added},deleted:{color:Rl.deleted},modified:{color:Rl.modified}});function Dy(o){let{diff:t,style:e,size:n,highlighted:r}=o,[,i]=P(bW),a=q.useInteractiveState(),c=t.type==="added"?v.DiffAdded:t.type==="deleted"?v.DiffRemoved:v.DiffModified;return fd.createElement(pe,{editable:!1,style:[e,Rm.avoidCalculatingBounds],...a.events,"data-hide-on-drag":!0},fd.createElement(ui,{tooltip:`This block has been ${t.type} in this change request`,preferredPlacement:"top"},(l,u)=>fd.createElement(q.TouchableOpacity,{ref:u,style:[Rm.diffContainer,r||a.hovered?Rm.diffContainerHighlighted:null],...l.events},fd.createElement(c,{style:[Rm.diffIcon,Ly[t.type]],size:n}),fd.createElement(pe,{style:[Rm.diffLine,i.bodyColor]}))))}var Rm=s0.StyleSheet.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5,userSelect:"none"},diffContainerHighlighted:{opacity:1},diffIcon:{flexShrink:0},diffLine:{width:1,flexGrow:1,flexShrink:1,marginTop:g.xsmall},avoidCalculatingBounds:{width:0,overflow:"visible"}}),bW=F.create({bodyColor:(o,t)=>({backgroundColor:t.color==="dark"?K.darkModeText.xdark:K.lightModeText.xlight})});s();var c0=y(C());s();var Ny=JSON.parse('{"halo":"halo_oiCij","ready":"ready_81z1f","show":"show_byjur"}');function Vw(o){let{isSelected:t=!1,isBlockSelection:e=!1}=o;return c0.default.createElement(Y,{style:[Ny.halo,{[Ny.ready]:e,[Ny.show]:t}],as:"span",contentEditable:!1})}Vw.displayName="BlockSelectionHalo";s();var qw=4,Gw=g.medium,Hw=4,Kw=g.xlarge+g.small,Xw=g.large,SW=-96,l0=SW+g.large,Ay=l0+g.small,Tm={[qt]:-(Gw+qw/2),[co]:-(Kw+Hw/2),[mr]:-Xw},Uw={[qt]:Tm[qt],[co]:Tm[co],[mr]:Tm[mr]},Yw=R.ICON_XS,Tl=l0,u0=g.large+4,d0=g.large+8,p0=g.large+8,m0=28,f0=32,g0=34,El=g.small;s();var S0=y(C()),w0=y(z());s();s();var gd=g.medium;function wW(o,t){return t.nodes.find(e=>e.type===pu&&e.nodes.some(n=>n.key===o.key))||o}function vi(o,t,e){let n=t.getChildIndex(e?wW(o,t).key:o.key),r=n===0,i=n===t.nodes.size-1,a=(()=>{switch(t.type){case co:return{paddingTop:r?g.medium:g.xsmall,paddingBottom:i?g.medium:g.xsmall};case qt:return{paddingTop:g.xsmall,paddingBottom:g.xsmall};case qo:{if(!ns.includes(o?.type))return{paddingTop:0,paddingBottom:0};let l={paddingTop:g.small,paddingBottom:g.small};return r&&(l.paddingTop=0),i&&(l.paddingBottom=0),l}case ts:return{paddingTop:g.medium,paddingBottom:g.medium}}return{}})();return{...(()=>{switch(o.type){case Ae:return{paddingTop:g.large,paddingBottom:g.small};case Fe:return{paddingTop:g.large,paddingBottom:g.small};case Je:return{paddingTop:g.large,paddingBottom:g.small};case de:return{paddingTop:g.small,paddingBottom:g.small};case Vt:case lo:case uo:return{paddingTop:g.medium,paddingBottom:g.medium};case co:return{paddingTop:g.medium,paddingBottom:g.medium};case Gn:return{paddingTop:g.medium,paddingBottom:g.medium};case qo:return{paddingTop:r?0:g.xsmall,paddingBottom:i?0:g.xsmall};default:return{paddingTop:gd,paddingBottom:gd}}})(),...a}}s();var h0=y(Tf()),Em=y(z()),Pc=100,By=40,Mm=800;function Wy(o,t,e=!1){if(!o.useNewSizing)return CW(o,t,e);let n=new Map,r=0;o.columns.forEach(d=>{r+=o.columnWidths?.[d]||0});let i=Math.max(t-r,0),a=o.columns.length-Object.keys(o.columnWidths||{}).length,c=a===0?0:Math.floor(i/a),l=a===0?0:i-c*a,u=0;return o.columns.forEach(d=>{let p=typeof o.columnWidths?.[d]>"u",f=o.columnWidths?.[d]||0,m=p?c:f;d===o.columns[o.columns.length-1]&&(m+=l),m=(0,h0.default)(m,p?Pc:By,Mm),u+=m;let h=new Em.Animated.Value(0);h.setOffset(m),n.set(d,{controller:h,animated:Em.Animated.diffClamp(h,e?0:p?Pc:By,Mm),width:m})}),{widths:n,totalWidth:u}}function CW(o,t,e=!1){let i=new Map,a=0;o.columns.forEach(l=>{let u=o.columnWidths?.[l]||200;a+=u,i.set(l,u)});let c=1;return(a<t||e)&&(c=t/a,a=t),i.forEach((l,u)=>{let d=new Em.Animated.Value(0);d.setOffset(l*c),i.set(u,{controller:d,animated:Em.Animated.diffClamp(d,e?0:150,Mm),width:l*c})}),{widths:i,totalWidth:a}}function Ml(o,t,e){let{blockSpacing:n={paddingTop:0,paddingBottom:0},contentSize:r=750}=e||{};if(o?.object!=="block")throw new Error(`invalid node passed to "getBlockEstimatedHeight" ${o.object}#${o.type} with parent ${o.object}#${t?t.type:"no-parent"}`);switch(o.type){case fr:return n.paddingTop+n.paddingBottom+xW(o,r);case Kn:return n.paddingTop+n.paddingBottom+Ml(o.nodes.first(),o);case de:case Fe:case Je:case Ae:{let a=n.paddingTop+n.paddingBottom+Lm(o.text,{lineHeight:er(o),fontSize:Fy(o),contentWidth:r});return o.type===Ae&&t.object==="document"&&t.getChildIndex(o.key)!==0?a+g.medium+g.large+1:a}case da:return Lm(o.text,{lineHeight:er(o),fontSize:Fy(o),contentWidth:r});case Hn:case pn:case Li:case _o:case Ja:case ni:return n.paddingTop+n.paddingBottom+200;case ol:case Qa:case os:return n.paddingTop+n.paddingBottom+100;case Nr:return n.paddingTop+n.paddingBottom+er(o);case es:return n.paddingTop+n.paddingBottom+1;default:let i=kW(o,r);return n.paddingTop+n.paddingBottom+o.nodes.reduce((a,c)=>{let l=vi(c,o),u=c.object==="block"?Ml(c,o,{contentSize:i}):Lm(c.text,{contentWidth:i});return a+u+l.paddingTop+l.paddingBottom},0)}}function kW(o,t){switch(o.type){case qt:return t-Gw-qw;case co:return t-Kw-Hw;default:return t}}function er(o){if(!o)return He.Body.lineHeight;switch(o.type){case qo:return er(o.nodes.first());case Ae:return He.Heading1.lineHeight;case Fe:return He.Heading2.lineHeight;case Je:return He.Heading3.lineHeight;case Gn:return He.Code.lineHeight+2*g.small;case da:return He.Code.lineHeight;case Kn:return He.Label.lineHeight+2*g.small;case fr:return He.Label.lineHeight+2*g.small;case Nr:return g.medium*2+He.Heading3.lineHeight;case es:return 1;case de:default:return He.Body.lineHeight}}function Fy(o){if(!o)return He.Body.fontSize;switch(o.type){case qo:return er(o.nodes.first());case Ae:return He.Heading1.fontSize;case Fe:return He.Heading2.fontSize;case Je:return He.Heading3.fontSize;case da:return He.Code.fontSize;case de:default:return He.Body.fontSize}}function xW(o,t){let e=Z.getTableData(o);switch(e.view.type){case"grid":{let{widths:n}=Wy(e.view,t,!1),r=PW(e,n),i=Object.keys(e.records).reduce((a,c,l)=>{let u=$w(o,c,n);return a+u},0);return r+i}case"cards":{let n=Object.keys(e.records).length,r=e.view.cardSize==="large"?2:3,i=(750-r*g.medium)/r,a=OW(o,e,i),c=Math.ceil(n/r);return c*a+(c-1)*g.medium}default:De(e.view)}}function $w(o,t,e){if(!o)return 0;let n=Z.getTableData(o),r=n.records[t];return n.view.columns.reduce((i,a)=>{let c=r.values[a],l=n.definition[a],u=v0(c,l,y0(l.id,e),o);return u>i?u:i},g.medium)}function OW(o,t,e){let n=Object.values(t.records)[0];if(!n)return 0;let r=t.view.type==="cards"&&t.view.coverDefinition?135:0;return t.view.columns.reduce((i,a)=>{let c=n.values[a],l=t.definition[a],u=v0(c,l,e,o);return i+u},2*g.small+r)}function PW(o,t){return o.view.type!=="grid"||o.view.hideHeader?0:Object.keys(o.definition).reduce((e,n)=>{let r=y0(n,t),i=o.definition[n].title,a=Lm(i,{contentWidth:r});return a>e?a:e},g.medium)}function y0(o,t){return(t.get(o)?.width||Pc)-g.medium*2}function v0(o,t,e,n){return(()=>{switch(t.type){case"text":let i=n.fragments.get(String(o));return i?i.nodes.reduce((u,d)=>u+Ml(d,n,{contentSize:e}),0):0;case"number":return Lm(String(o),{contentWidth:e});case"files":case"users":let a=Array.isArray(o)?o.length:1,c=t.type==="files"?IW:_W;return(a<=1?1:Math.max(1,Math.ceil(c*a/e)))*He.Body.lineHeight;case"checkbox":case"rating":case"select":default:return He.Body.lineHeight}})()+g.small*2+1}function Lm(o,t){let{lineHeight:e=He.Body.lineHeight,contentWidth:n=750}=t||{},r=jw(o,t),i=Math.max(1,Math.ceil(r/n));return e*i}function jw(o="",t){let{fontSize:e=He.Body.fontSize}=t||{};return e*.5*o.length}var _W=jw("Steven Smithson")+g.large+g.small*2,IW=jw("this_is_a_file_of_mine.json")+g.large+g.small*2;function ud(o){let{ancestors:t,node:e,diff:n,isBlockSelection:r=!1}=o,i=t.last(),a=i.type,c=i.getChildIndex(e.key),l=c===0,u=c===i.nodes.size-1,d=e.data.get("fullWidth"),f=typeof d=="boolean"&&d===!0;return S0.default.useMemo(()=>{let m=i.object==="document",h=t.size===1||t.size===2&&zt.isBlock(i)&&st.isList(i),b=i.object==="document"&&Di.isConflictKey(e.key),w=er(e),k=vi(e,i,typeof n=="boolean");b&&(k.paddingTop+=g.medium);let x=!b&&LW(e,t),O=x?DW(e,t):0,_=g.small;return{blockStyle:BW(k.paddingTop,k.paddingBottom),diffLine:n?{style:{position:"absolute",left:AW(e,t),top:(typeof n!="boolean"?k.paddingTop:0)+(w-Yw)/2,bottom:k.paddingBottom+g.small},size:Yw}:void 0,diffBefore:typeof n!="boolean"&&n?.deletedBlocksBefore?{style:b0.diffDeletedBeforeLine,size:R.ICON_XS}:void 0,diffAfter:typeof n!="boolean"&&n?.deletedBlocksAfter?{style:b0.diffDeletedAfterLine,size:R.ICON_XS}:void 0,controlButtons:RW({node:e,ancestors:t,lineHeight:w,blockSpacing:k,isTopLevelBlock:h,isBlockSelection:r}),rightGutterComponent:x?{size:x.buttonSize,style:{top:(w-x.height)/2,marginLeft:O+_},hitArea:{right:0,width:O+_,marginRight:-O-_,top:0,position:"absolute",height:"100%",paddingTop:k.paddingTop,paddingBottom:k.paddingBottom}}:void 0,renderMode:m?f?"full-width":"centered":"unstyled"}},[e.type,i.object,a,l,u,n,r,f])}var C0={shouldNodeComponentUpdate(o,t){if(o.node.object==="inline"||t.node.object==="inline")return null;let e=vi(o.node,o.parent),n=vi(t.node,t.parent);return e.paddingTop!==n.paddingTop||e.paddingBottom!==n.paddingBottom?!0:null}};function RW({node:o,ancestors:t,lineHeight:e,blockSpacing:n,isTopLevelBlock:r,isBlockSelection:i}){let a=MW({isTopLevelBlock:r}),c=t.last(),l=TW({node:o,isTopLevelBlock:r,isBlockSelection:i}),u=EW({node:o,parent:c,isBlockSelection:i}),d=[l,u].reduce((b,w)=>w?b+a.width:b,0),p=NW(o,t),f=p-d/2,m=d===0?0:r?p:f,h=e/2-a.height/2;return{size:a.size,position:{top:h},withInsertButton:l,withOptionsButton:u,hitArea:{inlineStyle:{width:Math.abs(m),paddingTop:n.paddingTop,paddingBottom:n.paddingBottom,paddingLeft:r?g.xsmall:0,paddingRight:r?g.xsmall:0,left:m}}}}function TW({node:o,isBlockSelection:t,isTopLevelBlock:e}){return t||mr===o.type?!1:e}function EW({node:o,parent:t,isBlockSelection:e}){return!(o.type===de&&o.isEmpty||mr===o.type||!e&&ns.includes(o.type)||zt.isBlock(t)&&t.type===qo&&o.type!==Hn)}function MW({isTopLevelBlock:o}){return o?{size:"small",width:R.BUTTON_S,height:R.BUTTON_S}:{size:"xsmall",width:R.BUTTON_XS,height:R.BUTTON_XS}}function LW(o,t){return mr===o.type||ns.includes(o.type)||[co,Nr,qt].includes(o.type)?null:{buttonSize:"small",width:R.BUTTON_S,height:R.BUTTON_S}}function DW(o,t){let e=t.last();return zt.isBlock(e)&&[co].includes(e.type)?24:zt.isBlock(e)&&e.type===Nr?g.medium+1:0}function NW(o,t){let e=t.last(),n=t.get(t.size-2);if(o.type===qo){if(!n||n?.object==="document")return Ay;if(zt.isBlock(n)&&n.type===qo)switch(e?.type){case lo:return-(g.small+6);case Vt:return-(g.small+8);case uo:return-(g.small+R.ICON_M/2);default:return Ay}e=n,n=t.get(t.size-3)}return n&&zt.isBlock(n)&&Uw[n.type]?Uw[n.type]:(zt.isBlock(e)?Tm[e.type]:0)||Ay}function AW(o,t){let e=t.last(),n=t.get(t.size-2),r=t.some(l=>l.type===Kn)?-g.large:0,i=t.some(l=>l.type===co)?Tl+10:0,a=t.some(l=>l.type===qt)?-20:0,c=t.filter(l=>ns.includes(l?.type||"")).size;if(c>0){let l=(r?r-2:0)+i+a+Tl,u=c-1,d;switch(ns.includes(n?.type||"")?d=n?.type:(d=e.type,u--),d){case lo:return l-u0-m0*u;case Vt:return l-d0-f0*u;case uo:return l-p0-g0*u;default:return Tl}}return a+i+r+Tl}var b0=w0.StyleSheet.create({block:{paddingVertical:gd},defaultTopPadding:{paddingTop:gd},defaultBottomPadding:{paddingBottom:gd},insertionLine:{height:El,left:0,right:0},diffDeletedBeforeLine:{top:-El,left:Tl},diffDeletedAfterLine:{bottom:-El,left:Tl}});function BW(o,t){let e={0:"none",[g.xsmall]:"xsmall",[g.small]:"small",[g.medium]:"medium",[g.large]:"large",[g.xlarge]:"xlarge",[g.xxlarge]:"xxlarge"},n=[M.padding.mediumVertical],r={},i=e[o],a=e[t];return i&&n.push(M.padding[`${i}Top`]),a&&n.push(M.padding[`${a}Bottom`]),!i&&o!==0&&(r.paddingTop=o),!a&&t!==0&&(r.paddingBottom=t),{inlineStyle:r,style:n}}s();var hd=y(C());var k0=hd.default.createContext({current:new Map});function x0(o){let{original:t,modified:e,children:n}=o,r=hd.default.useRef(new Map),i=hd.default.useMemo(()=>t?nO(t||Xs.create(),e):new Map,[t,e]);return r.current=i,hd.default.createElement(k0.Provider,{value:r},n)}function O0(o){let t=hd.default.useContext(k0);return t.current instanceof Map?t.current.get(o.key):t.current}s();var Co=y(C());s();var bi=JSON.parse('{"conflicts":"conflicts_NH0YT","toolbarConnector":"toolbarConnector_rKw9X","conflictBase":"conflictBase_F-gkn","conflictHead":"conflictHead_qDgkT","verticalConnector":"verticalConnector_6gQQw","conflictBadge":"conflictBadge_rJISv","highlightContainer":"highlightContainer_T2jbl","highlight":"highlight_r-5El","main":"main_K0HuP","current":"current_-GeKS"}');function _0(o){let{node:t,editor:e,children:n}=o,{blockLayoutComponent:r}=Co.useContext(Be),i=Di.hasBlockConflictFrom(t,"base"),a=Di.hasBlockConflictFrom(t,"head");return!a&&!i?Co.createElement(Co.Fragment,null,n):Co.createElement(Y,{style:[bi.conflicts,M.flex.column]},i?Co.createElement(r,{renderMode:"centered"},Co.createElement(P0,{node:t,editor:e,style:[bi.conflictBase,M.margin.smallBottom,M.margin.mediumTop]})):null,Co.createElement(Y,{style:bi.highlightContainer},Co.createElement(Y,{style:[bi.highlight,{[bi.main]:i,[bi.current]:a}]}),i?Co.createElement(Y,{style:[bi.verticalConnector]}):null,n,a?Co.createElement(Y,{style:[bi.verticalConnector]},Co.createElement(Y,{style:[bi.conflictBadge]},Co.createElement(go,{kind:"secondary",icon:v.Conflict}))):null),a?Co.createElement(r,{renderMode:"centered"},Co.createElement(P0,{node:t,editor:e,style:[bi.conflictHead,M.margin.smallTop,M.margin.mediumBottom]})):null)}function P0(o){let{node:t,editor:e,style:n}=o,[,r]=P(A),i=()=>{e.change(a=>{Di.pickConflict(a,t.key)})};return Co.createElement(Y,{contentEditable:!1,style:[bi.toolbarConnector,M.flex.row,n]},Di.isConflictKeyFrom(t.key,"base")?Co.createElement(B,{icon:ft(v.Check,{style:[r.merge]}),rounded:!0,size:"small",kind:"secondary",style:[g.Margin.mediumRight],title:"Pick recent edits made on the main content",tooltipPreferredPlacement:"top",onPress:i},"Keep primary"):Co.createElement(B,{icon:ft(v.Check,{style:[r.primary]}),rounded:!0,size:"small",kind:"secondary",title:"Pick edits made on this change request",tooltipPreferredPlacement:"bottom",onPress:i},"Keep changed"))}var T0=It({key:"hoveredBlocks",default:[]}),WW=fx({key:"isSelectedHoveredBlock",get:o=>({get:t})=>{let e=t(T0),n=e.length?e[e.length-1]:void 0;return!!n&&n===o}});function fe(o){let{tag:t,contentProps:e={},commandIcon:n,commandIconAnimatedAngle:r,palette:i,...a}=o,{node:c,parent:l,ancestors:u,editor:d,attributes:p,isFocused:f,children:m,isSelectedBlock:h,isBlockSelection:b}=a,{readOnly:w}=d,k=O0(c),x=Ye(),O=Lr(T0),_=zn(WW(c.key)),{blockLayoutComponent:I,rightGutterComponent:N,logAnalyticsEvent:T,onBlockHover:E}=je.useContext(Be),L=ud({node:c,ancestors:u,diff:k,isBlockSelection:b}),V=q.useInteractiveState({onHoverIn:()=>{ns.includes(c.type)||O(H=>[...H,c.key]),E?.(c.key)},onHoverOut:()=>{O(H=>H.filter(J=>J!==c.key)),E?.(null)}}),j=V.hovered&&_,oe=je.createElement(pe,{"data-block-content":c.key,...e,style:[S.flex1,e.style]},w?null:je.createElement(Vw,{isBlockSelection:b,isSelected:h}),m);return w?je.createElement(I,{node:c?.key,renderMode:L.renderMode,interactive:V},je.createElement(Is.View,{isPDF:x},je.createElement(Y,{as:t,...p,...V.domEvents,style:[M.position.relative,M.flex.column,(l.object!=="block"||l.type!==pu)&&L.blockStyle.style],inlineStyle:L.blockStyle.inlineStyle},oe,N&&L.rightGutterComponent?je.createElement(pe,{style:[L.rightGutterComponent.hitArea,_c.hitArea]},je.createElement(N,{nodeKey:c.key,visible:j,shortcutsActive:f,buttonSize:L.rightGutterComponent.size,style:L.rightGutterComponent.style,readOnly:w})):null))):je.createElement(zW,{key:c.key,interactive:V,layout:L,isPDF:x,isHovered:j,BlockLayoutComponent:I,RightGutterComponent:N,logAnalyticsEvent:T,diff:k,...o},oe)}function FW(o,t){if(!t?.current)return;let e=t.current.getBoundingClientRect(),n=.5*(e.bottom-e.top),r=o.getClientOffset();return r?r.y-e.top<n?"before":"after":void 0}function zW(o){let{tag:t,commandIcon:e,commandIconAnimatedAngle:n,palette:r,interactive:i,layout:a,isPDF:c,isHovered:l,BlockLayoutComponent:u,RightGutterComponent:d,logAnalyticsEvent:p,diff:f,...m}=o,{node:h,parent:b,editor:w,attributes:k,isFocused:x,children:O,isSelectedBlock:_,isBlockSelection:I}=m,{readOnly:N}=w,T=I&&w.value.selection.isExpanded,E=je.useMemo(()=>T?{type:"block-range",item:{type:"block-range",id:h.key,previewLabel:"Move blocks"}}:{type:"block",item:{type:"block",id:h.key,blockType:h.type,previewLabel:"Move block"}},[T,h.key,h.type]),[{dragging:L},V]=Ia({...E,canDrag:()=>!N,collect:Le=>({dragging:Le.isDragging()||_&&Le.getItemType()==="block-range"})}),[j,oe]=je.useState(),H=je.useRef(null),J=b.nodes.last()===h,[ie,Ze]=Jn({accept:["block","block-range","page","space","collection"],drop:(Le,dn)=>{dn.didDrop()||w.change(Vo=>{if(Le.type==="block-range")Vo.moveBlockRangeSelectionTo(h.key,j==="after"?1:0),p({type:"edit_page_document_move_block_range",method:"dnd",rangeSize:Vo.value.blocks.size});else if(Le.type==="block"){j==="before"?Vo.moveBeforeNodeByKey(Le.id,h.key):Vo.moveAfterNodeByKey(Le.id,h.key);let Wn=w.value.document.getParent(Le.id);p({type:"edit_page_document_move_block",blockType:Le.blockType,method:"dnd",toParent:b.object==="block"?b.type:b.object,fromParent:Wn?.object==="block"?Wn?.type:Wn?.object})}else{let Wn=rl.createContentRefBlock(pM(Le));j==="before"?Vo.insertNodeBeforeByKey(h.key,Wn):Vo.insertNodeAfterByKey(h.key,Wn)}})},canDrop:Le=>!(!_e(b,Le.type==="block"?Le.blockType:os)||Le.type==="block"&&Le.id===h.key||Le.type==="block-range"&&w.value.blocks.find(dn=>dn.key===h.key)),hover:(Le,dn)=>{if(!dn.canDrop())return;let Vo=FW(dn,H);j!==Vo&&oe(Vo)},collect:Le=>({highlighted:Le.isOver({shallow:!0})&&Le.canDrop()})}),{rightGutter:pt,controls:nt,diff:wt}=VW({isBlockSelection:I,isDragging:L,isSelectedBlock:_,readOnly:N,value:w.value}),Jt=Ze(H);return je.createElement(_0,{node:h,editor:w},je.createElement(u,{node:h?.key,renderMode:a.renderMode,interactive:i},je.createElement(Is.View,{isPDF:c},je.createElement(Y,{as:t,...k,style:[M.position.relative,M.flex.row,L&&M.opacity.translucent,a.blockStyle.style,hg,{[gg]:ie.highlighted&&(!J||J&&j==="before"),[Ou]:ie.highlighted&&J&&j==="after"}],inlineStyle:a.blockStyle.inlineStyle,ref:Jt},wt&&f&&a.diffLine&&f.type!=="unmodified"?je.createElement(Dy,{diff:f,highlighted:l,...a.diffLine,style:[a.diffLine?.style,_c.noSelect]}):null,nt&&a.controlButtons?je.createElement(i0,{isDragging:L,dragHandleRef:V,isFocused:x,isHovered:l,optionsPalette:T?void 0:r,layout:a.controlButtons,node:h,editor:w,parent:b}):null,O,pt&&d&&a.rightGutterComponent?je.createElement(pe,{style:[a.rightGutterComponent.hitArea,_c.hitArea]},je.createElement(d,{nodeKey:h.key,visible:l,shortcutsActive:x,buttonSize:a.rightGutterComponent.size,style:[a.rightGutterComponent.style,_c.hideTransition],readOnly:N})):null,a.diffBefore?je.createElement(I0,{style:a.diffBefore.style,size:a.diffBefore.size}):null,a.diffAfter?je.createElement(I0,{style:a.diffAfter.style,size:a.diffAfter.size}):null))))}function I0(o){let{style:t,size:e}=o;return je.createElement(pe,{editable:!1,style:[t,_c.avoidCalculatingBounds,_c.diffRemoved,_c.noSelect],"data-hide-on-drag":!0},je.createElement(ui,{tooltip:"A block has been removed in this change request",preferredPlacement:"top"},(n,r)=>je.createElement(q.TouchableOpacity,{ref:r,style:_c.diffContainer,...n.events},je.createElement(v.DiffRemoved,{size:e,style:[Ly.deleted]}))))}function VW(o){let{isDragging:t,isBlockSelection:e,isSelectedBlock:n,readOnly:r,value:i}=o,{selection:a}=i;return je.useMemo(()=>r?{controls:!1,diff:!1,rightGutter:!0}:e?{controls:n,diff:!0,rightGutter:!1}:{controls:!a.isExpanded,diff:!0,rightGutter:!a.isExpanded},[a.isExpanded,t,e,n,r])}var _c=R0.StyleSheet.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5},diffRemoved:{paddingTop:(El*2-R.ICON_XS)/2,height:El*2,position:"absolute"},hideTransition:{transition:"opacity 0.2s ease-in-out"},hitArea:{position:"absolute",backgroundColor:"transparent"},avoidCalculatingBounds:{width:0,overflow:"visible"},noSelect:{userSelect:"none"}});s();var ct=y(C());s();var zy=JSON.parse('{"placeholder":"placeholder_HCCie","instructions":"instructions_YvYKU","shortcuts":"shortcuts_v-WHU"}');var Ll={instructions:{message:ct.createElement(ct.Fragment,null,"Type"," ",ct.createElement(hn,{size:"medium",style:[M.flex.inline],shortcut:ze.EDITOR_PALETTE})," ","for commands"),embed:" or paste a link to embed content"},imagePrompt:{title:"Select images"},image:{label:"Insert image"},code:{label:"Insert code block",placeholder:"// Some code"},list:{label:"Insert unordered list"}};function E0(o){let{node:t,parent:e,editor:n,children:r,placeholder:i}=o,{selection:a}=n.value,c=he.isTextRange(a)&&a.hasOnlyNodeFocused(t),l=Et(),{logAnalyticsEvent:u}=ct.useContext(Be),d=_e(e,pn),p=ct.useMemo(()=>[{key:"image",label:Ll.image.label,icon:v.BlockImage.CSS,trigger(){l.prompt({title:Ll.imagePrompt.title,accept:"images",acceptURL:!0}).then(f=>{f.length!==0&&(md(n,t.key,zt.create({type:Hn,isVoid:!0,nodes:f.map(m=>Io.createImageBlock(m))}),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:Hn,images:f.length}))})}},{key:"code",label:Ll.code.label,icon:v.Code.CSS,trigger(){md(n,t.key,Qt.createCodeBlock(Ll.code.placeholder),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:Gn})}},{key:"list-unordered",label:Ll.list.label,icon:v.ListUnordered.CSS,trigger(){md(n,t.key,st.createList(lo),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:lo})}}],[n,t.key]);return ct.createElement(ct.Fragment,null,ct.createElement(fe,{...o},ct.createElement(Y,{as:"p",contentEditable:!1,style:[zy.placeholder,M.text.base,M.text.body,M.textColor.muted,M.flex.row,M.flex.alignCenter,M.flex.justifySpaceBetween,c||i?M.opacity.visible:M.opacity.hidden]},c?ct.createElement(ct.Fragment,null,ct.createElement(gn,{style:[zy.instructions]},Ll.instructions.message,d?Ll.instructions.embed:""),p?.length>0?ct.createElement(qW,{blocks:p,editor:n,node:t}):null):ct.createElement(ct.Fragment,null,Wf(e)?i:null)),r))}function qW(o){let{blocks:t,editor:e,node:n}=o,[r,i]=ct.useState(0),a=ct.useRef(r),c=ct.useRef(null);return DI(l=>{!c.current||l||c.current?.focus()},{scope:e.elementRef?.current,exact:!0}),ct.useEffect(()=>{a?.current!==r&&(c.current?.focus(),a.current=r)},[r]),ct.useEffect(()=>()=>{c?.current?.blur()},[]),ct.createElement(Y,{as:"span",role:"toolbar","aria-orientation":"horizontal",style:[zy.shortcuts,M.flex.row,M.flex.alignEnd]},t.map(({trigger:l,label:u,icon:d},p)=>ct.createElement(Gt,{ref:p===r?c:void 0,label:u,tooltipTitle:u,iconOnly:!0,leadingIcon:d,kind:"muted",size:"small",onPress:()=>l?.(),preventFocusOnPress:!0,tabIndex:p===r?0:-1,key:`${n.key}_${p}`,onKeyDown:f=>{(f.key==="Tab"||f.key==="Escape")&&(e.elementRef?.current?.focus(),f.preventDefault()),f.key==="ArrowLeft"&&(i(m=>Math.max(0,m-1)),f.preventDefault()),f.key==="ArrowRight"&&(i(m=>Math.min(t.length-1,m+1)),f.preventDefault())}})))}s();var M0=y(C());var GW=[Gn,pn,ni,Hn,_o,fr];function yi(o,t){let{logAnalyticsEvent:e}=M0.useContext(Be);if(!Dg("FULL_WIDTH_BLOCKS"))return null;let r=o.value.document.assertBlock(t);if(!GW.includes(r.type))return null;let i=r.data.get("fullWidth");return{key:"layout-width",commands:[typeof i=="boolean"&&i===!0?{key:"default",title:"Default width",icon:v.DefaultWidth,trigger:()=>{o.change(l=>{l.setDataByKey(t,["fullWidth"],!1)}),e({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"full",toValue:"default"})}}:{key:"full",title:"Full width",icon:v.FullWidth,trigger:()=>{o.change(l=>{l.setDataByKey(t,["fullWidth"],!0)}),e({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"default",toValue:"full"})}}]}}s();var L0=y(C());function qy(o,t){return L0.useMemo(()=>HW(o.value.document,t),[o,t])}function HW(o,t){let e=o.getPath(t);return e?e[0]<KW(o):!1}var Vy=new WeakMap;function KW(o){if(Vy.has(o))return Vy.get(o);let t=800,e=0;for(let n=0;n<o.nodes.size;n++){let r=o.nodes.get(n);if(!r)break;if(e+=Ml(r,o,{blockSpacing:{paddingTop:g.medium,paddingBottom:g.medium}}),e>t)return Vy.set(o,n),n}return Vy.set(o,o.nodes.size),o.nodes.size}s();var yd=y(C()),Dm=y(z());var vd=yd.forwardRef(function(t,e){let{node:n,children:r,editor:i,isFocused:a,isSelected:c,attributes:l,onPress:u,style:d}=t,{readOnly:p}=i,f=q.useInteractiveState(),[,m]=P(XW);return p?u?yd.createElement(Dm.TouchableOpacity,{style:[m.frameInlineVoid],onPress:u},r):yd.createElement(Dm.View,{style:[m.frameInlineVoid]},r):yd.createElement(Dm.TouchableOpacity,{ref:e,...l,...f.events,style:[m.frameInlineVoid,f.hovered&&m.frameEditableHovered,c&&m.frameSelected,a&&m.frameFocused,d],onPress:h=>{i.change(b=>{Ft(b.value.selection)?b.collapseToStartOf(n).focus():b.selectText(he.fromBlockRange(b.value.selection,b.value.document)).collapseToStartOf(n).focus()}),u&&u(h)}},r)}),XW=F.create({frameInlineVoid:o=>({borderWidth:2,borderColor:"transparent",borderRadius:o.radiuses.medium,textAlignVertical:"middle"}),frameEditableHovered:o=>({borderColor:o.colors.primary.muted}),frameSelected:o=>({borderColor:o.colors.primary.muted}),frameFocused:o=>({borderColor:o.colors.primary.main})});s();var St=y(C()),on=y(z());s();var B0=y(Tf()),W0=y(C());s();var Zw={BLUE:{light:"#0074D9",dark:"#0074D9"},AQUA:{light:"#7FDBFF",dark:"#7FDBFF"},TEAL:{light:"#39CCCC",dark:"#39CCCC"},OLIVE:{light:"#3D9970",dark:"#3D9970"},GREEN:{light:"#2ECC40",dark:"#2ECC40"},LIME:{light:"#01FF70",dark:"#01FF70"},YELLOW:{light:"#FFDC00",dark:"#FFDC00"},ORANGE:{light:"#FF851B",dark:"#FF851B"},RED:{light:"#FF4136",dark:"#FF4136"},MAROON:{light:"#85144b",dark:"#85144b"},FUCHSIA:{light:"#F012BE",dark:"#F012BE"},PURPLE:{light:"#B10DC9",dark:"#B10DC9"}},D0=Object.keys(Zw).sort((o,t)=>Math.random()-.5),Gy=new Map;function N0(o){if(Gy.has(o))return Gy.get(o);let t=D0[Gy.size%D0.length];return Gy.set(o,t),t}function Ra(o){let t=ai(),[e]=P();return W0.useMemo(()=>{if(!o)return{base:e.colors.primary.main,faded:A0(e.colors.primary.main,.2)};let n=N0(o),r=Zw[n][t.color];return{base:r,faded:A0(r,.2)}},[t.color,o,e.colors.primary.main])}function A0(o,t){let e=Math.round((0,B0.default)(t||1,0,1)*255);return o+e.toString(16).toUpperCase()}var Mt=St.forwardRef(function(t,e){let{onPress:n,onSelect:r=()=>{c.change(b=>{Ft(b.value.selection)&&b.collapseToStartOf(i).focus()})},node:i,children:a,editor:c,selections:l,isFocused:u,selectable:d=!0}=t,{readOnly:p}=c,f=i.getFirstText(),m=St.useMemo(()=>{if(u)return;let b=l.get(0);if(b)return b.data.get("clientId")},[l,u,f?.key]),h=Ra(m);return St.createElement(Jw,{ref:e,onPress:n,readOnly:p,selectable:d,selected:u||!!m,selectionColor:h.base,onSelect:r},a)}),Jw=St.forwardRef(function(t,e){let{onPress:n,selected:r,readOnly:i=!1,selectable:a=!0,selectionColor:c,style:l,children:u,onSelect:d}=t,p=q.useInteractiveState({hoverDelayIn:50}),[f,m]=P(UW);if(i)return St.createElement(St.Fragment,null,u);let h=k=>{k.stopPropagation(),d()},b=c||f.colors.primary.main,w=St.createElement(on.View,{ref:e,style:l},u,St.createElement(on.View,{style:[m.frameBorder,m.frameBorderRight,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderRightSelected,{borderRightColor:b}]],pointerEvents:"none"}),St.createElement(on.View,{style:[m.frameBorder,m.frameBorderLeft,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderLeftSelected,{borderLeftColor:b}]],pointerEvents:"none"}),St.createElement(on.View,{style:[m.frameBorder,m.frameBorderTop,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderTopSelected,{borderTopColor:b}]],pointerEvents:"none"}),St.createElement(on.View,{style:[m.frameBorder,m.frameBorderBottom,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderBottomSelected,{borderBottomColor:b}]],pointerEvents:"none"}),a?St.createElement(St.Fragment,null,St.createElement(on.TouchableWithoutFeedback,{onPress:h},St.createElement(on.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderRight]})),St.createElement(on.TouchableWithoutFeedback,{onPress:h},St.createElement(on.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderLeft]})),St.createElement(on.TouchableWithoutFeedback,{onPress:h},St.createElement(on.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderTop]})),St.createElement(on.TouchableWithoutFeedback,{onPress:h},St.createElement(on.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderBottom]}))):null);return n?St.createElement(on.TouchableOpacity,{onPress:n},w):w}),Hy=18,dt=8,Ic=4,Ky=2,UW=F.create({frameBorder:{position:"absolute"},hoverableFrameBorder:{position:"absolute",cursor:"pointer"},frameBorderHovered:o=>({backgroundColor:o.colors.primary.muted}),hoverableFrameBorderTop:{top:-dt/2,left:-dt/2,right:-dt/2,height:Hy},frameBorderTop:{top:-dt/2,left:-dt/2,right:-dt/2,height:dt,borderTopLeftRadius:Ic,borderTopRightRadius:Ic},frameBorderTopSelected:o=>({backgroundColor:"transparent",borderTopColor:o.colors.primary.main,borderTopWidth:Ky}),hoverableFrameBorderBottom:{bottom:-dt/2,left:-dt/2,right:-dt/2,height:Hy},frameBorderBottom:{bottom:-dt/2,left:-dt/2,right:-dt/2,height:dt,borderBottomLeftRadius:Ic,borderBottomRightRadius:Ic},frameBorderBottomSelected:o=>({backgroundColor:"transparent",borderBottomColor:o.colors.primary.main,borderBottomWidth:Ky}),hoverableFrameBorderLeft:{top:-dt/2,bottom:-dt/2,left:-dt/2,width:Hy},frameBorderLeft:{top:-dt/2,bottom:-dt/2,left:-dt/2,width:dt,borderBottomLeftRadius:Ic,borderTopLeftRadius:Ic},frameBorderLeftSelected:o=>({backgroundColor:"transparent",borderLeftColor:o.colors.primary.main,borderLeftWidth:Ky}),hoverableFrameBorderRight:{top:-dt/2,bottom:-dt/2,right:-dt/2,width:Hy},frameBorderRight:{top:-dt/2,bottom:-dt/2,right:-dt/2,width:dt,borderTopRightRadius:Ic,borderBottomRightRadius:Ic},frameBorderRightSelected:o=>({backgroundColor:"transparent",borderRightColor:o.colors.primary.main,borderRightWidth:Ky})});s();var Xy=y(C());function Uy(o,t){let[,e]=P(A),[,n]=P(YW),{navigateToHash:r}=Se(),{sections:i,active:a,setActive:c}=Xy.default.useContext(fi),l=q.useInteractiveState(),u=i.get(o.key),d=()=>{u&&c(a!==u?u:null)},p=()=>{u&&(r(u,{scroll:!0}),d())},f={accessibilityRole:"presentation"};return{anchorElement:Xy.default.createElement(q.Text,{href:`#${u}`,onPress:p,style:[n.anchorLink,g.Margin.smallLeft,a===u||l.focused||l.hovered?Ke.visible:Ke.hidden],inactiveStyle:e.textMuted,activeStyle:e.primary,accessibilityLabel:t.accessibilityLabel},Xy.default.createElement(v.Hash,{size:t.anchorIconSize||R.ICON_S,...f})),anchoredBlockId:u,anchoredBlockInteractiveState:l,onAnchoredBlockPress:()=>{t.onBlockPress&&t.onBlockPress(),d()}}}var YW=F.create({anchorLink:{display:"inline-flex",alignItems:"center"}});s();var z0=y(C());function V0(o){let{notify:t,notifyProgress:e,notifyOrUpdate:n,close:r}=fo(),{logAnalyticsEvent:i}=o;return z0.useMemo(()=>{function a(u){su(u),t({kind:"danger",title:"Error while pasting content",icon:v.Alert.CSS,details:la(u,"Please try again or contact support if the problem persists.")})}function c(u){n({id:"upload-files",title:`Uploading ${u} file${u!==1?"s":""}\u2026`,details:"This might take a moment.",kind:"default",timeout:0,closeable:!1,icon:Ce})}function l(u,d,p){let f=Pu(u),m=0,h=async(b,w)=>{if(lu(b))return{kind:"url",url:b};if(Ax(b)){let k=await(await fetch(b)).blob(),x=b.split(";")[0]?.split("/")[1],O=w?.fileName||`unknown.${x}`,_=new File([k],O);return m+=1,c(m),(await o.uploadFiles([_]))[0]}return null};if(f.type==="html"&&f.html!==null)return iP(f.html,{...vS,resolveFile:h}).then(({document:b})=>tO(b)&&f.text?bS(f.text).then(({document:w})=>({document:w,type:"text"})):{document:b,type:"html"}).then(({document:b,type:w})=>{p.change(x=>{x.insertDocument(b)}),r("upload-files");let k=F0(w==="html"?f.html:f.text,w);i(Nm(u,w,{document:b,sourceIncludes:k}))}).catch(b=>{a(b)}),!0;if(f.type==="text"&&f.text!==null)return bS(f.text,{...vS,resolveFile:h}).then(({document:b})=>{p.change(k=>{k.insertDocument(b)}),r("upload-files");let w=F0(f.text,"text");i(Nm(u,"text",{document:b,sourceIncludes:w}))}).catch(b=>{a(b)}),!0;if(f.type==="files"&&typeof f.files<"u"){if(!f.files||f.files.length===0)return;e(o.uploadFiles(f.files),{title:`Uploading ${f.files.length} files\u2026`,details:"This might take a moment.",kind:"default"}).then(b=>{if(!f.files)return;if(b.length===0){t({kind:"danger",title:"Some files failed to upload, please try again",icon:v.Alert.CSS});return}let w=f.files.every(k=>Us(k));p.change(k=>{if(w){let x=Io.createImagesBlock(b),{startBlock:O}=k.value;if(_e(O,x.type)){iS(k,Io.createImagesBlock(b));return}if(!eO.includes(O.type)){t({kind:"info",title:"Cannot insert an image here",icon:v.InfoCircle.CSS});return}b.reduce((I,N)=>I.insertInline(Io.createImageInline(N)),k);return}b.forEach(x=>{if(x.kind!=="file")return;let O=qf.createFileBlock(x);if(_e(k.value.document.getParent(k.value.startBlock.key),O.type)){iS(k,O);return}t({kind:"info",title:"Cannot insert a file here",icon:v.InfoCircle.CSS})})}),i(Nm(u,"files",{uploadedFiles:b?.length,sourceIncludes:["file"]}))}).catch(b=>{a(b)})}}return{onPaste:l,onDrop:l}},[t,e])}function F0(o,t){let e=[];switch(t){case"text":o.includes("![")&&e.push("image"),o.match(/\|\s*\:?---/)&&e.push("table");break;case"html":o.includes("<img")&&e.push("image"),o.includes("<table")&&e.push("table");break}return e}function Nm(o,t,{document:e=void 0,uploadedFiles:n=0,sourceIncludes:r=[]}={}){let i=o.clipboardData,a=new Set,c=0;return e&&e.forEachDescendant(l=>{c+=1,l.type&&a.add(l.type)}),{type:"edit_paste_content",paste:o.type,sourceTypes:[...i?.types||[]],sourceIncludes:[...new Set(r)],transformType:t,transformSize:c,uploadedFiles:n,transformNodes:[...a]}}s();var Qw=y(ii());var q0={onKeyDown:$W};function $W(o,t){if((0,Qw.default)("enter",o)||(0,Qw.default)("shift+enter",o)){let{value:e}=t,{startBlock:n,startInline:r,startText:i}=e;if(r&&r.isVoid&&i){let a=e.document.getNextText(i.key);return a?(t.collapseToStartOf(a),t):void 0}if(n&&n.isVoid)return ht(t),t}}s();var eC=y(C()),Yy="selectionHighlighting",G0={renderMark:jW};function jW(o){let{mark:t}=o;switch(t.type){case Yy:return eC.createElement(ZW,{...o})}}function ZW(o){let{attributes:t,children:e}=o;return eC.createElement("span",{...t,style:{backgroundColor:"Highlight",color:"HighlightText"}},e)}s();function o0(o){o.value.decorations.forEach(t=>{t.marks?.some(e=>e.type===Yy)&&o.removeValueDecoration(t)})}function Ty(o,t=o.value.selection){he.isTextRange(t)&&o.setValueDecoration(he.create({anchorKey:t.anchorKey,anchorOffset:t.anchorOffset,focusKey:t.focusKey,focusOffset:t.focusOffset,marks:[{type:Yy,data:{}}],isAtomic:!0}))}s();var H0={shouldNodeComponentUpdate:JW};function JW(o,t){let e=o.parent.nodes.size-1,n=o.parent.getChildIndex(o.node.key),r=t.parent.getChildIndex(o.node.key);return(n===e||r===e)&&r!==n?!0:null}s();var bd=y(C()),Sd=y(z());function Pr(o){let[,t]=P(QW),[,e]=P(A);return bd.createElement(Sd.View,{style:[t.blockLoading,g.Padding.largeHorizontal,g.Padding.mediumVertical,S.directionRow,S.alignCenter]},bd.createElement(Sd.View,null,bd.createElement(Ce,{size:"medium"})),bd.createElement(Sd.View,{style:[g.Margin.mediumLeft]},bd.createElement(Sd.Text,{style:[e.Caption,e.textMid]},"Loading...")))}var QW=F.create({blockLoading:o=>({backgroundColor:o.colors.background.muted,borderRadius:o.radiuses.large})});s();var X0=y(C());s();var Si=y(C());var K0={en:{something_wrong:"Something went wrong.",reload:"Reload",let_us_know:"Let us know what happened",we_have_been_notified:"Our team has been notified. If you'd like to help, you can describe what happened below.",search:"Search",search_ask:"Ask",search_placeholder:"Search content\u2026",search_placeholder_ask:"Ask a question\u2026",search_blankslate:"Type something to search",search_blankslate_ai:"We'll answer the question with an AI model trained on the content.",search_blankslate_recent_searches:"Recent searches",search_blankslate_recent_questions:"Recently asked",search_blankslate_recommended_questions:"You might be interested in",search_blankslate_query:'No results for "${1}"',search_answer_sources:"Answer based on ${1} sources",search_answer_copy:"Copy answer",search_answer_feedback_upvote:"Mark as useful",search_answer_feedback_downvote:"Mark as not relevant",search_answer_feedback_title:"Thanks for your feedback!",search_answer_feedback_details:"This will help us improve the answering engine.",search_answer_loading:"Analysing the content to answer your question\u2026",search_answer_loading_wait:"It might take a few more seconds.",search_answer_none_title:"No answer found for your question.",search_answer_none_details:"It can indicate that no content is relevant to your question or answer cannot be evaluated with enough confidence.",search_answer_error_title:"Unexpected error",search_answer_error_details:"Something went wrong. Please try again later.",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"Page not found",back_to_home:"Back to front page",page_not_found_long:"Sorry, but the page you were looking for could not be found.",outline:"On this page",last_modified:"Last modified ${1}",was_it_helpful:"Was this page helpful?",poor_content:"Poor content",ok_content:"OK content",excellent_content:"Excellent content",powered_by:"Powered By ${1}",previous:"Previous",next:"Next",export_pdf:"Export as PDF",copy_link:"Copy link",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Edit on ${1}",page_articles_section:"Here are the articles in this section:",main:"Main",cookie_policy:"cookie policy",cookie_prompt:"This site uses cookies to deliver its service and to analyse traffic. By browsing this site, you accept the ${1}.",cookies:"Cookies",reject_all:"Reject all",theme_change_appearance:"Change appearance",new_page:"New page",untitled_page:"Untitled page",page_description:"Page description (optional)",connection_lost:"Connection lost",network_troubleshooting:"Network troubleshooting",device_offline:"Your device might be offline, or GitBook might be experiencing issues.",missing_content_title:"Oops, something is missing.",missing_content_description:"We could not find the original source to display this content.",table_of_contents:"Table of contents",page_outline:"Page outline"},fr:{something_wrong:"Il y a eu un probl\xE8me.",reload:"Actualiser",let_us_know:"Dites-nous ce qui s'est pass\xE9",we_have_been_notified:"Notre \xE9quipe a \xE9t\xE9 inform\xE9e. Si vous souhaitez nous aider, vous pouvez d\xE9crire ce qui s'est pass\xE9 ci-dessous.",search:"Rechercher",search_ask:"Poser une question",search_placeholder:"Rechercher dans le contenu\u2026",search_placeholder_ask:"Poser une question\u2026",search_blankslate:"Tapez quelque chose pour rechercher",search_blankslate_ai:"Nous r\xE9pondrons \xE0 la question avec un mod\xE8le d'IA entra\xEEn\xE9 sur le contenu.",search_blankslate_recent_searches:"Recherches r\xE9centes",search_blankslate_recent_questions:"Questions r\xE9centes",search_blankslate_recommended_questions:"Vous pourriez \xEAtre int\xE9ress\xE9 par",search_blankslate_query:'Aucun r\xE9sultat pour "${1}"',search_answer_sources:"R\xE9ponse bas\xE9e sur ${1} sources",search_answer_copy:"Copier la r\xE9ponse",search_answer_feedback_upvote:"Marquer comme utile",search_answer_feedback_downvote:"Marquer comme non pertinent",search_answer_feedback_title:"Merci pour votre retour !",search_answer_feedback_details:"Cela nous aidera \xE0 am\xE9liorer le moteur de r\xE9ponse.",search_answer_loading:"Analyse du contenu pour r\xE9pondre \xE0 votre question\u2026",search_answer_loading_wait:"Cela peut prendre quelques secondes suppl\xE9mentaires.",search_answer_none_title:"Aucune r\xE9ponse trouv\xE9e pour votre question.",search_answer_none_details:"Cela peut indiquer qu'aucun contenu n'est pertinent pour votre question ou que la r\xE9ponse ne peut pas \xEAtre \xE9valu\xE9e avec suffisamment de confiance.",search_answer_error_title:"Erreur inattendue",search_answer_error_details:"Une erreur s'est produite. Veuillez r\xE9essayer plus tard.",search_goto_section:"Aller \xE0 la section",search_goto_page:"Aller \xE0 la page",page_not_found:"Page non trouv\xE9e",back_to_home:"Retour \xE0 la page d'accueil",page_not_found_long:"D\xE9sol\xE9, mais la page que vous cherchiez n'a pas pu \xEAtre trouv\xE9e.",outline:"Sommaire",last_modified:"Derni\xE8re mise \xE0 jour ${1}",was_it_helpful:"Cette page vous a t-elle aid\xE9e ?",poor_content:"Contenu m\xE9diocre",ok_content:"Contenu OK",excellent_content:"Contenu excellent",powered_by:"Propuls\xE9 par ${1}",previous:"Pr\xE9c\xE9dent",next:"Suivant",export_pdf:"Exporter en PDF",copy_link:"Copier le lien",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\xC9diter sur ${1}",page_articles_section:"Voici les articles de cette section :",main:"Principale",cookie_policy:"politique en mati\xE8re de cookies",cookie_prompt:"Ce site utilise des cookies pour fournir son service et analyser le trafic. En naviguant sur ce site, vous acceptez le ${1}.",cookies:"Cookies",reject_all:"Rejeter tout",theme_change_appearance:"Changer l\u2019apparence",connection_lost:"Hors connexion",network_troubleshooting:"D\xE9pannage r\xE9seau",device_offline:"Votre appareil est hors-ligne, ou GitBook rencontre des probl\xE8mes.",missing_content_title:"Oups, il manque quelque chose.",missing_content_description:"Nous n'avons pas pu trouver la source d'origine pour afficher ce contenu.",table_of_contents:"Table des mati\xE8res",page_outline:"Sommaire de la page"},es:{something_wrong:"Algo sali\xF3 mal.",reload:"Recarga",let_us_know:"Cu\xE9ntanos lo que ha sucedido",we_have_been_notified:"Nuestro equipo ha sido notificado. Si quieres ayudar, puedes describir lo sucedido a continuaci\xF3n.",search:"Buscar",search_ask:"Hacer una pregunta",search_placeholder:"Buscar en el contenido\u2026",search_placeholder_ask:"Hacer una pregunta\u2026",search_blankslate:"Escribe algo para buscar",search_blankslate_ai:"Responderemos a la pregunta con un modelo de IA entrenado en el contenido.",search_blankslate_recent_searches:"B\xFAsquedas recientes",search_blankslate_recent_questions:"Preguntas recientes",search_blankslate_recommended_questions:"Quiz\xE1s te interese",search_blankslate_query:'No se encontraron resultados para "${1}"',search_answer_sources:"Respuesta basada en ${1} fuentes",search_answer_copy:"Copiar respuesta",search_answer_feedback_upvote:"Marcar como \xFAtil",search_answer_feedback_downvote:"Marcar como no relevante",search_answer_feedback_title:"\xA1Gracias por tu retroalimentaci\xF3n!",search_answer_feedback_details:"Esto nos ayudar\xE1 a mejorar el motor de respuesta.",search_answer_loading:"Analizando el contenido para responder tu pregunta\u2026",search_answer_loading_wait:"Esto puede tomar unos segundos m\xE1s.",search_answer_none_title:"No se encontr\xF3 respuesta para tu pregunta.",search_answer_none_details:"Esto puede indicar que no hay contenido relevante para tu pregunta o que la respuesta no se puede evaluar con suficiente confianza.",search_answer_error_title:"Error inesperado",search_answer_error_details:"Ha ocurrido un error. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",search_goto_section:"Ir a la secci\xF3n",search_goto_page:"Ir a la p\xE1gina",page_not_found:"P\xE1gina no encontrada",back_to_home:"Volver a la primera p\xE1gina",page_not_found_long:"Lo sentimos, pero no se ha podido encontrar la p\xE1gina que buscaba.",outline:"Esquema",last_modified:"\xDAltima actualizaci\xF3n ${1}",was_it_helpful:"\xBFTe ha sido \xFAtil esta p\xE1gina?",poor_content:"Contenido mediocre",ok_content:"Contenido OK",excellent_content:"Contenido excelente",powered_by:"Accionado por ${1}",previous:"Anterior",next:"Pr\xF3ximo",export_pdf:"Exportar como PDF",copy_link:"Copiar enlace",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Editar en ${1}",page_articles_section:"Aqu\xED est\xE1n los art\xEDculos de esta secci\xF3n:",main:"Principal",cookie_policy:"pol\xEDtica de cookies",cookie_prompt:"Este sitio utiliza cookies para prestar su servicio y analizar el tr\xE1fico. Al navegar por este sitio, usted acepta la ${1}.",cookies:"Cookies",reject_all:"Rechazar todo",theme_change_appearance:"Cambiar apariencia",connection_lost:"Desconectado",network_troubleshooting:"Resoluci\xF3n de problemas de red",device_offline:"Su dispositivo puede estar desconectado, o GitBook esta experimentando problemas.",missing_content_title:"Ups, algo falta.",missing_content_description:"No pudimos encontrar la fuente original para mostrar este contenido.",table_of_contents:"Tabla de contenido",page_outline:"\xCDndice de p\xE1gina"},zh:{something_wrong:"\u51FA\u4E86\u70B9\u95EE\u9898\u3002",reload:"\u91CD\u88C5",let_us_know:"\u8BA9\u6211\u4EEC\u77E5\u9053\u53D1\u751F\u4E86\u4EC0\u4E48\u4E8B",we_have_been_notified:"\u6211\u4EEC\u7684\u56E2\u961F\u5DF2\u7ECF\u63A5\u5230\u901A\u77E5\u3002\u5982\u679C\u4F60\u60F3\u5E2E\u5FD9\uFF0C\u4F60\u53EF\u4EE5\u5728\u4E0B\u9762\u63CF\u8FF0\u53D1\u751F\u4E86\u4EC0\u4E48\u3002",search:"\u641C\u7D22",search_ask:"\u63D0\u95EE",search_placeholder:"\u641C\u7D22\u5185\u5BB9\u2026",search_placeholder_ask:"\u63D0\u95EE\u2026",search_blankslate:"\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22",search_blankslate_ai:"\u6211\u4EEC\u5C06\u7528\u8BAD\u7EC3\u8FC7\u7684 AI \u6A21\u578B\u6765\u56DE\u7B54\u4F60\u7684\u95EE\u9898\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u641C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u63D0\u95EE",search_blankslate_recommended_questions:"\u4F60\u53EF\u80FD\u611F\u5174\u8DA3\u7684\u95EE\u9898",search_blankslate_query:'\u6CA1\u6709\u627E\u5230\u4E0E "${1}" \u76F8\u5173\u7684\u5185\u5BB9',search_answer_sources:"\u56DE\u7B54\u57FA\u4E8E ${1} \u6765\u6E90",search_answer_copy:"\u590D\u5236\u56DE\u7B54",search_answer_feedback_upvote:"\u6807\u8BB0\u4E3A\u6709\u7528",search_answer_feedback_downvote:"\u6807\u8BB0\u4E3A\u65E0\u7528",search_answer_feedback_title:"\u611F\u8C22\u60A8\u7684\u53CD\u9988\uFF01",search_answer_feedback_details:"\u8FD9\u5C06\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB\u56DE\u7B54\u5F15\u64CE\u3002",search_answer_loading:"\u6B63\u5728\u5206\u6790\u5185\u5BB9\u4EE5\u56DE\u7B54\u60A8\u7684\u95EE\u9898\u2026",search_answer_loading_wait:"\u8FD9\u53EF\u80FD\u9700\u8981\u51E0\u79D2\u949F\u3002",search_answer_none_title:"\u6CA1\u6709\u627E\u5230\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u56DE\u7B54\u3002",search_answer_none_details:"\u8FD9\u53EF\u80FD\u662F\u7531\u4E8E\u6CA1\u6709\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u6216\u8005\u56DE\u7B54\u4E0D\u80FD\u88AB\u5145\u5206\u4FE1\u4EFB\u3002",search_answer_error_title:"\u610F\u5916\u9519\u8BEF",search_answer_error_details:"\u53D1\u751F\u4E86\u4E00\u4E2A\u9519\u8BEF\u3002\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002",search_goto_section:"\u8DF3\u8F6C\u5230\u7AE0\u8282",search_goto_page:"\u8DF3\u8F6C\u5230\u9875\u9762",page_not_found:"\u672A\u627E\u5230\u7F51\u9875",back_to_home:"\u8FD4\u56DE\u9996\u9875",page_not_found_long:"\u62B1\u6B49\uFF0C\u60A8\u8981\u627E\u7684\u9875\u9762\u65E0\u6CD5\u627E\u5230\u3002",outline:"\u5927\u7EB2",last_modified:"\u6700\u8FD1\u66F4\u65B0 ${1}",was_it_helpful:"\u6B64\u9875\u9762\u662F\u5426\u6709\u5E2E\u52A9\uFF1F",poor_content:"\u5185\u5BB9\u5DEE",ok_content:"\u597D\u7684\u5185\u5BB9",excellent_content:"\u4F18\u79C0\u7684\u5185\u5BB9",powered_by:"\u7531 ${1} \u63D0\u4F9B\u652F\u6301",previous:"\u4EE5\u524D",next:"\u4E0B\u4E00\u4E2A",export_pdf:"\u5BFC\u51FA\u4E3APDF",copy_link:"\u590D\u5236\u94FE\u63A5",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\u5728 ${1} \u4E0A\u7F16\u8F91",page_articles_section:"\u4EE5\u4E0B\u662F\u672C\u8282\u4E2D\u7684\u6587\u7AE0\uFF1A",main:"\u4E3B\u8981",cookie_policy:"cookie\u653F\u7B56",cookie_prompt:"\u672C\u7F51\u7AD9\u4F7F\u7528cookies\u6765\u63D0\u4F9B\u670D\u52A1\u548C\u5206\u6790\u6D41\u91CF\u3002\u901A\u8FC7\u6D4F\u89C8\u672C\u7F51\u7AD9\uFF0C\u60A8\u63A5\u53D7\u6211\u4EEC\u7684${1}\u3002",cookies:"Cookies",reject_all:"\u62D2\u7EDD\u6240\u6709",theme_change_appearance:"\u6539\u53D8\u5916\u89C2",connection_lost:"\u8FDE\u63A5\u4E22\u5931",network_troubleshooting:"\u7F51\u7EDC\u6545\u969C\u6392\u9664",device_offline:"\u60A8\u7684\u8BBE\u5907\u53EF\u80FD\u5904\u4E8E\u79BB\u7EBF\u72B6\u6001\uFF0C\u6216\u8005 GitBook \u53EF\u80FD\u9047\u5230\u95EE\u9898\u3002",missing_content_title:"\u54CE\u5440\uFF0C\u6709\u4E9B\u4E1C\u897F\u4E22\u5931\u4E86\u3002",missing_content_description:"\u6211\u4EEC\u65E0\u6CD5\u627E\u5230\u539F\u59CB\u6765\u6E90\u4EE5\u663E\u793A\u6B64\u5185\u5BB9\u3002",table_of_contents:"\u76EE\u5F55",page_outline:"\u9875\u9762\u5927\u7EB2"},ja:{something_wrong:"\u4F55\u304B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",reload:"\u30EA\u30ED\u30FC\u30C9",let_us_know:"\u4F55\u304C\u8D77\u3053\u3063\u305F\u306E\u304B\u3092\u6559\u3048\u3066\u304F\u3060\u3055\u3044",we_have_been_notified:"\u79C1\u305F\u3061\u306E\u30C1\u30FC\u30E0\u306F\u901A\u77E5\u3092\u53D7\u3051\u307E\u3057\u305F\u3002\u3054\u5354\u529B\u3044\u305F\u3060\u3051\u308B\u5834\u5408\u306F\u3001\u4F55\u304C\u8D77\u3053\u3063\u305F\u304B\u3092\u4EE5\u4E0B\u306B\u3054\u8A18\u5165\u304F\u3060\u3055\u3044\u3002",search:"\u691C\u7D22",search_ask:"\u8CEA\u554F\u3059\u308B",search_placeholder:"\u691C\u7D22\u2026",search_placeholder_ask:"\u8CEA\u554F\u2026",search_blankslate:"\u30AD\u30FC\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u691C\u7D22",search_blankslate_ai:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u306F\u3001AI\u30E2\u30C7\u30EB\u306B\u3088\u3063\u3066\u884C\u308F\u308C\u307E\u3059\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u306E\u691C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u306E\u8CEA\u554F",search_blankslate_recommended_questions:"\u304A\u3059\u3059\u3081\u306E\u8CEA\u554F",search_blankslate_query:'"${1}" \u306B\u95A2\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F',search_answer_sources:"\u56DE\u7B54\u306F ${1} \u304B\u3089\u306E\u60C5\u5831\u3092\u5143\u306B\u3057\u3066\u3044\u307E\u3059",search_answer_copy:"\u56DE\u7B54\u3092\u30B3\u30D4\u30FC",search_answer_feedback_upvote:"\u5F79\u306B\u7ACB\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_downvote:"\u5F79\u306B\u7ACB\u305F\u306A\u304B\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_title:"\u30D5\u30A3\u30FC\u30C9\u30D0\u30C3\u30AF\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3059\uFF01",search_answer_feedback_details:"\u3053\u308C\u306B\u3088\u308A\u3001\u56DE\u7B54\u30A8\u30F3\u30B8\u30F3\u3092\u6539\u5584\u3067\u304D\u307E\u3059\u3002",search_answer_loading:"\u8CEA\u554F\u306B\u56DE\u7B54\u3059\u308B\u305F\u3081\u306B\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u5206\u6790\u3057\u3066\u3044\u307E\u3059\u2026",search_answer_loading_wait:"\u3053\u308C\u306B\u306F\u6570\u79D2\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002",search_answer_none_title:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",search_answer_none_details:"\u3053\u308C\u306F\u3001\u8CEA\u554F\u306B\u95A2\u9023\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u304C\u306A\u3044\u304B\u3001\u56DE\u7B54\u304C\u4FE1\u983C\u3067\u304D\u306A\u3044\u305F\u3081\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",search_answer_error_title:"\u30A8\u30E9\u30FC",search_answer_error_details:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"\u30DA\u30FC\u30B8\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",back_to_home:"\u30D5\u30ED\u30F3\u30C8\u30DA\u30FC\u30B8\u306B\u623B\u308B",page_not_found_long:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u304A\u63A2\u3057\u306E\u30DA\u30FC\u30B8\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",outline:"\u6982\u8981",last_modified:"\u6700\u7D42\u66F4\u65B0 ${1}",was_it_helpful:"\u3053\u306E\u30DA\u30FC\u30B8\u306F\u5F79\u306B\u7ACB\u3061\u307E\u3057\u305F\u304B\uFF1F",poor_content:"\u60AA\u3044\u5185\u5BB9",ok_content:"OK\u30B3\u30F3\u30C6\u30F3\u30C4",excellent_content:"\u512A\u308C\u305F\u5185\u5BB9",powered_by:"${1} \u4E0A\u3067\u52D5\u4F5C\u3057\u3066\u3044\u307E\u3059",previous:"\u524D",next:"\u6B21",export_pdf:"PDF\u306B\u51FA\u529B",copy_link:"\u30EA\u30F3\u30AF\u306E\u30B3\u30D4\u30FC",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"${1}\u3067\u7DE8\u96C6",page_articles_section:"\u3053\u306E\u30BB\u30AF\u30B7\u30E7\u30F3\u306E\u8A18\u4E8B\u306F\u6B21\u306E\u3068\u304A\u308A\u3067\u3059:",main:"\u4E00\u6B21",cookie_policy:"\u30AF\u30C3\u30AD\u30FC\u30DD\u30EA\u30B7\u30FC",cookie_prompt:"\u3053\u306E\u30B5\u30A4\u30C8\u3067\u306F\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u63D0\u4F9B\u3084\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u306E\u5206\u6790\u306E\u305F\u3081\u306B\u30AF\u30C3\u30AD\u30FC\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30B5\u30A4\u30C8\u3092\u95B2\u89A7\u3059\u308B\u3053\u3068\u3067\u3001\u304A\u5BA2\u69D8\u306F\u5F53\u793E\u306E${1}\u306B\u540C\u610F\u3057\u305F\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002",cookies:"\u30AF\u30C3\u30AD\u30FC",reject_all:"\u5168\u3066\u3092\u62D2\u5426\u3059\u308B",theme_change_appearance:"\u5916\u89B3\u3092\u5909\u66F4\u3059\u308B",connection_lost:"\u63A5\u7D9A\u5207\u65AD",network_troubleshooting:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u30C8\u30E9\u30D6\u30EB\u30B7\u30E5\u30FC\u30C6\u30A3\u30F3\u30B0",device_offline:"\u30C7\u30D0\u30A4\u30B9\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u3067\u3042\u308B\u304B\u3001GitBook\u3067\u554F\u984C\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",missing_content_title:"\u304A\u3063\u3068\u3001\u4F55\u304B\u304C\u5931\u308F\u308C\u3066\u3044\u307E\u3059\u3002",missing_content_description:"\u3053\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8868\u793A\u3059\u308B\u305F\u3081\u306E\u5143\u306E\u30BD\u30FC\u30B9\u3092\u898B\u3064\u3051\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",table_of_contents:"\u76EE\u6B21",page_outline:"\u30DA\u30FC\u30B8\u6982\u8981"}};function ae(){let{locale:o}=Si.useContext(Ko),t=K0[o];return Si.useCallback((e,...n)=>{let r=t[e]||K0.en[e],i=[],a=r;return n.forEach((c,l)=>{if(typeof c=="string")a=a.replace(`\${${l+1}}`,c);else{let[u,d]=a.split(`\${${l+1}}`);i.push(Si.createElement(Si.Fragment,{key:`string-${l}`},u)),i.push(Si.createElement(Si.Fragment,{key:`arg-${l}`},c)),a=d}}),i.length?Si.createElement(Si.Fragment,null,i,a):a},[o])}function _m(){let o=ae();return X0.createElement(di,{kind:"default",title:o("missing_content_title"),details:o("missing_content_description")})}s();var $y=y(C());var e4=q.createInteractiveComponent(yt),U0=$y.forwardRef(function(t,e){let{active:n=!1,children:r,onPress:i,style:a,...c}=t,[,l]=P(t4);return $y.createElement(e4,{ref:e,...c,style:[a,n&&l.active],activeStyle:l.active,onMouseDown:u=>{u.preventDefault(),i()}},r)}),t4=F.create({active:o=>({borderRadius:o.radiuses.medium,paddingHorizontal:g.xsmall,backgroundColor:"rgba(35, 131, 226, 0.14)",marginHorizontal:-g.xsmall,zIndex:-1,cursor:"pointer"})});s();var wd=y(C());function jy(o){let{mark:t,node:e,offset:n,attributes:r,children:i,editor:a,getPalette:c}=o,l=t.data.toObject(),{value:u}=l,d=wd.useRef(null),p=Go(u),f=ce(d);return ah(()=>{if(!f.opened&&a.value.isFocused){let m=()=>he.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+p.current.length+1});f.open(Iu(c(l,m),u))}},150),wd.useEffect(()=>{f.opened&&f.typeQuery(u)},[f,u]),wd.createElement(yt,{ref:d,...r},i)}function Y0(o){let{editor:t,node:e,children:n,attributes:r,isFocused:i}=o,[,a]=P(o4),{readOnly:c}=t,l=e.getFragmentByKey(pa),{selection:u}=t.value,d=Ft(u)&&!!u.hasAnchorIn(l),p=i&&d,[f,m]=_r.useState(!1),h=Ft(u)&&(f||p),b=_r.useCallback(()=>{c||t.change(O=>{let _=e.getFragmentByKey(pa);_&&(Ft(O.value.selection)?O.collapseToEndOf(_).focus():O.selectText(he.fromBlockRange(O.value.selection,O.value.document)).collapseToEndOf(_).focus())})},[c,t,e.key]),w=_r.useCallback(()=>{c||t.change(O=>{let _=O.value.document.getDescendant(e.key);if(_&&_.isInline()){let I=_.getFragmentByKey(pa);I&&Ft(O.value.selection)&&O.value.selection.hasEdgeIn(I)&&O.collapseToEndOf(_)}})},[c,t,e.key]);_r.useEffect(()=>{c||(h?b():w())},[h,c,b,w]),_r.useEffect(()=>{c||!d&&f&&m(!1)},[d,f,c]);let k=()=>{b(),m(!0)},x=_r.useCallback(()=>{m(!1)},[]);return _r.createElement(dg.Provider,{value:x},_r.createElement(ha,{closeOnClick:!1,closeOnEsc:!0,closeOnScroll:!1,closeOnClickInNestedPortals:!1,closeOnOutsideClick:!0,opened:h,anchor:({ref:O})=>_r.createElement(U0,{ref:O,style:a.annotationText,...r,onPress:k,active:h},n)},_r.createElement(eT,{node:e,editor:t})))}var o4=F.create({annotationText:o=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:2,textDecorationColor:o.colors.text.muted})});s();var tC=y(ii());var $0={onKeyDown:(o,t,e)=>{if(!Po(t.value.selection)&&((0,tC.default)("mod+enter",o)||(0,tC.default)("esc",o))){let{value:n}=t,{startBlock:r,document:i}=n;if(!r)return;let a=i.getFragmentParent(r.key);if(a?.object!=="fragment"||a.type!==pa)return;let c=i.getParent(a.key);return c?(t.collapseToEndOf(c),t):void 0}}};s();var ko=y(C()),Zy=y(z());function j0(o){let{editor:t,node:e,children:n}=o,{readOnly:r}=t,i=e.data.toFrozenObject(),a=Ye(),c=bg(i.syntax||"text"),l=typeof i.title=="string",u=ko.useRef(null),d=ce(u),p=ko.useRef(null),f=ce(p),m=(w,k)=>{t.change(x=>{x.insertDataByKey(e.key,["title"],w)})},h=()=>Qt.getCodeText(e),b=r4(e.key);return ko.createElement(fe,{...o,palette:b},ko.createElement(W1,{overflow:i.overflow||Zx,lineNumbers:!!i.lineNumbers,header:l?ko.createElement(n4,{title:i.title,isEditable:!r,onTitleChange:m}):null,showToolbar:d.opened||f.opened,translate:!1,toolbar:a?null:ko.createElement(ko.Fragment,null,r?null:ko.createElement(B,{ref:u,active:d.opened,kind:"secondary",size:"small",style:g.Margin.xsmallRight,rightIcon:v.ChevronDown,onPress:()=>{d.open(Z0(t,e.key))}},c.title),ko.createElement(mg,{kind:"secondary",size:"small",content:h}),r?null:ko.createElement(B,{ref:p,icon:v.MoreVertical,kind:"secondary",size:"small",style:g.Margin.xsmallLeft,title:"More options",onPress:()=>{f.open(b)}}))},n))}function n4(o){let{title:t,isEditable:e,onTitleChange:n}=o,[r,i]=ko.useState(t),[a,c]=P(A);ko.useEffect(()=>{i(t)},[t]);let l=d=>{n(r||"",d)},u=[c.Body,c.textMuted];return ko.createElement(fg,{style:[S.directionRow,S.alignCenter,g.Padding.mediumLeft]},e?ko.createElement(Zy.TextInput,{value:r,placeholder:"Enter a filename",placeholderTextColor:a.colors.text.muted,onChangeText:d=>i(d),style:u,onBlur:l}):ko.createElement(Zy.Text,{style:u},t))}function r4(o){let t=Qs(),e=yi(t,o),n=r=>{let i=t.value.document.assertBlock(r),a=i.data.toFrozenObject(),c=typeof a.title=="string";return[{key:"code",commands:[{key:"syntax",title:"Set syntax\u2026",icon:v.Code,descendant:()=>Z0(t,i.key)}]},{key:"code-options",commands:[{key:"with-line-numbers",icon:v.CodeLineNumbers,type:2,enabled:!!a.lineNumbers,title:"With line numbers",trigger:()=>(t.change(l=>{a.lineNumbers?l.removeDataPathByKey(i.key,["lineNumbers"]):l.setDataByKey(i.key,["lineNumbers"],!0)}),et(t,i.key,n(i.key)))},{key:"with-title",icon:v.CodeCaption,type:2,enabled:c,title:"With caption",trigger:()=>(t.change(l=>{c?l.removeDataPathByKey(i.key,["title"]):l.insertDataByKey(i.key,["title"],"")}),et(t,i.key,n(i.key)))},{key:"with-wrap",icon:v.CodeWrap,type:2,enabled:a.overflow==="wrap",title:"Wrap code",trigger:()=>(t.change(l=>{a.overflow==="wrap"?l.removeDataPathByKey(i.key,["overflow"]):l.setDataByKey(i.key,["overflow"],"wrap")}),et(t,i.key,n(i.key)))}]},...e?[e]:[]]};return et(t,o,n(o))}function Z0(o,t){let e=o.value.document.assertBlock(t),n=e.data.get("syntax");return ne({search:"Select a syntax\u2026",groups:[{key:"syntaxes",commands:z1().map(r=>({type:1,key:r.key,selected:n===r.key,title:r.title,trigger:()=>{o.change(i=>{i.setDataByKey(e.key,["syntax"],r.key)})}}))}]})}s();var J0=y(C());function Q0(o){let{node:t,parent:e,children:n,editor:r}=o,{diff:i,highlighted:a}=t.data.toFrozenObject(),c=()=>{r.change(l=>{l.setDataByKey(t.key,["highlighted"],!a)})};return J0.createElement(A1,{number:e.getChildIndex(t.key)+1,highlighting:i==="added"||i==="deleted"||i==="modified"?i:a?"highlighted":void 0,onPressGutter:r.readOnly?void 0:c},n)}s();var Dl=y(ii());var i4=(0,Dl.isKeyHotkey)("mod+a"),a4=(0,Dl.isKeyHotkey)("shift+tab"),s4=(0,Dl.isKeyHotkey)("tab"),c4=(0,Dl.isKeyHotkey)("mod+enter"),l4=(0,Dl.isKeyHotkey)("enter"),u4=(0,Dl.isKeyHotkey)("backspace"),eL={onKeyDown:d4,onPaste:p4};function d4(o,t,e){let{value:n}=t;if(Po(n.selection))return;let r=Qt.getCurrentCode(n);if(r){if(i4(o))return m4(r,o,t,e);if(a4(o))return g4(r,o,t,e);if(s4(o))return f4(r,o,t,e);if(c4(o))return y4(r,o,t,e);if(l4(o))return h4(r,o,t,e);if(u4(o))return v4(r,o,t,e)}}function p4(o,t,e){let{value:n}=t;if(Po(n.selection))return;let r=Qt.getCurrentCode(t.value),{endBlock:i}=n;if(!r||!i||!r.hasDescendant(i.key))return;let a=Pu(o),c;a.type==="fragment"&&a.fragment?c=a.fragment.getTexts().map(d=>d.text).join(`
`):c=a.text||"";let l=Qt.createCodeBlock(c).blockNodes,u=Xs.create({nodes:l});return t.insertDocument(u)}function m4(o,t,e,n){t.preventDefault();let r=o.getFirstText(),i=o.getLastText();if(!(!r||!i))return e.collapseToStartOf(r).extendToEndOf(i)}function f4(o,t,e,n){let{value:r}=e;t.preventDefault(),t.stopPropagation();let{isCollapsed:i}=r,a=Qt.getIndent(Qt.getCodeText(o));return i?e.insertText(a).focus():Qt.indentLines(e,a)}function g4(o,t,e,n){t.preventDefault(),t.stopPropagation();let r=Qt.getIndent(Qt.getCodeText(o));return Qt.dedentLines(e,r)}function h4(o,t,e,n){let{value:r}=e;if(!r.isCollapsed)return;t.preventDefault();let{startBlock:i}=r;if(!i)return;let a=i.text,c=Qt.getIndent(a,"");return e.splitBlock().insertText(c).focus()}function y4(o,t,e,n){let{value:r}=e;if(r.isCollapsed)return t.preventDefault(),ht(e,o),e}function v4(o,t,e,n){let{value:r}=e;if(r.isExpanded)return;let{startOffset:i,startText:a}=r,c=r.startBlock;if(!c)return;let l=Qt.getIndent(Qt.getCodeText(o));if(c.text.slice(0,i).endsWith(l))return t.preventDefault(),e.deleteBackward(l.length).focus();let d=i===0&&o.getFirstText()===a,p=o.nodes.size===1&&c.text.length===0;if(d&&p)return t.preventDefault(),e.setBlocks(de,{normalize:!1}).unwrapNodeByKey(c.key)}s();var Ta=y(C()),Am=y(z());function Jy(o){let{url:t,readOnly:e}=o,[n]=_h(t),{data:r}=n,i=XR(e?null:t),a=i?Ta.createElement(b4,{...i}):null;if(!r)return Ta.createElement(Pr,null);if(r.type==="rich"&&r.html){let c=Ta.createElement("div",{dangerouslySetInnerHTML:{__html:r.html}});return a?Ta.createElement(Am.View,null,c,Ta.createElement(Am.View,{style:S4.overlayInstallButton},a)):c}return Ta.createElement(xa,{href:t,title:r.title,details:r.site,icon:r.icon?ft(ga,{source:{uri:r.icon}}):void 0,onPress:c=>{c.preventDefault(),ps(t)},buttons:a?[a]:[]})}function b4(o){let{integration:t}=o,{navigate:e}=Se(),{logAnalyticsEvent:n}=Ta.useContext(Be),r=i=>{i.stopPropagation(),i.preventDefault(),n({type:"edit_open_integration",integration:t.name,reason:"embed"}),e({overlay:{type:"integrations",integration:t.name}})};return Ta.createElement(B,{kind:"secondary",size:"medium",icon:ft(Nu,{integration:t}),title:`Install the ${t.title} integration to supercharge this block`,tooltipPreferredPlacement:"left",onPress:r},"Install ",t.title)}var S4=Am.StyleSheet.create({overlayInstallButton:{position:"absolute",bottom:g.medium,right:g.medium}});s();var no=y(C());s();var Rc=y(C()),Ms=y(z());function Tc(o){let{node:t,editor:e,isSelected:n}=o,{readOnly:r}=e,[,i]=P(A),a=q.useInteractiveState(),c=t.fragments.get(Jx),l=c?.isEmpty;return c?(n||a.hovered)&&!r||!l?Rc.createElement(Ms.View,{style:[tL.editableCaption,g.Padding.smallTop],...a.events},l?Rc.createElement(Ms.View,{style:[Ms.StyleSheet.absoluteFill,S.alignCenter,S.justifyContentCenter,g.Padding.smallTop]},Rc.createElement(Ms.Text,{style:[i.Italic,i.Body,i.textMuted]},"Write a caption")):null,Rc.createElement(Cr.Provider,{value:"caption"},Rc.createElement(gc.Provider,{value:"center"},Rc.createElement(jn,{fragment:"caption"})))):r?null:Rc.createElement(Ms.View,{style:[g.Padding.smallTop,tL.blankPlaceHolder],...a.events}):null}var tL=Ms.StyleSheet.create({editableCaption:{position:"relative",textAlign:"center"},blankPlaceHolder:{height:g.small+sg.xsmall}});s();var Xo=y(C());s();var Ec=y(C());function Qy(o){let{children:t}=o,[e,n]=Ec.useState(!1);return Ec.useEffect(()=>{n(!0)},[]),e?Ec.createElement(Ec.Fragment,null,t):null}s();var ev=y(C());function oL(o){let{children:t,statusCode:e}=o,n=gP();return n.staticContext&&(n.staticContext.statusCode=e),ev.createElement(ev.Fragment,null,t)}var tv=Xo.forwardRef(function(t,e){let{data:n,readOnly:r,onDataChange:i}=t,{integrationBlocksRemote:a,integrationBlocksContext:c}=Xo.useContext(Be),l=Xo.useRef(null);if(!c)throw new Error("Expected integration blocks context to be defined");let u={integrationId:n.integration,componentId:n.block,props:n.props,action:n.action,context:c},[d,p]=_P(async f=>l.current?.dispatchAction(f));return Xo.useImperativeHandle(e,()=>({getPaletteGroups:()=>{let{result:f}=a.readCacheState(u);return f&&f.element.type==="block"?d(f.element):[]}})),Xo.createElement(Xo.Fragment,null,p,Xo.createElement(Xo.Suspense,{fallback:Xo.createElement(Pr,null)},Xo.createElement(Qy,null,Xo.createElement(IP,{ref:l,mode:"block",remote:a,input:u,security:{firstPartyDomains:[ca.integrations.domain]},onPropsChange:f=>{r||i({...n,action:void 0,props:f})}}))))});function nL(o){let{node:t,editor:e}=o,{readOnly:n}=e,r=t.data.toFrozenObject(),{integrationsBlocksSubscription:i}=no.useContext(Be),a=no.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),c=no.useMemo(()=>{let d=Cu(a,r.url);return d?gu.createIntegrationBlockDataForLinkUnfurl(d.integrationKey,d.block.id,r.url):null},[a,r.url]),l=yi(e,t.key),u=()=>et(e,t.key,l?[l]:[]);return c?no.createElement(fe,{palette:u,...o},no.createElement(Mt,{...o},no.createElement(no.Suspense,{fallback:no.createElement(Pr,null)},no.createElement(tv,{data:c,readOnly:n,onDataChange:d=>{e.change(p=>{p.setNodeByKey(t.key,{type:ni,data:d})})}})))):no.createElement(fe,{palette:u,...o},no.createElement(Mt,{...o},no.createElement(no.Suspense,{fallback:no.createElement(Pr,null)},no.createElement(Jy,{url:r.url,readOnly:n}))),no.createElement(Tc,{...o}))}s();var Lt=y(C());s();var Cd=y(C());function rL(o){let{integrationName:t}=o,[{result:e}]=Lu([Qf(t)]);return e?Cd.createElement(w4,{integration:e}):Cd.createElement(di,{kind:"default",title:`Integration ${t} no longer exist or has been unpublished.`})}function w4(o){let{integration:t}=o,e=ug(Ro(Nu,{integration:t},[t])),{navigate:n}=Se(),{logAnalyticsEvent:r}=Cd.useContext(Be);return Cd.createElement(di,{kind:"default",icon:e,title:`Integration ${t.title} is not configured. Install it to get started.`,actions:[{label:"Install",onPress:()=>{r({type:"edit_open_integration",integration:t.name,reason:"empty"}),n({overlay:{type:"integrations",integration:t.name}})}}]})}function iL(o){let{node:t,editor:e}=o,{readOnly:n}=e,r=Lt.useRef(null),{integrationsBlocksSubscription:i}=Lt.useContext(Be),{navigate:a}=Se(),c=Lt.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),l=t.data.toFrozenObject(),u=yi(e,t.key),d=()=>et(e,t.key,[...r?.current?.getPaletteGroups()||[],{key:"integration",commands:()=>{let[{result:f}]=Mu([Qf(l.integration)]);return f?[{key:"integration.settings",icon:ft(Nu,{integration:f}),title:`Configure ${f.title}`,trigger:()=>{a({overlay:{type:"integrations",integration:f.name}})}}]:[]}},...u?[u]:[]]);return Lt.useMemo(()=>YO(c,l.integration,l.block),[c,l.integration,l.block])?Lt.createElement(fe,{...o,palette:d},Lt.createElement(Mt,{...o},Lt.createElement(Lt.Suspense,{fallback:Lt.createElement(Pr,null)},Lt.createElement(tv,{ref:r,data:l,readOnly:n,onDataChange:f=>{e.change(m=>{m.setNodeByKey(t.key,{data:f})})}})))):Lt.createElement(fe,{...o,palette:d},Lt.createElement(Mt,{...o},Lt.createElement(Lt.Suspense,{fallback:Lt.createElement(Pr,null)},l.url?Lt.createElement(Jy,{url:l.url,readOnly:n}):n?Lt.createElement(_m,null):Lt.createElement(rL,{integrationName:l.integration}))))}s();var ov=y(ii()),aL=y(C());function sL(o){return aL.useMemo(()=>({onKeyDown:(t,e)=>{let{value:n}=e;if(!n.isCollapsed||!(0,ov.default)("enter",t))return;let{startBlock:r,selection:i}=n;if(!he.isTextRange(i)||!r||r.type!==de||!i.isAtEndOf(r))return;let{text:a}=r;if(!oi(a))return;let c=n.document.getParent(r.key);if(!c||!_e(c,pn))return;let l=_f(a,{sortQueryParameters:!1}),u=C4(l,o);e.replaceNodeByKey(r.key,u).collapseToStartOf(u)}}),[o])}var cL={onKeyDown:(o,t,e)=>{if((0,ov.default)("enter",o)||(0,ov.default)("shift+enter",o)){let{value:n}=t,{startBlock:r,document:i}=n;if(!r||r.type!==de)return;let a=i.getFragmentParent(r.key);if(a?.object!=="fragment")return;let c=i.getParent(a.key);if(!c||!c.isBlock()||![pn,Li,Qa,Ja].includes(c.type))return;let l=c.type===Li?i.getParent(c.key):c;return ht(t,l),t}}};function C4(o,t){let e=t(),n=Cu(e,o);return n?gu.createIntegrationBlockForLinkUnfurl(n.integrationKey,n.block.id,o):zf.createEmbedBlock(o)}s();var oC=y(C());s();var nv=y(C());function lL(o){let{editor:t}=o,e=nv.useCallback((n,r)=>$u(a=>{t.change(c=>{c.insertInlineAtRange(r(),Vf.createEmoji(a)).focus()})},{withSearch:!1}),[t]);return nv.createElement(jy,{...o,getPalette:e})}s();var Bm=y(C());function uL(o){let{editor:t,node:e,parent:n}=o,r=Bm.useRef(null),i=ce(r),a=Fy(n.object==="block"?n:null),c=sh(()=>{i.open($u(l=>{t.change(u=>{u.setNodeByKey(e.key,{data:{code:l}})})}))});return Bm.createElement(vd,{ref:r,...o,onPress:t.readOnly?void 0:c},Bm.createElement(Eo,{code:e.data.get("code"),size:a}))}var dL="emojiContext",k4=/(^|\s):(\w*)$/,pL={renderMark:O4,renderNode:P4,decorateValue:x4};function x4(o){let{selection:t}=o,e=_4(o),n=[];return e!==null&&he.isTextRange(t)&&n.push(he.create({anchorKey:t.startKey,anchorOffset:t.startOffset-e.length-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:dL,data:{value:e}}],isAtomic:!0})),n}function O4(o){let{mark:t}=o;switch(t.type){case dL:return oC.createElement(lL,{...o})}}function P4(o){let{node:t}=o;switch(t.type){case Sp:return oC.createElement(uL,{...o})}}function _4(o){if(!o.isCollapsed)return null;let{document:t,startText:e,startBlock:n,selection:r}=o;if(!he.isTextRange(r)||!e||!n||!is({document:t,block:n},Sp))return null;let{startOffset:i}=r,a=e.text.slice(0,i),c=k4.exec(a);return c==null?null:c[2]}s();var kt=y(C()),kd=y(z());function I4(o,t,e){for(let[n,r]of o.entries())if(r===e){let i=t.getNode(n);return i?{key:n,id:r,node:i}:null}}function mL(o){let t=q.useInteractiveState(),{node:e,isFocused:n,editor:r}=o,[,i]=P(R4),[,a]=P(A),{sections:c,selected:l}=kt.useContext(fi),u=Ye(),d=kt.useRef(""),[p,f]=kt.useState("unset");kt.useEffect(()=>{d.current="",f("unset")},[l]);let m=l&&c.get(e.key)===l,h=kt.useMemo(()=>!m&&!!I4(c,e,l),[m,c,e,l]);m&&(d.current=l);let{selection:b}=r.value,w=he.isTextRange(b)&&b.hasEdgeIn(as.getBodyFragment(e)),k=n&&he.isTextRange(b)&&!b.hasFocusInFragmentOf(e),x=u||(p==="unset"?m||h||l===d.current:p==="expanded"),O=x?v.ChevronDown:v.ChevronRight,_=()=>{x&&w&&r.change(Ze=>{Ze.collapseToStartOf(as.getTitleFragment(e))}),f(x?"collapsed":"expanded")},{anchoredBlockId:I,onAnchoredBlockPress:N,anchorElement:T,anchoredBlockInteractiveState:E}=Uy(e,{accessibilityLabel:"Direct link to expandable block",onBlockPress:_}),L=kt.useId(),V={id:L,controls:{accessibilityRole:"button",accessibilityExpanded:x,accessibilityControls:`expandable-body-${L}`,accessibilityLabelledBy:`expandable-title-${L}`},chevron:{accessibilityRole:"presentation"},body:{accessibilityRole:"region",accessibilityLabelledBy:`expandable-title-${L}`}},j=e.fragments.get(ts),oe=j?.nodes.first(),H=vi(oe,j||e),J=R.ICON_M,ie=H.paddingTop+(er(oe)-J)/2;return kt.createElement(fe,{...o},kt.createElement(Mt,{...o,isFocused:k},kt.createElement(kd.View,{...t.events,style:[i.expandable,t.active&&i.expandableActive],nativeID:I},kt.createElement(kd.View,{style:[S.directionRow,g.Padding.mediumRight],...E.events},kt.createElement(q.TouchableOpacity,{onPress:N,style:[g.Padding.mediumHorizontal,S.directionRow,S.justifyContentCenter,{paddingTop:ie}],...V.controls},kt.createElement(O,{size:J,style:[t.active?a.primary:a.textMuted],...V.chevron})),kt.createElement(kd.View,{style:[S.flex1,{paddingTop:H.paddingTop,paddingBottom:x?g.small:H.paddingBottom}],nativeID:`expandable-title-${L}`},kt.createElement(Cr.Provider,{value:"expandableTitle"},kt.createElement(jn,{fragment:ts}))),kt.createElement(kd.View,{style:{paddingTop:ie}},T)),kt.createElement(kd.View,{style:[i.expandableBody,!x&&i.hidden],nativeID:`expandable-body-${L}`,...V.body},kt.createElement(jn,{fragment:nl})))))}var R4=F.create({hidden:{visibility:"hidden",height:0,padding:0,overflow:"hidden"},expandable:o=>({breakInside:"avoid",borderWidth:1,borderColor:o.colors.border.main,borderRadius:o.radiuses.large}),expandableActive:o=>({borderColor:o.colors.primary.main}),expandableBody:{padding:g.medium,paddingLeft:g.medium+R.ICON_M+g.medium,paddingTop:0}});s();var nC=y(ii());var fL={onKeyDown:T4};function T4(o,t){if(!Po(t.value.selection)){if((0,nC.default)("mod+enter",o))return M4(o,t);if((0,nC.default)("enter",o))return E4(o,t)}}function E4(o,t){let e=as.getCurrentExpandable(t.value);if(e&&e.fragment?.type===ts)return t.collapseToStartOf(e.expandable.getFragmentByKey(nl)).focus()}function M4(o,t){let{value:e}=t,n=as.getCurrentExpandable(t.value);if(!(!n||!e.isCollapsed))return o.preventDefault(),ht(t,n.expandable),t}s();var hL=y(ii()),yL=y(C());s();var rv=y(C());function gL(o){let{mark:t,node:e,offset:n,attributes:r,children:i,editor:a}=o,{value:c}=t.data.toObject(),l=rv.useRef(null),u=Et(),d=he.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+1}),p=Ey({anchorRef:l,range:d,editor:a}),f=ce(l,{onClose:()=>{f.close(),!u.isOpen()&&a.change(m=>m.focus())}});return ah(()=>{!f.opened&&a.value.isFocused&&f.open(ne({groups:[{key:"inline-controls",commands:p.filter(m=>c.includes(m.key))}]}))},150),rv.createElement(yt,{ref:l,...r},i)}var L4=[du,Sp,mn,Mf],vL="inlineControlsContext",D4=/(^|\s)\/$/,bL={renderMark:A4,decorateValue:N4,onKeyDown:(o,t,e)=>{if(SL(e.value)&&(0,hL.default)("esc",o))return t}};function N4(o){let{selection:t}=o,e=SL(o),n=[];return Ft(t)&&e!==null&&n.push(he.create({anchorKey:t.startKey,anchorOffset:t.startOffset-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:vL,data:{value:e}}],isAtomic:!0})),n}function A4(o){let{mark:t}=o;switch(t.type){case vL:return yL.createElement(gL,{...o})}}function SL(o){if(!o.isCollapsed)return null;let{startText:t,startBlock:e,selection:n}=o;if(!Ft(n)||!t||!e)return null;let{startOffset:r}=n,i=t.text.slice(0,r);if(D4.exec(i)==null)return null;let c=L4.filter(l=>is({document:o.document,block:e},l));return c.length===0?null:c}s();var Ea=y(C()),xL=y(z());s();var nn=y(C()),Mc=y(z());function wL(o){let{resolved:t,node:e,editor:n,children:r}=o,i=at(),a=nn.useRef(null),c=nn.useRef(null),[l,u]=nn.useState(!1),[d,p]=nn.useState(!1),[,f]=P(CL),m=ye(),h=l||d,b=q.useInteractiveState({hoverDelay:500,onHoverIn:()=>{u(!0)},onHoverOut:()=>{u(!1)}}),w=q.useInteractiveState({onHoverIn:()=>{p(!0)},onHoverOut:()=>{p(!1)}});js({opened:h,closeOnClick:!1,closeOnScroll:!0,onClose:()=>{u(!1),p(!1)}},c);let k=ce(a),x=()=>{n.change(_=>{_.unwrapInlineByKey(e.key)})},O=()=>{k.open(kn(_=>{n.change(I=>{I.setDataByKey(e.key,["ref"],_)})},{...i,document:n.value.document},m))};return nn.createElement(ha,{ref:c,anchorRef:a,wrapper:li,opened:h,updateOnScroll:!1,anchor:({ref:_})=>r(_,{...b.events,style:k.opened?f.linkBeingEdited:null})},nn.createElement(Mc.View,{style:[Mc.StyleSheet.absoluteFill],...w.events},nn.createElement(S1,{kind:"tooltip",preferredAlignment:"start"},nn.createElement(Mc.View,null,nn.createElement(B4,{resolved:t,onPressEdit:O,onPressRemove:x})))))}function B4(o){let{resolved:t,onPressEdit:e,onPressRemove:n}=o,r=t.icon||t.secondaryIcon,[,i]=P(CL);return nn.createElement(Mc.View,{style:[S.directionRow,S.alignCenter,g.Padding.xsmall]},nn.createElement(Mc.View,{style:[i.buttonWrapper,S.directionRow]},nn.createElement(B,{title:"Edit link",icon:r,size:"small",kind:"default_inverted",onPress:e,style:S.flex1},t.title)),nn.createElement(Mc.View,null,nn.createElement(B,{title:"Remove link",kind:"default_inverted",icon:v.Trashcan,size:"small",onPress:n})))}var CL=F.create({buttonWrapper:{maxWidth:200},linkBeingEdited:o=>({backgroundColor:o.colors.background.standout})});var W4=q.createInteractiveComponent(yt);function OL(o){return Ea.createElement(Ea.Suspense,{fallback:Ea.createElement(PL,{...o,resolved:null})},Ea.createElement(F4,{...o}))}function F4(o){let{node:t}=o,{ref:e}=t.data.toFrozenObject(),n=$e(e);return Ea.createElement(PL,{...o,resolved:n})}var kL=q.createInteractiveHandle("link");function PL(o){let{node:t,attributes:e,children:n,resolved:r,editor:i}=o,{readOnly:a}=i,[,c]=P(A),l=(u,d={})=>Ea.createElement(q.TouchableOpacity,{ref:u,handle:kL,...r?yc(r):{},...d,style:[z4.wrapper,d.style]},Ea.createElement(W4.Child,{...e,descendantOf:kL,hoverStyle:[c.primaryStandout,c.Underline],inactiveStyle:c.primary},n));return a||!r?l():Ea.createElement(wL,{resolved:r,editor:i,node:t},l)}var z4=xL.StyleSheet.create({wrapper:{display:"inline"}});s();var _L=y(C());function IL(o){let t=at(),e=ye(),{logAnalyticsEvent:n}=o;return _L.useMemo(()=>({onPaste:(r,i,a)=>{let c=Pu(r);if(!((c.type==="text"||c.type==="html")&&typeof c.text=="string"&&(oi(c.text)||Nx(c.text))))return;let l=c.text,{value:u}=i;u.isCollapsed&&i.insertText(l).extend(-l.length);let d={kind:"url",url:l};i.wrapInline({type:mn,data:{ref:d}});let p=i.value.inlines.filter(m=>m.type===mn&&m.data.has("ref")&&Zf(m.data.get("ref"),d)===!1);i.collapseToEnd();let f=$f(l);return f&&Rp(()=>jf(f,t,{hiveClient:e}),null).then(m=>{m&&a.change(h=>{p.forEach(b=>{let w=h.value.document.getByKey(b.key);w&&h.setDataByKey(w.key,["ref"],m)})})}),n(Nm(r,"link")),i}}),[t,e])}s();var av=y(C());s();var RL=y(C());var iv=RL.createContext(Vt);function TL(o){let{node:t,children:e,attributes:n}=o;return av.createElement(fe,{...o},av.createElement(pe,{tag:t.type===Vt?"ol":"ul",...n},av.createElement(iv.Provider,{value:t.type},e)))}s();var wi=y(C()),sv=y(z());function EL(o){let{node:t,parent:e,children:n,editor:r}=o,{readOnly:i}=r,[,a]=P(A),c=wi.useContext(iv),l=t.data.toFrozenObject(),u=c===lo,d=c===Vt,p=c===uo,f=wi.useMemo(()=>et(r,t.key,[{key:"list",commands:[{key:"ul",type:1,title:"Unordered List",icon:v.ListUnordered,selected:e.type===lo,trigger:()=>{r.change(w=>{w.setNodeByKey(e.key,{type:lo})})}},{key:"ol",type:1,title:"Ordered List",icon:v.ListOrdered,selected:e.type===Vt,trigger:()=>{r.change(w=>{w.setNodeByKey(e.key,{type:Vt})})}},{key:"tasks",type:1,title:"Tasks List",icon:v.ListTasks,selected:e.type===uo,trigger:()=>{r.change(w=>{w.setNodeByKey(e.key,{type:uo})})}}]}]),[r,t.key,e.type]),m=w=>{r.change(k=>{st.checkTaskItem(k,t.key,w)})},h=er(t.nodes.first()),b=w=>w<10?g.medium:w<100?g.large:"auto";return wi.createElement(fe,{tag:"li",palette:f,contentProps:{style:Wm.blockListItem},...o},p&&wi.createElement(pe,{editable:!1,style:[Wm.blockListItemPrefix,{height:h}]},wi.createElement(ec,{value:!!l.checked,onValueChange:m,readOnly:i,size:R.ICON_M})),u&&wi.createElement(pe,{editable:!1,style:[Wm.blockListItemPrefix,{height:h}]},wi.createElement(v.Dot,{size:12,style:a.text})),d&&wi.createElement(yt,{editable:!1,style:[Wm.blockListItemPrefix,{height:h,width:b(e.getChildIndex(t.key)+1)},a.Body,a.text]},V4(e,t)),wi.createElement(sv.View,{style:Wm.blockListItemContent},n))}function V4(o,t){let e=o.data.toFrozenObject(),n=o.getChildIndex(t.key);return`${(e.start||1)+n}.`}var Wm=sv.StyleSheet.create({blockListItem:{position:"relative",display:"flex",flexDirection:"row"},blockListItemPrefix:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:g.small,marginRight:g.small},blockListItemContent:{flex:1}});s();var Fm=y(ii());var q4=(0,Fm.isKeyHotkey)("tab"),G4=(0,Fm.isKeyHotkey)("shift+tab"),H4=(0,Fm.isKeyHotkey)("enter"),K4=(0,Fm.isKeyHotkey)("backspace"),ML={onKeyDown:U4,shouldNodeComponentUpdate:X4};function X4(o,t){if(o.node.type===qo){let{parent:e,node:n}=o,{parent:r,node:i}=t;if(e.object!=="block"||r.object!=="block")throw new Error("Parent of list-item must be a block");if(e.type===Vt&&e.getChildIndex(n.key)!==r.getChildIndex(i.key))return!0}return null}function U4(o,t,e){if(H4(o))return Y4(o,t,e);if(q4(o)||G4(o))return j4(o,t,e);if(K4(o))return $4(o,t,e)}function Y4(o,t,e){if(o.shiftKey)return;let{value:n}=t,r=st.getCurrentItem(n);if(!r)return;if(o.preventDefault(),n.isExpanded&&t.delete(),r.isEmpty)return st.getItemDepth(n)>1?st.decreaseItemsDepth(t):st.unwrapList(t);st.splitListItem(t);let i=st.getListForItem(t.value,r);if(i&&i.type===uo){let a=t.value.document.getNextSibling(r.key);return a?st.checkTaskItem(t,a.key,!1):t}return t}function $4(o,t,e){let{value:n}=t,{startOffset:r,selection:i}=n;if(!he.isTextRange(i)||i.isExpanded||r>0)return;let a=st.getCurrentItem(n);if(a&&i.isAtStartOf(a))return o.preventDefault(),st.unwrapList(t)}function j4(o,t,e){return o.shiftKey?(o.preventDefault(),st.decreaseItemsDepth(t)):(o.preventDefault(),st.increaseItemsDepth(t))}s();s();var DL=y(ii());function Z4(o){let{transform:t}=o,e=o.onHotkey?(0,DL.isKeyHotkey)(o.onHotkey):()=>!1,n=o.onInput?J4(o.onInput):()=>!1,r=o.ignoreIn?LL(o.ignoreIn):null,i=o.onlyIn?LL(o.onlyIn):null;function a(p,f,m){if(!e(p))return;let h=u(f.value);if(h)return l(h,p,f,m),!0}function c(p,f,m){if(p.inputType!=="insertText"||!n(p))return;let h=u(f.value);if(h)return l(h,p,f,m),!0}function l(p,f,m,h){let{value:b}=m,{startOffset:w}=b,k=0;return d(p,w).forEach(O=>{m.moveOffsetsTo(O.start,O.end).delete(),k+=O.total}),w-=k,m.moveOffsetsTo(w,w),m.call(t,f,p,h),f.preventDefault(),!0}function u(p){if(p.isExpanded)return null;let{startBlock:f}=p;if(!f)return null;let{type:m}=f;if(i&&!i(m)||r&&r(m))return null;let{startText:h,startOffset:b}=p;Ne(h);let{text:w}=h,k=null,x=null;return o.after&&(k=w.slice(b).match(o.after)),o.before&&(x=w.slice(0,b).match(o.before)),o.before&&o.after&&!x&&(k=null),o.before&&o.after&&!k&&(x=null),!x&&!k?null:(k&&(k[0]=k[0].replace(/\s+$/,"")),x&&(x[0]=x[0].replace(/^\s+/,"")),{before:x,after:k})}function d(p,f){let{before:m,after:h}=p,b=[],w=0;if(m){let k=m[0],x=0,O=0;m.slice(1,m.length).forEach(_=>{_!==void 0&&(O=k.indexOf(_,O),x=f-w+O-k.length,b.push({start:x,end:x+_.length,total:_.length}),w+=_.length,O+=_.length)})}if(h){let k=h[0],x=0,O=0;h.slice(1,h.length).forEach(_=>{_!==void 0&&(O=k.indexOf(_,O),x=f-w+O,b.push({start:x,end:x+_.length,total:0}),w+=_.length,O+=_.length)})}return b}return{onKeyDown:a,onBeforeInput:c}}function J4(o){if(typeof o=="string")return t=>!!(t.data&&t.data===o);if(typeof o=="function")return o;if(o instanceof RegExp)return t=>!!(t.data&&t.data.match(o));throw new Error("Invalid onInput option")}function LL(o){if(Array.isArray(o))return t=>o.includes(t);if(typeof o=="string")return t=>t===o;if(typeof o=="function")return o;throw new Error("Invalid matcher type")}var Kr=Z4;var Q4=Kr({onlyIn:[de],onInput:"*",before:/\*\*[^*]+?\*$/,transform:(o,t,e)=>{if(xd(o.value,[Xn,po])||cv(o.value))return o.insertText("*");let n=e.before[0].slice(2).slice(0,-1);return zm(o.value,n,[po,Un])?o.insertText("*"):o.deleteBackward(n.length+3).addMark(Xn).insertText(n).removeMark(Xn)}}),eF=Kr({onlyIn:[de],onInput:"_",before:/\b_[^_]+?$/,transform:(o,t,e)=>{if(xd(o.value,[Un,po])||cv(o.value))return o.insertText("_");let n=e.before[0].slice(1);return zm(o.value,n,[Xn,po])?o.insertText("_"):o.deleteBackward(n.length+1).addMark(Un).insertText(n).removeMark(Un)}}),tF=Kr({onlyIn:[de],onInput:"~",before:/\~\~[^*]+?\~$/,transform:(o,t,e)=>{if(xd(o.value,[Ar,po])||cv(o.value))return o.insertText("~");let n=e.before[0].slice(2).slice(0,-1);return zm(o.value,n,[Ar,po])?o.insertText("~"):o.deleteBackward(n.length+3).addMark(Ar).insertText(n).removeMark(Ar)}}),oF=Kr({onlyIn:[de],onInput:/`/,before:/`[^`]+?$/,transform:(o,t,e)=>{if(xd(o.value,po))return o.insertText("`");let n=e.before[0].slice(1);return zm(o.value,n,[Xn,Un])?o.insertText("`"):o.deleteBackward(n.length+1).addMark(po).insertText(n).removeMark(po)}}),nF=Kr({onlyIn:[de],onInput:"$",before:/\$\$[^*]+?\$$/,transform:(o,t,e)=>{if(xd(o.value,po)||cv(o.value))return o.insertText("$");let n=e.before[0].slice(2).slice(0,-1);if(zm(o.value,n,[Xn,po,Un]))return o.insertText("$");o.deleteBackward(n.length+3);let r=il.createMathInline(n);return o.insertInline(r),o}}),rF=Kr({onlyIn:[de],onHotkey:"enter",before:/^\$\$$/,transform:(o,t,e)=>{let n=il.createMathBlock();return AL(o,n)}}),iF=Kr({onlyIn:[de],onInput:" ",before:/^(-|\*)$/,transform:o=>NL(o.value)?o:st.wrapInList(o,lo)}),aF=Kr({onlyIn:de,onInput:" ",before:/^(([1-9]{1}\d*)\.)$/,transform:(o,t,e)=>{if(NL(o.value))return o;let n=parseInt(e.before[1],10);return st.wrapInList(o,Vt,n&&n!==1?{start:n}:{})}}),sF=Kr({onlyIn:de,onInput:"]",before:/^(\[[ xX])$/,transform:(o,t,e)=>{let n=st.getCurrentList(o.value);if(n)o.setNodeByKey(n.key,{type:uo});else{if(!o.value.isEmpty)return o.insertText(`${e.before[0]}]`);o=st.wrapInList(o,uo)}let r=st.getCurrentItem(o.value),i=e.before[0][1]!==" ";return r?st.checkTaskItem(o,r.key,i):o}}),cF=Kr({onlyIn:de,onHotkey:"enter",before:/^(```\S*\s*)$/,transform:(o,t,e)=>{let[n]=e.before,r=n.replace(/^```/,"").trim(),i=bg(r),a=Qt.createCodeBlock("",{syntax:i.key});return AL(o,a)}}),lF=Kr({onlyIn:de,onInput:" ",before:/^(>)$/,transform:(o,t,e)=>o.wrapBlock(qt)});function NL(o){let{startBlock:t,document:e}=o;return t?e.getParent(t.key)?.type===qo:!1}var uF=[Ae,Fe,Je],dF=Kr({onlyIn:de,onInput:" ",before:/^(#{1,3})$/,transform:(o,t,e)=>{let[n]=e.before,r=n.length,i=uF[r-1];return o.setBlocks({type:i})}});function xd(o,t){let e=typeof t=="string"?[t]:t;return o.marks.some(n=>e.includes(n.type))}function zm(o,t,e){let{startText:n,startOffset:r}=o;if(!n)return!1;let i=r-t.length,{leaf:a}=n.searchLeafAtOffset(i);return a?xd(a,e):!1}function cv(o){let{startText:t,startOffset:e}=o;if(!t)return!1;let n=t.text.slice(0,e);return!(!n||n.match(/^[^`]+$/))}function AL(o,t){let{startBlock:e}=o.value;if(e)return o.insertBlock(t).collapseToStartOf(t).removeNodeByKey(e.key)}var BL=[Q4,eF,tF,oF,iF,aF,sF,dF,nF,rF,cF,lF];s();var rC=y(C());s();var Ci=y(C()),Od=y(z());var lv={[de]:R.ICON_S,[Ae]:R.ICON_XL,[Fe]:R.ICON_L,[Je]:R.ICON_S};function WL(o){let{node:t,attributes:e,isSelected:n,parent:r}=o,i=t.data.toFrozenObject();return Ci.createElement(Ci.Suspense,{fallback:Ci.createElement(pF,{selected:n,attributes:e,parentType:r.type})},Ci.createElement(mF,{reference:i.ref,selected:n,attributes:e,parentType:r.type}))}function pF(o){let{selected:t,attributes:e,parentType:n}=o,[,r]=P(FL),i=t?M.textColor.primaryStandout:M.text.base,a=lv[n||de]||lv[de];return Ci.createElement(Od.View,{style:[r.mention,t&&r.mentionSelected],...e},Ci.createElement(Ce,{size:a,style:i}))}function mF(o){let{reference:t,selected:e,attributes:n,parentType:r}=o,[,i]=P(FL),[,a]=P(A),c=q.useInteractiveState(),l=$e(t),u=lv[r||de]||lv[de],d=e?a.primaryStandout:a.text;return Ci.createElement(Od.TouchableOpacity,{...c.events,...yc(l)},Ci.createElement(pe,{tag:"span",style:[i.mention,c.hovered&&i.mentionHovered,e&&i.mentionSelected,S.directionRow,S.alignCenter],...n},l.secondaryIcon?Ci.createElement(l.secondaryIcon,{size:u,style:[d,i.mentionIcon]}):null,Ci.createElement(Od.Text,{style:[d,a.Bold]},l.title)))}var FL=F.create({mention:o=>({borderRadius:o.radiuses.medium,paddingHorizontal:g.xsmall/2}),mentionHovered:o=>({backgroundColor:o.colors.background.muted}),mentionSelected:o=>({backgroundColor:o.colors.primary.muted}),mentionIcon:{marginRight:g.xsmall/2}});s();var Pd=y(C());function zL(o){let{editor:t}=o,{logAnalyticsEvent:e}=Pd.useContext(Be),n=at(),r=ye(),i=Pd.useCallback((a,c)=>kn(u=>{t.change(d=>{d.insertInlineAtRange(c(),{type:wp,data:{ref:u},isVoid:!0}).focus()}),e({type:"edit_page_document_insert_mention",kind:u.kind})},{...n,document:t.value.document},r,{withSearch:!1,accept:a.symbol==="@"?["user"]:["url","anchor","page","space","collection","file"]}),[t,r]);return Pd.createElement(jy,{...o,getPalette:i})}var VL="mentionContext",fF=/(^|\s)(@|#)(\w*)$/,qL={renderMark:yF,renderNode:hF,decorateValue:gF};function gF(o){let{selection:t}=o,e=vF(o),n=[];return he.isTextRange(t)&&e!==null&&n.push(he.create({anchorKey:t.startKey,anchorOffset:t.startOffset-e.value.length-1,focusKey:t.startKey,focusOffset:t.startOffset,marks:[{type:VL,data:{value:e.value,symbol:e.symbol}}],isAtomic:!0})),n}function hF(o){let{node:t}=o;switch(t.type){case wp:return rC.createElement(WL,{...o})}}function yF(o){let{mark:t}=o;switch(t.type){case VL:return rC.createElement(zL,{...o})}}function vF(o){if(!o.isCollapsed)return null;let{document:t,startText:e,startBlock:n,selection:r}=o;if(!he.isTextRange(r)||!e||!n||!is({document:t,block:n},wp))return null;let{startOffset:i}=r,a=e.text.slice(0,i),c=fF.exec(a);return c?{symbol:c[2],value:c[3]}:null}s();var ki=y(C()),Vm=y(z());s();function uv(o,t,e=[]){return et(o,t,[{key:"types",commands:()=>{let n=o.value.document.assertBlock(t),r=o.value.document.getParent(t);if(!r)return[];let i=a=>{o.change(c=>{c.setNodeByKey(n.key,{type:a}).focus()})};return[{key:de,title:"Paragraph",type:1,selected:n.type===de,icon:v.Paragraph,trigger:()=>{i(de)}},_e(r,Ae)?{key:Ae,title:"Heading 1",type:1,selected:n.type===Ae,icon:v.Heading1,trigger:()=>{i(Ae)}}:null,_e(r,Fe)?{key:Fe,title:"Heading 2",type:1,selected:n.type===Fe,icon:v.Heading2,trigger:()=>{i(Fe)}}:null,_e(r,Je)?{key:Je,title:"Heading 3",type:1,selected:n.type===Je,icon:v.Heading3,trigger:()=>{i(Je)}}:null].filter(ue)}},...e])}function GL(o){let{editor:t,node:e,parent:n,children:r,attributes:i}=o,[,a]=P(A),[,c]=P(wF),l=ki.useContext(gc),u=ki.useContext(Cr),d=SF(n),p=[a.Body,a.text,c[l],c[u]],f=ki.createElement(Vm.Text,{selectable:!0,style:p},r),m=ki.useMemo(()=>uv(t,e.key),[t,e.key]),h=Cp(e);return bF(n)?!t.readOnly&&h?ki.createElement(E0,{...o,placeholder:d},f):ki.createElement(fe,{...o,palette:m},f):ki.createElement(pe,{...i},!t.readOnly&&d&&h&&Wf(n)?ki.createElement(pe,{editable:!1,pointerEvents:"none",style:[Vm.StyleSheet.absoluteFill]},ki.createElement(Vm.Text,{selectable:!0,style:[p,a.textMuted]},d)):null,f)}function bF(o){return o.type===rS||o.type===nS||o.type===nl?!0:!(o.object==="fragment"||o.type===qo)}function SF(o){return o.type===Qx?"Parameter description (optional)":o.type===rS?"Response description (optional)":o.type===nS?"Operation description (optional)":o.type===ts?"Title":o.type===nl?"Expandable content":o.type===pa?"Annotate this text":o.type===mr?"Tab content":""}var wF=F.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},quote:o=>({color:o.colors.text.mid}),swaggerParameter:o=>({color:o.colors.text.mid,...He.Label}),swaggerResponse:o=>({color:o.colors.text.mid}),caption:o=>({...He.Caption,color:o.colors.text.muted}),expandableTitle:o=>({...He.Heading3,color:o.colors.text.main})});s();var qm=y(ii());var HL={onKeyDown:CF};function CF(o,t){if((0,qm.default)("enter",o)||(0,qm.default)("shift+enter",o))return kF(o,t);if((0,qm.default)("backspace",o))return KL(o,t)}function kF(o,t){let{value:e}=t;if(e.isExpanded)return;let{startBlock:n,startOffset:r,endOffset:i}=e;if(n&&!n.isVoid)if(n.type===de){if((0,qm.default)("shift+enter",o))return t.insertText(`
`)}else{let a=n.text.length;if(r===0&&a===0)return KL(o,t);if(i===a)return o.preventDefault(),t.splitBlock().setBlocks({type:de,data:{}})}}function KL(o,t){let{value:e}=t;if(e.isExpanded||e.startOffset>0)return;let{startBlock:n,startText:r}=e;if(!(!n||!(n.getFirstText()===r))){if(n.type===de){let a=e.document.getParent(n.key);return a&&xe.isSwaggerFragment(a)&&a.getChildIndex(n.key)===0?t:void 0}if(!(n.type===fr||n.type===da))return o.preventDefault(),n.isVoid?t.removeNodeByKey(n.key):t.setNodeByKey(n.key,{type:de,isVoid:!1})}}s();var dv=y(C()),XL=y(z());s();var Lc=JSON.parse('{"quote":"quote_5I59h","hint":"hint_rnF2j","iconWrapper":"iconWrapper_NJPs7","icon":"icon_abDxV","info":"info_-xeCE","warning":"warning_5BM-F","danger":"danger_UUfHb","success":"success_3o6RV"}');function UL(o){let{children:t}=o;return dv.default.createElement(fe,{tag:"blockquote",...o,contentProps:{style:xF.blockQuote}},dv.default.createElement(Y,{style:[M.flex.column,Lc.quote]},dv.default.createElement(Cr.Provider,{value:"quote"},t)))}var xF=XL.StyleSheet.create({blockQuote:{position:"relative",width:"100%"}});s();var Ma=y(C()),pv=y(z());s();var Gm={info:{title:"Info",cssIcon:v.InfoCircle.CSS,icon:v.InfoCircle},warning:{title:"Warning",cssIcon:v.Warning.CSS,icon:v.Warning},success:{title:"Success",cssIcon:v.CheckCircle.CSS,icon:v.CheckCircle},danger:{title:"Danger",cssIcon:v.Alert.CSS,icon:v.Alert}};s();function YL(o,t){let e=["info","warning","danger","success"];return et(o,t,[{key:"levels",commands:()=>{let n=o.value.document.assertBlock(t),r=n.data.get("style");return e.map(i=>({key:i,type:1,selected:r===i,title:Gm[i].title,icon:Gm[i].icon,trigger:()=>{o.change(a=>{a.setNodeByKey(n.key,{data:{style:i}})})}}))}}])}function $L(o){let{node:t,children:e,editor:n}=o,{readOnly:r}=n,i=t.data.toFrozenObject(),a=Gm[i.style],c=()=>{let h=["info","warning","danger","success"],b=i.style===h[h.length-1]?h[0]:h[h.indexOf(i.style)+1];n.change(w=>w.setNodeByKey(t.key,{data:{style:b}}))},l=Ma.useMemo(()=>YL(n,t.key),[n,t.key]),u=t.nodes.first(),d=vi(u,t),p=R.ICON_L,f=d.paddingTop+(er(u)-p)/2,m=a.cssIcon;return Ma.createElement(fe,{...o,palette:l,contentProps:{style:[OF.blockHint]}},Ma.createElement(Y,{style:[Lc.hint,M.flex.row,Lc[i.style]]},Ma.createElement(Y,{style:[Lc.iconWrapper,M.flex.row,M.flex.justifyContentCenter],inlineStyle:{paddingTop:f,"--icon-size":`${p}px`}},r?Ma.createElement(m,{style:Lc.icon}):Ma.createElement(pv.TouchableOpacity,{onPress:c},Ma.createElement(m,{style:Lc.icon}))),Ma.createElement(Y,{style:[M.flex.column,M.flex.flex1]},e)))}var OF=pv.StyleSheet.create({blockHint:{position:"relative",width:"100%"}});s();var mv=y(ii());var ZL={onKeyDown:RF},PF=(0,mv.isKeyHotkey)("backspace"),_F=(0,mv.isKeyHotkey)("enter"),IF=(0,mv.isKeyHotkey)("mod+enter");function RF(o,t,e){let{value:n}=t;if(!Po(n.selection)){if(PF(o)&&n.isCollapsed)return TF(o,t);if(_F(o))return EF(o,t);if(IF(o))return MF(o,t);if(o.key===">")return LF(o,t)}}function TF(o,t){let{value:e}=t,{startOffset:n,selection:r}=e;if(!he.isTextRange(r)||n>0)return;let i=iC(e);if(!i)return;let a=r.anchorKey?i.getClosestBlock(r.anchorKey):null;if(!(!a||!r.isAtStartOf(a))&&i.nodes.size===1)return o.preventDefault(),t.unwrapBlock(i.type)}function EF(o,t){let{value:e}=t,{startBlock:n,selection:r}=e;if(!he.isTextRange(r))return;let i=iC(e);if(i&&!(n&&n.text.length!==0))return o.preventDefault(),t.unwrapBlock(i.type)}function MF(o,t){let{value:e}=t,n=iC(e);if(n)return o.preventDefault(),ht(t,n),t}function LF(o,t){let{value:e}=t,{selection:n}=e;if(he.isTextRange(n)&&!(n.startOffset!==0||n.isCollapsed))return o.preventDefault(),t.wrapBlock(qt),t}function iC(o,t=null){let{document:e,selection:n}=o;if(!he.isTextRange(n)||(t??=o.startBlock,!t))return null;let r=e.getAncestors(t.key);if(!r)return null;let i=r.reverse().find(jL);return i&&jL(i)?i:null}function jL(o){return"type"in o&&(o.type===qt||o.type===co)}s();var aC=y(C());s();var Xr=y(C()),Ls=y(z());var _d=2,DF=250;function JL(o){let{selection:t}=o,[e,n]=Xr.useState(!1),r={"data-cursor":!0},i=t.data.toFrozenObject(),a=Ra(i.clientId),c={backgroundColor:a.base};return Xr.createElement(pe,{tag:"span",editable:!1,...r,style:[Id.cursor]},Xr.createElement(Zs,{wrapper:li,onOpen:()=>n(!0),onClose:()=>n(!1),anchor:({ref:l,open:u,close:d})=>Xr.createElement(q.WithInteractiveState,{onHoverIn:u,onHoverOut:d},({events:p})=>Xr.createElement(Ls.View,{ref:l,...p,style:[Id.carret,c]},Xr.createElement(Ls.View,{style:[Id.carretTop,c]})))},Xr.createElement(Ls.View,{style:[Id.bubble,e&&Id.bubbleVisible]},Xr.createElement(Ls.View,{style:[Id.bubbleContent,c,g.Padding.smallHorizontal]},Xr.createElement(si,{theme:{color:Ca(a.base)}},Xr.createElement(NF,{userName:i.userDisplayName}))))))}function NF({userName:o}){let[,t]=P(A);return Xr.createElement(Ls.Text,{numberOfLines:1,style:[t.Caption,t.text]},o)}var Id=Ls.StyleSheet.create({cursor:{position:"absolute"},carret:{userSelect:"none",width:_d,top:3,height:"1.2em"},carretTop:{position:"absolute",top:-_d*3,left:-_d,borderRadius:100,width:_d*3,height:_d*3},bubble:{position:"absolute",left:-_d,top:"-1.2em",width:DF,opacity:0,transition:`opacity ${ya.TRANSITION_DURATION_LONG}ms ease`},bubbleVisible:{opacity:1},bubbleContent:{position:"absolute",borderRadius:R.RADIUS_M}});s();var QL=y(C());function eD(o){let{children:t,selection:e}=o,n=e.data.toFrozenObject(),r=Ra(n.clientId);return QL.createElement(yt,{style:[{backgroundColor:r.faded}]},t)}s();var tD="focus",oD="range";var nD={renderSelection:AF};function AF(o){let{type:t}=o;switch(t){case tD:return aC.createElement(JL,{...o});case oD:return aC.createElement(eD,{...o})}}s();var Ge=y(C());s();var Xi=y(C());function rD(o){let{editor:t,node:e}=o,n=ye(),r=at(),i=Xi.useMemo(()=>et(t,e.key,[{key:"edit",commands:[{key:"edit_ref",title:"Edit link target",icon:v.PageLink,trigger:()=>kn(a=>{t.change(c=>{c.setDataByKey(e.key,["ref"],a)})},r,n,{accept:["page","space","collection"]})}]}]),[t,e.key,r]);return Xi.createElement(fe,{...o,palette:i},Xi.createElement(Mt,{...o},Xi.createElement(Xi.Suspense,{fallback:Xi.createElement(xa,{icon:Ce,title:""})},Xi.createElement(BF,{contentRef:e.data.get("ref")}))))}function BF(o){let{contentRef:t}=o,e=$e(t);return Xi.createElement(xa,{title:e.title,icon:e.icon||e.secondaryIcon,...yc(e)})}s();var Dc=y(C()),iD=y(z());function aD(o){let{ancestors:t,node:e,children:n,attributes:r}=o,i=e.data.toFrozenObject(),{blockLayoutComponent:a}=Dc.useContext(Be),c=Ye(),l=ud({ancestors:t,node:e.blockNodes.first(),diff:!0});return Dc.createElement(a,{renderMode:l.renderMode},Dc.createElement(Is.View,{isPDF:c},Dc.createElement(Y,{style:[M.position.relative,M.flex.column,l.blockStyle.style],inlineStyle:l.blockStyle.inlineStyle},Dc.createElement(iD.View,{...r},l.diffLine?Dc.createElement(Dy,{diff:i,...l.diffLine}):null,n))))}s();var sD=y(C()),cD=y(z());function lD(o){let{mark:t,attributes:e,children:n}=o;return sD.createElement(yt,{style:WF[t.type],...e},n)}var WF=cD.StyleSheet.create({[Df]:{color:Rl.added},[Nf]:{color:Rl.deleted,textDecorationLine:"line-through"},[Af]:{color:Rl.modified}});s();var fv=y(C());s();var uD=JSON.parse('{"divider":"divider_osV0o"}');function dD(o){let{attributes:t}=o;return fv.createElement(fe,{...o},fv.createElement(Mt,{...o},fv.createElement(Y,{as:"hr",style:uD.divider,...t})))}s();var qe=y(C());s();var rn=y(C()),Hm=y(z());s();var No=y(C());function pD(o){let{onClose:t}=o,[e,n]=yn(),r=No.useRef(null),[i,a]=No.useState(!1),c=Go(i),l=Go(t),u=Go(e),d=No.useCallback(()=>{u.current||n(()=>l.current())},[l,u]);return No.useEffect(()=>Ag("editor-block-modal"),[]),Fr({[ze.EDITOR_SAVE]:p=>{d()}},"editor-block-modal",[]),No.useEffect(()=>{let p=null,f=m=>{m.key==="Escape"&&(c.current?(p&&clearTimeout(p),d()):(a(!0),p=setTimeout(()=>{a(!1)},2e3)))};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f),p&&clearTimeout(p)}},[c,d]),No.useEffect(()=>{i?r.current?.open():r.current?.close()},[i,r]),No.createElement(B,{tooltipRef:r,icon:v.X,disabled:e,onPress:d,title:i?No.createElement(No.Fragment,null,"Press ",No.createElement(hn,{inverted:!0,shortcut:"ESC"})," again to save & close"):No.createElement(No.Fragment,null,"Save & Close ",No.createElement(hn,{inverted:!0,shortcut:ze.EDITOR_SAVE})),tooltipPreferredPlacement:"left"})}s();s();s();var mD=yg("05ab87fa95f4c5a09220a4e1067733011498ba1a47c8b145f5ec78dcb9ffe75d",()=>import("https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/chunks/excalidraw.lazy-TQXFV473.min.js"));var Nl=mD;async function fD(o){let{default:{exportToSvg:t}}=await Nl.load(),e=await t({appState:{exportEmbedScene:!0},elements:o.elements,files:o.files});return new XMLSerializer().serializeToString(e)}s();var sC=qn({getValue:async o=>{if(!o)return{elements:[],files:{}};let{default:{loadFromBlob:t}}=await Nl.load(),n=await(await fetch(o)).blob(),r=await t(n,null,null);return{elements:r.elements,files:r.files}}}),gD=qn({getValue:async({downloadURL:o,theme:t})=>{let{default:{exportToSvg:e}}=await Nl.load(),n=await sC.readAsync(o),r=await e({appState:{viewBackgroundColor:"transparent",exportWithDarkMode:t==="dark"},elements:n.elements,files:n.files});return r.style.maxWidth="100%",r.removeAttribute("width"),r.removeAttribute("height"),r}});function hD(o){let{blockData:t,onClose:e}=o,[,n]=P(VF),r=rn.useRef(),i=cl(ya.fade),a=cl(ya.pop,{onEnd:()=>{r.current?.refresh()}});return rn.createElement(hr,null,rn.createElement(Hm.View,{ref:i,style:[F.absoluteFill,n.modalBackdrop]},rn.createElement(Hm.View,{ref:a,style:n.modalBody},rn.createElement(rn.Suspense,{fallback:rn.createElement(To,{size:"large"})},rn.createElement(FF,{blockData:t,onClose:e,excalidrawRef:r})))))}function FF(o){let{excalidrawRef:t,blockData:e,onClose:n}=o,r=ls(),i=fo(),{Excalidraw:a,useExcalidrawStyle:c}=Nl.loadSuspense().default;c();let u=$e(e.ref).resolution?.extra?.file,{result:d,error:p}=sC.readSafe(u?.downloadURL||null),f=async()=>{let m=t.current;if(!m){n(void 0);return}let h=m.getSceneElements(),b=m.getFiles();if(d&&d.elements&&!zF(d.elements,h)){n(void 0);return}let w=await fD({elements:h,files:b});n(new File([new Blob([w])],u?.name||"file.excalidraw.svg",{type:"image/svg+xml"}))};return rn.useEffect(()=>{p&&i.notify({kind:"danger",icon:v.Warning.CSS,title:"Error loading drawing",details:p.expose?p.message:"An unexpected error occurred while loading the drawing"})},[p]),rn.createElement(Hm.View,{style:[F.absoluteFill]},rn.createElement(a,{ref:t,initialData:{...d,scrollToContent:!0},theme:r.color,UIOptions:{canvasActions:{export:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!1,changeViewBackgroundColor:!1,clearCanvas:!1}},renderTopRightUI:(m,h)=>rn.createElement(Hm.View,null,rn.createElement(pD,{onClose:f}))}))}function zF(o,t){return o.length!==t.length?!0:o.some((e,n)=>{let r=t[n];return e.version!==r.version})}var VF=F.create({modalBackdrop:o=>({backgroundColor:o.colors.backdrop.background}),modalBody:o=>({position:"absolute",top:g.large,bottom:g.large,right:g.xlarge,left:g.xlarge,borderRadius:R.RADIUS_L,backgroundColor:o.colors.background.main,overflow:"hidden"})});s();var ro=y(C()),Al=y(z());var vD=ro.forwardRef(function(t,e){let{readOnly:n,contentRef:r}=t,i=ro.useRef(null),a=ls(),c=td(),[,l]=P(bD),[u,d]=ro.useState(null),f=$e(r).href,m=u;return r&&!f&&(m=new Ti.NotFound("Drawing file not found, the file may have been deleted")),ro.useImperativeHandle(e,()=>({openInGallery:()=>{c.open([{url:f}])}})),ro.useEffect(()=>{let h=!0;return gD.readAsync({downloadURL:f,theme:a.color}).then(b=>{let w=i.current;w&&b&&h&&(w.innerHTML="",w.appendChild(b.cloneNode(!0)))},b=>{h&&d(b)}),()=>{h=!1}},[f,a.color]),m?ro.createElement(yD,{kind:"danger",icon:v.Warning,message:m.expose?m.message:"An error occurred while rendering this drawing file."}):ro.createElement(Al.View,{style:l.wrapper},f?ro.createElement("div",{ref:i},ro.createElement("img",{src:f,style:{width:"100%"}})):ro.createElement(yD,{icon:v.EditDrawing,message:n?"Drawing file not found":"Double click to start sketching out your thoughts."}))});function yD(o){let{icon:t,message:e,kind:n="default"}=o,[,r]=P(bD),[,i]=P(A);return ro.createElement(Al.View,{style:[r.fallback,g.Padding.large,S.alignCenter,S.justifyContentCenter]},ro.createElement(Al.View,null,ro.createElement(t,{size:R.ICON_XL,style:n==="danger"?i.danger:i.textMuted})),ro.createElement(Al.View,{style:g.Margin.mediumTop},ro.createElement(Al.Text,{style:[n==="danger"?i.danger:i.textMuted,i.Body]},e)))}var bD=F.create({wrapper:{},fallback:o=>({height:200,borderWidth:1,backgroundColor:o.colors.background.main,borderColor:o.colors.border.mid,borderRadius:R.RADIUS_M,borderStyle:"dashed"})});var SD=q.createInteractiveHandle("drawing-block");function wD(o){let{node:t,editor:e,isSelected:n}=o,{readOnly:r}=e,i=Et(),{uploadFiles:a,updateFile:c}=qe.useContext(Be),[l,u]=qe.useState(null),[d,p]=yn(),f=qe.useRef(),m=qe.useRef(null),h=t.data.toFrozenObject(),b=()=>{w.current?.close(),u("edit")},w=qe.useRef(null),k=qe.useRef(null);qe.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);let x=sh(b),O=T=>{r?m.current?.openInGallery():(k.current&&clearTimeout(k.current),x(T)?w.current?.close():(w.current?.open(),k.current=setTimeout(()=>{w.current?.close()},1e3)))},_=T=>{f.current=T?URL.createObjectURL(T):void 0,T&&p(async()=>{let E=h.ref;h.ref&&E?await c(E,T):E=(await a([T]))[0],Zf(E,h.ref)&&e.change(L=>{L.setDataByKey(t.key,["ref"],E)})}),u(null)},I=async()=>{let[T]=await i.prompt({title:"Replace drawing file",acceptURL:!1,accept:"drawings"});T?.kind==="file"&&e.change(E=>{E.insertDataByKey(t.key,["ref"],T)})},N=et(e,t.key,[{key:"types",commands:[{key:"edit",title:"Edit drawing",icon:v.EditDrawing,trigger:()=>{b()}},{key:"files",title:"Replace file\u2026",icon:v.Replace,trigger:()=>{I()}}]}]);return qe.createElement(qe.Fragment,null,qe.createElement(fe,{...o,palette:N},qe.createElement(Mt,{...o},qe.createElement(q.TouchableOpacity,{onPress:O},qe.createElement(q.View,{handle:SD},qe.createElement(qe.Suspense,{fallback:qe.createElement(Pr,null)},qe.createElement(vD,{ref:m,readOnly:r,contentRef:f.current&&d?{kind:"url",url:f.current}:h.ref})),r?null:qe.createElement(si,{theme:{color:"dark"}},qe.createElement(ui,{ref:w,preferredPlacement:"left",tooltip:"Double click to edit!"},(T,E)=>qe.createElement(qF,{ref:E,saving:d,isSelected:n,palette:N})))))),qe.createElement(Tc,{...o})),qe.createElement(vt,null,l==="edit"?qe.createElement(hD,{blockData:h,onClose:_}):null))}var qF=qe.forwardRef(function(t,e){let{isSelected:n,saving:r,palette:i}=t,[,a]=P(GF);return qe.createElement(q.View.Child,{ref:e,descendantOf:SD,style:[a.blockToolbar,S.directionRow],inactiveStyle:n||r?Ke.visible:Ke.hidden,activeStyle:Ke.visible},r?qe.createElement(B,{size:"small",icon:Ce},"Saving"):i.groups.map(c=>Array.isArray(c.commands)?c.commands:[]).flat().map((c,l,u)=>qe.createElement(B,{key:c.key,title:c.title,size:"small",icon:c.icon,style:[l<u.length-1?g.Margin.smallRight:null],onPress:()=>{c.trigger?.(i)}})))}),GF=F.create({blockToolbar:o=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:R.RADIUS_M,backgroundColor:o.colors.background.mid,...o.shadows.base})});s();var La=y(C());function CD(o){let{node:t,editor:e}=o,n=Et(),r=async()=>{let[a]=await n.prompt({title:"Replace file"});a?.kind==="file"&&e.change(c=>{c.insertDataByKey(t.key,["ref"],a)})},i=et(e,t.key,[{key:"types",commands:()=>[{key:"files",title:"Replace file\u2026",icon:v.Paperclip,trigger:()=>{r()}}]}]);return La.createElement(fe,{...o,palette:i},La.createElement(Mt,{...o},La.createElement(La.Suspense,{fallback:La.createElement(xa,{icon:Ce,title:""})},La.createElement(HF,{...o,onReplace:r}))),La.createElement(Tc,{...o}))}function HF(o){let{node:t,editor:e,onReplace:n}=o,{ref:r}=t.data.toFrozenObject(),a=$e(r).resolution?.extra?.file,c=()=>{a?ps(Ys(a.downloadURL)):e.readOnly||n()},l=Ro(nd,{file:a},[a]);return La.createElement(xa,{onPress:c,icon:l,title:a?a.name:"File has been deleted",subtitle:a?am(a.size):void 0,details:a?jR(a):void 0})}s();var On=y(C());s();var Nc=y(C()),kD=y(z());function xD(o){let{node:t,editor:e,onClose:n}=o,r=Gf(t.text),[i,a]=Nc.useState(()=>t.data.get("id")||""),c=u=>{let d=Gf(u);d.length===u.length?a(d):a(u)},l=()=>{e.change(u=>{i?u.setDataByKey(t.key,["id"],Gf(i)):u.removeDataByKey(t.key,["id"])}),n()};return Nc.createElement(ho,{size:"small",title:"Edit heading anchor",footer:Nc.createElement(kD.View,{style:[S.directionRow,S.justifyContentEnd]},Nc.createElement(B,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Close"),Nc.createElement(B,{kind:"primary",onPress:l},"Save")),onClose:n},Nc.createElement(to,{autoFocus:!0,size:"large",icon:v.Hash,label:"Anchor",labelDescription:"Edit this anchor to customize a nice looking url for this heading.",value:i,onChangeText:c,onSubmit:l,placeholder:r}))}var KF=X.createResponsiveComponent(pe);function OD(o){let{editor:t,node:e,parent:n,children:r}=o,[,i]=P(A),[,a]=P(UF),[c,l]=On.useState(null),u=On.useContext(gc),d=On.useContext(Cr),p=On.useMemo(()=>uv(t,e.key,[{key:"edit",commands:[{key:"edit",title:"Edit anchor",icon:v.Link,trigger:()=>{l("edit")}}]}]),[t,e.key]),{anchorElement:f,anchoredBlockId:m,anchoredBlockInteractiveState:h,onAnchoredBlockPress:b}=Uy(e,{accessibilityLabel:"Direct link to heading",anchorIconSize:jF[e.type]}),w=n.type===qt;return On.createElement(On.Fragment,null,On.createElement(fe,{...o,palette:p},On.createElement(KF,{tag:XF(e.type),nativeID:m,onClick:w?()=>{}:()=>b(),...h.events,style:[S.directionRow,S.alignEnd]},On.createElement(X.Text,{selectable:!0,mobileStyle:[$F[e.type]],desktopStyle:[YF[e.type]],nativeID:`text-${m}`,style:[i.text,a[u],a[d]]},r,w?null:f))),On.createElement(vt,null,c==="edit"?On.createElement(xD,{node:e,editor:t,onClose:()=>l(null)}):null))}function XF(o){switch(o){case Ae:return"h2";case Fe:return"h3";case Je:return"h4";default:throw new Error(`invalid node type (${o}) for heading`)}}var UF=F.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},caption:{},quote:{},swaggerParameter:{}}),YF={[Ae]:mo.Heading1,[Fe]:mo.Heading2,[Je]:mo.Heading3},$F={[Ae]:mo.Heading2,[Fe]:mo.Heading3,[Je]:mo.Body},jF={[Ae]:R.ICON_L,[Fe]:R.ICON_S,[Je]:R.ICON_XXS};s();var gv=y(C());function PD(o){let{node:t,children:e,style:n,attributes:r}=o,{sections:i}=gv.useContext(fi),a=i.get(t.key);return gv.createElement("div",{id:a,...r,style:n},e)}s();var cC=y(C()),_D=y(z());function ID(o){let{node:t,editor:e,children:n}=o,{align:r="center"}=t.data.toFrozenObject(),i=Et(),a=yi(e,t.key),c=u=>{e.change(d=>{d.insertDataByKey(t.key,["align"],u)})},l=et(e,t.key,[{key:"types",commands:()=>[{key:"files",title:"Add images\u2026",icon:v.Image,trigger:()=>{i.prompt({accept:"images",title:"Select image",acceptURL:!0}).then(u=>{e.change(d=>{u.forEach(p=>{d.appendNodeByKey(t.key,Io.createImageBlock(p))})})})}}]},{key:"align",commands:[{key:"left",type:1,title:"Left align",selected:r==="left",icon:v.AlignTextLeft,trigger:()=>c("left")},{key:"center",type:1,title:"Center",selected:r==="center",icon:v.AlignTextCenter,trigger:()=>c("center")},{key:"right",type:1,title:"Right align",selected:r==="right",icon:v.AlignTextRight,trigger:()=>c("right")}]},...a?[a]:[]]);return cC.createElement(fe,{palette:l,...o},cC.createElement(X.View,{style:[S.directionRow,r==="center"&&S.justifyContentCenter,r==="left"&&S.justifyContentStart,r==="right"&&S.justifyContentEnd,ZF.imagesWrapper],mobileStyle:[S.wrap,S.justifyContentCenter]},n))}var ZF=_D.StyleSheet.create({imagesWrapper:{columnGap:g.medium,rowGap:g.medium}});s();var me=y(C()),Ba=y(z());s();var Ui=y(C()),hv=y(z());function yv(o){let{node:t,editor:e,onClose:n}=o,[r,i]=Ui.useState(()=>Io.getImageAltText(t)||""),a=()=>{e.change(c=>{c.insertDataByKey(t.key,["alt"],r)}),n()};return Ui.createElement(ho,{title:"Set image alt text",onClose:n,footer:Ui.createElement(hv.View,{style:[S.directionRow,S.justifyContentEnd]},Ui.createElement(B,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Cancel"),Ui.createElement(B,{kind:"primary",onPress:a},"Save"))},Ui.createElement(hv.View,{style:[g.Margin.largeBottom]},Ui.createElement(hv.View,{style:[g.Margin.mediumBottom]},Ui.createElement(wg,null,"This will be read out by screen readers when the image is encountered. Describe the image in detail \u2013 it's how visually impaired readers know what's in front of them.")),Ui.createElement(to,{autoFocus:!0,size:"large",value:r,placeholder:"Edit alt text",onChangeText:i,onSubmit:a})))}s();var vv=y(C());function bv(o){let{editor:t,node:e,style:n}=o,r=vv.useRef(null),i=ce(r),a=Et(),c=async(u,d,p=!1)=>{let[f]=await a.prompt({title:d,accept:"images",acceptURL:!0});f&&t.change(m=>{m.insertDataByKey(e.key,[u],f),p&&m.removeDataByKey(e.key,["refDark"]),e.object==="block"&&(m.removeDataPathByKey(e.key,["height"]),m.removeDataPathByKey(e.key,["width"]))})},l=()=>{t.change(d=>d.focus());let u=e.data.toFrozenObject();i.open(ne({groups:[{key:"replace",commands:[{key:"all",icon:v.Replace,title:"Replace image",subtitle:"For both light and dark modes",trigger:()=>{c("ref","Replace image",!0)}}]},{key:"byTheme",commands:u.refDark?[{key:"light",icon:v.ThemeLight,title:"For Light mode",trigger:()=>{c("ref","Replace image for light mode")}},{key:"dark",icon:v.ThemeDark,title:"For Dark mode",trigger:()=>{c("refDark","Replace image for dark mode")}}]:[{key:"dark",icon:v.ThemeDark,title:"Add image for Dark mode",trigger:()=>{c("refDark","Add image for dark mode")}}]}]}))};return vv.createElement(Gt,{ref:r,active:i.opened,size:"small",label:"Replace image",tooltipTitle:"Replace image",leadingIcon:v.Replace.CSS,trailingIcon:i.opened?v.ChevronUp.CSS:v.ChevronDown.CSS,onPress:l,style:n,iconOnly:!0})}s();s();s();var Ir=y(C());var JF=q.createInteractiveComponent(v.EmojiReaction);function RD(o){let{analyticsContext:t,page:e,size:n,readOnly:r=!0}=o,i=Ir.useRef(null),[,a]=P(A),[c,l]=yn(),u=Yt(),d=async p=>{Ne(u),i.current?.close(),p!==e.emoji&&(await l(()=>u.change(f=>{f.updatePage(e.id,{emoji:p})})),ee({...t,...p?{type:"edit_pick_page_emoji",pageKind:e.type,emoji:p}:{type:"edit_remove_page_emoji",pageKind:e.type}}))};return r?e.emoji?Ir.createElement(Eo,{code:e.emoji,size:n}):null:Ir.createElement(Zs,{ref:i,wrapper:li,anchor:({ref:p,opened:f,toggle:m})=>Ir.createElement(q.TouchableOpacity,{ref:p,onPress:m},c?Ir.createElement(Ce,{size:n}):Ir.createElement(Ir.Fragment,null,e.emoji?Ir.createElement(Eo,{code:e.emoji,size:n}):Ir.createElement(JF.Child,{size:n,style:f?a.textMid:a.textMuted,activeStyle:a.textMid})))},Ir.createElement(vn,{kind:"wide",preferredAlignment:"middle"},Ir.createElement(Sh,{onPick:d,onRemove:e.emoji?()=>d(void 0):void 0})))}s();var re=y(C()),Nd=y(z());s();var TD=JSON.parse('{"pageCoverBleedFull":"pageCoverBleedFull_eqtqd"}');s();var MD=y(C());var ED=new Set;function LD(o){let{hivePage:t,analyticsContext:e}=o;return MD.useCallback(()=>{let n=`${t.contentId}/${t.branchId}/${t.pageId}`;ED.has(n)||(ED.add(n),ee({...e,page:t.pageId,type:"edit_page_document_start",collaborators:t.dataSync.presences.length}))},[t,e])}var Yo={};dx(Yo,{COMMENTS_COLUMN_EXPANDED_WIDTH:()=>wv,MAX_PAGE_OUTLINE_WIDTH:()=>Ac,PAGE_BODY_DESKTOP_H_PADDING:()=>Dt,PAGE_BODY_DESKTOP_WIDTH:()=>Sv,PAGE_BODY_MAX_WIDTH:()=>Rr,PAGE_BODY_MOBILE_H_PADDING:()=>Uo,PAGE_OUTLINE_WIDTH:()=>dC,PUBLIC_DESKTOP_HEADER_HEIGHT:()=>pC,PUBLIC_MOBILE_HEADER_HEIGHT:()=>QF,SPACE_HEADER_HEIGHT:()=>lC,TOC_DESKTOP_WIDTH:()=>uC,columnsWidthThreadhold:()=>Km,getPageOutlineWrapperWidth:()=>mC,getToCWrapperDesktopWidth:()=>DD,pageSwitchThreadhold:()=>Bc});s();var lC=R.L,Rr=750,Dt=110,Uo=g.medium,Sv=Rr+2*Dt,uC=300,wv=300,dC=220,Ac=300,pC=R.XL,QF=R.L;function Km(o,t=0){let e=t+uC+Sv+dC;return o===2||(e+=wv-Uo),e}function Bc(o=0){return o+Sv}function DD(o){let t=`(100vw - ${Sv}px) / 2 - ${o||0}px`;return`max(${uC}px, calc(${t}))`}function mC(o,t){let e=`100vw - ${DD(o)} - ${Rr}px - ${Dt}px - ${typeof t>"u"?Dt:t||0}px - ${o||0}px`;return`max(${dC}px, calc(${e}))`}s();var Cv=y(C());var kv=Cv.createContext({baseRevision:void 0,pages:[],diffs:new Map,diffMode:null});s();var Bl=y(C());var ND=Bl.createContext({pages:[],setContentDiffPage:o=>{}});s();var Wl=y(C());var AD="hive-rtc-beta-notification-dismissed",BD=!1;function WD(o){let t=CI(o),e=pP(),n=fo(),r="rtc-toaster",i=t.filter(a=>a.data.userId&&a.data.userId!==e?.uid);Wl.useEffect(()=>{BD||i.length===0||(BD=!0,!vr.get(AD)&&n.notify({id:r,kind:"info",icon:v.Users.CSS,title:"Realtime Collaboration (Beta)",details:Wl.createElement(Wl.Fragment,null,Wl.createElement(gn,null,"Explore live editing with your team. Keep in mind, it's still in Beta so you may encounter some bugs. We appreciate your patience and feedback.")),timeout:1e4,actions:[{label:"Got it, dismiss",onPress:()=>{vr.set(AD,!0),n.close(r)}}]}))},[i.length])}s();var Pn=y(C()),Td=y(z());s();var zD=y(C());s();var FD=JSON.parse('{"commentHalo":"commentHalo_0AauK"}');function fC(o){let{node:t}=o,{screen:e}=Sa(),n=zn(sw);if(!t)return null;let r=e.type==="space"&&e.sideSheet?.type==="comments"?e.sideSheet.node:null;return(n&&n.highlighting&&n.node!==r?n.node:null)===t||r===t?zD.default.createElement(Y,{style:[FD.commentHalo],as:"span",contentEditable:!1}):null}fC.displayName="BlockCommentHalo";s();var Da=y(C()),VD=y(O1());var qD=o=>{let{nodeKey:t,visible:e,buttonSize:n,style:r,shortcutsActive:i}=o,a=Da.useContext(lw),{navigate:c}=Se(),l=Da.useMemo(()=>a(t),[t]),u=(0,VD.useSubscription)(l),d=Da.useMemo(()=>(u??[]).reduce((w,k)=>{let x=Object.values(k.replies).reduce((O,_)=>O+_.count,0);return 1+w+x},0),[u]),p=d>0,f=u?.[0],m=()=>{f&&c({screen:{type:"space",space:f.space,sideSheet:{type:"comments",node:f.node??void 0,comment:f.key}}})},h=()=>{c({screen:{sideSheet:{type:"comments",node:t,context:"post",comment:void 0}}})},b=()=>p&&f?m():h();return Fr(i?{[ze.EDITOR_COMMENT]:b}:{},["editor-selection-collapsed","editor-selection-expanded"],[i,f]),Da.createElement(pe,{editable:!1,style:[e||p?Ke.visible:Ke.hidden,r],"data-hide-on-drag":!0},Da.createElement(T1,{kind:"secondary",size:"small"},Da.createElement(Gt,{leadingIcon:v.Comment.CSS,tooltipTitle:p?`${d} Comment${d>1?"s":""}`:"Comment",onPress:b,size:n,iconOnly:!p,label:p?`${d}`:"Comment"}),p?Da.createElement(Gt,{leadingIcon:v.Plus.CSS,size:n,tooltipTitle:"Leave another comment",label:"Leave another comment",iconOnly:!0,onPress:h}):null))};s();var hC=y(C());s();var gC=JSON.parse('{"blockWrapper":"blockWrapper_y0Ubs","pageWrapper":"pageWrapper_ca2kA"}');function GD(o){let{children:t,style:e}=o;return hC.createElement(Y,{style:[gC.pageWrapper,M.margin.noneVertical,M.margin.autoHorizontal,e]},t)}function Rd(o){let{children:t,style:e}=o;return hC.createElement(Y,{style:[gC.blockWrapper,M.margin.noneVertical,M.margin.autoHorizontal,e]},t)}function ez(o){let{children:t,renderMode:e,isDiffViewEnabled:n,isFullPage:r,isPDF:i,node:a,interactive:c}=o,{desktopSidebarWidth:l}=Pn.useContext(Vi),{customBreakpointsPageBodyStyles:u}=Pn.useMemo(()=>({customBreakpointsPageBodyStyles:{[Km(2,l)]:S.justifyContentCenter}}),[l]);if(e==="unstyled")return Pn.createElement(Td.View,{...c?.events},t);let d=e==="full-width"?Pn.Fragment:Rd;return Pn.createElement(Td.View,{style:[S.flex1,i?HD.pdfContainer:null]},Pn.createElement(d,null,Pn.createElement(X.View,{style:[S.flex1,S.directionRow,r?S.justifyContentCenter:S.justifyContentEnd],mobileStyle:[S.justifyContentCenter],customBreakpointsStyles:u,...c?.events},Pn.createElement(Td.View,{style:[S.flex1]},Pn.createElement(fC,{node:a}),Pn.createElement(X.View,{mobileStyle:[n?HD.pageBodyMobileWithDiff:null]},t)))))}function KD(o){let{isCommentMarginVisible:t,isDiffViewEnabled:e,isFullPage:n}=o,r=Ye();return Pn.useMemo(()=>[i=>Pn.createElement(ez,{...i,isPDF:r,isDiffViewEnabled:e,isCommentMarginVisible:t,isFullPage:n}),r||!t?void 0:qD],[e,n,t,r])}var HD=Td.StyleSheet.create({pdfContainer:{breakInside:"avoid",breakBefore:"auto"},pageBody:{maxWidth:Rr+2*Dt},pageBodyWithComments:{maxWidth:Rr+Dt,paddingRight:0},pageBodyMobileWithDiff:{marginLeft:Uo*2},pageBodyDesktopLeftMargin:{marginLeft:Dt},pageBodyDesktopRightPadding:{paddingRight:Dt},pageBodyMobileLeftMargin:{marginLeft:Uo},pageBodyMobileRightPadding:{paddingRight:Uo},pageBodyPDFLeftMargin:{marginLeft:Uo},pageBodyPDFRightPadding:{paddingRight:Uo}});s();var ge=y(C()),$o=y(z());s();var yC=y(p9()),lt=y(C()),xi=y(z());function XD(o){let{analyticsContext:t,parentPages:e,childPages:n,onClose:r,revision:i,page:a}=o,[,c]=P(nz),[l,u]=yn(),d=Yt(),p=async(f=!0)=>{Ne(d),await u(async()=>{await d.change(m=>{[a,...f?e:[],...f?n:[]].forEach(h=>{m.resolveConflict(h.id)})}),await ee({...t,type:"edit_conflicts_keep_page",pageKind:a.type})}),r()};return lt.createElement(ho,{title:"Keep page",onClose:r,footer:lt.createElement(xi.View,{style:[S.directionRow,S.justifyContentEnd]},lt.createElement(B,{kind:"secondary",onPress:()=>{},style:g.Margin.smallRight,disabled:l},"Cancel"),lt.createElement(Mp,{kind:"secondary",onPress:()=>p(!1),style:g.Margin.smallRight},"Keep only this page"),lt.createElement(Mp,{kind:"merge",onPress:()=>p()},"Keep"))},(0,yC.default)(e)?null:lt.createElement(xi.View,{style:[(0,yC.default)(n)?null:c.parentPages]},lt.createElement(tz,{revision:i,pages:e,onClose:r})),lt.createElement(oz,{revision:i,pages:n,onClose:r}))}function tz(o){let{pages:t,revision:e}=o,{conflicts:n}=e,[,r]=P(A),i=t.length;return t.length?lt.createElement(xi.View,{style:[g.Margin.mediumTop]},lt.createElement(xi.View,{style:[S.directionRow,g.Margin.smallBottom]},lt.createElement(go,{kind:"warning",icon:v.Warning}),lt.createElement(xi.Text,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",i>1?"are":"is"," ",t.length," conflicted parent"," ",lt.createElement(Fi,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",lt.createElement(Fi,{count:i,singular:"it",plural:"all of them"}))),lt.createElement(xi.View,null,t.map(a=>{let c=n?.pages[a.id];return lt.createElement(ds,{key:a.id,layout:"wide",icon:()=>c==="deleted-in-base-subtree-modified-in-head"||c==="deleted-in-head-subtree-modified-in-base"?lt.createElement(go,{kind:"warning",icon:v.Conflict}):lt.createElement(go,{kind:"danger",icon:v.Trashcan}),title:a.title})}))):null}function oz(o){let{pages:t,revision:e}=o,{conflicts:n}=e,[,r]=P(A),i=t.length;return t.length?lt.createElement(xi.View,{style:[g.Margin.mediumTop]},lt.createElement(xi.View,{style:[S.directionRow,g.Margin.smallBottom]},lt.createElement(go,{kind:"warning",icon:v.Warning}),lt.createElement(xi.Text,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",t.length>1?"are":"is"," ",t.length," nested"," ",lt.createElement(Fi,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",lt.createElement(Fi,{count:i,singular:"it",plural:"all of them"}))),lt.createElement(xi.View,null,t.map(a=>{let c=n?.pages[a.id];return lt.createElement(ds,{key:a.id,layout:"wide",icon:()=>c==="deleted-in-base-subtree-modified-in-head"||c==="deleted-in-head-subtree-modified-in-base"?lt.createElement(go,{kind:"warning",icon:v.Conflict}):lt.createElement(go,{kind:"danger",icon:v.Trashcan}),title:a.title})}))):null}var nz=F.create({parentPages:o=>({borderBottomColor:o.colors.border.mid,borderBottomWidth:1,marginBottom:g.large,paddingBottom:g.large})});s();var xt=y(C()),Ur=y(z());s();var Tr=y(C()),xv=y(z());var UD=4;function YD(o){let{space:t,page:e,readOnly:n,...r}=o,[i,a]=Tr.useState(!1),c=bC(t,e),l=vC();if(c.length===0)return null;let u=i?c:c.slice(0,UD),d=c.length-UD,p=!i&&d>0;return Tr.createElement(xv.View,{...r,style:[S.directionRow,S.wrap]},u.map(f=>Tr.createElement(xv.View,{key:f.key,style:[g.Margin.mediumRight,g.Margin.mediumTop]},Tr.createElement(B,{kind:"default",size:"small",icon:v.ArrowDownLeft,onPress:()=>l(f)},f.page.title))),p?Tr.createElement(xv.View,{style:[g.Margin.mediumTop]},Tr.createElement(B,{kind:"grey",size:"small",onPress:()=>a(!0),title:Tr.createElement(Tr.Fragment,null,"Show ",d," more"," ",Tr.createElement(Fi,{count:d,singular:"backlink",plural:"backlinks"}))},`+${d} more`)):null)}function vC(){let{navigate:o}=Se();return Tr.useCallback(t=>{let{page:e,revision:n}=t;if(e.type==="link")return;let r=eo(n,e.id);o({screen:i=>i.type==="space"&&n.contentId===i.space?{page:r}:{type:"space",space:n.contentId,page:r,changeRequest:void 0,revision:void 0}})},[])}function bC(o,t){return rz([{kind:"page",page:t.id},{kind:"page",page:t.id,space:o.key}]).filter(n=>n.page.id!==t.id||n.revision.contentId!==o.key)}function rz(o){let t=o.map(i=>WO(i)),[e]=wa([FO(t)]),n=ye(),r=Tx(e,i=>{let a=Mu([Bi(i.space)])[0]?.result;if(a)return Rx(()=>n.store.getRevision(a.key,a.revision))});return e.map((i,a)=>{let c=r[a];return c?Object.keys(i.pages).filter(u=>Object.keys(i.pages[u].references).some(d=>t.includes(d))).map(u=>({key:`${c.contentId}-${u}`,revision:c,page:c.pages[u]})):null}).filter(ue).flat().sort((i,a)=>i.page.id<a.page.id?-1:i.page.id>a.page.id?1:0)}function Ov(o){let{space:t,analyticsContext:e,page:n,onClose:r,revision:i}=o,[,a]=P(A),c=Yt(),l=async u=>{Ne(c),u&&(await c.change(d=>{d.removePage(n.id,{deleteEmptyGroupParent:!0})}),ee({...e,type:"edit_remove_page",pageKind:n.type})),r()};return xt.createElement(Ap,{title:n.type==="group"?"Delete group":"Delete page",kind:"danger",confirmButtonText:"Delete",onComplete:l},xt.createElement(Ur.View,null,xt.createElement(Ur.Text,{style:[a.Body,a.text]},"Confirming will delete all the content; however, it will still be available in the version history.")),xt.createElement(xt.Suspense,{fallback:null},xt.createElement(iz,{space:t,page:n,onClose:r})),n.type!=="link"?xt.createElement(az,{revision:i,page:n,onClose:r}):null)}function iz(o){let{space:t,page:e,onClose:n}=o,[,r]=P(A),i=vC(),a=bC(t,e);return a.length===0?null:xt.createElement(Ur.View,{style:[g.Margin.mediumTop]},xt.createElement(Ur.View,null,xt.createElement(Ur.Text,{style:[r.Label,r.textMuted]},"Deleting this page will break links in the following ",a.length," pages:")),xt.createElement(Ur.View,{style:[S.directionRow,S.wrap]},a.map(c=>xt.createElement(Ur.View,{key:c.key,style:[g.Margin.smallRight,g.Margin.smallTop]},xt.createElement(B,{kind:"secondary",size:"small",icon:v.ArrowDownLeft,onPress:()=>{n(),i(c)}},c.page.title)))))}function az(o){let{page:t,revision:e,onClose:n}=o,[,r]=P(A),{navigateToPage:i}=hc(),c=ic(e,t.id).map(u=>e.conflicts?.pages[u.id]==="deleted-in-base"?u:null).filter(ue),l=c.length;return l?xt.createElement(Ur.View,{style:[g.Margin.mediumTop]},xt.createElement(Ur.View,{style:[S.directionRow,g.Margin.mediumBottom]},xt.createElement(go,{kind:"warning",icon:v.Warning}),xt.createElement(Ur.Text,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",l>1?"are":"is"," ",c.length," nested"," ",xt.createElement(Fi,{count:Object.keys(c.length).length,singular:"page",plural:"pages"})," ","deleted in the primary content but modified in your change request.",xt.createElement("br",null),"Deleting the current page, you would delete ",l>1?"all of them":"it",".")),xt.createElement(Ur.View,null,c.map(u=>xt.createElement(ds,{key:u.id,layout:"wide",icon:()=>xt.createElement(go,{kind:"danger",icon:v.Trashcan}),title:u.title,buttons:[xt.createElement(B,{size:"medium",kind:"secondary",onPress:()=>{n(),i(e,u.id)}},"Open")]})))):null}function $D(o){let{page:t,document:e,conflictType:n,pageWithComments:r,pageIsDiff:i}=o,a=n===!1,[,c]=P(lz),l=Yt(),[u,d]=yn(),p=fo(),f=Di.getDocumentConflicts(e),m=f.isEmpty(),h=()=>{Ne(l),m&&d(async()=>{await l.change(w=>{w.resolveConflict(t.id)}),l.revision.conflicts||p.notify({kind:"success",icon:v.CheckCircle.CSS,title:"All conflicts have been resolved",details:"You can now merge this change request."})})},b=()=>{switch(n){case"deleted-in-head":case"deleted-in-base":case"deleted-in-base-subtree-modified-in-head":case"deleted-in-head-subtree-modified-in-base":return ge.createElement(cz,{...o,conflictType:n,onPressMarkAsResolved:h,loading:u,hasBeenResolved:a});case!1:case"document-conflict":return ge.createElement(sz,{conflictNodes:f,canBeResolved:m,loading:u,onPressMarkAsResolved:h,hasBeenResolved:a,...o});default:De(n)}};return ge.createElement($o.View,{style:[S.directionRow,S.justifyContentCenter,g.Margin.mediumBottom,c.alert]},ge.createElement($o.View,{style:[S.flex1,r||i?c.alertWithComments:c.alertFullWidth]},ge.createElement($o.View,{style:[S.directionRow,S.alignCenter,g.Padding.mediumVertical,g.Padding.mediumHorizontal,c.alertInner]},b())))}var sz=o=>{let{hasBeenResolved:t,canBeResolved:e,loading:n,conflictNodes:r,onPressMarkAsResolved:i}=o,[,a]=P(A),c=ge.useRef(),l=f=>{let m=Js(f);m&&FI(m)},u=f=>{let h=(c.current?r.findIndex(w=>w.key===c.current):-1)+f;h<0?h=r.size-1:h>=r.size&&(h=0);let b=r.get(h)?.key;b&&(c.current=b,l(b))},d=()=>{u(1)},p=()=>{u(-1)};return ge.createElement($o.View,{style:[S.flex1,S.directionColumn]},ge.createElement($o.View,{style:[S.directionRow]},ge.createElement($o.View,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},t?ge.createElement(go,{kind:"success",size:"large",icon:v.Check}):ge.createElement(go,{kind:"merge",size:"large",icon:v.Conflict})),ge.createElement($o.View,{style:[S.flex1,S.directionColumn]},ge.createElement($o.Text,{style:[a.Label,a.textMid],testID:"conflictBanner.message"},t?"All conflicts with the primary content have been resolved for this page.":ge.createElement(ge.Fragment,null,"This page has ",e?"no":r.size," ","unresolved"," ",ge.createElement(Fi,{count:r.size,singular:"conflict",plural:"conflicts"})," ","with the primary content."," ",e?"Confirm by marking this page as resolved.":"Resolve them by editing this document.")),t?null:ge.createElement($o.View,{style:[S.directionRow,S.wrap]},e?null:ge.createElement($o.View,{style:[S.directionRow,S.wrap,g.Margin.smallBottom]},ge.createElement(B,{style:[g.Padding.noneLeft],size:"medium",rightIcon:v.ChevronUp,onPress:p,testID:"conflictBanner.prevButton"},"Prev"),ge.createElement(B,{size:"medium",rightIcon:v.ChevronDown,onPress:d,style:g.Margin.smallRight,testID:"conflictBanner.nextButton"},"Next")),ge.createElement($o.View,{style:[{marginLeft:"auto"}]},ge.createElement(B,{size:"medium",kind:"secondary",title:e?"Confirm resolution of all conflicts in this page":"You need to first resolve conflicts in the document",disabled:n||!e,icon:n?Ce:v.Check,onPress:i,testID:"conflictBanner.resolveButton"},"Mark as resolved"))))))},cz=o=>{let{hasBeenResolved:t,loading:e,onPressMarkAsResolved:n,page:r,space:i,analyticsContext:a,revision:c,conflictType:l}=o,[u,d]=ge.useState(!1),[p,f]=ge.useState(!1),[,m]=P(A),h=ic(c,r.id).filter(I=>c?.conflicts?.pages[I.id]==="deleted-in-head"||c?.conflicts?.pages[I.id]==="deleted-in-base"),b=()=>{let I="Do you want to keep the modified page or delete it?",N=h.length>1?"pages":"page";switch(l){case"deleted-in-base":return`This page has been deleted in the primary content, but has been modified in this change request. ${I}`;case"deleted-in-head":return`This page has been deleted in this change request, but has been modified in the primary content ${I}`;case"deleted-in-base-subtree-modified-in-head":return`This page has been deleted in the primary content but has ${h.length} conflicted child ${N}. Do you want to keep or delete it?`;case"deleted-in-head-subtree-modified-in-base":return`This page has been deleted in your change request but has ${h.length} conflicted child ${N}. Do you want to keep or delete it?`}},k=(I=>{let N=[];function T(E){let L=fn(c,E.id);L&&c.conflicts?.pages[L.id]&&(N.push(L),T(L))}return T(I),N})(r),x=ic(c,r.id),O=()=>f(!0),_=()=>{if(k.length||x.length){d(!0);return}n()};return ge.createElement(ge.Fragment,null,ge.createElement(ge.Fragment,null,ge.createElement($o.View,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},t?ge.createElement(go,{kind:"success",size:"large",icon:v.Check}):l==="deleted-in-base-subtree-modified-in-head"||l==="deleted-in-head-subtree-modified-in-base"?ge.createElement(go,{kind:"warning",size:"large",icon:v.Conflict}):ge.createElement(go,{kind:"danger",size:"large",icon:v.Trashcan})),ge.createElement($o.View,{style:[S.flex1]},ge.createElement($o.Text,{style:[m.Label,m.textMid],testID:"conflictBanner.message"},t?"All conflicts with the primary content have been resolved for this page.":b())),t?null:ge.createElement($o.View,{style:[g.Margin.mediumLeft,S.directionRow]},ge.createElement($o.View,{style:[g.Margin.mediumLeft,S.directionRow]},ge.createElement(B,{size:"medium",icon:e?Ce:v.Copy,onPress:_,testID:"conflictBanner.keepButton"},"Keep"),ge.createElement(B,{size:"medium",icon:e?Ce:v.Trashcan,onPress:O,testID:"conflictBanner.deleteButton"},"Delete")))),ge.createElement(vt,null,u?ge.createElement(XD,{page:r,revision:c,analyticsContext:a,onClose:()=>d(!1),parentPages:k,childPages:x}):null),ge.createElement(vt,null,p?ge.createElement(Ov,{space:i,page:r,revision:c,analyticsContext:a,onClose:()=>f(!1)}):null))},lz=F.create({alert:o=>({position:"sticky",top:-R.RADIUS_L,right:0,left:0,zIndex:1}),alertInner:o=>({borderRadius:R.RADIUS_L,borderWidth:1,borderColor:o.colors.border.mid,backgroundColor:o.colors.background.main,...o.shadows.tight}),alertFullWidth:{maxWidth:Rr+2*Dt},alertWithComments:{maxWidth:Rr+Dt}});s();var we=y(C()),_n=y(z());var ZD=ch({width:1448,height:240}),dz=q.createInteractiveComponent(ZD.View);function SC(o){let{page:t}=o;return t.cover?we.createElement(we.Suspense,{fallback:we.createElement(pz,null)},we.createElement(mz,{...o,page:t})):null}function pz(o){return we.createElement(_n.View,{style:[Ds.pageCover]},we.createElement(JD,null))}function mz(o){let{page:t,revision:e,readOnly:n,rounded:r,analyticsContext:i}=o,[a,c]=we.useState(!1),l=Et(),u=Yt(),d=Ye(),[p,f]=yn(),m=jD(),h=null;if(t.cover.ref){let V=t.cover.ref.kind==="file"?e.files[t.cover.ref.file]:null;m=(t.cover.ref.kind==="file"?V?Ys(V?.downloadURL):null:t.cover.ref.url)||m,V?.dimensions&&(h=V.dimensions)}let b=t.cover.yPos||0,w=we.useMemo(()=>new _n.Animated.Value(b),[t.id,t.cover.yPos]),k=we.useRef(b);we.useEffect(()=>{let V=w.addListener(({value:j})=>{k.current=j});return()=>{w.removeListener(V)}},[w]);let x=async()=>{Ne(u),c(!1),await u.change(V=>{V.movePageCover(t.id,k.current)}),ee({...i,type:"edit_reposition_cover"})},O=()=>{c(!1),w.flattenOffset(),w.setValue(b)},_=we.useRef(null),I=ce(_),N=we.useCallback(async()=>{Ne(u);let[V]=await l.prompt({title:"Select cover image",accept:"images",acceptURL:!0});V&&(await f(()=>u.change(j=>{j.addPageCover(t.id,V)})),ee({...i,type:"edit_upload_cover"}))},[i,u,t.id]),T=we.useCallback(async()=>{Ne(u),await f(()=>u.change(V=>{V.removePageCover(t.id)})),ee({...i,type:"edit_remove_cover"})},[i,u,t.id]),E=we.useCallback(V=>{Ne(u),u.change(j=>{j.updatePageLayout(t.id,{coverSize:V})}),ee({...i,type:"edit_cover_size",coverSize:V})},[i,u,t.id]),L=we.useMemo(()=>{if(n)return;let V=Fu(t).coverSize;return ne({groups:[{key:"pageCover",commands:[{key:"pageCover.select",icon:v.Image,title:"Select image",trigger:()=>{N()}},{key:"pageCover.reposition",icon:v.ImageSizeBlock,title:"Reposition",trigger:()=>{c(!0)}}]},{key:"pageCoverSize",commands:[{key:"pageCoverSize.full",icon:v.FullWidth,title:"Full width",type:1,selected:V==="full",trigger:()=>E("full")},{key:"pageCoverSize.hero",icon:v.DefaultWidth,title:"Hero width",type:1,selected:V==="hero",trigger:()=>E("hero")}]},{key:"pageCoverDanger",commands:[{key:"pageCoverDanger.remove",icon:v.Trashcan,title:"Remove cover",trigger:()=>T()}]}]})},[i,T,n,N,E,t]);return we.createElement(dz,{style:[Ds.pageCover],isPDF:d},we.createElement(fz,{coverUrl:m,animatedY:w,repositioning:a,rounded:r,isPDF:d,coverFileDimensions:h}),p?we.createElement(JD,null):null,n||d?null:we.createElement(q.View.Child,{style:[Ds.pageCoverButton,S.directionRow],activeStyle:"visible",inactiveStyle:a||I.opened?"visible":"hidden"},a?we.createElement(we.Fragment,null,we.createElement(B,{kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:O},"Cancel"),we.createElement(B,{kind:"primary",size:"medium",onPress:x},"Save")):we.createElement(we.Fragment,null,t.cover?null:we.createElement(B,{icon:v.Image,kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:()=>{N()}},"Change cover"),we.createElement(B,{ref:_,icon:v.MoreVertical,rounded:!0,size:"medium",kind:"secondary",active:I.opened,onPress:()=>{L&&I.open(L)}}))))}function fz(o){let{coverUrl:t,animatedY:e,repositioning:n,isPDF:r,rounded:i,coverFileDimensions:a}=o,c=ai(),l=we.useRef(null),[u,d]=we.useState(a),[p,f]=ZD.useDimensions(),m=u?gz(p,u):0,[,{pageCoverRounded:h}]=P(yz),b=we.useMemo(()=>_n.PanResponder.create({onStartShouldSetPanResponder:(_,I)=>!1,onStartShouldSetPanResponderCapture:(_,I)=>!1,onMoveShouldSetPanResponder:(_,{dx:I})=>n,onMoveShouldSetPanResponderCapture:(_,I)=>!1,onPanResponderGrant:(_,{dx:I})=>{e.extractOffset()},onPanResponderMove:(_,{dy:I})=>{e.setValue(I/m)},onPanResponderTerminationRequest:(_,I)=>!0,onPanResponderRelease:(_,{dy:I})=>{e.flattenOffset()}}),[m,n]),w=u?u.width*m:0,k=u?u.height*m:0,x=(p.height-k)/2,O=!!u&&f;return we.createElement(_n.View,{...b.panHandlers,style:[_n.StyleSheet.absoluteFill,Ds.pageCoverInner,n&&hz.pageCoverRepositioning,i&&h],...O?{testID:"page.cover"}:{}},!r&&we.createElement(_n.View,{style:[Ds.pageCoverOverlay,c.color==="dark"&&Ds.pageCoverOverlayDark,O&&Ds.pageCoverOverlayReady]}),we.createElement(h1,{ref:l,source:{uri:t},loading:"priority",style:[Ds.pageCoverImage,w&&k?{top:r?0:_n.Animated.diffClamp(_n.Animated.add(x,_n.Animated.multiply(e,m)),-(k-p.height),0),left:(p.width-w)/2,width:w,height:k}:{width:"100%",top:e}],onLoad:()=>{d({width:l.current?.width??0,height:l.current?.height??0})}}))}function JD(){return we.createElement(_n.View,{style:Ds.pageCoverLoadingOverlay},we.createElement(Ce,{size:"large"}))}function gz(o,t){let e=o.width/t.width,n=o.height/t.height;return t.height*e<o.height?n:e}var hz=_n.StyleSheet.create({pageCoverRepositioning:{cursor:"grab"}}),yz=F.create({pageCoverRounded:o=>({borderRadius:o.radiuses.xlarge})}),Ds=_n.StyleSheet.create({pageCoverOverlay:{position:"absolute",inset:0,opacity:1,zIndex:1,transitionDelay:"200ms",transition:"opacity 500ms ease-in, z-index 1000ms ease-in",backgroundColor:"rgba(255,255,255,.2)",backdropFilter:"blur(10px)"},pageCoverOverlayDark:{backgroundColor:"rgba(0,0,0,.2)"},pageCoverOverlayReady:{zIndex:-1,opacity:0},pageCover:{position:"relative",width:"100%",height:240},pageCoverInner:{overflow:"hidden"},pageCoverImage:{position:"absolute",left:0,right:0,objectFit:"cover",pointerEvents:"none"},pageCoverButton:{position:"absolute",bottom:g.medium,right:g.medium},pageCoverLoadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:K.GREY_BLUE_LIGHT,justifyContent:"center",alignItems:"center"}});s();var ke=y(C()),Na=y(z());s();var Fl=JSON.parse('{"pageHeaderContainer":"pageHeaderContainer_f8iPF","pageControls":"pageControls_65PGe","hiddenIcon":"hiddenIcon_MYEiw","revealOnHover":"revealOnHover_QTUA-"}');s();var vz=It({key:"pageOptionsAtom",default:null});function Oi(o){let t=zn(vz);return t===null?Fu(o):t.layoutOptions}var Ed={mobile:"MobileMainTitle",desktop:"MainTitle"},bz=X.createResponsiveComponent(Wr),e2e=X.createResponsiveComponent(YD),Sz=X.createResponsiveComponent(yt),t6=ke.memo(function(t){let{space:e,revision:n,page:r,changeRequest:i,readOnly:a,onSubmitDescription:c,analyticsContext:l,withDiff:u,toolbar:d}=t,p=Dg("CUSTOM_FIELDS"),[f,m]=P(A),[,h]=P(wz),b=Ye(),w=ae(),{navigate:k}=Se(),[x,O]=yn(),_=Yt(),I=ke.useRef(null),N=[m.Description,m.textMuted],T=Oi(r),E=async nt=>{Ne(_),await _.change(wt=>{wt.renamePage(r.id,nt)}),ee({...l,type:"edit_page_title",pageKind:r.type})},L=async nt=>{Ne(_),await _.change(wt=>{wt.setPageDescription(r.id,nt)}),ee({...l,type:"edit_page_description",pageKind:r.type})},V=nt=>{nt.nativeEvent.key==="Enter"&&(nt.preventDefault(),I.current&&I.current.focus())},j=nt=>{nt.nativeEvent.key==="Enter"&&(nt.preventDefault(),c&&c())},oe=()=>{O(async()=>{Ne(_),await _.change(nt=>{nt.addPageCover(r.id)}),ee({...l,type:"edit_add_cover"})})},H=!T.title,J=!T.description,ie=H&&J||!H,Ze=H&&!J,pt=[Fl.pageControls,Fl.revealOnHover,M.margin.smallTop,M.flex.row,M.gap.xsmallColumnGap];return ke.createElement(Y,{style:[M.position.relative,M.flex.column,a&&!p?M.padding.xlargeTop:Fl.pageHeaderContainer,H&&J?null:M.margin.largeBottom]},a?p?ke.createElement(Y,{style:pt},ke.createElement(QD,{style:[g.Padding.noneLeft]})):null:ke.createElement(Y,{style:pt},ke.createElement(B,{kind:"default",size:"xsmall",style:[g.Padding.noneLeft],icon:v.Options,onPress:()=>k({screen:{sideSheet:{type:"page"}}})},"Page options"),p?ke.createElement(QD,null):null,Bu(r)?null:ke.createElement(B,{kind:"default",size:"xsmall",icon:x?Ce:v.Image,disabled:x,onPress:oe},"Page cover")),!a&&(H||J)?ke.createElement(Y,{style:[Fl.revealOnHover,M.margin.smallTop,M.gap.smallColumnGap]},H?ke.createElement(Y,{style:[M.flex.alignCenter,M.gap.xsmallColumnGap]},ke.createElement(v.EyeOff.CSS,{style:[Fl.hiddenIcon]}),ke.createElement(gn,{style:[M.text.label,M.textColor.muted]},"Page title hidden")):null,J?ke.createElement(Y,{style:[M.flex.alignCenter,M.gap.xsmallColumnGap]},ke.createElement(v.EyeOff.CSS,{style:[Fl.hiddenIcon]}),ke.createElement(gn,{style:[M.text.label,M.textColor.muted]},"Page description hidden")):null):null,ke.createElement(Y,{style:[M.flex.row,M.flex.justifySpaceBetween,M.flex.alignCenter,H&&J?M.margin.autoLeft:null]},H?null:ke.createElement(Na.View,{style:[S.directionRow,S.flex1]},ke.createElement(X.View,{style:[S.directionRow,S.justifyContentEnd,S.alignCenter],mobileStyle:h.emojiWrapperMobile,desktopStyle:h.emojiWrapperDesktop},r.emoji||!a?ke.createElement(X.View,{mobileStyle:[wC.pageEmojiRelative,g.Padding.noneLeft,g.Padding.mediumRight],desktopStyle:[wC.pageEmojiAbsolute,g.Padding.mediumLeft,g.Padding.mediumRight]},ke.createElement(RD,{analyticsContext:l,page:r,readOnly:a,size:R.ICON_XL})):null),a?ke.createElement(Na.View,{style:[S.flex1]},ke.createElement(Sz,{testID:"page.title",tag:"h1",style:[m.text],selectable:!0,mobileStyle:m[Ed.mobile],desktopStyle:m[Ed.desktop]},r.title)):ke.createElement(bz,{key:r.id,testID:"page.title",component:e6,value:r.title,maxLength:Fp,style:[m.text,S.flex1,m.Body],onChangeText:E,onKeyPress:V,placeholder:w("untitled_page"),placeholderTextColor:f.colors.text.muted,mobileStyle:m[Ed.mobile],desktopStyle:m[Ed.desktop]})),b||!d?null:ie&&ke.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),ke.createElement(Y,{style:[M.flex.row,M.flex.justifySpaceBetween,M.flex.alignCenter,H&&J?M.margin.autoLeft:null]},J?null:ke.createElement(X.View,{style:[H?null:g.Margin.mediumTop,S.flex1]},a?r.description?ke.createElement(Na.View,null,ke.createElement(Na.Text,{style:N,selectable:!0},r.description)):u?ke.createElement(X.View,{style:wC.pageDescriptionDiffPlaceholder,mobileStyle:"hidden"}):null:ke.createElement(Wr,{key:r.id,ref:I,component:e6,value:r.description,style:N,maxLength:wS,onChangeText:L,onSubmitEditing:c,onKeyPress:j,placeholder:w("page_description"),placeholderTextColor:f.colors.text.muted})),b||!d?null:Ze&&ke.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),null)});function QD(o){let{navigate:t}=Se();return ke.createElement(B,{kind:"default",size:"xsmall",icon:v.Metadata,onPress:()=>t({screen:{sideSheet:{type:"page-metadata"}}}),...o},"Page metadata")}var e6=ke.forwardRef(function(t,e){let{style:n,...r}=t,[i,a]=ke.useState(void 0);return ke.createElement(Na.TextInput,{ref:e,...r,multiline:!0,style:[n,typeof i<"u"?{height:i}:void 0],onContentSizeChange:l=>{l.nativeEvent.contentSize.height!==i&&a(l.nativeEvent.contentSize.height)}})}),wC=Na.StyleSheet.create({pageEmojiRelative:{position:"relative"},pageEmojiAbsolute:{position:"absolute"},pageDescriptionDiffPlaceholder:{height:sg.mediumLarge}}),wz=F.create({emojiWrapperMobile:{width:"auto",height:He[Ed.mobile].lineHeight},emojiWrapperDesktop:{height:He[Ed.desktop].lineHeight},pageBodyDesktopLeftMargin:{marginLeft:Dt},pageBodyMobileLeftMargin:{marginLeft:Uo}});s();var Kt=y(C()),Aa=y(z());var o6=X.createResponsiveComponent(us),n6=q.createInteractiveComponent(Br),r6=Kt.memo(function(t){let{revision:e,page:n,style:r}=t,{getNavigationLinkProps:i}=Se(),[,a]=P(A),c=ae(),l=Ye(),u=q.useInteractiveComponent(v.ArrowLeft),d=q.useInteractiveComponent(v.ArrowRight),{desktopSidebarWidth:p}=Kt.useContext(Vi),{nextPage:f,previousPage:m}=Kt.useMemo(()=>{let x=Cz(e),O=x.findIndex(_=>_.id===n.id);return O===-1?{nextPage:null,previousPage:null}:{nextPage:CC(x,O,1),previousPage:CC(x,O,-1)}},[e,n.id]),{previousLinkProps:h,previousGroup:b,nextLinkProps:w,nextGroup:k}=Kt.useMemo(()=>({previousLinkProps:m?i({screen:{page:eo(e,m.id)}}):void 0,previousGroup:m?fn(e,m.id):null,nextLinkProps:f?i({screen:{page:eo(e,f.id)}}):void 0,nextGroup:f?fn(e,f.id):null}),[e,f,m]);return!f&&!m||l?null:Kt.createElement(X.View,{style:r,desktopStyle:S.directionRow,customBreakpointsStyles:{[Bc(p)]:S.directionColumn}},m?Kt.createElement(o6,{...h,style:[S.alignCenter,g.Padding.medium,S.flex1],desktopStyle:f?g.Margin.smallRight:null,customBreakpointsStyles:f?{[Bc(p)]:[g.Margin.noneRight,g.Margin.smallBottom]}:void 0},Kt.createElement(Aa.View,{style:[g.Margin.mediumRight]},Kt.createElement(u.Child,{size:R.XS,style:[a.textMuted],hoverStyle:a.primary})),Kt.createElement(Aa.View,{style:[S.flex1,S.alignEnd]},Kt.createElement(Aa.View,null,Kt.createElement(Aa.Text,{style:[a.Caption,a.textMuted]},b&&b.type==="group"?`${b.title} - `:"",c("previous"))),Kt.createElement(n6.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},m.title))):null,f?Kt.createElement(o6,{...w,style:[S.alignCenter,g.Padding.medium,S.flex1],desktopStyle:m?g.Margin.smallLeft:null,customBreakpointsStyles:m?{[Bc(p)]:[g.Margin.noneLeft,g.Margin.smallTop]}:void 0},Kt.createElement(Aa.View,{style:[S.flex1]},Kt.createElement(Aa.View,null,Kt.createElement(Aa.Text,{style:[a.Caption,a.textMuted]},c("next"),k&&k.type==="group"?` - ${k.title}`:"")),Kt.createElement(n6.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},f.title)),Kt.createElement(Aa.View,{style:[g.Margin.mediumLeft]},Kt.createElement(d.Child,{size:R.XS,style:[a.textMuted],hoverStyle:a.primary}))):null)});function Cz(o){let t=[];function e(n){let r=o.pages[n];t.push(r),r.type!=="link"&&r.pages.length&&r.pages.forEach(e)}return o.rootPages.forEach(e),t}function CC(o,t,e){let n=o[t+e];if(n)return n.type!=="document"?CC(o,t+e,e):n}s();var Ao=y(C()),Md=y(z());var kz=X.createResponsiveComponent(us),xz=q.createInteractiveComponent(Br);function i6(o){let{subPages:t,revision:e}=o,{desktopSidebarWidth:n}=Ao.useContext(Vi),r=ae(),[,i]=P(A);return Ye()?null:Ao.createElement(Md.View,null,Ao.createElement(Md.Text,{style:[i.Body,i.text]},r("page_articles_section")),Ao.createElement(X.View,{style:[g.Padding.largeTop,S.wrap],desktopStyle:S.directionRow,customBreakpointsStyles:{[Bc(n)]:S.directionColumn}},t.map((c,l)=>Ao.createElement(Ao.Suspense,{fallback:Ao.createElement(a6,{page:c,revision:e,index:l,totalPageNumber:t.length}),key:c.id},Ao.createElement(Oz,{page:c,revision:e,index:l,totalPageNumber:t.length})))))}function Oz(o){let{page:t}=o,e=$e(t.type==="link"?t.target:void 0);return Ao.createElement(a6,{...o,contentRef:e})}function a6(o){let{page:t,revision:e,index:n,totalPageNumber:r,contentRef:i}=o,{desktopSidebarWidth:a}=Ao.useContext(Vi),{getNavigationLinkProps:c}=Se(),[,l]=P(A),u=t.emoji?q.createInteractiveComponent(ft(Eo,{code:t.emoji})):null,d=q.createInteractiveComponent(i?.secondaryIcon||Ce),p=r%2===0;return Ao.createElement(kz,{...t.type==="link"?i?yc(i):{}:c({screen:{page:eo(e,t.id)}}),style:[S.alignCenter,g.Padding.medium,S.flex1,{minWidth:`calc(50% - ${g.small}px)`}],desktopStyle:[n%2===0?p?g.Margin.smallRight:null:g.Margin.smallLeft,n<r-(p?2:1)?g.Margin.smallBottom:null],customBreakpointsStyles:{[Bc(a)]:[g.Margin.noneHorizontal,n<r-1?g.Margin.smallBottom:null]}},u?Ao.createElement(Md.View,{style:[g.Margin.mediumRight]},Ao.createElement(u.Child,{size:R.XS,style:[l.textMuted],hoverStyle:l.primary})):null,Ao.createElement(xz.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary},t.title),t.type==="link"&&(!i||i.secondaryIcon)?Ao.createElement(Md.View,{style:[g.Margin.mediumLeft]},Ao.createElement(d.Child,{size:R.XS,style:[l.textMuted],hoverStyle:l.primary})):null)}s();var Yr=y(C()),c6=y(z());s();var kC=y(C());function Ld(o){let{space:t,changeRequest:e,analyticsContext:n,page:r,onClose:i}=o;return Eu({screen:"space_import",...n},[t.key,e?.key]),kC.createElement(hr,null,kC.createElement(s6,{target:{page:r,space:t,changeRequest:e?.key},onClose:i}))}function l6(o){let{space:t,changeRequest:e,analyticsContext:n}=o,{navigate:r}=Se(),i=Ng(t),[a,c]=P(Pz),l=Ye(),[u,d]=Yr.useState(null);return l?null:Yr.createElement(Yr.Fragment,null,Yr.createElement(vt,null,u==="import"?Yr.createElement(Ld,{space:t,changeRequest:e,analyticsContext:n,onClose:()=>{d(null)}}):null),Yr.createElement(c6.View,{style:[g.Padding.smallHorizontal,g.Padding.smallVertical,g.Margin.mediumTop,c.blankslateBox,S.directionRow,S.wrap]},Yr.createElement(B,{icon:v.Download,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{d("import"),ee({...n,type:"space_blank_slate_initiate",kind:"import"})}},"Import content"),Yr.createElement(B,{icon:v.Page,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{r({overlay:{type:"template",space:t.key,organization:t.organization}}),ee({...n,type:"space_blank_slate_initiate",kind:"template"})}},"Use a template"),Yr.createElement(B,{icon:v.GitHub,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{i(),ee({...n,type:"space_blank_slate_initiate",kind:"gitsync"})}},"Sync with GitHub / GitLab"),Yr.createElement(B,{icon:v.User,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"share",tab:"invite"}}}),ee({...n,type:"space_blank_slate_initiate",kind:"invite-members"})}},"Add members")))}var Pz=F.create({blankslateBox:o=>({borderRadius:R.RADIUS_L,borderWidth:1,borderColor:o.colors.border.mid})});s();var u6=y(C());function d6(o,t,e){let n=Ye(),r=lg();u6.useEffect(()=>{if(t&&!n&&r.current)if(t.hash){let i=window.document.getElementById(t.hash);i&&i.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})}else e?.current?.scrollTo(0,0)},[o,t?.hash,e,n])}s();var Wc=y(C());s();var Yi=y(C()),Dd=y(z());var Iz=q.createInteractiveComponent(Br),Rz={[Ae]:null,[Fe]:g.Margin.smallLeft,[_o]:null},H2e=Yi.memo(function(t){let{sections:e,activeSection:n}=t,[,r]=P(A),[,i]=P(p6),a=ae();return Yi.createElement(Dd.View,{style:[i.pageOutline]},Yi.createElement(Dd.View,{style:[S.directionRow,S.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},Yi.createElement(Dd.Text,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(c=>Yi.createElement(Tz,{key:c.key,section:c,active:n===c.key})))});function Tz(o){let{section:t,active:e}=o,[,n]=P(A),[,r]=P(p6),{navigateToHash:i}=Se();return Yi.createElement(q.TouchableOpacity,{style:[S.directionRow,g.Padding.largeHorizontal,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(t.anchor)}},t.tag?Yi.createElement(yr,{backgroundColor:wl[t.tag]||K.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,S.alignSelfCenter]},Yi.createElement(Dd.Text,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},t.tag)):null,Yi.createElement(Iz.Child,{style:[n.Label,n.textMid,t.type&&Rz[t.type],e&&n.primary],hoverStyle:n.primary},t.title))}var p6=F.create({pageOutline:o=>({borderLeftWidth:1,borderLeftColor:o.colors.border.main,maxWidth:Ac}),sectionItem:{paddingTop:g.xsmall,paddingBottom:g.xsmall,marginLeft:-1,borderLeftWidth:2,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:o=>({borderLeftColor:o.colors.primary.main}),sectionTag:{borderRadius:R.XXS,height:R.XXS,paddingHorizontal:g.small,justifyContent:"center"}});function m6(o,t){let e=g.large,n=o.length,r=Math.floor(Math.log2(n)+1),i=0,a=n-1,c=Math.ceil((i+a)/2),l=-1,u=null;for(let d=0;d<r;d++){let p=o[c];if(!p)return null;let f=Js(p.key),m=f?f.getBoundingClientRect().top-t:null;if(m===null||m>e)a=c,c=Math.floor((i+a)/2);else{if(m>=-e&&m<=e)return o[c].key;m<e&&((u===null||m>u)&&(u=m,l=c),i=c,c=Math.ceil((i+a)/2))}}return l!==-1?o[l].key:null}var f6=.9;function g6(o,t){let[e,n]=Wc.useState(null),r=Mg(),i=Wc.useRef(0),a=Wc.useRef(null),c=Wc.useRef(new Map),l=o.length>1,u=Ez(()=>{typeof i.current!="number"&&(i.current=t.current.getBoundingClientRect().top);let p=m6(o,i.current);p!==e&&n(p)},500),d=p=>{p.forEach(m=>{let h=m.target.getAttribute("data-key");h&&c.current.set(h,m.isIntersecting&&m.intersectionRatio>=f6)});let f=Array.from(c.current.entries()).find(([,m])=>m);f&&n(f[0])};return Wc.useEffect(()=>{if(!(!t?.current||!l)){if(!r)t.current?.addEventListener("scroll",u);else{let p=o.map(f=>Js(f.key)).filter(ue);a.current=new IntersectionObserver(d,{rootMargin:`-${pC}px 0px -40% 0px`,threshold:f6}),p.forEach(f=>{a.current?.observe(f)})}return()=>{t.current?.removeEventListener("scroll",u),a.current?.disconnect()}}},[t?.current,l]),e}function Ez(o,t){let e=!1;return(...n)=>{e||(o.apply(this,n),e=!0,setTimeout(()=>e=!1,t))}}s();var Xm=y(C());function xC(o,t,e){let{baseRevision:n,diffMode:r,diffs:i}=Xm.useContext(kv),a=ye(),c=Xm.useMemo(()=>{if(!r)return null;let l;switch(r){case"quick":let d=n?.pages[t];l=d&&d.type==="document"?d.document:void 0;break;case"full":let p=i.get(t);if(!p||p.type!=="modified"||p.before.page.type!=="document")return null;l=p.before.page.document;break}if(!l)return yu(t);let u=Dr(a.store.getDocument(o,l));if(!u)throw new Error(`Original page document "${l}" not found`);return hu(u)},[r,n,o,t,i]);return Xm.useMemo(()=>r!=="full"?[e,c]:[c?vp.create({document:oO(c.document,e.document)}):e,c],[r,c,e])}var Mz=it("sheet"),Lz=X.createResponsiveComponent(pe);function Pv(o){let t=Yt(),{page:e,screen:n,scrollRef:r,changeRequest:i}=o;return d6(e.id,n,r),!t||n&&n.revision!==void 0||n?.changeRequest&&i&&["merged","archived"].includes(i.status)?re.createElement(Dz,{...o}):re.createElement(Nz,{...o,hiveBranch:t})}function Dz(o){let{space:t,page:e}=o,n=ye(),r=e.document?Dr(n.store.getDocument(t.key,e.document)):void 0,i=re.useMemo(()=>r?hu(r):yu(e.id),[r]),[a,c]=xC(t.key,e.id,i);return re.createElement(h6,{...o,value:a,baseValue:c,onChange:()=>{}})}function Nz(o){let{hiveBranch:t,space:e,page:n,analyticsContext:r,readOnly:i}=o,a=Tu();Ne(t),WD(t);let c=SI({branch:t,pageId:n.id,presence:{userId:a.uid,userDisplayName:Mx(a)},readOnly:i});re.useEffect(()=>()=>{c.dataSync.flushBatchUpdates()},[c]),re.useEffect(()=>{t.openPage(c.pageId)},[]);let l=LD({analyticsContext:r,hivePage:c}),u=xI(c),d=re.useMemo(()=>[u],[u]),[p,f,m]=wI(c),[h,b]=xC(e.key,n.id,p),w=re.useCallback(O=>{m(O),O.value.document!==O.initialValue.document&&l()},[m]);return re.createElement(h6,{...o,value:h,baseValue:b,onChange:w,selections:f,uploadFiles:async O=>{let _=[],I=await uS({kind:"space_file",space:e.key},O);return await t.change(N=>{I.forEach(T=>{let E=XP(T,a.uid);_.push({kind:"file",file:E.id}),N.insertFile(E)})}),_.forEach((N,T)=>{Mz.info(`file ${N.file} uploaded (${T+1} / ${_.length})`)}),_},updateFile:async(O,_)=>{let[I]=await uS({kind:"space_file",space:e.key},[_]);await t.change(N=>{N.updateFile(O.file,I)})},editorPlugins:d})}function h6(o){let{space:t,revision:e,page:n,changeRequest:r,readOnly:i=!0,value:a,baseValue:c,onChange:l,selections:u,uploadFiles:d,updateFile:p,withComments:f,analyticsContext:m,withToC:h,outline:b,toolbar:w,footer:k,withDiff:x,scrollRef:O,sideColumnStickyTop:_,editorPlugins:I}=o,{color:N}=ai(),{mode:T}=re.useContext(Ko),E=re.useRef(null),{pages:L,setContentDiffPage:V}=re.useContext(ND),j=Sa(),oe=RP(),H=ae(),J=Ye(),ie=re.useRef(),{sections:Ze,sectionIDs:pt}=re.useMemo(()=>{let _t=iO(a.document,ie.current),ja=Hf(a.document,_t).filter(au=>au.parentType==="document"&&au.type!==null&&[Ae,Fe,_o].includes(au.type));return{sectionIDs:_t,sections:ja}},[a.document,ie]);ie.current=pt;let nt=j.screen.type==="space"&&j.screen.sideSheet?.type==="comments"?{commentKey:j.screen.sideSheet.comment,nodeKey:j.screen.sideSheet.node}:void 0;re.useEffect(()=>{nt?.commentKey&&nt?.nodeKey&&Js(nt.nodeKey)?.scrollIntoView()},[nt?.commentKey]);let wt=re.useRef(null),Jt=re.useCallback(()=>{let _t=wt.current;if(!_t)return;let ja=_t.value.change();rs(ja.value.document)||ja.collapseToStartOf(_t.value.document),ja.focus(),l(ja)},[wt]),Le=re.useMemo(()=>L.find(_t=>_t.page.id===n.id&&_t.diff),[L,n.id]),dn=_t=>{l(_t),!Le&&r&&!a.document.equals(_t.value.document)&&V({diff:"modified",page:n})},Vo=Jt,Wn=Ze.length>1,sa=!b||J,Qc=g6(Ze,O),lr=re.useCallback(_t=>{ee({...m,..._t})},[m]),{desktopSidebarWidth:ur}=re.useContext(Vi),{customBreakpointsOutlineStyles:$a,customBreakpointsPageBodyStyles:G}=re.useMemo(()=>{let _t=T==="public-content"?1280:Km(2,ur);return{customBreakpointsOutlineStyles:{[_t]:"hidden"},customBreakpointsPageBodyStyles:{[_t]:S.justifyContentCenter}}},[T,ur]),te=mC(ur,wv),$=e.conflicts?.pages[n.id],Q=rs(a.document),We=Q&&Object.keys(e.pages).length===1&&!i,{diffs:Wt}=re.useContext(kv),rt=Wt.has(n.id),[mt,gt]=KD({isDiffViewEnabled:x,isCommentMarginVisible:f,isFullPage:h||sa}),Ut=AR(),Fn=re.useCallback(_t=>{_t?Ut.highlight(_t,{highlighting:!1,postButton:!0}):Ut.highlight(null)},[Ut]),dr=!j.overlay&&Q&&!i;re.useEffect(()=>{dr&&Jt()},[n.id,dr,Jt]);let pr=Oi(n),el=Bu(n)&&!!pr.cover,Cf=pr.coverSize,Xb=!pr.pagination||t.showPagination===!1,Ub=re.useMemo(()=>({type:"document",editable:!i,spaceId:t.key,theme:N}),[t.key,N,i]),u9=dP({operationId:"listSpaceIntegrationsBlocks",params:{spaceId:t.key}},re.useCallback(_t=>{let ja={};return _t.forEach(au=>{ja[au.name]=au.blocks}),ja},[]));return re.createElement(re.Fragment,null,el&&Cf==="full"?re.createElement(Y,{style:T==="public-content"&&!h?TD.pageCoverBleedFull:null},re.createElement(SC,{revision:e,page:n,readOnly:i,analyticsContext:m})):null,re.createElement(Nd.View,{ref:E,style:[S.flex1,S.directionRow]},re.createElement(GD,{style:[M.flex.flex1,M.flex.column]},el&&Cf==="hero"?re.createElement(Rd,null,re.createElement(Y,{style:[M.flex.flex1,M.margin.mediumTop]},re.createElement(SC,{revision:e,page:n,readOnly:i,analyticsContext:m,rounded:!0}))):null,re.createElement(pe,{tag:"main",style:[S.flex1,S.directionColumn]},re.createElement(Rd,null,re.createElement(X.View,{style:[S.flex1,S.directionRow],customBreakpointsStyles:G},re.createElement(Nd.View,{style:[S.flex1]},re.createElement(t6,{space:t,revision:e,page:n,changeRequest:r,readOnly:i,onSubmitDescription:Vo,analyticsContext:m,withDiff:x,toolbar:w})))),re.createElement(X.View,{desktopStyle:J?void 0:g.Padding.xlargeBottom},$!==void 0?re.createElement(mt,{renderMode:"marginless-centered"},re.createElement($D,{space:t,page:n,revision:e,document:a.document,pageIsDiff:x,conflictType:$,analyticsContext:m})):null,i&&Q&&n.pages.length?re.createElement(mt,{renderMode:"centered"},re.createElement(i6,{subPages:n.pages.map(_t=>e.pages[_t]),revision:e})):re.createElement(YR,{withComments:f,spaceKey:t.key,pageKey:n.id,changeRequestKey:r?.key},re.createElement(y6,{ref:wt,value:a,baseValue:c,selections:u,onChange:dn,readOnly:i,isDiff:rt,logAnalyticsEvent:lr,uploadFiles:d,updateFile:p,placeholder:"Enter your content here\u2026",sectionIDs:pt,selectedSection:j.screen.hash||null,blockLayoutComponent:mt,rightGutterComponent:gt,integrationBlocksContext:Ub,integrationsBlocksSubscription:u9,integrationBlocksRemote:oe,onBlockHover:Fn,plugins:I}),We?re.createElement(mt,{renderMode:"centered"},re.createElement(l6,{space:t,analyticsContext:m,changeRequest:r})):null),We?null:re.createElement(Rd,{style:M.margin.largeTop},re.createElement(X.View,{style:[S.flex1,S.directionRow],customBreakpointsStyles:G},re.createElement(Nd.View,{style:[S.flex1]},re.createElement(X.View,null,Xb?null:re.createElement(r6,{analyticsContext:m,space:t,revision:e,page:n,style:g.Margin.largeBottom}),k||null))))))),sa?null:re.createElement(Lz,{tag:"aside",accessibilityLabel:H("page_outline"),testID:"page.outline",style:[OC.pageSideColumn,g.Margin.largeVertical,{top:_!==void 0?_:g.large,maxHeight:_!==void 0?`calc(100vh - ${_}px)`:`calc(100vh - ${lC+g.large}px)`},T==="app"?OC.pageSideMaxWidth:OC.pageSidePublicMaxWidth],mobileStyle:"hidden",desktopStyle:{width:te},customBreakpointsStyles:$a},Wn?re.createElement(b,{sections:Ze,activeSection:Qc}):null)))}var OC=Nd.StyleSheet.create({pageSideMaxWidth:{maxWidth:Ac},pageSidePublicMaxWidth:{maxWidth:Ac},pageSideColumn:{position:"sticky",overflowY:"auto",alignSelf:"flex-start"},pageBody:{maxWidth:Rr+2*Dt},pageBodyWithComments:{maxWidth:Rr+Dt,marginRight:0},pageBodyDesktopRightPadding:{paddingRight:Dt},pageBodyMobileRightPadding:{paddingRight:Uo},pageBodyPDFRightPadding:{paddingRight:Uo},pageBodyDesktopLeftMargin:{marginLeft:Dt},pageBodyMobileLeftMargin:{marginLeft:Uo},pageBodyPDFLeftMargin:{marginLeft:Uo}});s();var PC=y(C()),v6=y(z());function Iv(o){let{withPageOutline:t=!0}=o;return PC.createElement(X.View,{style:[S.directionRow,S.justifyContentCenter],desktopStyle:[g.Padding.xxlargeTop,_v.pageSheetLoadingDesktop,t&&_v.pageSheetLoadingDesktopWithOutline],mobileStyle:[g.Padding.mediumTop,_v.pageSheetLoadingMobile]},PC.createElement(To,{size:"xlarge",style:_v.pageBody}))}var _v=v6.StyleSheet.create({pageSheetLoadingDesktop:{paddingRight:Dt,paddingLeft:Dt},pageSheetLoadingDesktopWithOutline:{paddingRight:Ac+Dt},pageSheetLoadingMobile:{paddingLeft:Uo,paddingRight:Uo},pageBody:{maxWidth:Rr+2*Dt}});s();var In=y(C());s();var Xe=y(C()),$i=y(z());function b6(o){let{revision:t,analyticsContext:e,page:n,onClose:r}=o,i=Xe.useRef(null),[,a]=P(A),[c,l]=Xe.useState(n.title),[u,d]=Xe.useState(n.emoji),[p,f]=Xe.useState("slug"in n&&n.slug?n.slug:""),[m,h]=Xe.useState(n.type==="link"?n.target:void 0),b=Yt(),w=c.length>0&&(n.type==="link"?!!m:!0),k=fn(t,n.id),x=k?eo(t,k.id):"",O=n.type!=="link"?RO(t,n.id,c):"",_=async()=>{w&&(Ne(b),await b.change(T=>{T.updatePage(n.id,n.type!=="link"?{title:c,emoji:u,slug:p?tS(p):void 0}:{title:c,emoji:u,target:m})}),n.title!==c&&ee({...e,type:"edit_page_title",pageKind:n.type}),n.type!=="link"&&p&&n.slug!==p&&ee({...e,type:"edit_page_path",pageKind:n.type}),n.emoji!==u&&ee({...e,...u?{type:"edit_pick_page_emoji",pageKind:n.type,emoji:u}:{type:"edit_remove_page_emoji",pageKind:n.type}}),r())},I=T=>{i.current?.close(),d(T)},N=Xe.useMemo(()=>u?ft(Eo,{code:u}):null,[u]);return Xe.createElement(ho,{title:"Edit page",onClose:r,footer:Xe.createElement($i.View,{style:[S.directionRow,S.justifyContentEnd]},Xe.createElement(B,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),Xe.createElement(Mp,{disabled:!w,kind:"primary",onPress:_},"Save"))},Xe.createElement($i.View,{style:[g.Margin.largeBottom]},Xe.createElement($i.View,{style:[g.Margin.smallBottom]},Xe.createElement(_u,null,"Title")),Xe.createElement($i.View,{style:[S.directionRow,S.alignEnd]},Xe.createElement($i.View,{style:[g.Margin.mediumRight]},Xe.createElement(Zs,{ref:i,wrapper:li,anchor:({ref:T,opened:E,toggle:L})=>Xe.createElement(B,{ref:T,active:E,onPress:L,kind:"secondary",size:"large",icon:N||v.EmojiReaction})},Xe.createElement(vn,{kind:"wide"},Xe.createElement(Sh,{onPick:I,onRemove:u?()=>I(void 0):void 0})))),Xe.createElement($i.View,{style:[S.flex1]},Xe.createElement(to,{size:"large",value:c,onChangeText:l,onSubmit:_})))),n.type==="link"?Xe.createElement($i.View,null,Xe.createElement(Lh,{label:"Reference",size:"large",value:m,onChangeValue:h})):Xe.createElement($i.View,null,Xe.createElement(to,{label:"Slug",size:"large",prefix:`${x}/`,value:p,placeholder:O,onChangeText:f,onSubmit:_,feedback:p&&!Dx(p)?{type:"warning",message:Xe.createElement(Xe.Fragment,null,"The page slug contains unsupported characters for an URL. Saving will replace it by"," ",Xe.createElement($i.Text,{style:[a.Bold]},tS(p)),".")}:void 0})))}s();var tr=y(C());s();var ji=y(C()),_C=y(z());function S6(o){let{onClose:t,onSubmit:e}=o,[n,r]=ji.useState(""),[i,a]=ji.useState(),c=async()=>{i?e(qP({title:n,target:i})):t()};return ji.createElement(ho,{title:"Insert link",onClose:t,subtitle:"Insert a link to external content in your content navigation, this link will open in a new tab.",footer:ji.createElement(_C.View,{style:[S.directionRow,S.justifyContentEnd]},ji.createElement(B,{kind:"secondary",onPress:t,style:g.Margin.smallRight},"Cancel"),ji.createElement(B,{kind:"primary",onPress:c,disabled:!i},"Insert"))},ji.createElement(_C.View,{style:[g.Margin.largeBottom]},ji.createElement(to,{autoFocus:!0,label:"Title",size:"large",placeholder:"Enter title to display",value:n,onChangeText:r})),ji.createElement(Lh,{label:"To",size:"large",placeholder:"Paste in or type a url",value:i,onChangeValue:a}))}function w6(o){let{space:t,revision:e,changeRequest:n,analyticsContext:r,parent:i}=o,{navigateToPage:a}=hc(),[c,l]=tr.useState(null),u=Yt(),d=tr.useCallback(b=>{Ne(u);let w=u.syncChange(k=>{let x=typeof b=="function"?b(k):b;return k.insertPage(x,{into:i}),x});ee({...r,type:"edit_create_page",pageKind:w.type}),w.type!=="link"&&a(u.revision,w.id)},[u,a]),p=tr.useCallback(()=>{Ne(u);let b=u.syncChange(w=>{let k=PO({title:w.getUniquePageTitle("Group",!0)}),x=_p({title:w.getUniquePageTitle("Page",!0)});return w.insertPage(k,{into:i}),w.insertPage(x,{into:k.id}),x});ee({...r,type:"edit_create_page",pageKind:"group"}),a(u.revision,b.id)},[e,u,a]),f=tr.useMemo(()=>ne({groups:[{key:"insertPage",commands:[{key:"insertPage.sheet",icon:v.Page,title:"New document page",trigger:()=>{d(b=>_p({title:b.getUniquePageTitle("Page",!0)}))}},i?null:{key:"insertPage.group",icon:v.AddPageGroup,title:"New group",trigger:()=>{p()}},{key:"insertPage.link",icon:v.Link,title:"New link",trigger:()=>{l("link")}}].filter(ue)},{key:"insertExisting",commands:[{key:"insertExisting.import",icon:v.Download,title:"Import new pages",trigger:()=>{l("import")}}].filter(ue)}]}),[e,i,p,d]),m=()=>{l(null)};return[tr.createElement(tr.Fragment,null,tr.createElement(vt,null,c==="link"?tr.createElement(S6,{onClose:m,onSubmit:b=>{d(b),l(null)}}):null),tr.createElement(vt,null,c==="import"?tr.createElement(Ld,{space:t,changeRequest:n,page:i,analyticsContext:r,onClose:m}):null)),f,d]}function Rv(o,t=[]){let{space:e,revision:n,changeRequest:r,page:i,analyticsContext:a,readOnly:c}=o,[l,u]=In.useState(null),d=ye(),p=Yt(),{getNavigationHref:f,navigateToPage:m}=hc(),{navigate:h}=Se(),b=In.useContext(Ko),w=ae(),k=pg(),[x,O,_]=w6({space:e,revision:n,changeRequest:r,parent:i.id,analyticsContext:a}),I=Object.keys(n.pages).length>1,N=In.useMemo(()=>ne({groups:[c?null:{key:"pageEdit",commands:[i.type!=="link"?{key:"pageEdit.insert",icon:v.AddPageGroup,title:"Insert subpage",descendant:()=>O,trigger:()=>{_(E=>_p({title:E.getUniquePageTitle("Page",!0)}))}}:null,i.type!=="link"?{key:"pageEdit.import",icon:v.Download,title:"Import subpages",trigger:()=>{u("import")}}:null,i.type==="document"&&Bu(i)?{key:"pageEdit.addCover",icon:v.Image,title:"Add cover",trigger:async()=>{Ne(p),await p.change(E=>{E.addPageCover(i.id)}),ee({...a,type:"edit_add_cover"})}}:null,{key:"pageEdit.edit",icon:v.Type,title:i.type==="link"?"Edit":"Rename",trigger:()=>{u("edit")}},{key:"pageEdit.duplicate",icon:v.PageDuplicate,title:"Duplicate",trigger:async()=>{Ne(p);let E=await d.duplicateContent({contentId:p.contentId,branchId:p.branchId},{contentId:p.contentId,branchId:p.branchId,pageId:i.id});ee(og(e,i,{...a,type:"edit_duplicate_page",pageKind:i.type})),i.type!=="link"&&m(p.revision,E.pageId)}},i.type==="document"?{key:"pageEdit.options",icon:v.Options,title:"Options",trigger:()=>{h({screen:{sideSheet:{type:"page"}}})}}:null,I?{key:"pageEdit.delete",icon:v.Trashcan,title:"Delete",trigger:()=>{u("delete")}}:null].filter(ue)},{key:"pageRead",commands:[i.type==="document"&&(e.hasPDFExport||b.mode!=="public-content")?{key:"pageRead.export",icon:v.PDF,title:w("export_pdf"),testID:"page.exportButton",trigger:()=>{m(n,i.id,{sideSheet:{type:"share",tab:"pdf"}})}}:null,i.type!=="link"?{key:"pageRead.copyURL",icon:v.Link,title:w("copy_link"),trigger:()=>{let E=f(n,i.id),L=`${window.location.origin}${E}`;k.writeTextAndNotify(L,{title:"Page URL copied to clipboard"})}}:null,i.type!=="link"&&e.showEditOnGitProvider&&e.git?.url&&e.git?.installationProvider&&i.git?.filePath&&b.mode==="public-content"?{key:"pageRead.editOnGitHub",icon:AP[e.git?.installationProvider],title:w("edit_on_github",BP[e.git?.installationProvider]),trigger:()=>{window.location.assign(`${e.git?.url}/${i.git?.filePath}`)}}:null,...t].filter(ue)}].filter(ue)}),[c,e,n,i,I,b.mode,f,m,r,t,d,p]),T=()=>{u(null)};return[In.createElement(In.Fragment,null,x,In.createElement(vt,null,l==="edit"?In.createElement(b6,{revision:n,page:i,analyticsContext:a,onClose:T}):null),In.createElement(vt,null,l==="delete"?In.createElement(Ov,{space:e,page:i,revision:n,analyticsContext:a,onClose:T}):null),In.createElement(vt,null,l==="import"?In.createElement(Ld,{space:e,changeRequest:r,page:i.id,analyticsContext:a,onClose:T}):null)),N]}var Az=[{size:25,label:"Small"},{size:50,label:"Medium"},{size:75,label:"Large"},{size:100,label:"Fit"}];function C6(o,t){let e=typeof o=="number"?o:o?.value,n=typeof o=="number"?"px":o?.unit;return`${e||100}${n||t}`}function k6(o,t){return typeof o=="number"?`${o}px`:o?.unit==="px"?`${o.value}${o.unit}`:t}async function Bz(o,t,e,n){let r=t.nodes.toArray().map(c=>{let{ref:l,refDark:u}=c.data.toFrozenObject();return n==="dark"&&u?u:l}),i={url:"",broken:!0},a=r.map(c=>RT(o,c,e).then(({uri:l})=>typeof l!="string"||l===""?i:{url:l,broken:!1}).catch(()=>i));return Promise.all(a)}function x6(o){let{node:t,parent:e,isSelected:n,attributes:r,editor:i}=o,{readOnly:a}=i,{ref:c,refDark:l,height:u,width:d}=t.data.toFrozenObject(),p=qy(i,t.key),{logAnalyticsEvent:f}=me.useContext(Be),m=Dh(c,l),h=ye(),b=at(),[,w]=P(IC),k=td(),x=q.useInteractiveState(),O=e.nodes.size>1,[{dragging:_},I]=Ia({type:"block",item:{id:t.key,type:"block",blockType:t.type,previewLabel:"Move image"},canDrag:()=>!a,collect:wt=>({dragging:wt.isDragging()})}),N=q.useInteractiveState(),T=ls(),[E,L]=me.useState(null),V=Io.getImageAltText(t),j=C6(d,"%"),oe=C6(u,"%"),H=k6(u,"auto"),J=k6(d,"100%"),ie=()=>{L("alt")},Ze=()=>{L(null)},pt=async()=>{if(!m||!m.uri)return;let wt=await Bz(h,e,b,T.color),Jt=e.getChildIndex(t.key);k.open(wt,Jt)},nt=wt=>{if(!m)return;f({type:"edit_page_document_edit_block_property",blockType:Li,blockProperty:"size",fromValue:void 0,toValue:wt.label});let Jt=Vz(m,wt.size);i.change(Le=>{u&&Le.removeDataPathByKey(t.key,["height"]),Jt?Le.insertDataByKey(t.key,["width"],Jt):Le.removeDataPathByKey(t.key,["width"])})};return me.createElement(me.Fragment,null,me.createElement(vt,null,E==="alt"?me.createElement(yv,{...o,onClose:Ze}):null),me.createElement(Ba.View,{style:[S.alignCenter,S.flex1]},me.createElement(Ba.View,{style:[w.imageWrapper,{maxWidth:j,maxHeight:oe}],...x.events,...r},me.createElement(Mt,{...o},m?me.createElement(q.TouchableOpacity,{onPress:pt,style:S.alignCenter},me.createElement(Ho,{width:J,height:H,source:m,accessibilityLabel:V,loading:p?"priority":"lazy",style:[w.image,_&&Ke.translucent]})):me.createElement(Wz,{accessibilityLabel:V})),a?null:me.createElement(me.Fragment,null,(n||x.hovered)&&!_?me.createElement(Fz,{...o,openAltTextModal:ie,setSize:nt}):null,me.createElement(si,{theme:{color:"dark"}},O?me.createElement(Ba.View,{ref:I,style:[w.imageDragHandle,{display:(x.hovered||N.hovered)&&!_?"flex":"none"}],...N.events},me.createElement(v.GrabberVertical,{size:R.ICON_S,style:[w.imageDragHandleIcon]})):null)))),me.createElement(Tc,{...o,isSelected:o.isSelected||x.hovered}))}function Wz(o){let{style:t,...e}=o,[,n]=P(A),[,r]=P(IC);return me.createElement(Ba.View,{style:[S.alignCenter,S.justifyContentCenter,r.brokenImage,g.Padding.large,t],...e},me.createElement(Ba.View,null,me.createElement(v.CloudOff,{size:R.ICON_L,style:[n.textMuted]})),me.createElement(Ba.View,{style:[g.Margin.mediumTop]},me.createElement(Ba.Text,{style:[n.Caption,n.textMuted]},"Could not load image")))}function Fz(o){let{editor:t,node:e,openAltTextModal:n,setSize:r}=o,i=ls(),[,a]=P(IC),[c,l]=me.useState(!1),u=Lr(CP),d=e.data.toFrozenObject(),p=()=>{t.change(f=>{e&&he.isTextRange(f.value.selection)&&!f.value.selection.hasEdgeIn(e)&&f.collapseToStartOf(e),f.focus()}),l(!0)};return me.createElement(me.Fragment,null,me.createElement(Ba.View,{style:[a.imageToolbar,d.refDark?a.imageToolbarWith2Buttons:null,S.directionRow,c?a.imageToolbarOpen:null]},c?me.createElement(me.Fragment,null,me.createElement(zz,{onPress:r,...o}),me.createElement(B,{title:"ALT text",size:"small",icon:v.AltText,style:[g.Margin.smallRight],onPress:n}),me.createElement(bv,{editor:t,node:e,style:M.margin.smallRight}),me.createElement(B,{size:"small",icon:v.X,onPress:()=>l(!1)})):me.createElement(me.Fragment,null,d.refDark?me.createElement(B,{size:"small",icon:i.color==="light"?v.ThemeDark:v.ThemeLight,title:`Image has a ${i.color==="light"?"dark":"light"} mode alternative.
Toggle theme to see it.`,onPress:()=>{u(i.color==="light"?"dark":"light")},style:[g.Margin.smallRight]}):null,me.createElement(B,{size:"small",icon:v.MoreVertical,onPress:p}))))}function zz(o){let{editor:t,node:e,onPress:n}=o,r=me.useRef(null),i=Az.map(({size:l,label:u})=>({key:`${l}`,title:u,trigger:()=>{n({size:l,label:u})}})),a=ce(r),c=()=>{a.open(ne({position:{width:"anchor"},groups:[{key:"image.resize",commands:i}].filter(ue)})),t.change(l=>{e&&he.isTextRange(l.value.selection)&&!l.value.selection.hasEdgeIn(e)&&l.collapseToStartOf(e),l.focus()})};return me.createElement(me.Fragment,null,me.createElement(B,{ref:r,active:a.opened,size:"small",rightIcon:v.ChevronDown,onPress:c},"Size"))}function Vz(o,t){let e=o.width||Yo.PAGE_BODY_MAX_WIDTH;if(t===100)return;let n=Math.min(e,Yo.PAGE_BODY_MAX_WIDTH);return Math.round(n*(t/100))}var IC=F.create({imageWrapper:{position:"relative",borderRadius:R.RADIUS_M},imageCaption:{position:"relative",textAlign:"center"},image:{borderRadius:R.RADIUS_M,maxWidth:"100%"},imageToolbar:o=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:R.RADIUS_M,borderColor:o.colors.border.mid,borderWidth:1,borderStyle:"solid",backgroundColor:o.colors.background.mid,overflow:"hidden",width:42,transition:"width 50ms ease-in-out"}),imageToolbarWith2Buttons:{width:76},imageToolbarOpen:{width:188},imageDragHandle:{position:"absolute",top:g.small,left:g.small,cursor:"grab"},imageDragHandleIcon:{textShadowColor:K.BLACK,textShadowRadius:3,color:K.WHITE},brokenImage:o=>({borderRadius:R.RADIUS_M,backgroundColor:o.colors.background.muted})});s();var Ee=y(C());s();var RC=JSON.parse('{"tooltip":"tooltip_8qsEs","brokenImage":"brokenImage_F5FWc"}');function O6(o){let{editor:t,node:e,parent:n,ancestors:r}=o,i=qy(t,e.key),a=Ee.useRef(null),c=er(n.object==="block"?n:null),l=e.data.get("size","original"),[,u]=P(Kz),d=r.some(f=>f.object==="inline"&&f.type===mn),p=f=>Ee.createElement(vd,{...f,...o,style:[u.inlineFrame,l==="line"?S.alignCenter:null]},Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(Ce,{size:"small"})},Ee.createElement(qz,{node:e,parentLineHeight:c,size:l,ref:a,withPriorityLoading:i})));return t.readOnly?p(d?{}:{onPress:()=>{a.current?.openInGallery()}}):Ee.createElement(Hz,{...o,anchor:p})}var qz=Ee.forwardRef(function(t,e){let{node:n,parentLineHeight:r,size:i,withPriorityLoading:a}=t,{ref:c,refDark:l}=n.data.toFrozenObject(),u=Io.getImageAltText(n),d=Dh(c,l),p=td();Ee.useImperativeHandle(e,()=>({openInGallery:()=>{d?.uri&&p.open([{url:d.uri}])}}),[d?.uri]);let f={};i==="original"?f={maxWidth:300}:f={maxHeight:r,height:r,width:"auto"};let m=Ee.createElement(Gz,{accessibilityLabel:u});return d?Ee.createElement(Ho,{accessibilityLabel:u,source:d,style:f,errorFallback:m,loading:a?"priority":"lazy"}):m});function Gz(o){let{accessibilityLabel:t}=o,[,e]=P(A);return Ee.createElement(Y,{style:RC.brokenImage,"aria-label":t},Ee.createElement(v.CloudOff,{size:R.ICON_M,style:e.textMuted}))}function Hz(o){let{node:t,anchor:e,isFocused:n,editor:r}=o,{logAnalyticsEvent:i}=Ee.useContext(Be),a=Ee.useRef(null),[c,l]=Ee.useState(null),u=n&&r.value.selection.isCollapsed,[d,p]=Ee.useState(!1);Ee.useEffect(()=>{if(u){p(!0);return}let b=setTimeout(()=>{p(!1)},300);return()=>{clearTimeout(b)}},[u]);let f=()=>{r.change(b=>{b.collapseToStartOf(t).focus()})},m=b=>{r.change(w=>{w.insertDataByKey(t.key,["size"],b),w.collapseToStartOf(t).focus()})},h=()=>{i({type:"edit_page_document_edit_block_type",fromType:du,toType:Li}),r.change(b=>{Io.replaceInlineImageWithBlock(b,t)})};return ku(()=>{a.current?.updatePosition()},[t.data]),Ee.createElement(Ee.Fragment,null,Ee.createElement(vt,null,c==="alt"?Ee.createElement(yv,{...o,onClose:()=>l(null)}):null),Ee.createElement(ha,{ref:a,opened:u||d,anchor:({ref:b})=>e({ref:b,onPress:f})},Ee.createElement(vn,{kind:"tooltip"},Ee.createElement(Y,{style:RC.tooltip},Ee.createElement(B,{size:"small",title:"Inline size",onPress:()=>m("line"),icon:v.ImageSizeSmall}),Ee.createElement(B,{size:"small",title:"Original size",onPress:()=>m("original"),icon:v.ImageSizeLarge}),Ee.createElement(B,{size:"small",title:"Convert to block",onPress:h,icon:v.ImageSizeBlock}),Ee.createElement(bv,{editor:r,node:t}),Ee.createElement(B,{size:"small",title:"ALT text",onPress:()=>l("alt"),icon:v.AltText})))))}var Kz=F.create({inlineFrame:{maxWidth:"100%"}});s();var P6=y(C());function _6(o){let{children:t,attributes:e}=o;return P6.createElement(yt,{tag:"strong",style:mo.Bold,...e},t)}s();var I6=y(C());function R6(o){let{children:t,attributes:e}=o;return I6.createElement(yt,{tag:"em",style:mo.Italic,...e},t)}s();var T6=y(C());function E6(o){let{children:t,attributes:e}=o;return T6.createElement(yt,{tag:"span",style:mo.Strikethrough,...e},t)}s();var M6=y(C());function L6(o){let{children:t,attributes:e}=o,[,n]=P(Xz);return B1(),M6.createElement(yt,{tag:"code",style:[n.markCode],...e},t)}var Xz=F.create({markCode:o=>({backgroundColor:o.colors.background.muted,borderRadius:o.radiuses.medium,paddingLeft:g.xsmall,paddingRight:g.xsmall,fontFamily:ig})});s();var D6=y(C());function N6(o){let{children:t,mark:e,attributes:n}=o,r=e.data.toObject(),i=ai(),a=r.background&&r.background!=="default",c=r.text&&r.text!=="default",l=a&&i.color==="dark"?{color:K.lightModeText.base}:null;c&&(l=yh.find(d=>d.key===r.text)||null);let u=a?vh.find(d=>d.key===r.background):null;return D6.createElement(yt,{tag:"mark",style:[{color:l?l.color:"inherit",backgroundColor:u?u.color:"inherit"}],...n},t)}s();var Wa=y(C()),Mv=y(z());s();var Bo=y(C()),Um=y(z());s();var A6=JSON.parse('{"exitHint":"exitHint_xASL-","show":"show_HIlHf"}');function Tv(o){let{node:t,anchor:e,isSelected:n,isOnlyNodeSelected:r,isFocused:i,editor:a}=o,{formula:c}=t.data.toFrozenObject(),l=Bo.useRef(null),[u,d]=Bo.useState(!1),[p,f]=Bo.useState(!1),[m,h]=$s(c,[c]),[,b]=P(A),w=()=>{d(!1),f(!1)},k=()=>{u||(a.change(I=>{Ft(I.value.selection)&&I.collapseToStartOf(t).focus()}),d(!0))};Bo.useEffect(()=>{u&&l.current?.focus()},[u]),Bo.useEffect(()=>{r&&k()},[r]);let x=I=>{h(I),f(!1)},O=()=>{w(),a.change(I=>{I.blur(),I.insertDataByKey(t.key,["formula"],t.object==="inline"?m.replace(/\n/g," "):m)})},_=()=>{w(),a.change(I=>{if(I.blur(),I.insertDataByKey(t.key,["formula"],t.object==="inline"?m.replace(/\n/g," "):m),t.object==="block")ht(I);else{let N=t.getFirstText()?.key;if(N){let T=I.value.document.getNextText(N);T&&I.collapseToStartOf(T)}}I.focus()})};return a.readOnly?e({formula:c}):Bo.createElement(NI,{opened:u,onClose:O,wrapper:_1,anchor:({ref:I})=>e({ref:I,isFocused:n&&i||u,onPress:k,formula:m,onError:()=>{f(!0)}})},Bo.createElement(vn,{kind:"tooltip"},Bo.createElement(Um.View,null,Bo.createElement(to,{ref:l,multiline:!0,numberOfLines:3,autoFocus:!0,selectTextOnFocus:!0,value:m,onChangeText:x,placeholder:"Enter your TeX formula",onSubmit:_,kind:"inverted",textStyle:p?[b.danger]:void 0}),Bo.createElement(Uz,null),p?Bo.createElement(ui,{tooltip:"There is an error in your math formula",preferredPlacement:"bottom"},(I,N)=>Bo.createElement(Um.View,{ref:N,style:Yz.blockErrorBadge,...I.events},Bo.createElement(go,{icon:v.ExclamationCircle,kind:"danger"}))):null)))}function Uz(){return Bo.createElement(gn,{style:[A6.exitHint,M.text.label,M.textColor.muted,M.text.notSelectable],contentEditable:!1},"Exit with"," ",Bo.createElement(hn,{inverted:!0,style:[M.flex.inline],shortcut:ze.EDITOR_EXIT_BLOCK}))}var Yz=Um.StyleSheet.create({blockErrorBadge:{position:"absolute",bottom:g.small,left:g.small}});s();var Ev=vg("f1a718ae5a0b5d0a680254c13fabc0ed4b38f7b4037704dda83756645a7f1027",()=>import("https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/chunks/MathTeXView.lazycomponent-CU7XCOIW.min.js"));function B6(o){return Wa.createElement(Tv,{anchor:({formula:t,onError:e,...n})=>Wa.createElement(fe,{...o},Wa.createElement(Mt,{...o,...n},Wa.createElement(Wa.Suspense,{fallback:Wa.createElement(Pr,null)},Wa.createElement(Mv.ScrollView,{horizontal:!0,showsVerticalScrollIndicator:!1,contentContainerStyle:$z.container},Wa.createElement(Ev,{formula:t,inline:!1,onError:e}))))),...o})}var $z=Mv.StyleSheet.create({container:{marginLeft:"auto",marginRight:"auto"}});s();var Fc=y(C());function W6(o){return Fc.createElement(Tv,{anchor:({formula:t,onError:e,...n})=>Fc.createElement(vd,{...o,...n},Fc.createElement(Fc.Suspense,{fallback:Fc.createElement(Ce,{size:"small"})},Fc.createElement(Ev,{formula:t,inline:!0,onError:e}))),...o})}s();var Zt=y(C());s();var F6=y(C()),Lv=F6.createContext(new Map);s();s();var MC=y(C());s();s();var TC=y(C()),z6=y(z());var V6={title:"Checkbox",description:"A single checkbox that can be checked or unchecked.",IconComponent:v.ColumnTypeCheckbox,ValueComponent:jz,onKeyDown:(o,t,e)=>{switch(o){case"backspace":t&&e(!1);break;case"enter":e(!t);break}}};function jz(o){let{value:t,readOnly:e,onValueChange:n,style:r}=o;return TC.default.createElement(z6.View,{style:[r,S.flex1,S.directionRow,S.alignCenter]},TC.default.createElement(ec,{value:t,onValueChange:n,readOnly:e}))}s();var $r=y(C()),Ym=y(z());var q6={title:"Link",description:"Reference another page, file, space or collection.",IconComponent:v.PageLink,ValueComponent:Zz};function Zz(o){let{value:t,selected:e,readOnly:n,displayMode:r,style:i,onValueChange:a}=o,c=$r.default.useRef(null),l=ce(c),u=at(),d=ye(),p=()=>{l.open(kn(a,u,d,{accept:["page","file","space","collection","anchor","url"]}))};return $r.default.createElement(Ym.View,{ref:c,style:[S.directionRow,S.wrap,S.flex1,S.alignCenter,i]},$r.default.createElement($r.default.Suspense,{fallback:$r.default.createElement(Ce,null)},t?$r.default.createElement(Ym.View,{style:[S.flex1,S.directionRow]},$r.default.createElement(Jz,{contentRef:t})):null,(r==="block"||e)&&!n?$r.default.createElement(B,{icon:v.MoreVertical,title:r!=="block"?"Select target":null,kind:"secondary",size:"small",onPress:p},r==="block"?"Select target":null):null))}function Jz(o){let{contentRef:t}=o,[e]=vw([t]),[,n]=P(A);return e?$r.default.createElement(Ym.View,{style:[S.directionRow,S.alignCenter]},e.icon?$r.default.createElement(Ym.View,{style:[g.Margin.smallRight]},$r.default.createElement(e.icon,{size:R.ICON_M,style:[n.textMuted]})):null,$r.default.createElement(ba,{url:e.href,onPress:r=>{r.preventDefault(),e.open()},style:[n.Body]},e.title)):null}s();var Er=y(C()),Zi=y(z());var G6={title:"Files",description:"Attachments allow you to add images, documents, or other files which can then be viewed or downloaded.",IconComponent:v.ColumnTypeFile,ValueComponent:Qz};function Qz(o){let{value:t,selected:e,readOnly:n,displayMode:r,onValueChange:i,style:a}=o,c=Et(),l=async()=>{let d=await c.prompt({title:"Select file"});i([...t,...d.filter(p=>p.kind==="file").map(p=>p.file)])},u=d=>{let p=[...t];p.splice(d,1),i(p)};return Er.default.createElement(Zi.View,{style:[S.directionRow,S.wrap,S.flex1,t.length>0?tV.filesList:null,a]},Er.default.createElement(Er.default.Suspense,{fallback:Er.default.createElement(Ce,null)},t.map((d,p)=>Er.default.createElement(eV,{key:d,fileId:d,readOnly:n,onRemove:()=>u(p)}))),(r==="block"||e)&&!n?Er.default.createElement(B,{icon:v.Plus,title:"Add attachment",kind:"secondary",size:"small",onPress:l},r==="block"?"Add file":null):null)}function eV(o){let{fileId:t,readOnly:e,onRemove:n}=o,[,r]=P(A),i=q.useInteractiveState(),a=Er.default.useRef(null),c=ce(a),l=$e({kind:"file",file:t}),u=l.resolution?.extra?.file;return Er.default.createElement(Zi.TouchableOpacity,{onPress:()=>{e?l.href&&ps(l.href):c.open(ne({groups:[{key:"file",commands:[{key:"remove",title:"Remove",icon:v.Trashcan,trigger:()=>{n()}},u?{key:"download",title:"Download",icon:v.Download,trigger:()=>{ps(l.href)}}:null].filter(ue)}]}))},...i.events},Er.default.createElement(Zi.View,{ref:a,style:[S.directionRow,S.alignCenter,g.Margin.smallRight]},Er.default.createElement(Zi.View,{style:[g.Margin.smallRight]},Er.default.createElement(nd,{file:u,size:R.BUTTON_S})),Er.default.createElement(Zi.View,null,Er.default.createElement(Zi.Text,{style:[r.Body,i.active||c.opened?r.primary:r.text]},u?.name||"Deleted"))))}var tV=Zi.StyleSheet.create({filesList:{gap:g.small}});s();var EC=y(C()),Ad=y(z());var H6={title:"Number",description:"",IconComponent:v.Numbers,ValueComponent:oV,onKeyDown:(o,t,e)=>{switch(o){case"backspace":e(null);break;case"enter":typeof t!="number"&&e(0);break}}};function oV(o){let{readOnly:t,value:e,onValueChange:n,onSelectionChange:r,style:i}=o,[,a]=P(A),c=[a.Body,nV.numberInput,a.textMid,i],l=()=>{r(!0)};return t?EC.default.createElement(Ad.Text,{style:c},typeof e=="number"?String(e):""):EC.default.createElement(Ad.TextInput,{style:c,value:typeof e=="number"?String(e):"",onChangeText:u=>n(Number(u)),onFocus:l})}var nV=Ad.StyleSheet.create({numberInput:{height:"auto",padding:0,width:"100%",borderWidth:0}});s();var zl=y(C()),$m=y(z());var rV=8,iV={info:K.primary.light,merge:K.violet.light,upgrade:K.fuchsia.light,danger:K.scarlet.light},K6={title:"Rating",description:"",IconComponent:v.ColumnTypeRating,ValueComponent:sV,commands:aV,onKeyDown:(o,t,e)=>{switch(o){case"backspace":e(0);break;case"enter":break}}};function aV(o){let{definition:t,setDefinition:e}=o;return[{key:"rating",commands:[{key:"rating.max_value",title:"Max",icon:v.MaximumValue,descendant:()=>ne({search:"Select max rating\u2026",groups:[{key:"max_values",commands:[...Array(5).keys()].map(n=>({key:`${n+1}`,title:`${n+1}`,type:1,selected:t.max===n+1,trigger:()=>{e({...t,max:n+1})}}))}]})}]}]}function sV(o){let{value:t,definition:e,definitionColorKind:n,onValueChange:r,readOnly:i,style:a}=o,[c,l]=P(lV),[u,d]=zl.default.useState(0),p=[...Array(e.max+1).keys()].slice(1),f=w=>{r(w===t?null:w)},m=w=>{i||d(w)},h=l.circleBase,b=n?{backgroundColor:iV[n]}:l.circleActiveDefault;return zl.default.createElement($m.View,{style:[S.directionRow,S.flex1,S.alignCenter,a]},p.map(w=>zl.default.createElement(q.WithInteractiveState,{key:String(w),onHoverIn:()=>m(w),onHoverOut:()=>m(0)},({events:k})=>zl.default.createElement($m.TouchableOpacity,{...k,onPress:()=>f(w)},zl.default.createElement(cV,{size:rV+2*(w-1),style:[u===0&&t&&t>=w||u>=w?b:h,{marginRight:g.xsmall}]})))))}function cV({size:o,style:t}){return zl.default.createElement($m.View,{style:[{width:o,height:o,borderRadius:o/2},t]})}var lV=F.create({circleBase:o=>({backgroundColor:o.colors.background.standout}),circleActiveDefault:()=>({backgroundColor:K.primary.light})});s();var X6=y(g9()),Rn=y(C()),Fa=y(z());var U6={title:"Select",description:"Select allows you to select an option from predefined options in a dropdown.",IconComponent:v.ColumnTypeSelect,ValueComponent:pV,commands:uV,onKeyDown:(o,t,e)=>{switch(o){case"backspace":t.length>0&&e([]);break}}};function uV(o){let{definition:t,setDefinition:e}=o;return[{key:"select",commands:[{key:"select.allow_multiple",title:"Allow multiple",icon:v.OptionAdd,type:2,enabled:t.multiple,trigger:()=>{let[n]=e({...t,multiple:!t.multiple});return n}},{key:"select.options",title:"Manage options",icon:v.OptionManage,descendant:()=>Y6(o)}]}]}function Y6(o){let{definition:t,setDefinition:e,openModal:n}=o,{options:r}=t,i=r.map((a,c)=>{let l=u=>{let d=[...r];d[c]={...a,label:u},e({...t,options:d})};return{key:a.value,title:a.label,descendant:()=>ne({groups:[{key:"select.options.manageOption",commands:[{key:"editOption",title:"Edit option",icon:v.Edit,trigger:()=>{n(u=>Rn.default.createElement(dV,{...u,option:a,onSave:l}))}},{key:"deleteOption",title:"Delete option",icon:v.Trashcan,trigger:()=>{let u=[...r];u.splice(c,1),e({...t,options:u})}}]}]})}});return ne({search:"Search options or type to add",groups:[{key:"select.options.manage",commands:a=>{let c=a.query.text.trim();return a.query.text&&!i.find(l=>l.title===c)?[{key:"add_new_option",title:c,icon:v.Plus,trigger:()=>{let u={value:Rf(),label:c,color:"blue"},[,d]=e({...t,options:[...r,u]});return Y6(d)}},...i]:i}}]})}function dV(o){let{option:t,definition:e,onSave:n,onClose:r}=o,{options:i}=e,a=[...i].filter(m=>m.label!==t.label),[c,l]=Rn.default.useState(t),u=m=>m.length===0?"The label can not be empty":a.filter(b=>b.label===m).length>0?"Another option already exists with this label":null,d=()=>{n(c.label),r()},p=m=>{l({...c,label:m})},f=u(c.label);return Rn.default.createElement(ho,{title:"Edit option",footer:Rn.default.createElement(Fa.View,{style:[S.directionRow,S.justifyContentEnd]},Rn.default.createElement(B,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),Rn.default.createElement(B,{kind:"primary",onPress:d,disabled:!!f},"Save")),onClose:r},Rn.default.createElement(Fa.View,null,Rn.default.createElement(to,{autoFocus:!0,value:c.label,label:"Label",onChangeText:p,feedback:f?{type:"danger",message:f}:void 0})))}function pV(o){let{value:t,selected:e,definition:n,onValueChange:r,definitionColorKind:i,readOnly:a,displayMode:c,style:l}=o,u=Rn.default.useRef(null),d=ce(u),[,p]=P(A),f=()=>{d.open(mV(n,t,r))},m=Rn.default.createElement(Fa.View,{style:[S.directionRow,S.wrap,S.flex1,t.length>0?fV.optionsList:null]},t.map(h=>{let b=n.options.find(w=>w.value===h);return b?Rn.default.createElement($1,{key:b.value,deletable:!a&&n.multiple,kind:i??"info",onPress:()=>n.multiple?r(t.filter(w=>w!==b.value)):null,size:"small"},b.label):null}));return a||c==="inline"&&!e?m:Rn.default.createElement(Fa.TouchableOpacity,{ref:u,onPress:f,style:[l]},Rn.default.createElement(Fa.View,{style:[S.directionRow,S.flex1,S.alignCenter]},m,c==="inline"?Rn.default.createElement(Fa.View,{style:[g.Margin.smallLeft]},Rn.default.createElement(v.ChevronDown,{size:R.ICON_XS,style:p.textMuted})):null))}function mV(o,t,e){return ne({search:"Find an option\u2026",position:{width:"small"},groups:[{key:"options",commands:o.options.map(n=>{let r=t.includes(n.value);return{key:n.value,title:n.label,...o.multiple?{type:1,selected:r}:{selected:void 0},trigger:()=>{e(r?t.filter(i=>i!==n.value):(0,X6.default)(o.multiple?[...t,n.value]:[n.value]))}}})}]})}var fV=Fa.StyleSheet.create({optionsList:{gap:g.small}});s();var Dv=y(C()),Nv=y(z());var $6={title:"Text",description:"",IconComponent:v.ColumnTypeText,ValueComponent:hV,commands:gV};function gV(o){let{definition:t}=o,{textAlignment:e}=t,n={left:v.AlignTextLeft,center:v.AlignTextCenter,right:v.AlignTextRight};return[{key:"text.alignment",commands:[{key:"text.alignment",title:"Alignment",descendant:()=>j6(o),icon:n[e]}]}]}function j6(o){let{definition:t,setDefinition:e}=o;return ne({groups:[{key:"text.alignment.select",commands:[{label:"Left",value:"left",icon:v.AlignTextLeft},{label:"Center",value:"center",icon:v.AlignTextCenter},{label:"Right",value:"right",icon:v.AlignTextRight}].map(n=>({key:`text.alignment.${n.value}`,title:n.label,type:1,selected:t.textAlignment===n.value,icon:n.icon,trigger:()=>{let[,r]=e({...t,textAlignment:n.value});return j6(r)}}))}]})}function hV(o){let{value:t,definition:e,style:n,readOnly:r}=o;return t==null?null:Dv.default.createElement(Nv.View,{style:[S.flex1,!r&&yV.editableFragment,n]},Dv.default.createElement(gc.Provider,{value:e.textAlignment},Dv.default.createElement(jn,{fragment:t})))}var yV=Nv.StyleSheet.create({editableFragment:{cursor:"text"}});s();var Tn=y(C()),Pi=y(z());var Z6={title:"Users",description:"A user field lets you add collaborators to your records.",IconComponent:v.Users,ValueComponent:bV,commands:vV};function vV(o){let{definition:t,setDefinition:e}=o;return[{key:"users",commands:[{key:"users.allow_multiple",title:"Allow multiple",icon:v.Team,type:2,enabled:t.multiple,trigger:()=>{let[n]=e({...t,multiple:!t.multiple});return n}}]}]}function bV(o){let{value:t,selected:e,readOnly:n,displayMode:r,definition:i,onValueChange:a,style:c}=o,l=Tn.default.useRef(null),u=ce(l),d=m=>{let h=[...t];h.splice(m,1),a(h)},p=()=>{u.open(ne({search:"Search users\u2026",position:{width:"small"},groups:[{key:"users",commands:m=>ll.read({query:m.query.text,types:["users"]}).map(b=>b.index!=="users"?null:{key:b.object.objectID,title:b.object.displayName,icon:({size:w})=>Tn.default.createElement(ul,{user:b.object,size:w}),trigger:()=>{a([...t,b.object.objectID])}}).filter(ue)}]}))},f=i.multiple?"Add users":"Replace";return Tn.default.createElement(Pi.View,{style:[S.flex1,S.directionRow,c]},Tn.default.createElement(Pi.View,{style:[S.directionRow,S.wrap,S.flex1,t.length>0?wV.filesList:null]},Tn.default.createElement(Tn.default.Suspense,{fallback:null},t.map((m,h)=>Tn.default.createElement(SV,{key:m,userId:m,readOnly:n,onRemove:()=>d(h)})))),(r==="block"||e)&&!n?Tn.default.createElement(B,{ref:l,icon:i.multiple?v.Plus:v.ChevronDown,title:r==="block"?void 0:f,kind:"secondary",size:"small",onPress:p,active:u.opened},r==="block"?f:null):null)}function SV(o){let{userId:t,readOnly:e,onRemove:n}=o,[,r]=P(A),i=q.useInteractiveState(),a=Tn.default.useRef(null),c=ce(a),[l]=wa([Ex(t)]);return Tn.default.createElement(Pi.TouchableOpacity,{onPress:()=>{c.open(ne({position:{width:"small"},groups:[{key:"user",commands:[e?null:{key:"remove",title:"Remove",icon:v.Trashcan,trigger:()=>{n()}}].filter(ue)}]}))},...i.events},Tn.default.createElement(Pi.View,{ref:a,style:[S.directionRow,S.alignCenter,g.Margin.smallRight]},l?Tn.default.createElement(Pi.View,{style:[g.Margin.smallRight]},Tn.default.createElement(ul,{user:l,size:R.BUTTON_S})):null,Tn.default.createElement(Pi.View,null,Tn.default.createElement(Pi.Text,{style:[r.Body,i.active||c.opened?r.primary:r.text]},l?.displayName||"Deleted"))))}var wV=Pi.StyleSheet.create({filesList:{gap:g.small}});var jr={checkbox:V6,number:H6,text:$6,files:G6,select:U6,users:Z6,rating:K6,"content-ref":q6},J6=["text","number","checkbox","select","users","files","content-ref","rating"];function za(o){return o.title||jr[o.type].title}function Bd(o){let{record:t,definition:e,readOnly:n,displayMode:r="inline",editor:i,nodeKey:a,selected:c,definitionColorKind:l,style:u}=o,{ValueComponent:d}=jr[o.definition.type],p=h=>{i.change(b=>{Z.setRecordValue(b,a,t.key,e.id,h)})},f=h=>{h&&i.change(b=>{Z.moveTableSelection(b,a,{recordId:t.key,definitionId:e.id})})},m=MC.createElement(d,{editor:i,nodeKey:a,readOnly:n,displayMode:r,selected:c,value:t.value.values[e.id],definitionColorKind:l,definition:e,onValueChange:p,onSelectionChange:f,style:u});return e.type==="text"?m:MC.createElement(pe,{style:S.flex1,onClick:h=>{h.stopPropagation(),f(!0)}},m)}s();function Ns(o,t={}){return ne({search:"Select column type",groups:[{key:"types",commands:J6.map(e=>{let n=jr[e];return{key:e,icon:n.IconComponent,title:n.title,...t.selectedType?{type:1,selected:t.selectedType===e}:{selected:void 0},trigger:()=>{o(e)}}})}]})}s();var zc=y(C()),Vl=y(z());function Q6(o){return o.readOnly?zc.createElement(CV,{...o}):zc.createElement(kV,{...o})}function CV(o){let{definition:t,style:e}=o,[,n]=P(A);return zc.createElement(Vl.Text,{style:[S.directionRow,t.type==="text"?Av[t.textAlignment]:null,n.Body,n.textMid,n.Medium,Av.columnHeader,e],selectable:!0},za(t))}function kV(o){let{editor:t,nodeKey:e,definition:n,style:r}=o,[i,a]=P(A),c=f=>{t.change(m=>{Z.renameColumn(m,e,n.id,f)})},l=n.title||"",u=za(n),d=zc.useMemo(()=>Vl.StyleSheet.flatten([r,a.Body,a.textMid,a.Medium,Av.columnHeader,n.type==="text"?Av[n.textAlignment]:null]),[r,n]),p=zc.useMemo(()=>Cg(l||u||"",d),[l,u,d]);return zc.createElement(Wr,{component:Vl.TextInput,value:l,placeholder:u,placeholderTextColor:i.colors.text.muted,onChangeText:c,style:[d,p===void 0?{}:{width:p,maxWidth:"100%"}]})}var Av=Vl.StyleSheet.create({columnHeader:{wordWrap:"anywhere"},left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"}});s();var tN=y(C()),eN=["info","merge","upgrade","danger"];function xV(o,t){let{definitionColorsKindsMap:e}=t.reduce((n,r)=>{let i=o[r];if(i.type==="rating"||i.type==="select"){let a=eN[n.colorIndexToBeClaimed];n.definitionColorsKindsMap[r]=a,n.colorIndexToBeClaimed=(n.colorIndexToBeClaimed+1)%eN.length}return n},{colorIndexToBeClaimed:0,definitionColorsKindsMap:{}});return e}function oN(o,t){return tN.default.useMemo(()=>xV(o,t),[o])}s();var Jr=y(C());s();s();s();var LC=y(C());function nN(o){return LC.default.createElement(LC.default.Fragment,null)}s();s();function Wd(o,t,e={}){let{selected:n=[],search:r="Select columns\u2026",multiple:i=!1,filterDefinition:a=()=>!0}=e;return ne({search:r,groups:[{key:"columns",commands:Object.entries(o).filter(([c,l])=>a(l)).map(([c,l])=>{let u=jr[l.type],d=n.includes(c);return{key:c,title:za(l),icon:u.IconComponent,type:1,selected:d,trigger:()=>t(i?d?n.filter(p=>p!==c):[...n,c]:d?[]:[c])}})}]})}s();function an(o,t,e,n){let{focus:r="end",definition:i,record:a}=n;if(!e.selection.definitionId)return!1;let c=e.records.findIndex(p=>p.key===e.selection.recordId),l=e.view.columns.indexOf(e.selection.definitionId),u=e.records["relative"in a?c+a.relative:a.absolute],d=e.view.columns["relative"in i?l+i.relative:i.absolute];return!d||!u?!1:(Z.moveTableSelection(o,t,{recordId:u.key,definitionId:d},r),!0)}function ql(o,t,e,n){let r=e.records.findIndex(a=>a.key===e.selection.recordId),i=e.records["relative"in n?r+n.relative:n.absolute];return i?(Z.moveTableSelection(o,t,{recordId:i.key,definitionId:void 0}),!0):!1}var rN=(o,t,e,n)=>{if(!e.selection.definitionId&&e.selection.recordId)return PV(o,t,e,n);if(e.selection.definitionId&&e.selection.recordId)return OV(o,t,e,n)},OV=(o,t,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(o){case"move-up":case"move-down":{an(n,t,e,{definition:{relative:o==="move-up"?-1:1},record:{relative:0},focus:o==="move-up"?"end":"start"})||an(n,t,e,{definition:{absolute:o==="move-up"?e.view.columns.length-1:0},record:{relative:o==="move-up"?-r:r},focus:o==="move-up"?"end":"start"})||(o==="move-up"?mu(n,t):ht(n,t));break}case"move-left":case"move-right":{an(n,t,e,{definition:{absolute:0},record:{relative:o==="move-left"?-1:1},focus:o==="move-left"?"end":"start"});break}case"tab":case"enter":{if(!an(n,t,e,{definition:{relative:1},record:{relative:0},focus:"end"})&&!an(n,t,e,{definition:{absolute:0},record:{relative:1},focus:"end"})){let i=Z.insertEmptyRecord(n,t.key);Z.moveTableSelection(n,t,{recordId:i,definitionId:e.view.columns[0]},"start")}break}case"backspace":{an(n,t,e,{definition:{relative:-1},record:{relative:0},focus:"end"})||Z.moveTableSelection(n,t,{recordId:e.selection.recordId,definitionId:void 0});break}}},PV=(o,t,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(o){case"tab":{ql(n,t,e,{relative:1});break}case"shift+tab":{ql(n,t,e,{relative:-1});break}case"move-left":case"move-right":{ql(n,t,e,{relative:o==="move-left"?-1:1})||(o==="move-left"?mu(n,t):ht(n,t));break}case"move-up":case"move-down":{ql(n,t,e,{relative:o==="move-up"?-r:r})||(o==="move-up"?mu(n,t):ht(n,t));break}case"backspace":{ql(n,t,e,{relative:-1})||ql(n,t,e,{relative:1}),Z.removeRecord(n,t.key,e.selection.recordId);break}case"enter":{an(n,t,e,{definition:{absolute:0},record:{relative:0},focus:"start"});break}}};s();var As=y(C());s();var Bv=y(C());function iN(o){let{editor:t,nodeKey:e,defaultTextDefinitionId:n}=o,[,r]=P(_V),[,i]=P(A),a=()=>{t.change(c=>{let l=Z.insertEmptyRecord(c,e);Z.moveTableSelection(c,e,{recordId:l,definitionId:n})})};return Bv.createElement(q.TouchableOpacity,{style:[S.flex1,r.cardPlaceholder,S.directionRow,S.alignCenter,S.justifyContentCenter,g.Padding.medium],activeStyle:r.cardPlaceholderActive,onPress:a},Bv.createElement(q.Text.Child,{style:[i.Body,i.textMuted],activeStyle:i.primary},Bv.createElement(v.Plus,{size:R.ICON_M,style:[g.Margin.smallRight]}),"New card"))}var _V=F.create({cardPlaceholder:o=>({borderRadius:o.radiuses.large,borderColor:o.colors.border.mid,borderWidth:1,borderStyle:"dashed"}),cardPlaceholderActive:o=>({borderColor:o.colors.primary.main})});s();var En=y(C());var qc=y(z());s();var Wv=JSON.parse('{"targetCard":"targetCard_YoeqR","controlButtons":"controlButtons_l18tz","grab":"grab_y1-pK","grabbing":"grabbing_fDPig"}');s();var Vc=y(C()),aN=y(z());function sN(o){let{nodeKey:t,editor:e,record:n,view:r,visible:i,onExpand:a,dragHandleRef:c,isDragging:l}=o,u=Vc.useRef(null),d=ci(u,c),p=ce(u),f=Et(),m=at(),h=ye(),b=r.coverDefinition?n.value.values[r.coverDefinition]?.length>0:!1,w=r.targetDefinition?!!n.value.values[r.targetDefinition]:!1,k=async()=>{let[_]=await f.prompt({title:"Select file",accept:"images",acceptURL:!1});!_||_.kind!=="file"||e.change(I=>{Z.cards.setCardCoverForRecord(I,t,n.key,_)})},x=()=>kn(_=>{e.change(I=>{Z.cards.setCardTargetForRecord(I,t,n.key,_)})},m,h,{accept:["page","file","space","collection","anchor","url"]}),O=_=>{_.preventDefault(),_.stopPropagation(),p.open(ne({groups:[{key:"actions",commands:[{key:"actions.target",icon:v.PageLink,...w?{title:"Target link",descendant:()=>ne({groups:[{key:"target",commands:[{key:"target.set",title:"Replace target",icon:v.Replace,trigger:()=>x()},{key:"target.remove",title:"Remove target",icon:v.Trashcan,trigger:()=>{e.change(I=>{Z.cards.removeCardTargetForRecord(I,t,n.key)})}}]}]})}:{title:"Add target link",trigger:()=>x()}},{key:"actions.cover",icon:v.Image,...b?{title:"Cover",descendant:()=>ne({groups:[{key:"cover",commands:[{key:"cover.set",title:"Replace cover",icon:v.Replace,trigger:()=>{k()}},{key:"cover.remove",title:"Remove cover",icon:v.Trashcan,trigger:()=>{e.change(I=>{Z.cards.removeCardCoverForRecord(I,t,n.key)})}}]}]})}:{title:"Add cover",trigger:()=>{k()}}},{key:"actions.delete",title:"Delete",icon:v.Trashcan,trigger:()=>{e.change(I=>{Z.removeRecord(I,t,n.key)})}}]}]}))};return Vc.createElement(aN.TouchableWithoutFeedback,{onPressIn:_=>{_.preventDefault(),_.stopPropagation()}},Vc.createElement(Y,{style:[M.flex.row,M.flex.alignCenter,Wv.controlButtons,l&&M.opacity.translucent],inlineStyle:p.opened||i?{opacity:1}:void 0},Vc.createElement(Gt,{ref:d,kind:"secondary",size:"small",leadingIcon:v.GrabberVertical.CSS,iconOnly:!0,rounded:!0,label:"Drag card",tooltipTitle:l?void 0:`Click for options.
Drag to move.`,onClick:O,preventFocusOnPress:!0,style:{cursor:l?"grabbing":"grab"}}),Vc.createElement(Y,{style:[M.gap.smallColumnGap,M.margin.autoLeft]},Vc.createElement(B,{kind:"secondary",size:"small",rounded:!0,icon:v.Maximize,onPress:a,title:"Open card",tooltipDelay:300}))))}s();var DC=y(C()),Fv=y(z());function cN(o){let{coverRef:t}=o,[,e]=P(IV),n=$e(t),r=n.resolution?.extra?.file,i=n&&r&&Us(r)?zi(r.downloadURL,{width:371}):null;return i?DC.createElement(Fv.View,{style:e.cardCover},DC.createElement(Fv.Image,{source:{uri:i},style:e.cardImage})):null}var IV=F.create({cardCover:o=>({backgroundColor:o.colors.background.muted}),cardImage:{width:"100%",aspectRatio:16/9}});function lN(o){let{nodeKey:t,definition:e,editor:n,readOnly:r,record:i,view:a,selected:c,selectedBy:l,isLastInRow:u,beforeOrderIndex:d,afterOrderIndex:p,onExpand:f}=o,[,m]=P(TV),[,h]=P(A),b=Ra(l),[w,k]=En.useState(),x=Go(w),O=En.useRef(null),_={type:"table-record",id:i.key,blockKey:t,previewLabel:"Move card"},[{dragging:I},N]=Cc({type:_.type,item:_,canDrag:()=>!r,collect:ie=>({dragging:ie.isDragging()})}),[T,E]=Jn({accept:[_.type],drop:(ie,Ze)=>{Ze.didDrop()||n.change(pt=>{Z.moveRecord(pt,t,ie.id,x.current==="before"?{before:d,after:i.value.orderIndex}:{before:i.value.orderIndex,after:p})})},hover:(ie,Ze)=>{if(!Ze.canDrop())return;let pt=RV(Ze,O);w!==pt&&k(pt)},canDrop:ie=>i.key!==ie.id&&t===ie.blockKey,collect:ie=>({higlighted:ie.isOver()&&ie.canDrop()})}),L=E(O),V=a.targetDefinition?i.value.values[a.targetDefinition]:void 0,j=$e(V),oe=()=>{n.change(ie=>{Z.moveTableSelection(ie,t,{recordId:i.key}),ie.focus()})},H=a.coverDefinition&&i.value.values[a.coverDefinition]?.[0]?i.value.values[a.coverDefinition]?.[0]:null,J=En.createElement(qc.View,{style:[S.flex1,g.Padding.medium,!H&&!r&&g.Margin.mediumVertical,!r&&m.editableArea]},a.columns.map((ie,Ze)=>{let pt=e[ie],nt=En.createElement(Bd,{record:i,selected:!1,definition:pt,nodeKey:t,editor:n,readOnly:r});return En.createElement(qc.View,{key:ie,style:[Ze<a.columns.length-1?g.Margin.smallBottom:null]},a.hideColumnTitle?null:En.createElement(qc.View,null,En.createElement(qc.Text,{style:[h.Label,h.textMid]},pt.title)),nt)}));return En.createElement(Jw,{style:[S.flex1],readOnly:r,selected:c,selectionColor:b.base,onSelect:oe},En.createElement(Y,{style:[Wv.targetCard,M.flex.flex1,I&&M.opacity.translucent,N1,{[gg]:T.higlighted&&(!u||u&&w==="before"),[Ou]:T.higlighted&&u&&w==="after"}],ref:L},En.createElement(us,{style:[S.flex1,S.directionColumn],...V?{component:q.TouchableOpacity,href:r?j.href:void 0,onPress:ie=>{ie.preventDefault(),j?.open()}}:{component:q.View}},H?En.createElement(cN,{coverRef:{kind:"file",file:H}}):null,r?J:En.createElement(qc.TouchableWithoutFeedback,{onPressIn:ie=>{ie.preventDefault(),ie.stopPropagation()}},J),r?null:En.createElement(sN,{nodeKey:t,editor:n,record:i,view:a,visible:c,onExpand:f,dragHandleRef:N,isDragging:I}))))}function RV(o,t){if(!t?.current)return;let e=t.current.getBoundingClientRect(),n=.5*(e.right-e.left),r=o.getClientOffset();return r?r.x-e.left<n?"before":"after":void 0}var TV=F.create({editableArea:{cursor:"text"}});function uN(o){let{nodeKey:t,editor:e,readOnly:n,definition:r,records:i,view:a,selection:c,selections:l,openRecord:u}=o,d=xu(),p=As.useMemo(()=>a.columns.find(h=>r[h].type==="text")||void 0,[a.columns,r]),f=As.useMemo(()=>{switch(a.cardSize){case"medium":return{mobile:1,tablet:2,desktop:3};case"large":return{mobile:1,tablet:1,desktop:2};default:De(a.cardSize)}},[a.cardSize]),m=As.useCallback(({item:h,index:b})=>{if(h.key==="new")return As.createElement(iN,{editor:e,nodeKey:t,defaultTextDefinitionId:p});let w=!c.definitionId&&c.recordId===h.key,k=l.find(x=>x.recordId===h.key&&!x.definitionId);return As.createElement(lN,{nodeKey:t,editor:e,readOnly:n,definition:r,record:h,view:a,selected:w||!!k,selectedBy:w?void 0:k?.clientId,isLastInRow:f[d]===1||(b+1)%f[d]===0,beforeOrderIndex:b>0?i[b-1].value.orderIndex:void 0,afterOrderIndex:b<i.length-1?i[b+1].value.orderIndex:void 0,onExpand:()=>u(h.key)})},[t,e,n,r,a,c.recordId,!!c.definitionId,p,u,l]);return As.createElement(L1,{data:n?i:[...i,{key:"new"}],renderItem:m,numColumnsPerScreen:f,columnSpacing:g.medium,rowSpacing:g.medium})}var dN={IconComponent:v.Cards3Columns,title:"Cards",recordName:"card",definitionName:"field",selectableView:!1,ViewComponent:uN,DefinitionSettingsComponent:nN,commands:EV,onKeyDown:rN};function EV(o){let{view:t,setView:e}=o;return[{key:"cards.definitions",commands:[{key:"cards.selectCover",title:"Cover image",icon:v.Image,descendant:()=>MV(o)},{key:"cards.selectTarget",title:"Target link",icon:v.PageLink,descendant:()=>LV(o)}]},{key:"cards.size",commands:[{key:"cards.size.medium",title:"Medium",icon:v.Cards3Columns,type:1,selected:t.cardSize==="medium",trigger:()=>{let[n]=e({...t,cardSize:"medium"});return n}},{key:"cards.size.large",title:"Large",icon:v.Cards2Columns,type:1,selected:t.cardSize==="large",trigger:()=>{let[n]=e({...t,cardSize:"large"});return n}}]},{key:"cards.options",commands:[{key:"cards.hideColumnTitle",title:"Show labels",icon:v.EyeOff,type:2,enabled:!t.hideColumnTitle,trigger:()=>{let[n]=e({...t,hideColumnTitle:!t.hideColumnTitle});return n}},{key:"cards.definitions",title:"Fields",icon:v.EyeOff,descendant:()=>pN(o)}]}]}function MV(o){let{view:t,definition:e,setView:n}=o;return Wd(e,r=>{n({...t,coverDefinition:r[0]})},{multiple:!1,search:"Select column for cover\u2026",selected:t.coverDefinition?[t.coverDefinition]:[],filterDefinition:r=>r.type==="files"})}function LV(o){let{view:t,definition:e,setView:n}=o;return Wd(e,r=>{n({...t,targetDefinition:r[0]})},{multiple:!1,search:"Select column for target\u2026",selected:t.targetDefinition?[t.targetDefinition]:[],filterDefinition:r=>r.type==="content-ref"})}function pN(o){let{view:t,definition:e,setView:n}=o;return Wd(e,r=>{let[,i]=n({...t,columns:r});return pN(i)},{multiple:!0,search:"Select visible columns\u2026",selected:t.columns})}s();s();var jm=y(C());s();var fN=y(Tf()),Nt=y(C());var _i=y(z());var Bs=Nt.createContext(new Map),gN=Nt.forwardRef((o,t)=>{let{nodeKey:e,editor:n,view:r,children:i}=o,{readOnly:a}=n,[,c]=P(hN),[l]=Is.useDimensions(),u=Ye(),d=u?l.width:l.width-2,{widths:p,totalWidth:f}=Nt.useMemo(()=>Wy(r,d,u),[d,r.columns,r.columnWidths]),[m,h]=Nt.useState({left:!1,right:!1});Nt.useEffect(()=>{h(O=>({left:f>d?O.left:!1,right:f>d?O.right:!1}))},[f,d]);let b=Go(m),w=Nt.useCallback(O=>{let{contentOffset:_,contentSize:I,layoutMeasurement:N}=O.nativeEvent,T=_.x>0,E=_.x<I.width-N.width;b.current.left===T&&b.current.right===E||h({left:T,right:E})},[]),k=Nt.useCallback((O,_)=>{let I=p.get(O);Ne(I),n.change(N=>{N.setDataByKey(e,["view","columnWidths",O],(0,fN.default)(I.width+_,By,Mm),{normalize:!1}),N.setDataByKey(e,["view","useNewSizing"],!0,{normalize:!1})})},[p]),x=(O,_)=>{n.change(I=>{Z.moveColumn(I,e,_.id,O)})};return Nt.createElement(_i.View,{ref:t},Nt.createElement(Bs.Provider,{value:p},Nt.createElement(_i.ScrollView,{horizontal:!0,style:c.tableScrollWrapper,onScroll:w,scrollEventThrottle:100,contentContainerStyle:c.tableWrapper},i,a?null:[...r.columns].reverse().reduce((O,_,I,N)=>{let T=p.get(_);return Ne(T),Nt.createElement(DV,{key:_,columnId:_,columnAfterId:N[I-1],tableKey:e,controller:T.controller,width:T.animated,onResizeComplete:k,onDropBefore:E=>x(_,E)},O)},null))),!u&&m.left?Nt.createElement(_i.View,{style:c.tableScrollIndicatorLeft,pointerEvents:"none"}):null,!u&&m.right?Nt.createElement(_i.View,{style:c.tableScrollIndicatorRight,pointerEvents:"none"}):null)});function DV(o){let{tableKey:t,columnId:e,columnAfterId:n,controller:r,width:i,children:a,onDropBefore:c,onResizeComplete:l}=o,[u,d]=P(hN),p=Nt.useMemo(()=>_i.PanResponder.create({onStartShouldSetPanResponder:(b,w)=>!1,onStartShouldSetPanResponderCapture:(b,w)=>!1,onMoveShouldSetPanResponder:(b,{dx:w})=>!0,onMoveShouldSetPanResponderCapture:(b,w)=>!1,onPanResponderGrant:(b,{dx:w})=>{},onPanResponderMove:(b,{dx:w})=>{r.setValue(w)},onPanResponderTerminationRequest:(b,w)=>!1,onPanResponderRelease:(b,{dx:w})=>{l(e,w)},onPanResponderTerminate:(b,w)=>{}}),[e,r,l]),f=q.useInteractiveState(p.panHandlers),[m,h]=Jn({accept:"table-definition",drop:(b,w)=>{w.didDrop()||c(b)},canDrop:b=>e!==b.id&&n!==b.id&&t===b.blockKey,collect:b=>({highlighted:b.isOver({shallow:!0})&&b.canDrop()})},[e,n,t]);return Nt.createElement(_i.Animated.View,{ref:h,style:[d.columnLine,{left:i}]},Nt.createElement(_i.View,{style:d.blockGrabber,...f.events},Nt.createElement(_i.View,{style:[d.blockGrabberBar,(f.hovered||f.dragging||m.highlighted)&&{backgroundColor:u.colors.primary.main}]})),a)}var zv=10,mN=3,hN=F.create({tableScrollWrapper:{borderWidth:0},tableScrollIndicatorLeft:o=>({position:"absolute",left:-1,top:0,bottom:0,width:1,shadowColor:K.BLACK,shadowOffset:{width:5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableScrollIndicatorRight:o=>({position:"absolute",right:-1,top:0,bottom:0,width:1,shadowColor:K.BLACK,shadowOffset:{width:-5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableWrapper:{position:"relative",overflow:"hidden",flexDirection:"column"},columnLine:{position:"absolute",top:0,bottom:0},blockGrabber:{position:"absolute",top:0,right:-(zv/2),bottom:0,width:zv,cursor:"ew-resize"},blockGrabberBar:{position:"absolute",top:0,right:zv/2-mN/2,bottom:0,width:mN,borderRadius:R.RADIUS_M},blockGrabberPlus:{position:"absolute",top:g.small,left:-(R.BUTTON_XS/2)+zv/2}});function yN(o){let{view:t,columnId:e,setView:n}=o,r=jm.default.useContext(Bs);function i(a){if(a){let{[e]:c,...l}=t.columnWidths||{};n({...t,useNewSizing:!0,columnWidths:l})}else n({...t,useNewSizing:!0,columnWidths:{...t.columnWidths,[e]:r.get(e)?.width||Pc}})}return jm.default.createElement(jm.default.Fragment,null,jm.default.createElement(kg,{value:typeof t.columnWidths?.[e]>"u",onValueChange:i,label:"Fill available space",labelDescription:"Expand this column to fill the available horizontal space"}))}s();var vN=(o,t,e,n)=>{let r=(i=e.selection.definitionId)=>{if(!i)return;let a=e.records.findIndex(d=>d.key===e.selection.recordId),c=e.records[a],l=e.records[a+1],u=Z.insertEmptyRecord(n,t.key,{before:c.value.orderIndex,after:l?.value.orderIndex});Z.moveTableSelection(n,t,{recordId:u,definitionId:i},"start")};switch(o){case"move-up":case"move-down":{an(n,t,e,{definition:{relative:0},record:{relative:o==="move-up"?-1:1},focus:o==="move-up"?"end":"start"})||(o==="move-up"?mu(n,t):ht(n,t));break}case"tab":case"move-right":{let i=o==="tab"?"select":"start";an(n,t,e,{definition:{relative:1},record:{relative:0},focus:i})||!an(n,t,e,{definition:{absolute:0},record:{relative:1},focus:i})&&o==="tab"&&r(e.view.columns[0]);break}case"shift+tab":case"move-left":{let i=o==="shift+tab"?"select":"end";an(n,t,e,{definition:{relative:-1},record:{relative:0},focus:i})||an(n,t,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:i});break}case"enter":{r();break}case"backspace":{if(an(n,t,e,{definition:{relative:-1},record:{relative:0},focus:"end"}))break;e.selection.recordId&&Z.isRowEmpty(t,e.selection.recordId)?(an(n,t,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"}),Z.removeRecord(n,t.key,e.selection.recordId)):an(n,t,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"});break}}};s();var Ln=y(C()),Kv=y(z());s();var Ii=y(C());s();var Vv=g.Padding.mediumLeft;s();var or=y(C()),Ws=y(z());var qv=or.default.forwardRef(function(t,e){let{recordKey:n,columnId:r,selected:i,selectedBy:a,width:c,children:l,header:u=!1,isFirstColumn:d=!1,isFirstRow:p=!1,isLastColumn:f=!1,isLastRow:m=!1,onPress:h,readOnly:b,...w}=t,k=or.default.useRef(null),x=ci(k,e),[,O]=P(NV),I={backgroundColor:Ra(a).base};or.default.useEffect(()=>{i&&k.current&&Sg(k.current,{behavior:"smooth",scrollMode:"if-needed"})},[i]);let N=or.default.createElement(Ws.Animated.View,{ref:x,style:[O.cell,S.directionRow,S.alignCenter,d?O.farLeftCell:{},p?O.topCell:{},m?O.bottomCell:{},p&&d?O.topLeftCell:{},p&&f?O.topRightCell:{},m&&d?O.bottomLeftCell:{},m&&f?O.bottomRightCell:{},u?O.columnHeader:{},p?mo.Bold:{},{width:c}]},l,i?or.default.createElement(or.default.Fragment,null,or.default.createElement(Ws.View,{style:[O.cellSelectionBorderTop,I]}),or.default.createElement(Ws.View,{style:[O.cellSelectionBorderBottom,I]}),or.default.createElement(Ws.View,{style:[O.cellSelectionBorderRight,I]}),or.default.createElement(Ws.View,{style:[O.cellSelectionBorderLeft,I]})):null);return or.default.createElement(pe,{style:[O.unsetDefaultTH,S.directionRow,S.justifyContentCenter],tag:u?"th":"td"},b?or.default.createElement(or.default.Fragment,null,N):or.default.createElement(Ws.TouchableWithoutFeedback,{...w},N))}),Mn=1,NV=F.create({unsetDefaultTH:{textAlign:"left"},cell:o=>({position:"relative",paddingVertical:g.small,paddingHorizontal:g.medium,borderLeftWidth:1,borderTopWidth:1,borderColor:o.colors.border.mid}),cellSelectionBorderTop:{position:"absolute",top:-Math.floor(Mn/2),left:-Math.floor(Mn/2),right:-Math.floor(Mn/2),height:Mn},cellSelectionBorderBottom:{position:"absolute",bottom:-Math.floor(Mn/2),left:-Math.floor(Mn/2),right:-Math.floor(Mn/2),height:Mn},cellSelectionBorderRight:{position:"absolute",bottom:-Math.floor(Mn/2),top:-Math.floor(Mn/2),right:-Math.floor(Mn/2),width:Mn},cellSelectionBorderLeft:{position:"absolute",bottom:-Math.floor(Mn/2),top:-Math.floor(Mn/2),left:-Math.floor(Mn/2),width:Mn},topCell:{borderTopWidth:0},farLeftCell:{borderLeftWidth:0},topLeftCell:{},bottomLeftCell:{},topRightCell:{},bottomRightCell:{},bottomCell:{borderBottomWidth:1},columnHeader:o=>({backgroundColor:"transparent"})});var SN=Ii.memo(function(t){let{editor:e,nodeKey:n,readOnly:r,definition:i,view:a}=t,c=Ii.useContext(Bs),[,l]=P(WV);return Ii.createElement(pe,{tag:"thead"},Ii.createElement(pe,{style:[S.directionRow,l.background],tag:"tr"},a.columns.map((u,d)=>{let p=i[u],f=c.get(u);return Ne(f),Ii.createElement(BV,{key:u,columnId:u,editor:e,nodeKey:n,columnDef:p,view:a,readOnly:r,width:f.animated,isFirstColumn:d===0,isLastColumn:d===a.columns.length-1,isFirstRow:!0,header:!0})})))}),bN=q.createInteractiveHandle("table-column"),AV=q.createInteractiveComponent(pe);function BV(o){let{columnDef:t,readOnly:e,editor:n,nodeKey:r,view:i,...a}=o;return Ii.createElement(AV,{handle:bN},Ii.createElement(qv,{focusable:!1,readOnly:e,...a},Ii.createElement(Q6,{editor:n,nodeKey:r,definition:t,readOnly:e,style:[S.flex1,a.isFirstColumn&&!e?Vv:null]}),e?null:Ii.createElement(Gv,{editor:n,nodeKey:r,view:i,definition:t,descendantOf:bN,icon:v.GrabberVertical,rounded:!0})))}var WV=F.create({background:o=>({backgroundColor:o.colors.background.mid,borderBottomColor:o.colors.border.mid,borderBottomWidth:2})});s();var At=y(C());var Zm=y(z());var wN=q.createInteractiveHandle("table-row"),FV=q.createInteractiveComponent(pe),xN=At.memo(At.forwardRef(function(t,e){let{nodeKey:n,editor:r,readOnly:i,record:a,definition:c,view:l,isFirstRow:u,isLastRow:d,beforeOrderIndex:p,afterOrderIndex:f,selectedColumnId:m,selections:h,definitionColorKinds:b,openRecord:w,style:k}=t,x=At.useContext(Bs),O=Zr[l.type],_={id:a.key,type:"table-record",blockKey:n,previewLabel:"Move record",previewIcon:"TableRecord"},[{dragging:I},N]=Ia({type:_.type,item:_,canDrag:()=>!i,collect:H=>({dragging:H.isDragging()})}),T=(H,J)=>{r.change(ie=>{Z.moveRecord(ie,n,H.id,J)})},E=At.useRef(null),L=ce(E),V=()=>{L.open(ne({search:"Select action\u2026",groups:[{key:"table.row",commands:[{key:"table.row.open",title:`Open ${O.recordName}`,icon:v.Maximize,trigger:()=>{w(a.key)}},{key:"table.row.insertAbove",title:"Insert above",icon:v.TableInsertRowAbove,trigger:()=>{r.change(H=>{Z.insertEmptyRecord(H,n,{after:a.value.orderIndex,before:p})})}},{key:"table.row.insertBelow",title:"Insert below",icon:v.TableInsertRow,trigger:()=>{r.change(H=>{Z.insertEmptyRecord(H,n,d?{before:a.value.orderIndex}:{after:a.value.orderIndex,before:f})})}},{key:"table.row.addColumn",icon:v.TableInsertColumn,title:`Add ${O.definitionName}`,trigger:()=>{r.change(H=>{Z.insertColumn(H,n,Z.createColumnFromType("text"))})},descendant:()=>Ns(H=>{r.change(J=>{Z.insertColumn(J,n,Z.createColumnFromType(H))})})},{key:"table.row.remove",title:`Delete ${O.recordName}`,icon:v.Trashcan,trigger:()=>{r.change(H=>{Z.removeRecord(H,n,a.key)})}}]}]}))},[,j]=P(ON),oe=At.createElement(FV,{ref:e,handle:wN,style:[S.directionRow,I&&Ke.translucent,k],tag:"tr"},l.columns.map((H,J)=>{let ie=c[H],Ze=m===H,pt=h?.find(Jt=>Jt.definitionId===H),nt=b[H],wt=At.createElement(Bd,{definitionColorKind:nt,record:a,selected:Ze,definition:ie,nodeKey:n,editor:r,readOnly:i});return At.createElement(qv,{key:H,recordKey:a.key,columnId:H,width:x.get(H).animated,selected:Ze||!!pt,selectedBy:Ze?void 0:pt?.clientId,isFirstColumn:J===0,isLastColumn:J===l.columns.length-1,isFirstRow:u,isLastRow:d,onPressIn:Jt=>{Jt.type!=="keydown"&&(Jt.preventDefault(),r.change(Le=>{Z.moveTableSelection(Le,n,{recordId:a.key,definitionId:H})}))},readOnly:i},J>0||i?wt:At.createElement(At.Fragment,null,At.createElement(q.View.Child,{descendantOf:wN,ref:N,style:[S.justifyContentCenter,j.rowGrabber],inactiveStyle:L.opened?{}:Ke.hidden,activeStyle:Ke.visible},At.createElement(B,{ref:E,size:"xsmall",rounded:!0,kind:"grey",active:L.opened,title:`Click for options.
Drag to move.`,icon:v.GrabberVertical,onPress:V})),At.createElement(Zm.View,{style:[S.flex1,S.justifyContentCenter,Vv]},wt)))}));return i?oe:At.createElement(Zm.View,null,oe,At.createElement(CN,{currentItem:_,position:"before",onDrop:H=>T(H,{before:p,after:a.value.orderIndex})}),d?At.createElement(CN,{currentItem:_,position:"after",onDrop:H=>T(H,{before:a.value.orderIndex,after:f})}):null)}));function CN(o){let{currentItem:t,position:e,onDrop:n}=o,r=q.useInteractiveState(),[,i]=P(ON),{logAnalyticsEvent:a}=At.useContext(Be),[c,l]=Jn({accept:"table-record",drop:(u,d)=>{d.didDrop()||(a({type:"edit_page_document_move_block",method:"dnd",blockType:"table-row",toParent:"table",fromParent:"table"}),n(u))},canDrop:u=>t.id!==u.id&&t.blockKey===u.blockKey,collect:u=>({highlighted:u.isOver()&&u.canDrop()})});return At.createElement(Zm.View,{ref:l,style:[i.insertionLineWrapper,e==="after"?i.insertionLineAfter:i.insertionLineBefore],...r.events},At.createElement(Zm.View,{style:[i.insertionLineBar,(r.hovered&&r.dragging||c.highlighted)&&i.insertionLineBarHovered]}))}var Hv=10,kN=3,ON=F.create({insertionLineWrapper:{position:"absolute",left:0,right:0,height:Hv},insertionLineBefore:{top:-(Hv/2)},insertionLineAfter:{bottom:-(Hv/2)},insertionLineBar:{position:"absolute",left:0,right:0,top:Hv/2-kN/2,height:kN,borderRadius:R.RADIUS_M},insertionLineBarHovered:o=>({backgroundColor:o.colors.primary.main}),rowGrabber:{position:"absolute",left:g.xsmall,bottom:"auto",zIndex:10}});var zV=20;function PN(o){let{view:t,editor:e,nodeKey:n}=o,[r,i]=Ln.useState(),a=Ln.useCallback(c=>{c!==null&&i(c)},[]);return Ln.createElement(gN,{editor:e,nodeKey:n,view:t,ref:a},Ln.createElement(VV,{...o,parentRef:r}))}function VV(o){let{selection:t,selections:e,records:n,definition:r,view:i,readOnly:a,editor:c,nodeKey:l,parentRef:u,openRecord:d}=o,{mode:p}=Ln.useContext(Ko),f=c.value.document.getNode(l),m=Ln.useContext(Bs),h=K1({enabled:p==="app"&&n.length>zV,parentRef:u?{current:u}:void 0,getEstimatedItemHeight:x=>$w(f,String(x.key),m),list:n.map(x=>({key:x.key}))}),b=oN(r,i.columns),k=!(i.hideHeader||a&&Z.isHeaderEmpty({definition:r,view:i,records:{}}))||!!t.recordId;return Ln.createElement(pe,{tag:"table"},k?Ln.createElement(SN,{definition:r,view:i,editor:c,nodeKey:l,readOnly:a}):null,Ln.createElement(pe,{tag:"tbody"},h.map(([x,O,_],I)=>{let N=n[I],T=I>0?n[I-1]:void 0,E=n[I+1],L=e.filter(V=>V.recordId===N.key);return O?Ln.createElement(xN,{key:N.key,ref:x.nodeRef,selectedColumnId:t.recordId===N.key?t.definitionId:void 0,selections:L.length>0?L:void 0,record:N,definition:r,view:i,readOnly:a,editor:c,nodeKey:l,isFirstRow:!k&&I===0,isLastRow:I===n.length-1,beforeOrderIndex:T?.value.orderIndex,afterOrderIndex:E?.value.orderIndex,definitionColorKinds:b,openRecord:d,...x.nodeProps}):Ln.createElement(Kv.View,{key:N.key,style:{height:_},ref:x.nodeRef},Ln.createElement(Kv.Text,null,Z.getTableRowPlainText(f,N.value)))})))}var _N={IconComponent:v.Table,title:"Table",recordName:"row",definitionName:"column",selectableView:!0,ViewComponent:PN,DefinitionSettingsComponent:yN,commands:GV,definitionCommands:qV,onKeyDown:vN};function qV(o){let{view:t,definition:e,setView:n}=o,r=typeof t.columnWidths?.[e.id]>"u";return[{key:"grid",commands:[{key:"grid.autoSize",title:"Auto size",icon:v.AutoSize,type:2,enabled:r,trigger:()=>{if(r)n({...t,useNewSizing:!0,columnWidths:{...t.columnWidths,[e.id]:Pc}});else{let{[e.id]:i,...a}=t.columnWidths||{};n({...t,useNewSizing:!0,columnWidths:a})}}}]}]}function GV(o){let{view:t,setView:e}=o;return[{key:"grid",commands:[{key:"grid.toggleHeader",title:"Show header",type:2,enabled:!t.hideHeader,trigger:()=>{let[n]=e({...t,hideHeader:!t.hideHeader});return n}},{key:"grid.resetSizing",title:"Reset column sizing",trigger:()=>{let{columnWidths:n,...r}=t;e({...r,useNewSizing:!0})}},{key:"grid.columns",title:"Hide Columns",icon:v.EyeOff,descendant:()=>IN(o)}]}]}function IN(o){let{view:t,definition:e,setView:n}=o;return Wd(e,r=>{let[,i]=n({...t,columns:r});return IN(i)},{multiple:!0,search:"Select visible columns",selected:t.columns})}var Zr={grid:_N,cards:dN};function Gv(o){let{nodeKey:t,editor:e,view:n,definition:r,descendantOf:i,icon:a,rightIcon:c,rounded:l}=o,u={id:r.id,type:"table-definition",blockKey:t,previewLabel:za(r)},[,d]=P(HV),p=Jr.useRef(null),f=ce(p),m=q.useInteractiveState(),[,h]=Cc({type:u.type,item:u,canDrag:()=>!0}),[b,w]=Jr.useState(null),k=E=>{e.change(L=>{Z.setColumnDefinition(L,t,r.id,E)})},x=()=>{let L=e.value.document.assertBlock(t).data.toFrozenObject(),V=L.definition[r.id];return[_(L.view,V),O(L.view,V)]},O=(E,L)=>({definition:L,view:E,setView:V=>(e.change(j=>{Z.setView(j,t,V)}),x()),setDefinition:V=>(k(V),x()),openModal:V=>{w({type:"command",modal:Jr.createElement(V,{definition:L,onClose:()=>w(null)})})}}),_=(E,L)=>{let V=jr[L.type],j=Zr[E.type],oe=O(E,L);return ne({search:"Select action\u2026",groups:[{key:"definition.type",commands:[{key:"definition.type.change",title:V.title,icon:V.IconComponent,descendant:()=>Ns(H=>{w({type:"change_type",columnType:H})},{selectedType:L.type})}]},...V.commands?V.commands(oe):[],...j.definitionCommands?j.definitionCommands(oe):[],{key:"definition.danger",commands:[{key:"definition.add",title:`Add ${j.definitionName}`,icon:v.TableInsertColumn,trigger:()=>{e.change(H=>{let J=[...E.columns].findIndex(ie=>L.id===ie);Z.insertColumn(H,t,Z.createColumnFromType("text"),J+1)})},descendant:()=>Ns(H=>{let J=[...E.columns].findIndex(ie=>L.id===ie);e.change(ie=>{Z.insertColumn(ie,t,Z.createColumnFromType(H),J+1)})})},{key:"definition.hide",title:`Hide ${j.definitionName}`,icon:v.EyeOff,trigger:()=>{e.change(H=>{Z.hideColumn(H,t,L.id)})}},{key:"definition.delete",title:`Delete ${j.definitionName}`,icon:v.Trashcan,trigger:()=>{w({type:"delete"})}}]}]})},I=()=>{f.open(_(n,r))},N=E=>{w(null),E&&e.change(L=>{Z.removeColumn(L,t,r.id)})},T=E=>{w(null),E&&b?.type==="change_type"&&k(Z.changeColumnType(r,b.columnType))};return Jr.createElement(Jr.Fragment,null,b?.type==="delete"?Jr.createElement(Ap,{kind:"danger",title:"Delete column",confirmButtonText:"Delete",onComplete:N},"Do you really want to delete this column and all of its data?"):null,b?.type==="change_type"?Jr.createElement(Ap,{title:"Change column type",confirmButtonText:"Change",onComplete:T},"You are about to change this column type from ",r.type," to"," ",b.columnType,". We will try to convert any value automatically, but you may lose data if we cannot convert them."):null,b?.type==="command"?b.modal:null,Jr.createElement(q.View.Child,{...m.events,descendantOf:i,ref:h,style:[S.justifyContentCenter,d.columnGrabber],inactiveStyle:f.opened||m.focused?{}:Ke.hidden,activeStyle:Ke.visible,focusStyle:Ke.translucent},Jr.createElement(B,{kind:"grey",size:"small",ref:p,title:`Click for options.
Drag to move.`,active:f.opened,icon:a,rightIcon:c,rounded:l,onPress:I})))}var HV=F.create({columnGrabber:{position:"absolute",right:g.xsmall,bottom:"auto"}});function Xv(o,t,e){let n=t.data.toFrozenObject(),r=Zr[n.view.type],i=r.commands?r.commands(RN(o,n,t.key,e)):[];return{...et(o,t.key,[{key:"views",commands:Object.entries(Zr).map(([a,c])=>({key:a,title:c.title,icon:c.IconComponent,type:1,selected:a===n.view.type,trigger:()=>{o.change(u=>{Z.setView(u,t.key,{type:a})});let l=o.value.document.assertBlock(t.key);return Xv(o,l,e)}}))},{key:"table",commands:[{key:"addColumn",icon:v.ArrowRight,title:`Add ${r.definitionName}`,trigger:()=>{o.change(a=>{Z.insertColumn(a,t.key,Z.createColumnFromType("text"))})},descendant:()=>Ns(a=>{o.change(c=>{Z.insertColumn(c,t.key,Z.createColumnFromType(a))})})},{key:"insertRow",icon:v.ArrowDown,title:`Insert ${r.recordName}`,trigger:()=>{o.change(a=>{Z.insertEmptyRecord(a,t.key)})}}]},...i,...e]),search:"Select action\u2026"}}function RN(o,t,e,n){return{view:t.view,definition:t.definition,setView:r=>{o.change(a=>{Z.setView(a,e,r)});let i=o.value.document.assertBlock(e);return[Xv(o,i,n),RN(o,i.data.toFrozenObject(),e,n)]}}}s();var EN=y(f9()),io=y(C()),Fs=y(z());s();var Va=y(C());var AC=y(z());s();var NC=JSON.parse('{"definitionWrapper":"definitionWrapper_0vx5U","grabberWrapper":"grabberWrapper_WLh-V"}');var TN=q.createInteractiveHandle("record-column-value-line");function BC(o){let{nodeKey:t,editor:e,readOnly:n,record:r,view:i,definition:a,style:c}=o,[,l]=P(KV),u={id:a.id,type:"table-definition",blockKey:t,previewLabel:za(a)},[{dragging:d},p]=Cc({type:u.type,item:u,canDrag:()=>!n,collect:h=>({dragging:h.isDragging()})}),[f,m]=Jn({accept:[u.type],drop:(h,b)=>{b.didDrop()||e.change(w=>{Z.moveColumn(w,t,h.id,a.id)})},canDrop:h=>a.id!==h.id&&t===h.blockKey,collect:h=>({higlighted:h.isOver()&&h.canDrop()})});return Va.createElement(Y,{ref:m,style:[M.flex.column,M.flex.flex1,NC.definitionWrapper,d&&M.opacity.translucent,hg,{[Ou]:f.higlighted}]},Va.createElement(q.View,{handle:TN,style:c},Va.createElement(AC.View,{style:[S.directionRow,S.alignCenter,g.Margin.xsmallBottom]},Va.createElement(Y,{style:[M.position.relative,M.flex.alignCenter]},Va.createElement(vR,{style:[M.padding.smallRight,NC.grabberWrapper],ref:p,size:"medium"}),Va.createElement(AC.View,{style:[S.flex1]},Va.createElement(_u,null,za(a)))),n?null:Va.createElement(Gv,{nodeKey:t,editor:e,view:i,definition:a,descendantOf:TN,icon:jr[a.type].IconComponent,rightIcon:v.ChevronDown})),Va.createElement(Bd,{nodeKey:t,editor:e,readOnly:n,record:r,definition:a,selected:!1,displayMode:"block",style:[l.recordValueBox,g.Padding.smallVertical,g.Padding.mediumHorizontal]})))}var KV=F.create({recordValueBox:o=>({borderWidth:1,borderColor:o.colors.border.mid,backgroundColor:o.colors.background.main,borderRadius:o.radiuses.large,minHeight:R.BUTTON_L})});function MN(o){let{nodeKey:t,editor:e,readOnly:n,record:r,records:i,view:a,definition:c,openRecord:l,onClose:u}=o,[,d]=P(A),[,p]=P(XV),[f,m]=io.useState(!1),h=Zr[a.type],b=a.columns,w=io.useMemo(()=>(0,EN.default)(Object.keys(c),b),[b,a,c]),k=io.useMemo(()=>i.findIndex(_=>_.key===r.key),[i,r.key]),x=i[k-1],O=i[k+1];return io.createElement(ho,{title:`Edit ${h.recordName}`,size:"large",footer:io.createElement(Fs.View,{style:[S.directionRow,S.alignCenter,S.justifySpaceBetween]},n?null:io.createElement(B,{icon:v.Trashcan,kind:"secondary",size:"medium",onPress:()=>{e.change(_=>{Z.removeRecord(_,t,r.key)}),u()}},`Delete ${h.recordName}`),io.createElement(Fs.View,{style:[S.directionRow,S.alignCenter]},io.createElement(B,{icon:v.ChevronLeft,kind:"secondary",size:"medium",title:`Previous ${h.recordName}`,disabled:!x,onPress:()=>{x&&l(x.key)}}),io.createElement(Fs.View,{style:[g.Padding.mediumHorizontal]},io.createElement(Fs.Text,{style:[d.Body,d.textMuted]},`${k+1} of ${i.length}`)),io.createElement(B,{icon:v.ChevronRight,kind:"secondary",size:"medium",title:`Next ${h.recordName}`,disabled:!O,onPress:()=>{O&&l(O.key)}}))),onClose:u},io.createElement(Fs.View,null,b.map((_,I)=>io.createElement(BC,{key:_,nodeKey:t,editor:e,readOnly:n,view:a,record:r,definition:c[_],style:[g.Margin.mediumBottom,I===0?null:g.Margin.xsmallTop]}))),w.length>0||!n?io.createElement(Fs.View,{style:[S.directionRow,S.justifySpaceBetween]},w.length>0?io.createElement(B,{icon:f?v.ChevronUp:v.ChevronDown,kind:"grey",size:"medium",onPress:()=>{m(_=>!_)}},f?"Hide":`Show hidden ${h.definitionName}s`):null,n?null:io.createElement(Ig,{icon:v.Plus,kind:"grey",size:"medium",palette:()=>Ns(_=>{e.change(I=>{Z.insertColumn(I,t,Z.createColumnFromType(_))})})},"Add ",h.definitionName)):null,f?io.createElement(Fs.View,{style:[p.hiddenColumnsGroup,g.Margin.mediumTop,g.Padding.mediumTop]},w.map((_,I)=>io.createElement(BC,{key:_,nodeKey:t,editor:e,readOnly:n,view:a,record:r,definition:c[_],style:[g.Margin.mediumBottom,I===0?null:g.Margin.xsmallTop]}))):null)}var XV=F.create({hiddenColumnsGroup:o=>({borderTopWidth:1,borderTopColor:o.colors.border.mid,borderTopStyle:"dashed"})});s();function LN(o){return Z.defaultRecordSortedKeys(o).map(e=>({key:e,value:o.records[e]}))}function DN(o){let{node:t,editor:e,isFocused:n,selections:r}=o,i=t.data.toFrozenObject(),a=Zt.useMemo(()=>LN(i),[i]),[c,l]=Zt.useState(null),u=Zt.useMemo(()=>c===null?null:a.find(k=>k.key===c),[a,c]),d=Zt.useCallback(k=>{l(k)},[l]),p=Zt.useMemo(()=>{let k=[],x=[];return r.forEach(O=>{let _=Z.getTableSelection(e.value.document,O,t);k.push(_),!_.recordId&&!_.definitionId&&x.push(O)}),{states:k,filtered:ua.create(x)}},[a,t,e.readOnly,r]),f=Zt.useMemo(()=>e.readOnly?{}:Z.getTableSelection(e.value.document,e.value.selection,t),[a,t,e.readOnly,e.value.selection]),m={view:i.view,definition:i.definition,records:a,selection:f,selections:p.states},h=Zt.useContext(Lv);h.set(t.key,m),Zt.useEffect(()=>()=>{h.delete(t.key)},[h,t.key]);let b=Zr[m.view.type],w=yi(e,t.key);return Zt.createElement(Zt.Fragment,null,Zt.createElement(fe,{...o,palette:Xv(e,t,w?[w]:[])},Zt.createElement(Mt,{...o,selectable:b.selectableView,isFocused:n&&!f.definitionId&&!f.recordId,selections:p.filtered,onSelect:()=>{e.change(k=>{Z.moveTableSelection(k,t,{}),k.focus()})}},Zt.createElement(H1,{readOnly:!!u},Zt.createElement(b.ViewComponent,{editor:o.editor,nodeKey:t.key,readOnly:e.readOnly,openRecord:d,...m})))),u?Zt.createElement(MN,{editor:o.editor,nodeKey:t.key,readOnly:e.readOnly,view:m.view,records:m.records,definition:m.definition,record:u,openRecord:d,onClose:()=>{l(null)}}):null)}s();var Gl=y(ii()),Yv=y(C());var NN=(0,Gl.isKeyHotkey)("enter"),UV=(0,Gl.isKeyHotkey)("shift+enter"),AN=(0,Gl.isKeyHotkey)("mod+enter"),WC=(0,Gl.isKeyHotkey)("tab"),Uv=(0,Gl.isKeyHotkey)("shift+tab"),BN=(0,Gl.isKeyHotkey)("backspace");function WN(){let o=Yv.useContext(Lv);return[Yv.useMemo(()=>({onKeyDown:(...e)=>YV(o,...e)}),[o])]}function YV(o,t,e,n){if(t.key!=="ArrowUp"&&t.key!=="ArrowDown"&&t.key!=="ArrowRight"&&t.key!=="ArrowLeft"&&!(NN(t)&&!UV(t))&&!AN(t)&&!BN(t)&&!WC(t)&&!Uv(t))return;let{selection:r}=e.value;if(!Ft(r)||!r.isCollapsed&&!WC(t)&&!Uv(t))return;let i=Z.getCurrentTable(e.value);if(!i)return;let{table:a,fragment:c}=i;if(i.ancestorBlocks&&i.ancestorBlocks.size>0)return;if(AN(t))return t.preventDefault(),ht(e,a),e;let l=o.get(a.key);if(!l||!l.selection.recordId&&!l.selection.definitionId)return;let u=a.data.toFrozenObject(),d=l.selection.recordId?u.records[l.selection.recordId]:null,p=l.selection.definitionId?u.definition[l.selection.definitionId]:null,f=Zr[l.view.type],m=p?jr[p.type]:null,h=w=>{if(!m||!m.onKeyDown||!d||!p)return!1;let k=!1;return m.onKeyDown(w,d.values[p.id],x=>{k=!0,Z.setRecordValue(e,a.key,l.selection.recordId,l.selection.definitionId,x)}),k},b=w=>{f.onKeyDown&&f.onKeyDown(w,a,l,e)};if(NN(t)){if(c&&!r.hasAnchorAtEndOf(c))return;t.preventDefault(),h("enter")||b("enter")}else if(BN(t)){if(c&&!r.hasAnchorAtStartOf(c))return;t.preventDefault(),h("backspace")||b("backspace")}else if(WC(t)||Uv(t))t.preventDefault(),b(Uv(t)?"shift+tab":"tab");else if(t.key==="ArrowDown"){if(c&&!jV(c,r))return;t.preventDefault(),b("move-down")}else if(t.key==="ArrowUp"){if(c&&!$V(c,r))return;t.preventDefault(),b("move-up")}else if(t.key==="ArrowRight"){if(c&&!r.hasAnchorAtEndOf(c))return;t.preventDefault(),b("move-right")}else if(t.key==="ArrowLeft"){if(c&&!r.hasAnchorAtStartOf(c))return;t.preventDefault(),b("move-left")}return e}function $V(o,t){let e=o.nodes.first();return e?t.hasAnchorIn(e):!1}function jV(o,t){let e=o.nodes.last();return e?t.hasAnchorIn(e):!1}s();var ao=y(C()),Jv=y(z());s();var FN=y(C()),zN=y(z());function FC(o){let{children:t}=o,[,e]=P(ZV);return FN.default.createElement(zN.View,{style:[e.blockTabsBody]},t)}var ZV=F.create({blockTabsBody:o=>({border:`1px solid ${o.colors.border.main}`,backgroundColor:o.colors.background.main,paddingHorizontal:Xw,borderRadius:o.radiuses.medium,borderTopLeftRadius:0,"@media print":{padding:0,border:0}})});s();var $v=y(C()),zC=y(z());function VC(o){let{children:t}=o,[,e]=P(JV);return $v.default.createElement(zC.View,{style:e.blockTabsHeader},$v.default.createElement(fg,{style:e.blockTabsHeaderContainer},$v.default.createElement(zC.View,{style:e.blockTabsHeaderContent},t)))}var JV=F.create({blockTabsHeader:{position:"relative",display:"flex",flexDirection:"row",width:"100%",alignItems:"center",whiteSpace:"nowrap",marginBottom:-1,"@media print":{display:"none"},zIndex:1},blockTabsHeaderContainer:{maxWidth:"100%",display:"flex"},blockTabsHeaderContent:o=>({maxWidth:"100%",display:"flex",flexDirection:"row",borderTopRightRadius:o.radiuses.medium,borderTopLeftRadius:o.radiuses.medium,pointerEvents:"auto"})});s();var xo=y(C()),i7=y(t7()),zs=y(z());s();var Fd=y(C());var jv=y(z());var r7=Fd.default.forwardRef(function(t,e){let{active:n,editor:r,tab:i,isLast:a,onDropBefore:c,onDropAfter:l,onInsertLeft:u,onInsertRight:d,onDelete:p,children:f,...m}=t;return Fd.default.createElement(jv.View,{style:[n7.tabItemControls,n&&n7.tabItemControlsActive],...m,ref:e},Fd.default.createElement(o7,{position:"before",onDrop:c,onInsert:u}),f,a?Fd.default.createElement(o7,{position:"after",onDrop:l,onInsert:d}):null)});function o7(o){let{position:t,onDrop:e,onInsert:n}=o,[r,i]=Jn({accept:["tab"],drop:(a,c)=>{c.didDrop()||a.type==="tab"&&e(a.id)},canDrop:a=>a.type==="tab",collect:a=>({hovered:a.isOver({shallow:!0})&&a.canDrop()})});return Fd.default.createElement(Dp,{ref:i,dropHovered:r.hovered,position:t==="before"?"left":"right",button:{kind:"default",size:"xsmall",icon:v.Plus,onPress:n}})}var n7=jv.StyleSheet.create({tabItemControls:{position:"relative",flexShrink:1},tabItemControlsActive:{flexShrink:0},tabItemInsertionLine:{flex:1,opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},tabItemInsertionLineHovered:{opacity:1}});function XC(o){let{editor:t,tab:e,index:n,active:r,isFirst:i,isLast:a,onSelect:c}=o,{readOnly:l}=t,u=e.data?e.data.get("title"):"Untitled",[{isDragging:d},p]=Ia({type:"tab",item:{type:"tab",id:e.key,previewLabel:"Move tab"},canDrag:()=>!l,collect:w=>({isDragging:w.isDragging()})}),f=w=>{t.change(k=>{let x=k.value.document.getParent(e.key);if(!x)return;let O=Ni.createTabsItem("Untitled");k.insertNodeByKey(x.key,n+w,O);let _=k.value.document.getDescendant(O.key);_&&k.collapseToStartOf(_).focus(),c(O)})},m=w=>{t.change(k=>{k.setNodeByKey(e.key,{data:e.data.merge({title:w})})})},h=(w,k)=>{t.change(x=>{k==="before"?x.moveBeforeNodeByKey(w,e.key):x.moveAfterNodeByKey(w,e.key);let O=x.value.document.getDescendant(w);O&&x.collapseToStartOf(O).focus()})},b=()=>{t.change(w=>{w.removeNodeByKey(e.key)})};return l?xo.default.createElement(zs.TouchableWithoutFeedback,{onPress:()=>c(e)},xo.default.createElement(KC,{title:u,active:r,isFirst:i,isLast:a,isEditable:!1,withOptions:!1,editor:t,tab:e})):xo.default.createElement(zs.TouchableWithoutFeedback,{onPress:()=>c(e)},xo.default.createElement(r7,{onInsertLeft:()=>f(0),onInsertRight:()=>f(1),onDropBefore:w=>h(w,"before"),onDropAfter:w=>h(w,"after"),onDelete:b,...o},xo.default.createElement(KC,{title:u,active:r,isFirst:i,isLast:a,isEditable:r,onTitleChange:m,editor:t,tab:e,withOptions:!0,isDragging:d,dragHandleRef:p})))}var KC=xo.default.forwardRef((o,t)=>{let{title:e,titlePlaceholder:n="Untitled",active:r=!1,isFirst:i=!1,isLast:a=!1,isDragging:c=!1,isEditable:l,withOptions:u,onTitleChange:d,editor:p,tab:f,dragHandleRef:m,...h}=o,[b,w]=xo.default.useState(e),[k,x]=P(lq),O=d?()=>{d(b||"")}:void 0;xo.default.useEffect(()=>{w(e)},[e]);let _=xo.default.useRef(null),I=ci(_,m),N=ce(_),T=()=>{N.open(ne({position:{width:"small"},groups:[{key:"tab",commands:[{key:"delete",title:"Delete",icon:v.Trashcan,trigger:()=>{p.change(E=>{Ni.removeTab(E,f.key)})}}]}]}))};return xo.default.createElement(q.View,{ref:t,style:[x.blockTabsBodyItem,g.Padding.xsmallVertical,r&&x.blockTabsBodyItemActive,i&&x.blockTabsBodyItemFirst,a&&x.blockTabsBodyItemLast],...h},xo.default.createElement(zs.View,{style:x.flexPadding}),xo.default.createElement(zs.View,{style:[x.blockTabsBodyItemTitleContainer,c&&Ke.translucent,g.Padding.xsmallVertical]},l?xo.default.createElement(xo.default.Fragment,null,xo.default.createElement(i7.default,{value:b,inputStyle:{...He.Label,color:k.colors.text.main,backgroundColor:"transparent",border:"none",...cg.Bold,padding:0,margin:0,lineHeight:"22px"},title:b,placeholder:n,onChange:E=>w(E.target.value),onBlur:O})):xo.default.createElement(zs.Text,{style:[mo.Label,x.blockTabsBodyItemReadonlyTitle,r&&x.blockTabsBodyItemTitleReadonlyActive]},b||n)),u?xo.default.createElement(q.View.Child,{style:[x.tabItemOptions],inactiveStyle:N.opened||l?Ke.visible:Ke.hidden,activeStyle:Ke.visible},xo.default.createElement(B,{ref:I,kind:"grey",size:"small",rounded:!0,active:N.opened,onPress:T,icon:v.GrabberVertical,title:`Click for options.
Drag to move.`})):null,xo.default.createElement(zs.View,{style:x.flexPadding}))});KC.displayName="TabItem";var lq=F.create({blockTabsBodyItem:o=>({flexGrow:0,flexShrink:1,flexBasis:"auto",textOverflow:"ellipsis",maxWidth:"100%",minWidth:0,borderWidth:1,borderColor:o.colors.border.main,borderLeftColor:"transparent",backgroundColor:o.colors.background.muted,flexDirection:"row",cursor:"pointer"}),blockTabsBodyItemFirst:o=>({borderLeftColor:o.colors.border.main,borderTopLeftRadius:o.radiuses.medium}),blockTabsBodyItemLast:o=>({borderTopRightRadius:o.radiuses.medium}),blockTabsBodyItemActive:o=>({flexGrow:0,flexShrink:0,flexBasis:"auto",cursor:"auto",backgroundColor:o.colors.background.main,borderBottomColor:o.colors.background.main}),flexPadding:{minWidth:8,width:16,flexGrow:1,flexShrink:1,flexBasis:"16px"},blockTabsBodyItemTitleContainer:{flexGrow:0,flexShrink:1,flexBasis:"auto",maxWidth:"100%",minWidth:0,display:"flex",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flexDirection:"row"},blockTabsBodyItemReadonlyTitle:o=>({color:o.colors.text.muted,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),blockTabsBodyItemTitleReadonlyActive:o=>({color:o.colors.text.main}),tabItemOptions:{marginLeft:g.medium,display:"flex",alignItems:"center",justifyContent:"center"}});s();var s7=y(C()),Zv=y(z());function UC(o){let{active:t,children:e,...n}=o;return s7.default.createElement(Zv.View,{style:[a7.blockTabsItem,t&&a7.blockTabsItemActive],...n},e)}var a7=Zv.StyleSheet.create({blockTabsItem:{display:"none",pageBreakInside:"avoid"},blockTabsItemActive:{display:"flex"}});s();var Qm=y(C());var uq=5,c7={activeKeys:{},activeTitles:[]},dq=It({key:"tabsAtom",default:c7,effects:[vr.recoilEffect("@recoil/tabsAtom",c7)]});function l7(o){let{sections:t,selected:e}=Qm.useContext(fi),n=Qm.useMemo(()=>{let u=new Map;return o.blockNodes.forEach(d=>{let p=fu();[...t.entries()].filter(([f])=>d.getNode(f)).forEach(([f,m])=>{p.set(f,m)}),u.set(d.key,p)}),u},[t,o]),[r,i]=Vn(dq),[a,c]=$s(!1,[e]),l=Qs();return Qm.useMemo(()=>{let{value:u,readOnly:d}=l;return[(d?null:mq(u,o))||pq(r,o,a,n,e)||(d?fq(r,o):null)||o.blockNodes.first(),f=>{let m=f.data.get("title");c(!0),i(h=>({activeKeys:{...h.activeKeys,[o.key]:f.key},activeTitles:m?h.activeTitles.filter(b=>b!==m).concat([m]).slice(-uq):h.activeTitles}))}]},[l,r,i,a,n,e])}function pq(o,t,e,n,r){let i=o.activeKeys[t.key];return e&&i?t.blockNodes.find(a=>a.key===i):t.blockNodes.find(a=>[...n.get(a.key)?.values()||[]].includes(r||""))}function mq(o,t){if(o.selection.isFocused)return t.blockNodes.find(e=>he.isTextRange(o.selection)&&(o.selection.hasAnchorIn(e)||o.selection.hasFocusIn(e)))}function fq(o,t){return t.blockNodes.map(e=>{let n=e.data.get("title");return{node:e,score:o.activeTitles.indexOf(n)}}).filter(({score:e})=>e>=0).sortBy(({score:e})=>-e).map(({node:e})=>e).first()||void 0}function u7(o){let{node:t,children:e,editor:n}=o,[r,i]=l7(t),a=t.getChildIndex(r.key),c=Ye(),l=ao.default.useRef(null),u=ao.default.useRef(null),d=ao.default.useCallback(m=>{let h=l.current;h&&h.measureInWindow((b,w)=>{u.current=w}),n.readOnly||n.change(b=>{b.blur()}),i(m)},[n,i]);ao.default.useEffect(()=>{let{current:m}=u;m&&(u.current=null,window.requestAnimationFrame(()=>{let h=l.current;h&&h.measureInWindow((b,w)=>{window.scrollBy(0,w-m)})}))},[r]);let p=t.blockNodes.map((m,h)=>ao.default.createElement(XC,{key:m.key,editor:n,tab:m,index:h,active:h===a,isFirst:h===0,isLast:h===t.nodes.size-1,onSelect:b=>d(b)})),f=ao.default.Children.map(e,(m,h)=>ao.default.createElement(UC,{key:m&&typeof m=="object"&&"key"in m?m.key:h,active:h===a},m));return c?ao.default.createElement(fe,{...o},ao.default.createElement(Jv.View,{ref:l},ao.default.Children.map(e,(m,h)=>{let b=t.nodes.toArray()[h];return ao.default.createElement(fe,{key:b.key,...o},ao.default.createElement(Jv.View,{ref:l},ao.default.createElement(VC,null,ao.default.createElement(XC,{editor:n,key:b.key,tab:b,index:h,active:!0,isFirst:!0,isLast:!1,onSelect:()=>{}})),ao.default.createElement(FC,null,ao.default.createElement(UC,{active:!0},m))))}))):ao.default.createElement(fe,{...o},ao.default.createElement(Jv.View,{ref:l},ao.default.createElement(VC,null,p),ao.default.createElement(FC,null,f)))}s();var YC=y(C()),d7=y(z());function p7(o){let{attributes:t,children:e}=o;return YC.default.createElement(fe,{...o},YC.default.createElement(d7.View,{...t},e))}s();var ef=y(ii());var m7={onKeyDown:gq};function gq(o,t){let{value:e}=t;return Po(e.selection)?null:(0,ef.default)("backspace",o)&&e.isCollapsed?hq(o,t):(0,ef.default)("enter",o)?yq(o,t):(0,ef.default)("mod+enter",o)?vq(o,t):(0,ef.default)("mod+a",o)?bq(o,t):null}function hq(o,t){let{value:e}=t,n=Ni.getCurrentTab(e);return!n||!Cp(n)?null:(o.preventDefault(),Ni.removeTab(t,n.key))}function yq(o,t){let{value:e}=t,n=Ni.getCurrentTab(e);if(!n||n.nodes.size<=1||!Cp(n.blockNodes.last()))return null;let r=e.document.getClosest(e.startKey,u=>"type"in u&&u.type===Kn);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter is pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab when enter is pressed twice");let a=i.getChildIndex(r.key);if(a<0)throw new Error("Could not find child of parent while exiting tab when enter is pressed twice");o.preventDefault();let c=n.blockNodes.last();c&&t.removeNodeByKey(c.key);let l=zt.create({type:de,nodes:[Ef.create("")]});return t.insertNodeByKey(i.key,a+1,l).collapseToStartOf(l)}function vq(o,t){let{value:e}=t;if(!Ni.getCurrentTab(e))return null;let r=e.document.getClosest(e.startKey,c=>"type"in c&&c.type===Kn);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter are pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab on mod+enter");if(i.getChildIndex(r.key)<0)throw new Error("Could not find child of parent while exiting tab on mod+enter");return o.preventDefault(),ht(t,r),t}function bq(o,t){let{value:e}=t,n=Ni.getCurrentTab(e);return n?(o.preventDefault(),t.collapseToStartOf(n).extendToEndOf(n)):null}var f7={renderNode:Sq,renderVirtualNode:wq,renderMark:Cq,estimateNodeSize:(o,t)=>{let e=vi(o,t);return{height:Ml(o,t,{blockSpacing:e})}}};function Sq(o){if(zt.isBlock(o.node)&&!yp.isInline(o.parent)){let t=o;switch(o.node.type){case de:return Ge.createElement(GL,{...t,node:o.node,parent:o.parent});case lo:case Vt:case uo:return Ge.createElement(TL,{...t,node:o.node,parent:o.parent});case qo:return Ge.createElement(EL,{...t,node:o.node,parent:o.parent});case Ae:case Fe:case Je:return Ge.createElement(OD,{...t,node:o.node,parent:o.parent});case fr:return Ge.createElement(DN,{...t,node:o.node,parent:o.parent});case Gn:return Ge.createElement(j0,{...t,node:o.node,parent:o.parent});case da:return Ge.createElement(Q0,{...t,node:o.node,parent:o.parent});case Hn:return Ge.createElement(ID,{...t,node:o.node,parent:o.parent});case Li:return Ge.createElement(x6,{...t,node:o.node,parent:o.parent});case Qa:return Ge.createElement(CD,{...t,node:o.node,parent:o.parent});case pn:return Ge.createElement(nL,{...t,node:o.node,parent:o.parent});case _o:return Ge.createElement(qM,{...t,node:o.node,parent:o.parent});case co:return Ge.createElement($L,{...t,node:o.node,parent:o.parent});case qt:return Ge.createElement(UL,{...t,node:o.node,parent:o.parent});case Kn:return Ge.createElement(u7,{...t,node:o.node,parent:o.parent});case mr:return Ge.createElement(p7,{...t,node:o.node,parent:o.parent});case ol:return Ge.createElement(B6,{...t,node:o.node,parent:o.parent});case pu:return Ge.createElement(aD,{...t,node:o.node,parent:o.parent});case os:return Ge.createElement(rD,{...t,node:o.node,parent:o.parent});case Nr:return Ge.createElement(mL,{...t,node:o.node,parent:o.parent});case Ja:return Ge.createElement(wD,{...t,node:o.node,parent:o.parent});case ni:return Ge.createElement(iL,{...t,node:o.node,parent:o.parent});case es:return Ge.createElement(dD,{...t,node:o.node,parent:o.parent})}}if(yp.isInline(o.node)&&!Xs.isDocument(o.parent))switch(o.node.type){case mn:return Ge.createElement(OL,{...o,node:o.node,parent:o.parent});case du:return Ge.createElement(O6,{...o,node:o.node,parent:o.parent});case Mf:return Ge.createElement(W6,{...o,node:o.node,parent:o.parent});case Lf:return Ge.createElement(Y0,{...o,node:o.node,parent:o.parent})}return null}function wq(o){switch(o.node.type){case Ae:case Fe:case Je:return Ge.createElement(PD,{...o,key:o.node.key})}}function Cq(o){switch(o.mark.type){case Xn:return Ge.createElement(_6,{...o});case Un:return Ge.createElement(R6,{...o});case Ar:return Ge.createElement(E6,{...o});case po:return Ge.createElement(L6,{...o});case bp:return Ge.createElement(N6,{...o});case Df:case Af:case Nf:return Ge.createElement(lD,{...o})}return null}var y6=tt.forwardRef(function(t,e){let{value:n,baseValue:r,selections:i=ua.create(),onChange:a,placeholder:c,uploadFiles:l,updateFile:u,logAnalyticsEvent:d,readOnly:p=!1,style:f,sectionIDs:m,selectedSection:h,isDiff:b,blockLayoutComponent:w,rightGutterComponent:k,integrationBlocksContext:x,integrationBlocksRemote:O,integrationsBlocksSubscription:_,onBlockHover:I,plugins:N}=t,{mode:T}=tt.useContext(Ko),E=tt.useRef(null),L=ci(E,e),V=tt.useMemo(()=>i.filter(Ft).filter(lr=>lr.isSet),[i]),j=tt.useMemo(()=>({...gw,...w?{blockLayoutComponent:w}:{},...k?{rightGutterComponent:k}:{},onBlockHover:I,integrationBlocksContext:x,integrationsBlocksSubscription:_}),[I,x,_]);l&&(j.uploadFiles=l),u&&(j.updateFile=u),d&&(j.logAnalyticsEvent=d),j.integrationBlocksRemote=O;let[,oe]=P(A),H=V0(j),[J]=WN(),ie=sL(_.getCurrentValue),Ze=IL(j),pt=V1(n.document,Gn),nt=tt.useMemo(()=>[f7,J,q0,eL,ZL,m7,HL,ML,Ze,...BL,qL,pL,bL,ie,cL,fL,$0,pt,nD,H,H0,C0,G0,...N??[]],[H,Ze,pt,N]),wt=Ye(),Jt=rs(n.document);tt.useEffect(()=>{if(E.current?.value.isFocused)return Ag(E.current?.value.selection.isCollapsed?"editor-selection-collapsed":"editor-selection-expanded")},[E.current?.value.isFocused,E.current?.value.selection.isCollapsed]);let Le=tt.useRef(null),dn=E.current?.value?.selection?Po(E.current?.value?.selection):!1;tt.useEffect(()=>{let lr=dn?"block":"text";Le.current&&lr!==Le.current&&d?.({type:"edit_switch_selection_mode",selectionMode:lr}),Le.current=dn?"block":"text"},[dn]);let[Vo,Wn]=tt.useState(null),sa=tt.useMemo(()=>({sections:m||fu(),active:Vo,selected:h,setActive:Wn}),[m,Vo]),Qc=r===null?null:r===void 0?void 0:r.document;return tt.createElement(x0,{original:Qc,modified:n.document},tt.createElement(fi.Provider,{value:sa},tt.createElement(Be.Provider,{value:j},tt.createElement(Is.View,{style:[zd.editor,f],isPDF:wt},p?null:tt.createElement(Ji.TouchableWithoutFeedback,{onPress:()=>{E.current?.change(lr=>aS(lr,"DOCUMENT_START"))}},tt.createElement(Ji.View,{style:[zd.editorFocusArea,zd.editorFocusAreaTop]})),Jt&&c&&!n.isFocused&&!p?tt.createElement(j.blockLayoutComponent,{renderMode:"centered"},tt.createElement(Ji.View,{style:[zd.placeholder]},tt.createElement(Ji.Text,{style:[oe.Body,oe.textMuted]},c))):null,tt.createElement(X1,{ref:L,testID:"page.contentEditor",value:n,onChange:a,readOnly:p,selections:V,plugins:nt,virtualize:T==="app",enableBlockContainment:p&&!b},!p&&Ft(n.selection)?tt.createElement(e0,{value:n,selection:n.selection}):null),p?null:tt.createElement(Ji.TouchableWithoutFeedback,{onPress:()=>{E.current?.change(lr=>aS(lr,"DOCUMENT_END"))}},tt.createElement(Ji.View,{style:[zd.editorFocusArea,zd.editorFocusAreaBottom]}))))))}),zd=Ji.StyleSheet.create({editor:{position:"relative"},editorFocusArea:{position:"absolute",cursor:"text",right:0,left:0},editorFocusAreaTop:{height:g.large,top:-g.large},editorFocusAreaBottom:{height:g.large,bottom:-g.large},placeholder:{position:"absolute",top:g.small}});s();var nr=y(C());s();s();var df=y(C());s();var qa=y(C());s();var Dn=y(C());s();var Hl="right-scroll-bar-position",Kl="width-before-scroll-bar",$C="with-scroll-bars-hidden",jC="--removed-body-scroll-bar-size";s();s();function g7(o,t){return typeof o=="function"?o(t):o&&(o.current=t),o}s();var h7=y(C());function y7(o,t){var e=(0,h7.useState)(function(){return{value:o,callback:t,facade:{get current(){return e.value},set current(n){var r=e.value;r!==n&&(e.value=n,e.callback(n,r))}}}})[0];return e.callback=t,e.facade}s();function tf(o,t){return y7(t||null,function(e){return o.forEach(function(n){return g7(n,e)})})}s();s();s();function v7(o){return o}function b7(o,t){t===void 0&&(t=v7);var e=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:o},useMedium:function(i){var a=t(i,n);return e.push(a),function(){e=e.filter(function(c){return c!==a})}},assignSyncMedium:function(i){for(n=!0;e.length;){var a=e;e=[],a.forEach(i)}e={push:function(c){return i(c)},filter:function(){return e}}},assignMedium:function(i){n=!0;var a=[];if(e.length){var c=e;e=[],c.forEach(i),a=e}var l=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),e={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),e}}}};return r}function of(o,t){return t===void 0&&(t=v7),b7(o,t)}function Xl(o){o===void 0&&(o={});var t=b7(null);return t.options=Zo({async:!0,ssr:!1},o),t}s();var S7=y(C()),w7=function(o){var t=o.sideCar,e=tl(o,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return S7.createElement(n,Zo({},e))};w7.isSideCarExport=!0;function Ul(o,t){return o.useMedium(t),w7}var Qv=Xl();var ZC=function(){},eb=Dn.forwardRef(function(o,t){var e=Dn.useRef(null),n=Dn.useState({onScrollCapture:ZC,onWheelCapture:ZC,onTouchMoveCapture:ZC}),r=n[0],i=n[1],a=o.forwardProps,c=o.children,l=o.className,u=o.removeScrollBar,d=o.enabled,p=o.shards,f=o.sideCar,m=o.noIsolation,h=o.inert,b=o.allowPinchZoom,w=o.as,k=w===void 0?"div":w,x=tl(o,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),O=f,_=tf([e,t]),I=Zo(Zo({},x),r);return Dn.createElement(Dn.Fragment,null,d&&Dn.createElement(O,{sideCar:Qv,removeScrollBar:u,shards:p,noIsolation:m,inert:h,setCallbacks:i,allowPinchZoom:!!b,lockRef:e}),a?Dn.cloneElement(Dn.Children.only(c),Zo(Zo({},I),{ref:_})):Dn.createElement(k,Zo({},I,{className:l,ref:_}),c))});eb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};eb.classNames={fullWidth:Kl,zeroRight:Hl};s();s();s();function Vd(){return Vd=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},Vd.apply(this,arguments)}var Ot=y(C());s();var nf="data-focus-lock",tb="data-focus-lock-disabled",C7="data-no-focus-lock",k7="data-autofocus-inside",x7="data-no-autofocus";var _7=y(C());s();var qd=y(C());var Gd={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},O7=function(t){var e=t.children;return qd.createElement(qd.Fragment,null,qd.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:Gd}),e,e&&qd.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:Gd}))};O7.propTypes={};O7.defaultProps={children:null};s();var ob=of({},function(o){var t=o.target,e=o.currentTarget;return{target:t,currentTarget:e}}),nb=of(),P7=of(),rb=Xl({async:!0});var xq=[],JC=Ot.forwardRef(function(t,e){var n,r=Ot.useState(),i=r[0],a=r[1],c=Ot.useRef(),l=Ot.useRef(!1),u=Ot.useRef(null),d=t.children,p=t.disabled,f=t.noFocusGuards,m=t.persistentFocus,h=t.crossFrame,b=t.autoFocus,w=t.allowTextSelection,k=t.group,x=t.className,O=t.whiteList,_=t.hasPositiveIndices,I=t.shards,N=I===void 0?xq:I,T=t.as,E=T===void 0?"div":T,L=t.lockProps,V=L===void 0?{}:L,j=t.sideCar,oe=t.returnFocus,H=t.focusOptions,J=t.onActivation,ie=t.onDeactivation,Ze=Ot.useState({}),pt=Ze[0],nt=Ot.useCallback(function(){u.current=u.current||document&&document.activeElement,c.current&&J&&J(c.current),l.current=!0},[J]),wt=Ot.useCallback(function(){l.current=!1,ie&&ie(c.current)},[ie]);(0,_7.useEffect)(function(){p||(u.current=null)},[]);var Jt=Ot.useCallback(function(ur){var $a=u.current;if($a&&$a.focus){var G=typeof oe=="function"?oe($a):oe;if(G){var te=typeof G=="object"?G:void 0;u.current=null,ur?Promise.resolve().then(function(){return $a.focus(te)}):$a.focus(te)}}},[oe]),Le=Ot.useCallback(function(ur){l.current&&ob.useMedium(ur)},[]),dn=nb.useMedium,Vo=Ot.useCallback(function(ur){c.current!==ur&&(c.current=ur,a(ur))},[]),Wn=Vd((n={},n[tb]=p&&"disabled",n[nf]=k,n),V),sa=f!==!0,Qc=sa&&f!=="tail",lr=tf([e,Vo]);return Ot.createElement(Ot.Fragment,null,sa&&[Ot.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:Gd}),_?Ot.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:Gd}):null],!p&&Ot.createElement(j,{id:pt,sideCar:rb,observed:i,disabled:p,persistentFocus:m,crossFrame:h,autoFocus:b,whiteList:O,shards:N,onActivation:nt,onDeactivation:wt,returnFocus:Jt,focusOptions:H}),Ot.createElement(E,Vd({ref:lr},Wn,{className:x,onBlur:dn,onFocus:Le}),d),Qc&&Ot.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:Gd}))});JC.propTypes={};JC.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var I7=JC;s();function QC(o){var t=window,e=t.setImmediate;typeof e<"u"?e(o):setTimeout(o,1)}var R7=I7;s();var ib=Xl(),ab="data-focus-on-hidden";var T7=qa.forwardRef(function(o,t){var e=qa.useState(!1),n=e[0],r=e[1],i=o.children,a=o.autoFocus,c=o.shards,l=o.enabled,u=l===void 0?!0:l,d=o.scrollLock,p=d===void 0?!0:d,f=o.focusLock,m=f===void 0?!0:f,h=o.returnFocus,b=h===void 0?!0:h,w=o.inert,k=o.allowPinchZoom,x=o.sideCar,O=o.className,_=o.shouldIgnore,I=o.style,N=o.as,T=tl(o,["children","autoFocus","shards","enabled","scrollLock","focusLock","returnFocus","inert","allowPinchZoom","sideCar","className","shouldIgnore","style","as"]),E=x,L=n.onActivation,V=n.onDeactivation,j=tl(n,["onActivation","onDeactivation"]),oe=Zo(Zo({},j),{sideCar:x,shards:c,allowPinchZoom:k,as:N,inert:w,style:I,enabled:u&&p});return qa.createElement(qa.Fragment,null,qa.createElement(R7,{ref:t,sideCar:x,disabled:!(n&&u&&m),returnFocus:b,autoFocus:a,shards:c,onActivation:L,onDeactivation:V,className:O,whiteList:_,lockProps:oe,as:eb},i),u&&qa.createElement(E,Zo({},T,{sideCar:ib,setLockProps:r,shards:c})))});s();s();s();var j7=y(C());s();s();s();function rf(o,t){return rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},rf(o,t)}function ek(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,rf(o,t)}var sb=y(C());function Oq(o,t){function e(n){return n.displayName||n.name||"Component"}return function(r){var i=[],a;function c(){a=o(i.map(function(u){return u.props})),t(a)}var l=function(u){ek(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a};var p=d.prototype;return p.componentDidMount=function(){i.push(this),c()},p.componentDidUpdate=function(){c()},p.componentWillUnmount=function(){var m=i.indexOf(this);i.splice(m,1),c()},p.render=function(){return sb.default.createElement(r,this.props)},d}(sb.PureComponent);return u1(l,"displayName","SideEffect("+e(r)+")"),l}}var E7=Oq;s();s();s();s();var Nn=function(o){for(var t=Array(o.length),e=0;e<o.length;++e)t[e]=o[e];return t},af=function(o){return Array.isArray(o)?o:[o]};s();var Pq=function(o){if(o.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(o,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},M7=function(o){return o.parentNode&&o.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?o.parentNode.host:o.parentNode},L7=function(o){return o===document||o&&o.nodeType===Node.DOCUMENT_NODE},_q=function(o,t){return!o||L7(o)||!Pq(o)&&t(M7(o))},tk=function(o,t){var e=o.get(t);if(e!==void 0)return e;var n=_q(t,tk.bind(void 0,o));return o.set(t,n),n},Iq=function(o,t){return o&&!L7(o)?Tq(o)?t(M7(o)):!1:!0},ok=function(o,t){var e=o.get(t);if(e!==void 0)return e;var n=Iq(t,ok.bind(void 0,o));return o.set(t,n),n},nk=function(o){return o.dataset},Rq=function(o){return o.tagName==="BUTTON"},D7=function(o){return o.tagName==="INPUT"},rk=function(o){return D7(o)&&o.type==="radio"},N7=function(o){return!((D7(o)||Rq(o))&&(o.type==="hidden"||o.disabled))},Tq=function(o){var t=o.getAttribute(x7);return![!0,"true",""].includes(t)},sf=function(o){var t;return!!(o&&(!((t=nk(o))===null||t===void 0)&&t.focusGuard))},Hd=function(o){return!sf(o)},A7=function(o){return!!o};s();var Eq=function(o,t){var e=o.tabIndex-t.tabIndex,n=o.index-t.index;if(e){if(!o.tabIndex)return 1;if(!t.tabIndex)return-1}return e||n},ik=function(o,t,e){return Nn(o).map(function(n,r){return{node:n,index:r,tabIndex:e&&n.tabIndex===-1?(n.dataset||{}).focusGuard?0:-1:n.tabIndex}}).filter(function(n){return!t||n.tabIndex>=0}).sort(Eq)};s();s();var B7=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"];var ak=B7.join(","),Mq="".concat(ak,", [data-focus-guard]"),W7=function(o,t){var e;return Nn(((e=o.shadowRoot)===null||e===void 0?void 0:e.children)||o.children).reduce(function(n,r){return n.concat(r.matches(t?Mq:ak)?[r]:[],W7(r))},[])},cb=function(o,t){return o.reduce(function(e,n){return e.concat(W7(n,t),n.parentNode?Nn(n.parentNode.querySelectorAll(ak)).filter(function(r){return r===n}):[])},[])},F7=function(o){var t=o.querySelectorAll("[".concat(k7,"]"));return Nn(t).map(function(e){return cb([e])}).reduce(function(e,n){return e.concat(n)},[])};var sk=function(o,t){return Nn(o).filter(function(e){return tk(t,e)}).filter(function(e){return N7(e)})},ck=function(o,t){return t===void 0&&(t=new Map),Nn(o).filter(function(e){return ok(t,e)})},cf=function(o,t,e){return ik(sk(cb(o,e),t),!0,e)},lk=function(o,t){return ik(sk(cb(o),t),!1)},z7=function(o,t){return sk(F7(o),t)},Gc=function(o,t){return o.shadowRoot?Gc(o.shadowRoot,t):Object.getPrototypeOf(o).contains!==void 0&&Object.getPrototypeOf(o).contains.call(o,t)?!0:Nn(o.children).some(function(e){return Gc(e,t)})};s();var Lq=function(o){for(var t=new Set,e=o.length,n=0;n<e;n+=1)for(var r=n+1;r<e;r+=1){var i=o[n].compareDocumentPosition(o[r]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return o.filter(function(a,c){return!t.has(c)})},V7=function(o){return o.parentNode?V7(o.parentNode):o},Kd=function(o){var t=af(o);return t.filter(Boolean).reduce(function(e,n){var r=n.getAttribute(nf);return e.push.apply(e,r?Lq(Nn(V7(n).querySelectorAll("[".concat(nf,'="').concat(r,'"]:not([').concat(tb,'="disabled"])')))):[n]),e},[])};s();var q7=function(o){return o.activeElement?o.activeElement.shadowRoot?q7(o.activeElement.shadowRoot):o.activeElement:void 0},Xd=function(){return document.activeElement?document.activeElement.shadowRoot?q7(document.activeElement.shadowRoot):document.activeElement:void 0};var Dq=function(o){return o===document.activeElement},Nq=function(o){return!!Nn(o.querySelectorAll("iframe")).some(function(t){return Dq(t)})},lb=function(o){var t=document&&Xd();return!t||t.dataset&&t.dataset.focusGuard?!1:Kd(o).some(function(e){return Gc(e,t)||Nq(e)})};s();var uk=function(){var o=document&&Xd();return o?Nn(document.querySelectorAll("[".concat(C7,"]"))).some(function(t){return Gc(t,o)}):!1};s();s();s();var Aq=function(o,t){return t.filter(rk).filter(function(e){return e.name===o.name}).filter(function(e){return e.checked})[0]||o},ub=function(o,t){return rk(o)&&o.name?Aq(o,t):o},G7=function(o){var t=new Set;return o.forEach(function(e){return t.add(ub(e,o))}),o.filter(function(e){return t.has(e)})};s();var dk=function(o){return o[0]&&o.length>1?ub(o[0],o):o[0]},pk=function(o,t){return o.length>1?o.indexOf(ub(o[t],o)):t};var mk="NEW_FOCUS",H7=function(o,t,e,n){var r=o.length,i=o[0],a=o[r-1],c=sf(e);if(!(e&&o.indexOf(e)>=0)){var l=e!==void 0?t.indexOf(e):-1,u=n?t.indexOf(n):l,d=n?o.indexOf(n):-1,p=l-u,f=t.indexOf(i),m=t.indexOf(a),h=G7(t),b=e!==void 0?h.indexOf(e):-1,w=b-(n?h.indexOf(n):l),k=pk(o,0),x=pk(o,r-1);if(l===-1||d===-1)return mk;if(!p&&d>=0)return d;if(l<=f&&c&&Math.abs(p)>1)return x;if(l>=m&&c&&Math.abs(p)>1)return k;if(p&&Math.abs(w)>1)return d;if(l<=f)return x;if(l>m)return k;if(p)return Math.abs(p)>1?d:(r+d+p)%r}};s();var Bq=function(o){return function(t){var e,n=(e=nk(t))===null||e===void 0?void 0:e.autofocus;return t.autofocus||n!==void 0&&n!=="false"||o.indexOf(t)>=0}},K7=function(o,t,e){var n=o.map(function(i){var a=i.node;return a}),r=ck(n.filter(Bq(e)));return r&&r.length?dk(r):dk(ck(t))};s();var gk=function(o,t){return t===void 0&&(t=[]),t.push(o),o.parentNode&&gk(o.parentNode.host||o.parentNode,t),t},fk=function(o,t){for(var e=gk(o),n=gk(t),r=0;r<e.length;r+=1){var i=e[r];if(n.indexOf(i)>=0)return i}return!1},db=function(o,t,e){var n=af(o),r=af(t),i=n[0],a=!1;return r.filter(Boolean).forEach(function(c){a=fk(a||c,c)||a,e.filter(Boolean).forEach(function(l){var u=fk(i,l);u&&(!a||Gc(u,a)?a=u:a=fk(u,a))})}),a},X7=function(o,t){return o.reduce(function(e,n){return e.concat(z7(n,t))},[])};var Wq=function(o,t){var e=new Map;return t.forEach(function(n){return e.set(n.node,n)}),o.map(function(n){return e.get(n)}).filter(A7)},U7=function(o,t){var e=document&&Xd(),n=Kd(o).filter(Hd),r=db(e||o,o,n),i=new Map,a=lk(n,i),c=cf(n,i).filter(function(f){var m=f.node;return Hd(m)});if(!(!c[0]&&(c=a,!c[0]))){var l=lk([r],i).map(function(f){var m=f.node;return m}),u=Wq(l,c),d=u.map(function(f){var m=f.node;return m}),p=H7(d,l,e,t);return p===mk?{node:K7(a,d,X7(n,i))}:p===void 0?p:u[p]}};s();var hk=function(o){var t=Kd(o).filter(Hd),e=db(o,o,t),n=new Map,r=cf([e],n,!0),i=cf(t,n).filter(function(a){var c=a.node;return Hd(c)}).map(function(a){var c=a.node;return c});return r.map(function(a){var c=a.node,l=a.index;return{node:c,index:l,lockItem:i.indexOf(c)>=0,guard:sf(c)}})};s();var Fq=function(o,t){"focus"in o&&o.focus(t),"contentWindow"in o&&o.contentWindow&&o.contentWindow.focus()},yk=0,vk=!1,Y7=function(o,t,e){e===void 0&&(e={});var n=U7(o,t);if(!vk&&n){if(yk>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),vk=!0,setTimeout(function(){vk=!1},1);return}yk++,Fq(n.node,e.focusOptions),yk--}};var bk=Y7;var zq=function(){return document&&document.activeElement===document.body},Vq=function(){return zq()||uk()},Yd=null,Ud=null,$d=null,lf=!1,qq=function(){return!0},Gq=function(t){return(Yd.whiteList||qq)(t)},Hq=function(t,e){$d={observerNode:t,portaledElement:e}},Kq=function(t){return $d&&$d.portaledElement===t};function $7(o,t,e,n){var r=null,i=o;do{var a=n[i];if(a.guard)a.node.dataset.focusAutoGuard&&(r=a);else if(a.lockItem){if(i!==o)return;r=null}else break}while((i+=e)!==t);r&&(r.node.tabIndex=0)}var Xq=function(t){return t&&"current"in t?t.current:t},Uq=function(t){return t?!!lf:lf==="meanwhile"},Yq=function o(t,e,n){return e&&(e.host===t&&(!e.activeElement||n.contains(e.activeElement))||e.parentNode&&o(t,e.parentNode,n))},$q=function(t,e){return e.some(function(n){return Yq(t,n,n)})},pb=function(){var t=!1;if(Yd){var e=Yd,n=e.observed,r=e.persistentFocus,i=e.autoFocus,a=e.shards,c=e.crossFrame,l=e.focusOptions,u=n||$d&&$d.portaledElement,d=document&&document.activeElement;if(u){var p=[u].concat(a.map(Xq).filter(Boolean));if((!d||Gq(d))&&(r||Uq(c)||!Vq()||!Ud&&i)&&(u&&!(lb(p)||d&&$q(d,p)||Kq(d,u))&&(document&&!Ud&&d&&!i?(d.blur&&d.blur(),document.body.focus()):(t=bk(p,Ud,{focusOptions:l}),$d={})),lf=!1,Ud=document&&document.activeElement),document){var f=document&&document.activeElement,m=hk(p),h=m.map(function(b){var w=b.node;return w}).indexOf(f);h>-1&&(m.filter(function(b){var w=b.guard,k=b.node;return w&&k.dataset.focusAutoGuard}).forEach(function(b){var w=b.node;return w.removeAttribute("tabIndex")}),$7(h,m.length,1,m),$7(h,-1,-1,m))}}}return t},Z7=function(t){pb()&&t&&(t.stopPropagation(),t.preventDefault())},mb=function(){return QC(pb)},J7=function(t){var e=t.target,n=t.currentTarget;n.contains(e)||Hq(n,e)},jq=function(){return null},Zq=function(t){var e=t.children;return j7.createElement("div",{onBlur:mb,onFocus:J7},e)};Zq.propTypes={};var Q7=function(){lf="just",setTimeout(function(){lf="meanwhile"},0)},Jq=function(){document.addEventListener("focusin",Z7),document.addEventListener("focusout",mb),window.addEventListener("blur",Q7)},Qq=function(){document.removeEventListener("focusin",Z7),document.removeEventListener("focusout",mb),window.removeEventListener("blur",Q7)};function eG(o){return o.filter(function(t){var e=t.disabled;return!e})}function tG(o){var t=o.slice(-1)[0];t&&!Yd&&Jq();var e=Yd,n=e&&t&&t.id===e.id;Yd=t,e&&!n&&(e.onDeactivation(),o.filter(function(r){var i=r.id;return i===e.id}).length||e.returnFocus(!t)),t?(Ud=null,(!n||e.observed!==t.observed)&&t.onActivation(),pb(!0),QC(pb)):(Qq(),Ud=null)}ob.assignSyncMedium(J7);nb.assignMedium(mb);P7.assignMedium(function(o){return o({moveFocusInside:bk,focusInside:lb})});var e2=E7(eG,tG)(jq);var cXe=Ul(rb,e2);s();s();var Pt=y(C());s();s();var fb=y(C());s();s();s();var n2=y(C());s();s();var t2;var o2=function(){if(t2)return t2;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oG(){if(!document)return null;var o=document.createElement("style");o.type="text/css";var t=o2();return t&&o.setAttribute("nonce",t),o}function nG(o,t){o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}function rG(o){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(o)}var Sk=function(){var o=0,t=null;return{add:function(e){o==0&&(t=oG())&&(nG(t,e),rG(t)),o++},remove:function(){o--,!o&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}};var wk=function(){var o=Sk();return function(t,e){n2.useEffect(function(){return o.add(t),function(){o.remove()}},[t&&e])}};var Yl=function(){var o=wk(),t=function(e){var n=e.styles,r=e.dynamic;return o(n,r),null};return t};s();var iG={left:0,top:0,right:0,gap:0},Ck=function(o){return parseInt(o||"",10)||0},aG=function(o){var t=window.getComputedStyle(document.body),e=t[o==="padding"?"paddingLeft":"marginLeft"],n=t[o==="padding"?"paddingTop":"marginTop"],r=t[o==="padding"?"paddingRight":"marginRight"];return[Ck(e),Ck(n),Ck(r)]},kk=function(o){if(o===void 0&&(o="margin"),typeof window>"u")return iG;var t=aG(o),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}};var sG=Yl(),cG=function(o,t,e,n){var r=o.left,i=o.top,a=o.right,c=o.gap;return e===void 0&&(e="margin"),`
  .`.concat($C,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hl,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Kl,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Hl," .").concat(Hl,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Kl," .").concat(Kl,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(jC,": ").concat(c,`px;
  }
`)},xk=function(o){var t=o.noRelative,e=o.noImportant,n=o.gapMode,r=n===void 0?"margin":n,i=fb.useMemo(function(){return kk(r)},[r]);return fb.createElement(sG,{styles:cG(i,!t,r,e?"":"!important")})};s();var Ok=!1;if(typeof window<"u")try{uf=Object.defineProperty({},"passive",{get:function(){return Ok=!0,!0}}),window.addEventListener("test",uf,uf),window.removeEventListener("test",uf,uf)}catch{Ok=!1}var uf,$l=Ok?{passive:!1}:!1;s();var lG=function(o){return o.tagName==="TEXTAREA"},r2=function(o,t){var e=window.getComputedStyle(o);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!lG(o)&&e[t]==="visible")},uG=function(o){return r2(o,"overflowY")},dG=function(o){return r2(o,"overflowX")},Pk=function(o,t){var e=t;do{typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&(e=e.host);var n=i2(o,e);if(n){var r=a2(o,e),i=r[1],a=r[2];if(i>a)return!0}e=e.parentNode}while(e&&e!==document.body);return!1},pG=function(o){var t=o.scrollTop,e=o.scrollHeight,n=o.clientHeight;return[t,e,n]},mG=function(o){var t=o.scrollLeft,e=o.scrollWidth,n=o.clientWidth;return[t,e,n]},i2=function(o,t){return o==="v"?uG(t):dG(t)},a2=function(o,t){return o==="v"?pG(t):mG(t)},fG=function(o,t){return o==="h"&&t==="rtl"?-1:1},s2=function(o,t,e,n,r){var i=fG(o,window.getComputedStyle(t).direction),a=i*n,c=e.target,l=t.contains(c),u=!1,d=a>0,p=0,f=0;do{var m=a2(o,c),h=m[0],b=m[1],w=m[2],k=b-w-i*h;(h||k)&&i2(o,c)&&(p+=k,f+=h),c=c.parentNode}while(!l&&c!==document.body||l&&(t.contains(c)||t===c));return(d&&(r&&p===0||!r&&a>p)||!d&&(r&&f===0||!r&&-a>f))&&(u=!0),u};var gb=function(o){return"changedTouches"in o?[o.changedTouches[0].clientX,o.changedTouches[0].clientY]:[0,0]},c2=function(o){return[o.deltaX,o.deltaY]},l2=function(o){return o&&"current"in o?o.current:o},gG=function(o,t){return o[0]===t[0]&&o[1]===t[1]},hG=function(o){return`
  .block-interactivity-`.concat(o,` {pointer-events: none;}
  .allow-interactivity-`).concat(o,` {pointer-events: all;}
`)},yG=0,jd=[];function u2(o){var t=Pt.useRef([]),e=Pt.useRef([0,0]),n=Pt.useRef(),r=Pt.useState(yG++)[0],i=Pt.useState(function(){return Yl()})[0],a=Pt.useRef(o);Pt.useEffect(function(){a.current=o},[o]),Pt.useEffect(function(){if(o.inert){document.body.classList.add("block-interactivity-".concat(r));var b=yx([o.lockRef.current],(o.shards||[]).map(l2),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[o.inert,o.lockRef.current,o.shards]);var c=Pt.useCallback(function(b,w){if("touches"in b&&b.touches.length===2)return!a.current.allowPinchZoom;var k=gb(b),x=e.current,O="deltaX"in b?b.deltaX:x[0]-k[0],_="deltaY"in b?b.deltaY:x[1]-k[1],I,N=b.target,T=Math.abs(O)>Math.abs(_)?"h":"v";if("touches"in b&&T==="h"&&N.type==="range")return!1;var E=Pk(T,N);if(!E)return!0;if(E?I=T:(I=T==="v"?"h":"v",E=Pk(T,N)),!E)return!1;if(!n.current&&"changedTouches"in b&&(O||_)&&(n.current=I),!I)return!0;var L=n.current||I;return s2(L,w,b,L==="h"?O:_,!0)},[]),l=Pt.useCallback(function(b){var w=b;if(!(!jd.length||jd[jd.length-1]!==i)){var k="deltaY"in w?c2(w):gb(w),x=t.current.filter(function(I){return I.name===w.type&&I.target===w.target&&gG(I.delta,k)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var O=(a.current.shards||[]).map(l2).filter(Boolean).filter(function(I){return I.contains(w.target)}),_=O.length>0?c(w,O[0]):!a.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),u=Pt.useCallback(function(b,w,k,x){var O={name:b,delta:w,target:k,should:x};t.current.push(O),setTimeout(function(){t.current=t.current.filter(function(_){return _!==O})},1)},[]),d=Pt.useCallback(function(b){e.current=gb(b),n.current=void 0},[]),p=Pt.useCallback(function(b){u(b.type,c2(b),b.target,c(b,o.lockRef.current))},[]),f=Pt.useCallback(function(b){u(b.type,gb(b),b.target,c(b,o.lockRef.current))},[]);Pt.useEffect(function(){return jd.push(i),o.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:f}),document.addEventListener("wheel",l,$l),document.addEventListener("touchmove",l,$l),document.addEventListener("touchstart",d,$l),function(){jd=jd.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,$l),document.removeEventListener("touchmove",l,$l),document.removeEventListener("touchstart",d,$l)}},[]);var m=o.removeScrollBar,h=o.inert;return Pt.createElement(Pt.Fragment,null,h?Pt.createElement(i,{styles:hG(r)}):null,m?Pt.createElement(xk,{gapMode:"margin"}):null)}var QXe=Ul(Qv,u2);s();var vb=y(C());s();var vG=function(o){if(typeof document>"u")return null;var t=Array.isArray(o)?o[0]:o;return t.ownerDocument.body},Zd=new WeakMap,hb=new WeakMap,yb={},_k=0,bG=function(o,t,e,n){var r=Array.isArray(o)?o:[o];yb[e]||(yb[e]=new WeakMap);var i=yb[e],a=[],c=new Set,l=new Set(r),u=function(p){!p||c.has(p)||(c.add(p),u(p.parentNode))};r.forEach(u);var d=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(f){if(c.has(f))d(f);else{var m=f.getAttribute(n),h=m!==null&&m!=="false",b=(Zd.get(f)||0)+1,w=(i.get(f)||0)+1;Zd.set(f,b),i.set(f,w),a.push(f),b===1&&h&&hb.set(f,!0),w===1&&f.setAttribute(e,"true"),h||f.setAttribute(n,"true")}})};return d(t),c.clear(),_k++,function(){a.forEach(function(p){var f=Zd.get(p)-1,m=i.get(p)-1;Zd.set(p,f),i.set(p,m),f||(hb.has(p)||p.removeAttribute(n),hb.delete(p)),m||p.removeAttribute(e)}),_k--,_k||(Zd=new WeakMap,Zd=new WeakMap,hb=new WeakMap,yb={})}},d2=function(o,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(o)?o:[o]),r=t||vG(o);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),bG(n,r,e,"aria-hidden")):function(){return null}};s();var p2=y(C());var SG=Yl(),wG=`
 [`+ab+`] {
   pointer-events: none !important;
 }
`,m2=function(){return p2.createElement(SG,{styles:wG})};var Hc=y(C()),f2=function(o){return"current"in o?o.current:o};function g2(o){var t=o.setLockProps,e=o.onEscapeKey,n=o.onClickOutside,r=o.shards,i=o.onActivation,a=o.onDeactivation,c=o.noIsolation,l=(0,Hc.useState)(void 0),u=l[0],d=l[1],p=(0,Hc.useRef)(null),f=(0,Hc.useRef)(0);return vb.useEffect(function(){var m=function(k){k.defaultPrevented||(k.code==="Escape"||k.key==="Escape"||k.keyCode===27)&&e&&e(k)},h=function(k){k.defaultPrevented||k.target===p.current||k instanceof MouseEvent&&k.button!==0||r&&r.map(f2).some(function(x){return x&&x.contains(k.target)||x===k.target})||n&&n(k)},b=function(k){h(k),f.current=k.touches.length},w=function(k){f.current=k.touches.length};if(u)return document.addEventListener("keydown",m),document.addEventListener("mousedown",h),document.addEventListener("touchstart",b),document.addEventListener("touchend",w),function(){document.removeEventListener("keydown",m),document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",b),document.removeEventListener("touchend",w)}},[u,n,e]),(0,Hc.useEffect)(function(){if(u)return i&&i(u),function(){a&&a()}},[!!u]),(0,Hc.useEffect)(function(){var m=function(){return null},h=!1,b=function(k){c||(m=d2(hx([k],(r||[]).map(f2)),document.body,ab)),d(function(){return k})},w=function(){m(),h||d(null)};return t({onMouseDown:function(k){p.current=k.target},onTouchStart:function(k){p.current=k.target},onActivation:b,onDeactivation:w}),function(){h=!0,t(!1)}},[]),vb.createElement(m2,null)}var h2=Ul(ib,g2);var CG=function(o){return df.createElement(h2,Zo({},o))},Ik=df.forwardRef(function(o,t){return df.createElement(T7,Zo({},o,{ref:t,sideCar:CG}))});var Ga=y(z()),_2=y(P2());function I2(o){let t=nr.useRef(null),[e,n]=Vn(cw),{medias:r,currentIndex:i}=e,a=()=>{n({medias:[],currentIndex:0})},c=()=>{n(d=>({...d,currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{n(d=>({...d,currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{n(p=>({...p,currentIndex:d}))};return js({opened:r.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},t),Fr(r.length?{Left:()=>c(),Right:()=>l()}:{},"all",[n,!r.length]),r.length?nr.createElement(hr,{ref:t},nr.createElement(Ik,null,nr.createElement(Ga.View,{style:Qd.imagesZoonPortal},nr.createElement(_2.default,{imageUrls:r.map(d=>({url:d.url})),index:i,renderIndicator:d=>nr.createElement(Ga.View,{style:Qd.indactor},nr.createElement(Ga.View,{style:Qd.indicatorElement}),nr.createElement(Ga.View,{style:[Qd.indicatorElement,S.alignCenter,S.justifyContentCenter]},nr.createElement(Ga.Text,{style:Qd.indicatorText},`${d}/${r.length}`)),nr.createElement(Ga.View,{style:[Qd.indicatorElement,S.alignEnd,S.justifyContentCenter]},nr.createElement(B,{icon:v.X,defaultTextStyle:{color:K.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>nr.createElement(B,{icon:v.ChevronLeft,defaultTextStyle:{color:K.WHITE},onPress:()=>c()}),renderArrowRight:()=>nr.createElement(B,{icon:v.ChevronRight,defaultTextStyle:{color:K.WHITE},onPress:()=>l()}),onChange:d=>u(d||0),onCancel:()=>a(),enableSwipeDown:!0})))):null}var Qd=Ga.StyleSheet.create({imagesZoonPortal:{position:"fixed",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:K.WHITE}});s();var R2=y(C());function T2(o){let t=Tu(),{navigate:e}=Se(),n=fo(),r=wP(),i=xP(o),a=kP(o),c=Go(i),l=dS(a,"create-space"),u=dS(a,"create-collection")&&WG(o,r);return R2.default.useMemo(()=>({createSpace:l?async(d=!0)=>{let p=await nc(),f;try{f=(await p.spaces.createSpace(o.organization,{parent:o.collection})).data}catch(m){throw n.notify({title:"Error while creating space",details:la(m),kind:"danger"}),m}return ee(Rt(f,{type:"space_create"})),d&&e({screen:{type:"space",space:f.id,organization:o.organization,page:""}}),f}:void 0,createCollection:u?async(d=!0)=>{let p=new Ei("startCollection");p.label("User",t.uid),p.label("Owner type","organization"),p.label("Owner",o.organization),o.collection&&p.label("Collection",o.collection),p.label("Perm",a);let[f,m]=DR(h=>qx(h,{title:"New Collection",owner:o,at:Lx(c.current.collections),createdBy:t.uid,perm:a}));return p.wrapPromise(m),ee(ZO(f,{type:"collection_create",collection:f.key,restricted:!1})),d&&e({screen:{type:"collection",collection:f.key,organization:f.organization}}),f}:void 0}),[o.organization,o.collection,t.uid,c,e,l,u])}function WG(o,t){let e=0,n=o.collection;for(;n;){let r=t.collections.find(i=>i.key===n);n=r?r.collection:void 0,e++}return e<Vx}s();var Ak=y(C());s();var ep=JSON.parse('{"iconWrapper":"iconWrapper_x37cD","icon":"icon_TnMUQ","active":"active_CllGx","ok":"ok_V1sO-","interactive":"interactive_B2TwX","good":"good_nqe9w","bad":"bad_pz0f3"}');function E2(o){let{active:t=!0,interactive:e=!1,size:n,rating:r}=o,i=FG[r];return Ak.createElement(Y,{style:[ep.iconWrapper,ep[r],t&&ep.active,e&&ep.interactive],inlineStyle:{"--rating-size":`${n}px`}},Ak.createElement(i,{style:[ep.icon]}))}var FG={["ok"]:v.FeedbackOk.CSS,["good"]:v.FeedbackGood.CSS,["bad"]:v.FeedbackBad.CSS};s();var ip=y(C());s();var An=y(C()),tp=y(z());function M2(o){return An.createElement(D2,{...o})}function L2(o){let{space:t,onClose:e}=o,n=Ng(t);return An.createElement(D2,{onPressGitSync:()=>{e(),n()},...o})}function D2(o){let{sources:t,pickSource:e,onPressGitSync:n,onClose:r}=o,[,i]=P(N2);return An.createElement(Pg,{size:"large",onClose:r,title:"Import your content",subtitle:"Choose a file type or platform below to get started importing your data.",footer:An.createElement(di,{icon:v.GitHub.CSS,kind:"default",title:"Need to stay in sync?",details:n?"Set up GitHub or GitLab Sync and link a repo for two-way syncing.":"Start a new space, set up GitHub or GitLab Sync, and link a repo for two-way syncing.",actions:n?[{label:"Set up now",onPress:n}]:void 0})},An.createElement(tp.View,{style:[i.cardsWrapper]},t.map(({title:a,name:c,source:l,icon:u})=>An.createElement(zG,{key:a,title:c,onPress:()=>e(l),icon:u}))))}function zG(o){let{title:t,description:e,icon:n,onPress:r,style:i}=o,[,a]=P(A),[,c]=P(N2);return An.createElement(q.TouchableOpacity,{style:[S.directionRow,S.alignCenter,g.Padding.smallVertical,g.Padding.smallRight,c.importCard,i],onPress:r},An.createElement(tp.View,{style:g.Margin.smallLeft},typeof n=="function"?An.createElement(n,{size:R.ICON_L}):An.createElement(Ho,{source:n,style:c.importCardImage})),An.createElement(tp.View,{style:g.Margin.smallLeft},An.createElement(tp.View,null,An.createElement(q.Text.Child,{style:[a.Label,a.text],activeStyle:a.primary},t)),An.createElement(tp.View,null,An.createElement(q.Text.Child,{style:[a.Body,a.textMuted],activeStyle:a.primary},e))))}var N2=F.create({importCard:o=>({borderWidth:1,borderColor:o.colors.border.main,borderRadius:4,flexShrink:0,flexGrow:0,flexBasis:"32%",padding:g.small,marginRight:g.small,marginBottom:g.small}),importCardImage:{width:R.ICON_L,height:R.ICON_L},cardsWrapper:{flexWrap:"wrap",flexDirection:"row",marginRight:-g.small}});s();function Jl(o){return"organization"in o}s();var xb=y(C());s();var Ka=y(C());s();var ea=y(C()),Uc=y(z());s();var Qi=y(C()),op=y(z());s();var Xc=y(C()),A2=y(z());function B2(o){let{fileIcon:t,files:e,setFiles:n}=o,[,r]=P(A),i=Ro(t,{style:r.primary},[t]),a=Xc.useCallback(({item:c})=>{let l=()=>{n(u=>u.filter(d=>d.key!==c.key))};return Xc.createElement(ds,{layout:"wide",icon:i,title:c.file.name,buttons:[c.uploaded||c.failed?null:Xc.createElement(Ce,{size:"medium"}),c.failed?Xc.createElement(B,{tint:K.scarlet.base,icon:v.Alert,title:"Failed to upload. Please try again.",onPress:l}):null,Xc.createElement(B,{icon:v.X,title:"Remove",onPress:l})]})},[t,n]);return Xc.createElement(A2.FlatList,{data:e,renderItem:a})}function Cb(o){let{getSpace:t,files:e,setFiles:n,fileIcon:r,fileExtension:i,limitWarning:a=!1,fileUploadsLimit:c=1/0}=o,[,l]=P(A),u=fo(),d=(h,b)=>{n(w=>w.map(k=>k.key===h?{...k,...b}:k))},p=async h=>{let b=await t();try{let w=await LO({kind:"space_import",space:b.id},h.file);d(h.key,{uploaded:w})}catch(w){throw u.notify({kind:"danger",title:"Error while uploading files",details:"Please try again or contact support if the problem persists.",icon:v.Alert.CSS}),d(h.key,{failed:!0}),w}},f=h=>{let b=[];for(let w of h){if(e.length>=c){u.notify({kind:"danger",title:"Cannot upload file",details:`You can only upload ${c} file for this operation`,timeout:5e3});break}if(w.size>209715200){u.notify({kind:"danger",title:`Your file must be less than ${am(209715200)}`,details:`Please try a different file that's below ${am(209715200)}`,timeout:5e3});continue}let k={key:Rf(),file:w};b.push(k)}n(w=>w.concat(b)),b.forEach(w=>p(w))};return Qi.createElement(Qi.Fragment,null,Qi.createElement(op.View,null,Qi.createElement(D1,{icon:r,onDropFiles:f,onPress:async()=>{let h=await TP();f(h)},hint:`Drop your ${i} file here or choose a file`})),a?Qi.createElement(op.View,{style:g.Margin.smallTop},Qi.createElement(op.Text,{style:[l.Caption,l.textMuted]},"GitBook has limits for imported content,"," ",Qi.createElement(ba,{url:"https://web.archive.org/web/20231004051033/https://docs.gitbook.com/features/import#limits"},"read more here."))):null,e.length>0?Qi.createElement(op.View,{style:[g.Margin.mediumTop]},Qi.createElement(B2,{fileIcon:r,files:e,setFiles:n})):null)}s();var ff=y(C()),F2=y(z());function np(o){let{title:t,subtitle:e,onClose:n,onSubmit:r,children:i}=o;return ff.default.createElement(Pg,{title:t,subtitle:e,footer:ff.default.createElement(F2.View,{style:[S.directionRow,S.justifyContentEnd]},ff.default.createElement(B,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Back"),ff.default.createElement(B,{kind:"primary",onPress:r},"Start import")),onClose:n},i)}function z2(o){let{getSpace:t,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:c}=o,[,l]=P(A),[u,d]=ea.useState([]),f=u.some(h=>!h.uploaded)||u.length===0;return ea.createElement(np,{...o,onSubmit:async()=>{if(!f){let h=await t();i(u.map(b=>b.uploaded?.downloadURL).filter(ue),h)}}},r.length>0?ea.createElement(Uc.View,{style:[g.Margin.mediumBottom]},r.map((h,b)=>ea.createElement(Uc.View,{key:b,style:[S.directionRow]},ea.createElement(Uc.View,{style:[g.Margin.smallRight]},ea.createElement(Uc.Text,{style:[l.Body,l.textMid]},`${b+1}.`)),ea.createElement(Uc.View,{style:S.flex1},ea.createElement(Uc.Text,{style:[l.Body,l.textMid]},h))))):null,ea.createElement(Cb,{getSpace:t,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:c}))}s();var kb=y(C());function V2(o){let t=kb.useRef(),{createSpace:e}=T2({organization:o.organization});return kb.useMemo(()=>async()=>{if(t.current)return t.current;if(!e)throw new Error("Cannot import into shared space due to incorrect hook usage");return t.current=await e(!1),t.current},[e,t])}s();var Fo=y(C()),Ha=y(z());s();var ta=y(C()),Ql=y(z());function q2(o){let{url:t,setURL:e,placeholder:n="e.g: https://mysite.com/a_file",supportedFormats:r=[],validate:i=oi}=o,[,a]=P(A),c=i(t);return ta.createElement(ta.Fragment,null,ta.createElement(Ql.View,null,ta.createElement(to,{size:"large",placeholder:n,value:t,cleareable:!0,onChangeText:e,feedback:t&&!c?{type:"danger",message:"URL is invalid. It must be a valid absolute URL starting with https:// or http://"}:{type:"none"}})),r.length>1?ta.createElement(Ql.View,{style:[g.Margin.smallTop,S.directionRow,S.alignCenter]},ta.createElement(Ql.View,null,ta.createElement(v.InfoCircle,{size:R.ICON_S,style:a.info})),ta.createElement(Ql.View,{style:[g.Margin.smallLeft,S.flex1]},ta.createElement(Ql.Text,{style:[a.Caption,a.info]},`Supported formats: ${r.join(", ")}`))):null)}function G2(o){let{getSpace:t,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:c}=o,[,l]=P(A),[u,d]=Fo.useState([]),[p,f]=Fo.useState(""),[m,h]=Fo.useState("files"),b=u.some(O=>!O.uploaded),w=O=>oi(O),k=(b||u.length===0)&&(!p||!w(p));return Fo.createElement(np,{...o,onSubmit:async()=>{if(!k){let O=await t();i(m==="files"?u.map(_=>_.uploaded?.downloadURL).filter(ue):[p],O)}}},r.length>0?Fo.createElement(Ha.View,{style:[g.Margin.mediumBottom]},r.map((O,_)=>Fo.createElement(Ha.View,{key:_,style:[S.directionRow]},Fo.createElement(Ha.View,{style:[g.Margin.smallRight]},Fo.createElement(Ha.Text,{style:[l.Body,l.textMid]},`${_+1}.`)),Fo.createElement(Ha.View,{style:S.flex1},Fo.createElement(Ha.Text,{style:[l.Body,l.textMid]},O))))):null,Fo.createElement(Ha.View,{style:[S.flex1,S.directionRow,S.alignCenter]},Fo.createElement(tc,null,Fo.createElement(tc.Tab,{active:m==="files",onPress:()=>h("files")},"Files"),Fo.createElement(tc.Tab,{active:m==="url",onPress:()=>h("url")},"URL"))),Fo.createElement(Ha.View,{style:[S.directionColumn,g.Margin.smallTop]},m==="files"?Fo.createElement(Cb,{getSpace:t,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:c}):null,m==="url"?Fo.createElement(q2,{url:p,validate:w,setURL:f,placeholder:"https://web.archive.org/web/20231004051033/https://myapi.io/swagger.yaml",supportedFormats:["JSON","YAML"]}):null))}s();var rr=y(C()),rp=y(z());function H2(o){let{title:t="Import a Website",subtitle:e="Enter a link to a web page below to import it into your space.",getSpace:n,startImport:r}=o,[i,a]=rr.useState(""),[,c]=P(A),l=i?oi(i):!1,u=async()=>{if(l){let d=await n();r([i],d)}};return rr.createElement(np,{...o,title:t,subtitle:e,onSubmit:u},rr.createElement(rp.View,{style:[g.Margin.smallBottom]},rr.createElement(Wr,{label:"URL",labelDescription:"We\u2019ll crawl your site and pull in as much of your content as possible.",placeholder:"https://web.archive.org/web/20231004051033/https://docs.mycompany.com",value:i,onChangeText:a,onSubmit:u,feedback:i?{type:l?"success":"danger",message:l?"":"URL is not valid"}:void 0})),rr.createElement(rp.View,{style:g.Margin.mediumBottom},rr.createElement(rp.Text,{style:[c.Caption,c.textMuted]},"GitBook has limits for imported content,"," ",rr.createElement(ba,{url:"https://web.archive.org/web/20231004051033/https://docs.gitbook.com/features/import#limits"},"read more here."))),i&&l?rr.createElement(rr.Suspense,{fallback:null},rr.createElement(VG,{url:i})):null)}function VG(o){let{url:t}=o,[e]=_h(t);return e.data?rr.createElement(rp.View,{style:[g.Margin.mediumBottom]},rr.createElement(xa,{title:e.data.title,details:e.data.site,icon:ft(ga,{source:{uri:e.data.icon||void 0}}),onPress:()=>{ps(t)}})):null}function K2(o){return Jl(o.target)?Ka.createElement(GG,{...o,target:o.target}):Ka.createElement(qG,{...o,target:o.target})}function qG(o){let t=Ka.useCallback(async()=>{if("id"in o.target.space)return o.target.space;let{data:e}=await cP({operationId:"getSpaceById",params:{spaceId:o.target.space.key}});return e},[o.target.space]);return Ka.createElement(X2,{...o,getSpace:t})}function GG(o){let t=V2(o.target);return t?Ka.createElement(X2,{...o,getSpace:t}):null}function X2(o){let{sourceInfo:t,startImport:e,target:n,setSource:r,getSpace:i,onBack:a}=o,{source:c}=t??{};if(t===void 0||c===void 0)return null;switch(c){case"website":case"github-wiki":return Ka.createElement(H2,{target:n,title:t.title,subtitle:t.subtitle,getSpace:i,startImport:e,onClose:()=>{r(null)}});case"docx":case"markdown":case"html":case"zip":case"dropbox-paper":case"google-docs":case"confluence":case"quip":case"notion":{let l=c==="zip"||c==="confluence"||c==="notion";return Ka.createElement(z2,{target:n,getSpace:i,title:t.title,subtitle:t.subtitle,steps:t.steps,fileIcon:t.fileIcon,fileExtension:t.fileExtension,onClose:a,startImport:e,limitWarning:l})}case"open-api":return Ka.createElement(G2,{target:n,getSpace:i,title:t.title,subtitle:t.subtitle,steps:t.steps,fileIcon:t.fileIcon,fileExtension:t.fileExtension,onClose:a,startImport:e,fileUploadsLimit:1,limitWarning:!0});default:De(c)}}s();var Me=y(C()),ir=y(z());s();var Bk="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/confluence-XZRVQN7T.png";var Wk="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/dropbox-paper-F627BIKK.png";var Fk="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/google-docs-T6C75XLR.png";var zk="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/openapi-H4Y5H3P5.png";var Vk="https://web.archive.org/web/20231004051033/https://app.gitbook.com/public/app/assets/quip-SHLUXOMG.png";function U2(){let[o]=P(),[,t]=P(A),e=Ro(v.FileCode,{style:t.primary}),n=Ro(v.FileText,{style:{color:K.scarlet.light}}),r=Ro(v.FileWord,{style:{color:K.primary.light}}),i=Ro(v.FileCode,{style:{color:K.violet.light}}),a=Ro(v.FileZIP,{style:{color:K.orange.light}}),c=Ro(v.GitHub,{style:{color:o.colors.text.main}}),l=Ro(v.Notion,{style:{color:o.colors.text.main}}),u=Ro(ga,{source:{uri:Bk}}),d=Ro(ga,{source:{uri:Vk}}),p=Ro(ga,{source:{uri:Wk}}),f=Ro(ga,{source:{uri:Fk}}),m=Ro(ga,{source:{uri:zk}});return[{name:"Website",title:"Import a Website",subtitle:"Enter a link to a web page below to import it into your space.",source:"website",icon:e,type:"application"},{name:"Markdown",title:"Import a Markdown file",source:"markdown",icon:n,subtitle:"Drag and drop your .md file below to start the import.",fileIcon:v.FileText,fileExtension:".md",type:"file"},{name:"MS Word",title:"Import a Word document",source:"docx",icon:r,subtitle:"Drag and drop your .docx file below to start the import.",fileIcon:v.FileWord,fileExtension:".docx",type:"application"},{name:"HTML",title:"Import a HTML file",source:"html",subtitle:"Drag and drop your .html file below to start the import.",icon:i,fileIcon:v.FileCode,fileExtension:".html",type:"file"},{name:"ZIP",title:"Import a ZIP file",source:"zip",subtitle:"Drag and drop your .zip file below to start the import.",icon:a,fileIcon:v.FileZIP,fileExtension:".zip",type:"file"},{name:"Confluence",title:"Import from Confluence",icon:u,source:"confluence",type:"application",subtitle:"Export your space as ZIP to bring your content from Confluence.",fileExtension:".zip",fileIcon:v.FileZIP,steps:[Me.createElement(Me.Fragment,null,"Go to ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Space Settings")," for the space you're looking to export and select the"," ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Content tools")," section."),Me.createElement(Me.Fragment,null,"Click on the ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Export")," tab, and select"," ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"HTML"),", then hit"," ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Next, and Export"),"."),Me.createElement(Me.Fragment,null,"Choose ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Normal Export")," unless you want to choose specific pages to export.")]},{name:"Notion",title:"Import from Notion",icon:l,source:"notion",type:"application",subtitle:"Export your workspace as Markdown to bring your content from Notion.",steps:[Me.createElement(Me.Fragment,null,"Go to the Workspace you're looking to export and select the"," ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"\u2026")," button in the top right."),Me.createElement(Me.Fragment,null,"Choose ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Export All as Markdown"))],fileIcon:v.FileText,fileExtension:".md"},{name:"GitHub Wiki",title:"Import from GitHub Wiki",subtitle:"Enter a link to a GitHub Wiki below to import it into your space.",icon:c,source:"github-wiki",type:"application"},{name:"Quip",title:"Import from Quip",icon:d,source:"quip",fileIcon:v.FileText,fileExtension:".md",type:"application"},{name:"Dropbox Paper",title:"Import from Dropbox Paper",icon:p,source:"dropbox-paper",steps:[Me.createElement(Me.Fragment,null,`Click "\u2026" (ellipsis) in the Paper doc you're viewing.`),Me.createElement(Me.Fragment,null,"Click ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Export"),"."),Me.createElement(Me.Fragment,null,"Select ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},".docx")," and click"," ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Download"),"."),Me.createElement(Me.Fragment,null,"Drag your downloaded files to the box below to import.")],fileIcon:v.FileWord,fileExtension:".docx",type:"application"},{name:"Google docs",title:"Import from Google Docs",icon:f,source:"google-docs",type:"application",subtitle:"Export your documents as .docx or webpage to bring your content from Google Docs.",steps:[Me.createElement(Me.Fragment,null,"Click on ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"File ",">"," Download"),"."),Me.createElement(Me.Fragment,null,"Choose between ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Microsoft Word")," or"," ",Me.createElement(ir.Text,{style:[t.Bold,t.text]},"Web Page"),".")],fileIcon:v.FileWord,fileExtension:".docx"},{name:"OpenAPI",title:"Import from OpenAPI",icon:m,source:"open-api",type:"application",subtitle:"Provide an OpenAPI specification file or URL to import your API.",fileIcon:v.FileText,fileExtension:".yaml or .json",fileUploadsLimit:1}]}function Y2({target:o,onStartImport:t,onComplete:e,onBack:n}){let[r,i]=xb.useState(null),a=U2(),c=fo(),l=f=>{f&&(Jl(o)?ee(tg(o.organization,{type:"templates_pick_import",source:f})):ee(Rt(o.space,{type:"edit_pick_import",source:f}))),i(f)},u=async(f,m)=>{if(!r)return;let h=await nc(),b={url:f,source:r};if(Jl(o)||!o.page&&!o.changeRequest)return h.spaces.importContent(m.id,b);if(o.page&&o.changeRequest)return h.spaces.importContentInChangeRequestPageById(m.id,o.changeRequest,o.page,b);if(o.page)return h.spaces.importContentInPageById(m.id,o.page,b);if(o.changeRequest)return h.spaces.importContentInChangeRequest(m.id,o.changeRequest,b)},d=async(f,m)=>{if(r){ee(JO(m,void 0,{type:"edit_import",source:r})),t?t(m):n();try{(await c.notifyProgress(Promise.all(f.map(async w=>{let k=await u(w,m);return k?k.data:void 0})),{title:"Importing docs",details:"We are importing your docs, this might take a while."})).some(w=>w&&w.totalResources!==w.importedResources)?c.notify({kind:"warning",title:"Incomplete import",timeout:0,icon:v.Alert.CSS,details:"Some of your docs were not imported due to file limits, try splitting them into several imports."}):(c.notify({icon:v.CheckCircle.CSS,kind:"success",title:"Imported docs",details:"Docs have been successfully imported. Enjoy!"}),e&&e(m))}catch(h){throw c.notify({kind:"danger",title:"Error while importing docs",details:la(h,"Please try again or contact support if the problem persists."),icon:v.Alert.CSS}),h}}},p=a.find(({source:f})=>f===r);return{modals:xb.createElement(K2,{sourceInfo:p,startImport:d,target:o,setSource:i,onBack:n}),source:r,sources:a,onSelectSource:l}}function s6(o){let{target:t,onStartImport:e,onComplete:n,onClose:r}=o,{modals:i,source:a,sources:c,onSelectSource:l}=Y2({onStartImport:d=>{e?e(d):r()},onComplete:n,onBack:()=>l(null),target:t}),[{result:u}]=Lu([Jl(t)?null:Bi("key"in t.space?t.space.key:t.space.id)]);return ip.createElement(ip.Fragment,null,a?i:u?ip.createElement(L2,{space:u,sources:c,pickSource:l,onClose:r}):ip.createElement(M2,{sources:c,pickSource:l,onClose:r}))}s();var $2=y(C());var $G=5,j2=It({key:"recentSearches",default:[],effects:[vr.recoilEffect("@recoil/recentSearches",[])]});function Z2(){return zn(j2)}function J2(o){let t=Lr(j2);$2.useEffect(()=>{if(!o)return;let e=setTimeout(()=>{t(n=>n.includes(o)?n:[o,...n.slice(0,$G-1)])},3e3);return()=>clearTimeout(e)},[o])}s();var Q2=y(C());function eA(o,t){let{space:e,organization:n}=t,r=Mg();Q2.useEffect(()=>{if(!o)return;let i=setTimeout(()=>{let a={type:r?"public_content_search_type":"search_type",query:o};e?ee(Rt(e,a)):n?ee(tg(n,a)):ee(a)},700);return()=>{clearTimeout(i)}},[o])}s();var Ue=y(C());s();var qk=JSON.parse('{"loadingDelayedText":"loadingDelayedText_WVBF7","loadingDelayedTextVisible":"loadingDelayedTextVisible_y5onq"}');s();var Qr=y(C());s();var tA=JSON.parse('{"aiAnswerFooter":"aiAnswerFooter_UeG4c"}');s();var eu=y(C());function oA(o){let{answer:t,singleSpace:e}=o,{navigate:n}=Se(),r=ye(),i=eu.useMemo(()=>jG(r,t,e),[r,t,e]),a=eu.useCallback(l=>{switch(ee({type:"ai_search_open_source"}),l.type){case"space":n({screen:{type:"space",space:l.space.key,organization:l.space.organization,page:"",query:void 0}});break;case"page":n({screen:{type:"space",space:l.space.key,organization:l.space.organization,page:l.path,query:void 0}});break;default:De(l)}},[n]),c=eu.useCallback(l=>{switch(l.type){case"space":return{icon:ug(ft(Eo,{code:HO(l.space)})),title:l.space.title||ss,action:"Go to space"};case"page":return{icon:v.Page.CSS,title:l.page.title,subtitle:l.ancestors.filter(u=>u.id!==l.page.id).map(u=>u.title).join(" \u203A "),nested:!e,action:"Go to page"};default:De(l)}},[e]);return eu.createElement(oc,{data:i,getKey:ZG,renderItem:c,onOpen:a})}function jG(o,t,e){let n=new Map;return EP(t.pages,r=>{let i=Mu([Bi(r.space)])[0]?.result;if(!i)return null;let a=Dr(o.store.getRevision(r.space,i.revision));if(!a)return null;let c=a.pages[r.page];if(!c||c.type!=="document")return null;let l=bu(a,c.id),u=n.get(i.key)||[];u.length===0&&!e&&u.push({type:"space",space:i}),u.push({type:"page",space:i,page:c,ancestors:l,path:eo(a,c.id)}),n.set(i.key,u)}),Array.from(n.values()).flat()}function ZG(o){switch(o.type){case"space":return`space:${o.space.key}`;case"page":return`page:${o.space.key}/${o.page.id}`;default:De(o)}}function nA(o){let{answer:t,singleSpace:e}=o,[n,r]=Qr.useState(!1),i=ae();return Qr.createElement(Y,{style:[M.flex.column,M.padding.mediumHorizontal,M.padding.mediumVertical,tA.aiAnswerFooter]},Qr.createElement(Y,{style:[M.flex.row]},Qr.createElement(Y,{style:[M.flex.flex1]},Qr.createElement(B,{size:"small",rightIcon:n?v.ChevronDown:v.ChevronRight,onPress:()=>{r(!n)}},i("search_answer_sources",`${t.pages.length}`)))),n?Qr.createElement(Y,{style:M.margin.mediumTop},Qr.createElement(Qr.Suspense,{fallback:Qr.createElement(To,{size:"medium"})},Qr.createElement(oA,{answer:t,singleSpace:e}))):null)}s();var Xa=y(C());function rA(o){let{query:t,answer:e}=o,[n,r]=Xa.useState(!1),i=fo(),a=pg(),c=ae(),l=()=>{a.writeTextAndNotify(e.text)},u=()=>{ee({type:"ai_search_upvote_answer",query:t,answer:e.text}),r(!0),i.notify({icon:v.ThumbsUp.CSS,title:c("search_answer_feedback_title"),details:c("search_answer_feedback_details")})},d=()=>{ee({type:"ai_search_downvote_answer",query:t,answer:e.text}),r(!0),i.notify({icon:v.ThumbsUp.CSS,title:c("search_answer_feedback_title"),details:c("search_answer_feedback_details")})};return Xa.createElement(Y,{style:[M.flex.row]},Xa.createElement(B,{size:"small",title:c("search_answer_copy"),icon:v.Copy,onPress:l}),n?null:Xa.createElement(Xa.Fragment,null,Xa.createElement(B,{size:"small",icon:v.ThumbsUp,title:c("search_answer_feedback_upvote"),onPress:u,style:g.Margin.xsmallLeft}),Xa.createElement(B,{size:"small",icon:v.ThumbsDown,title:c("search_answer_feedback_downvote"),onPress:d,style:g.Margin.xsmallLeft})))}s();var Hk=y(C());s();var Gk=JSON.parse('{"aiSearchSpinner":"aiSearchSpinner_cTH2Q","aiSearchSpinnerAnim":"aiSearchSpinnerAnim_75OX-","aiSearchSpinnerIcon":"aiSearchSpinnerIcon_MOqIL"}');function iA(o){let{size:t=R.ICON_L}=o;return Hk.createElement(Y,{style:Gk.aiSearchSpinner,inlineStyle:{width:t,height:t}},Hk.createElement(v.AILens.CSS,{style:Gk.aiSearchSpinnerIcon}))}function aA(o){let{query:t,target:e}=o,n=Ue.useCallback((r,i,a)=>{ee(e.space?Rt(e.space,{type:"ai_search_crash",query:t.query}):{type:"ai_search_crash",query:t.query})},[t]);return Ue.createElement(Of,{fallback:()=>Ue.createElement(tH,null),onError:n},Ue.createElement(Ue.Suspense,{fallback:Ue.createElement(QG,null)},Ue.createElement(JG,{...o})))}function JG(o){let{target:t,query:e,onAnswerLoaded:n,onSubmitQuery:r}=o,i=lP(t.space?{operationId:"askQueryInSpace",params:{spaceId:t.space.key},query:{},body:{query:e.query}}:{operationId:"askInOrganization",params:{organizationId:t.organization},query:{},body:{query:e.query}}),{answer:a}=i.data;if(Ue.useEffect(()=>{ee(t.space?Rt(t.space,{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0}):{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0})},[e,a,t.space]),Ue.useEffect(()=>{a&&n?.()},[a,n]),!a)return Ue.createElement(eH,null);let c=l=>{ee(t.space?Rt(t.space,{type:"ai_search_pick_followup",query:e.query,followup:l,previousQueriesCount:e.previousQueries.length}):{type:"ai_search_pick_followup",query:e.query,followup:l,previousQueriesCount:e.previousQueries.length}),r(l)};return Ue.createElement(Y,{style:[M.flex.column]},Ue.createElement(Y,{style:[M.flex.column,M.padding.large]},Ue.createElement(Y,{style:[M.flex.row,M.margin.mediumBottom]},Ue.createElement(Y,{style:[M.margin.mediumRight,M.flex.flex1]},Ue.createElement(gn,{style:[M.text.heading2,M.textColor.main]},e.query)),Ue.createElement(Y,{style:M.margin.smallRight},Ue.createElement(rA,{query:e.query,answer:a}))),Ue.createElement(Ru,{markdown:a.text}),a.followupQuestions.length>0?Ue.createElement(Y,{style:[M.flex.row,M.flex.wrap,M.margin.smallTop]},a.followupQuestions.map(l=>Ue.createElement(Y,{style:[M.margin.smallTop,M.margin.smallRight]},Ue.createElement(B,{icon:v.AILens,kind:"pill",size:"medium",key:l,onPress:()=>{c(l)}},l)))):null),Ue.createElement(nA,{answer:a,singleSpace:!!t.space}))}function QG(o){let[t,e]=Ue.useState(!1),n=ae();return Ue.useEffect(()=>{let r=setTimeout(()=>{e(!0)},3e3);return()=>{clearTimeout(r)}},[]),Ue.createElement(va,{size:"small",icon:iA,title:n("search_answer_loading")},Ue.createElement(gn,{style:[qk.loadingDelayedText,t&&qk.loadingDelayedTextVisible]},n("search_answer_loading_wait")))}function eH(o){let t=ae();return Ue.createElement(va,{size:"small",title:t("search_answer_none_title")},t("search_answer_none_details"))}function tH(o){let t=ae();return Ue.createElement(va,{size:"small",icon:v.Alert,title:t("search_answer_error_title")},t("search_answer_error_details"))}s();var sA=y(C());function Ob(o){let t=uP(o===null||o.documents?.length===0?null:o.space?{operationId:"getRecommendedQuestionsInSpace",params:{spaceId:o.space.key},query:{}}:{operationId:"getRecommendedQuestions",params:{},query:{},body:{documents:o.documents}});return sA.useMemo(()=>t?t.data.questions.map(e=>({type:"recommended-question",question:e})):[],[t])}s();var oH=y(C());var nH=It({key:"recentAISearches",default:[],effects:[vr.recoilEffect("@recoil/recentAISearches",[])]});function Pb(){return zn(nH)}s();var qs=y(C());function cA(o){let{allowEnterToOpen:t,target:e,onSubmitAIQuery:n}=o,r=ae(),i=Pb(),a=Ob(e),c=qs.useCallback(p=>{switch(p.type){case"recent-search":return{icon:v.Search.CSS,title:p.query,action:r("search_ask")};case"recommended-question":return{icon:v.AILens.CSS,title:p.question,action:r("search_ask")};default:De(p)}},[r]),l=qs.useCallback(p=>{switch(p){case"recent-search":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),u=(p,f)=>{switch(p.type){case"recent-search":{n(p.query),ee({type:"ai_search_pick_suggestion_recent_search",suggestionIndex:f});break}case"recommended-question":ee({type:"ai_search_pick_suggestion_question"}),n(p.question);break;default:De(p)}},d=qs.useMemo(()=>[...i.map(f=>({type:"recent-search",query:f})),...a],[i,a]);return d.length===0?qs.createElement(va,null,r("search_blankslate_ai")):qs.createElement(Y,{style:[M.flex.flex1,M.flex.column]},qs.createElement(oc,{data:d,getKey:rH,renderItem:c,renderGroup:l,groupItem:iH,getGroupKey:aH,onOpen:u,style:[M.padding.mediumHorizontal,M.padding.mediumVertical],allowEnterToOpen:t}))}function rH(o){switch(o.type){case"recent-search":return`recent-search:${o.query}`;case"recommended-question":return`recommended-question:${o.question}`;default:De(o)}}function iH(o){return o.type}function aH(o){return o}s();var lA=y(C());var sH=10,cH=It({key:"aiSearchQuery",default:{query:"",previousQueries:[]},effects:[vr.recoilEffect("@recoil/aiSearchQuery",{query:"",previousQueries:[]})]});function uA(){let[o,t]=Vn(cH),e=lA.useCallback(n=>{t(r=>r?{query:n,previousQueries:[...r.previousQueries.filter(i=>i!==n&&i!==r.query),...r.query?[r.query]:[]].slice(-sH)}:{query:n,previousQueries:[]})},[t]);return[o,e]}s();var so=y(C()),dA=y(z());var lH=it("app:crash");function gf(o){let{children:t}=o,e=so.useCallback((n,r,i)=>{lH.emergency(`An error occured during rendering:

`,n,`

The error is located at:
`,r),ee({type:"crash",crashType:Kk(n),sentryEvent:i})},[]);return so.createElement(Of,{fallback:n=>so.createElement(uH,{...n}),onError:e,beforeCapture:mH},t)}function uH(o){let{eventId:t,error:e}=o,[,n]=P(fH),r=()=>{Sx({eventId:t||void 0})},i=()=>{window.location.reload()};so.useEffect(()=>{document.querySelector(".gitbook-splashscreen")?.remove()},[]);let a=()=>{switch(Kk(e)){case"network-crash":return so.createElement(pH,{onReload:i,...o});case"crash":default:return so.createElement(dH,{onShareFeedback:r,onReload:i,...o})}};return so.createElement(dA.View,{style:[n.background]},a())}function dH(o){let t=ae(),{onReload:e,onShareFeedback:n}=o;return so.createElement(Lp,{title:t("something_wrong"),action:so.createElement(so.Fragment,null,so.createElement(B,{kind:"primary",size:"medium",onPress:e,style:g.Margin.smallRight},t("reload")),so.createElement(B,{kind:"secondary",size:"medium",onPress:n},t("let_us_know")))},t("we_have_been_notified"))}function pH(o){let{onReload:t}=o,e=ae(),n=()=>{window.open("https://web.archive.org/web/20231004051033/https://docs.gitbook.com/resources/firewall-safelist","_blank")};return so.createElement(Lp,{title:e("connection_lost"),icon:v.CloudOff,action:so.createElement(so.Fragment,null,so.createElement(B,{kind:"primary",size:"medium",onPress:t,style:g.Margin.smallRight},e("reload")),so.createElement(B,{size:"medium",icon:v.Link,onPress:n},e("network_troubleshooting")))},e("device_offline"))}function mH(o,t){switch(Kk(t)){case"network-crash":o.setTag("error_category","network-crash");break;case"crash":default:o.setTag("error_category","react-crash")}}function Kk(o){return o.name==="FirebaseError"&&o.code==="unavailable"?"network-crash":"crash"}var fH=F.create({background:o=>({backgroundColor:o.colors.background.main,minHeight:"100vh"})});s();var ti=y(C());s();var Xk=y(C());function _b(o){let{children:t,ssrRequestPath:e,ssrRouterContext:n}=o;return n?Xk.createElement(ER,{location:e,context:n},t):Xk.createElement(iw,null,t)}s();var Ib=y(C());function pA(o="https://web.archive.org/web/20231004051033/https://policies.gitbook.com/privacy/cookies",t=!1){let e=fo(),n=ae();Ib.useEffect(()=>{if(!t)return;let r=!1;if(ng()!==null)return;let i=e.notify({title:n("cookies"),details:n("cookie_prompt",Ib.createElement(ba,{url:o},n("cookie_policy"))),timeout:0,icon:v.Cookies.CSS,actions:[{label:n("reject_all"),onPress:()=>{r=!0,pS(!1),i()}}],onClose:()=>{r||pS(!0)}})},[])}s();var le=y(C()),Ua=y(z());s();var mA=JSON.parse('{"withStickyHeader":"withStickyHeader_HQiM-"}');s();var ar=y(C()),tu=y(z());var{TOC_DESKTOP_WIDTH:gH}=Yo,hH=X.createResponsiveComponent(tu.TouchableOpacity),yH=q.createInteractiveComponent(hH),Uk=gH-g.large-g.large;function Rb(o){let{space:t,collection:e,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:i,desktopStyle:a}=o,[,c]=P(A),{getNavigationLinkProps:l}=Se(),d={color:Ca(n)==="light"?K.lightModeText.base:K.darkModeText.base},p=(e?e?.publishedTitle||e?.title:t.publishedTitle||t.title)||ss,f=p.length>14,m=f?2:1,h=Mi(t);return ar.createElement(yH,{style:[S.directionRow,S.alignCenter],mobileStyle:i,desktopStyle:a,...l({screen:{space:t.key,page:""}}),testID:"public.headerHomeLink",accessibilityLabel:p},r?ar.createElement(X.View,{style:[S.flex1,S.directionRow,S.alignCenter,hf.headerDesktop],mobileStyle:hf.logoMobile,desktopStyle:hf.logoDesktop},ar.createElement(X.View,{desktopStyle:"visible",mobileStyle:"hidden"},ar.createElement(Ho,{source:{uri:zi(r,{height:40,fit:"contain"})},loading:"priority",style:{maxHeight:40,maxWidth:Uk,width:"auto",height:"auto"}})),ar.createElement(X.View,{desktopStyle:"hidden",mobileStyle:"visible"},ar.createElement(Ho,{source:{uri:zi(r,{height:30,fit:"contain"})},style:{maxHeight:30,maxWidth:Uk,width:"auto",height:"auto"}}))):ar.createElement(tu.View,{style:[hf.headerDesktop,S.flex1,S.directionRow,S.justifyContentStart,S.alignCenter]},ar.createElement(tu.View,null,ar.createElement(X.View,{mobileStyle:"hidden",desktopStyle:"visible"},ar.createElement(SS,{content:e||t,renderFor:"public-content",size:R.BUTTON_L,style:[g.Margin.mediumRight]})),ar.createElement(X.View,{mobileStyle:"visible",desktopStyle:"hidden"},ar.createElement(SS,{content:e||t,renderFor:"public-content",size:R.ICON_XL,style:[g.Margin.mediumRight]}))),ar.createElement(X.Text,{style:hf.textOverflow,mobileStyle:[c.Heading3],desktopStyle:[f?c.Heading3:c.Heading2]},ar.createElement(q.Text.Child,{style:[d],numberOfLines:m,ellipsizeMode:"tail",inactiveStyle:c.text,activeStyle:h==="bold"?c.textStandout:c.primary},p))))}var hf=tu.StyleSheet.create({textOverflow:{overflow:"hidden"},logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:Uk}});s();var ou=y(C()),yf=y(z());s();var ei=y(C()),Yc=y(z());var vH=X.createResponsiveComponent(q.TouchableOpacity),bH=q.createInteractiveComponent(X.View);function Yk(o){return`hsla(${l1(o.colors.text.primary).h}, 60%, 70%, 0.1)`}var fA=ei.forwardRef(function(t,e){let{isLast:n,leftIcon:r,icon:i,rightIcon:a,kind:c="primary",children:l,expanded:u=!1,onChevronPress:d,active:p=!1,onPress:f,textStyle:m,href:h}=t,b=q.useInteractiveState(),[w,k]=P(SH),[,x]=P(A),O=c==="primary"?x.textMid:x.textMuted,_=p?x.primary:O,I=f?vH:bH,N=u?v.ChevronDown:v.ChevronRight;return ei.createElement(I,{ref:e,...b.events,style:[k.tocMenuItem,g.Padding.smallHorizontal,g.Margin.smallRight,n?null:g.Margin.xsmallBottom,p?{backgroundColor:Yk(w)}:null],hoverStyle:f&&!p?k.tocMenuItemHovered:null,mobileStyle:k.tocMenuItemMobile,desktopStyle:k.tocMenuItemDesktop,onPress:f,href:h&&f?h:void 0},r?ei.createElement(Yc.View,{style:[g.Margin.mediumRight]},ei.createElement(r,{size:R.ICON_M,style:[_,m]})):null,i?ei.createElement(Yc.View,{style:[g.Margin.mediumRight]},ei.createElement(i,{size:R.ICON_M,style:[_,m]})):null,ei.createElement(Yc.Text,{style:[S.flex1,g.Padding.xsmallVertical,c==="group"?x.GroupTitle:x.Label,_,m,p?x.Bold:null]},l),d?ei.createElement(Yc.TouchableOpacity,{style:[S.directionRow,S.alignCenter],onPress:d},ei.createElement(N,{size:R.ICON_S,style:_})):null,a?ei.createElement(Yc.View,{style:k.tocMenuItemRightIcon},ei.createElement(a,{size:R.ICON_M,style:x.textMuted})):null)}),SH=F.create({tocMenuItem:o=>({flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,borderRadius:o.radiuses.medium,minHeight:R.XS}),tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:o=>({backgroundColor:o.colors.background.standout}),tocMenuItemRightIcon:{marginLeft:g.small,marginRight:(R.S-R.ICON_M)/2}});var $k=150,wH=200,CH=150;function Tb(o){let[,t]=P(gA);return ou.createElement(X.View,{style:t.wrapper,mobileStyle:[t.wrapperMobile,g.Margin.smallVertical,g.Margin.smallHorizontal],desktopStyle:[t.wrapperDesktop,g.Margin.smallVertical,g.Margin.xsmallHorizontal]},ou.createElement(yf.ScrollView,null,o.children))}function Eb(o){let{title:t,kind:e="default",active:n=!1,onPress:r,isLast:i}=o,[a,c]=P(gA),[,l]=P(A);return ou.createElement(q.TouchableOpacity,{hoverStyle:c.menuItemHovered,style:[c.menuItem,g.Padding.xsmallVertical,g.Padding.smallHorizontal,i?null:g.Margin.xsmallBottom,n?{backgroundColor:Yk(a)}:null],onPress:r},ou.createElement(yf.View,{style:[S.directionRow,S.alignCenter,S.justifySpaceBetween]},ou.createElement(q.Text.Child,{hoverStyle:n?null:l.textStandout,style:[l.Label,e==="link"?l.SemiBold:null,...n?[l.primary,l.Bold]:[l.text]],numberOfLines:2,ellipsizeMode:"tail"},t),ou.createElement(yf.View,{style:[g.Margin.mediumLeft]},o.rightElement)))}var gA=F.create({wrapper:o=>({backgroundColor:o.colors.background.main}),wrapperDesktop:{minWidth:$k,maxWidth:wH,maxHeight:CH},wrapperMobile:{width:"auto",maxWidth:"100%",maxHeight:"100%"},menuItem:o=>({borderRadius:o.radiuses.large}),menuItemHovered:o=>({backgroundColor:o.colors.background.muted})});s();var sn=y(C()),nu=y(z());function ap(o){let{backgroundColor:t,currentPage:e,collection:n,variants:r,currentVariant:i,revision:a}=o,{getNavigationLinkProps:c}=Se(),l=ae(),u=sn.useRef(null),[,d]=P(A),p=sn.useMemo(()=>e?eo(a,e.id):"",[e]);return sn.createElement(Zs,{ref:u,wrapper:li,closeOnClick:!0,closeOnOutsideClick:!0,anchor:({ref:f,toggle:m,opened:h})=>{let b=h?v.ChevronUp:v.ChevronDown;return sn.createElement(B,{ref:f,size:"medium",rightIcon:b,kind:Ca(t||K.WHITE)?"default_bold":"default",alignItems:"start",onPress:m,style:[g.Padding.noneHorizontal]},sn.createElement(nu.View,{style:[hA.variantsPicker]},sn.createElement(nu.Text,{numberOfLines:1,ellipsizeMode:"tail"},i.publishedTitle||i.title||ss)))}},sn.createElement(vn,{kind:"menu",preferredAlignment:"start"},sn.createElement(sn.Suspense,{fallback:sn.createElement(To,{size:"small"})},sn.createElement(Tb,null,r.map((f,m,h)=>sn.createElement(Eb,{key:f.key,title:f.title,active:f.key===i.key,isLast:m===h.length-1,rightElement:f.key===n.primarySpace?sn.createElement(nu.Text,{style:[d.textMuted,d.Uppercase,hA.mainLabel]},l("main")):null,...c({screen:{space:f.key,page:p}},()=>{u.current?.close()})}))))))}var hA=nu.StyleSheet.create({mainLabel:{letterSpacing:1.2},variantsPicker:{maxWidth:$k}});s();var $c=y(C());var kH={color:gp,radius:Fx},oa=$c.createContext([kH,()=>{}]),yA="@gitbook/themeMode";function xH(o,t){let[e,n]=$c.useState(()=>{if(typeof window>"u"||!o.themeModeTogglable)return t;let i=vr.get(yA);return i!==null?i:t});return{themeMode:e,toggleThemeMode:()=>{n(i=>{let a=i==="light"?"dark":"light";return vr.set(yA,a),ee(jO(o,{type:"public_content_toggle_theme_mode",themeMode:a})),a})}}}function vA(o){let{content:t,isPreview:e,children:n}=o,{color:r,radius:i}=zx(t),{themeMode:a,toggleThemeMode:c}=xH(t,r);$c.useEffect(()=>{window?.document.body.classList.remove("theme-overlay")},[]);let l=e?r:a??r;return Wi(u=>{u.setTheme([`${l?`theme-color-${l}`:""}`,`${i?`theme-radius-${i}`:""}`].join(" "))}),$c.createElement(oa.Provider,{value:[{color:l,radius:i},c]},n)}s();var Mb=y(C());function cn(o){let[{color:t}]=Mb.useContext(oa);return Mb.useMemo(()=>Ph(o,t),[t,o])}s();var Lb=y(C());var vf=Lb.forwardRef(function(t,e){let{contentRef:n,style:r,kind:i="default",...a}=t,c=$e(n);return Lb.createElement(ba,{ref:e,url:c.href,onPress:l=>{l.nativeEvent.metaKey||l.nativeEvent.ctrlKey||(l.preventDefault(),c.open())},kind:i,sameWebTab:!1,style:[mo.Body,mo.SemiBold,r],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:t.title,...a},t.title)});s();var Db=y(C());function ru(o){let{content:t,mode:e="switch"}=o,[{color:n},r]=Db.useContext(oa),{headerBackgroundColor:i}=cn(t);return Db.createElement(aR,{onValueChange:r,value:n==="dark",mode:e,backgroundColor:i})}s();var SA=y(C());s();var bA=JSON.parse('{"publicContainer":"publicContainer_11UZS"}');function Nb(o){let{children:t,style:e}=o;return SA.createElement(Y,{style:[bA.publicContainer,e]},t)}s();var Gs=y(C()),Zk=y(z());s();function jk(o){switch(rh(o)){case"lightest":return{backgroundColor:"rgba(59, 69, 78, 0.1)",textColor:K.lightModeText.base};case"light":return{backgroundColor:"rgba(255, 255, 255, 0.6)",textColor:K.lightModeText.base};case"semiLight":return{backgroundColor:"rgba(255, 255, 255, 0.55)",textColor:K.lightModeText.base};case"medium":return{backgroundColor:"rgba(59, 69, 78, 0.25)",textColor:K.darkModeText.base};case"semiDark":return{backgroundColor:"rgba(59, 69, 78, 0.3)",textColor:K.darkModeText.base};case"dark":return{backgroundColor:"rgba(59, 69, 78, 0.5)",textColor:K.darkModeText.base};case"darkest":default:return{backgroundColor:"rgba(255, 255, 255, 0.2)",textColor:K.darkModeText.base}}}function wA(o){let[,{open:t}]=Eg(),e=ae();return Gs.createElement(B,{icon:v.SearchPublic,onPress:t,accessibilityLabel:e("search"),...o})}function CA(o){let{contentTheme:t,headerBackgroundColor:e}=o,[,{open:n}]=Eg(),r=ae(),{textColor:i}=jk(e);return Gs.createElement(B,{icon:v.SearchPublic,size:"medium",kind:t==="bold"?"default_bold":"default",alignItems:"start",onPress:n,style:[g.Padding.noneHorizontal],defaultTextStyle:[{color:i}],accessibilityLabel:r("search")})}function Ab(o){let{headerBackgroundColor:t=K.WHITE}=o,[,{open:e}]=Eg(),n=ae(),[,r]=P(A),[,i]=P(OH),{backgroundColor:a,textColor:c}=jk(t);return Gs.createElement(q.TouchableOpacity,{style:[{backgroundColor:a},i.searchBarButton,S.directionRow,S.justifySpaceBetween,S.alignCenter,g.Padding.mediumLeft,g.Padding.smallRight],activeStyle:i.searchBarButtonActive,accessibilityLabel:n("search"),onPress:e},Gs.createElement(Zk.View,{style:[S.directionRow,S.alignCenter]},Gs.createElement(v.SearchPublic,{size:R.ICON_XS,style:[{color:c},g.Margin.smallRight]}),Gs.createElement(q.Text.Child,{style:[r.Label,{color:c}],activeStyle:r.text},n("search"))),Gs.createElement(Zk.View,null,Gs.createElement(hn,{shortcut:ze.SEARCH_OPEN})))}var OH=F.create({searchBarButton:o=>({width:"100%",height:R.BUTTON_L,borderRadius:o.radiuses.large,borderWidth:1,borderColor:"transparent"}),searchBarButtonActive:o=>({borderColor:o.colors.border.mid})});var{PAGE_BODY_DESKTOP_H_PADDING:PH,TOC_DESKTOP_WIDTH:_H,PUBLIC_DESKTOP_HEADER_HEIGHT:IH,PUBLIC_MOBILE_HEADER_HEIGHT:RH}=Yo,TH=X.createResponsiveComponent(B),EH=X.createResponsiveComponent(pe);function xA(o){let{space:t}=o,e=ai(),{headerBackgroundColor:n,headerDisabled:r,headerLinksColor:i,headerLogoURL:a}=cn(t),c=le.useMemo(()=>({...e,color:Ca(n)}),[n,e]);return le.createElement(si,{theme:c},r?le.createElement(X.View,{desktopStyle:"hidden",mobileStyle:"visible"},le.createElement(kA,{...o,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a})):le.createElement(kA,{...o,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a}))}function kA(o){let{space:t,headerDisabled:e,headerBackgroundColor:n,headerLogoURL:r,headerLinksColor:i,revision:a,collection:c,collectionSpaces:l,currentPage:u}=o,[,d]=P(AH[e?"none":Mi(t)==="default"?"defaultWithBorder":"default"]),p=Bp(Vn(rm),le.useState(!1)),m=Oi(u).tableOfContents,h=[jc.searchWrapper,g.Padding.largeLeft,g.Padding.smallRight],[b]=le.useContext(oa);return le.createElement(le.Fragment,null,le.createElement(EH,{tag:"header",desktopStyle:jc.desktopHeight,mobileStyle:jc.mobileHeight,style:[d.spaceHeader,S.directionRow,S.alignCenter,e?null:{backgroundColor:n}]},le.createElement(Nb,{style:[M.padding.smallHorizontal,M.flex.alignCenter,mA.withStickyHeader]},m?le.createElement(TH,{desktopStyle:"hidden",mobileStyle:"visible",icon:v.Menu,style:g.Margin.smallRight,kind:"grey",rounded:!0,title:p.opened?"Hide Table of Content":"Show Table of Content",onPress:p.toggle}):null,le.createElement(Rb,{space:t,collection:c,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:[jc.autoWidth,g.Padding.noneLeft,g.Padding.mediumRight,S.flexShrink1,S.justifyContentStart,m?null:g.Margin.smallLeft],desktopStyle:[jc.autoWidth,g.Padding.mediumLeft,g.Padding.largeRight,S.justifyContentStart]}),l&&c?.publishingType==="variants"?le.createElement(X.View,{mobileStyle:"hidden",desktopStyle:"visible"},le.createElement(ap,{key:"variants-picker",backgroundColor:n,currentPage:u,collection:c,revision:a,variants:l,currentVariant:t})):null,le.createElement(MH,{space:t,linkColor:i}),t.themeModeTogglable?le.createElement(X.View,{mobileStyle:"hidden",desktopStyle:"visible"},le.createElement(ru,{content:t})):null,le.createElement(si,{theme:b},le.createElement(X.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[h,jc.searchBarContainer,S.flex1]},le.createElement(Ab,{contentTheme:Mi(t),headerBackgroundColor:n})),le.createElement(X.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[h]},le.createElement(CA,{contentTheme:Mi(t),headerBackgroundColor:n}))))),le.createElement(X.View,{mobileStyle:"visible",desktopStyle:"hidden"},le.createElement(si,{theme:b},le.createElement(NH,{space:t}))))}function MH(o){let{space:t,linkColor:e}=o;return le.createElement(X.View,{style:[S.directionRow,S.justifyContentEnd,S.alignCenter,S.flex1,g.Padding.mediumLeft],mobileStyle:"hidden"},(t.headerLinks||[]).map((n,r,i)=>n.title?le.createElement(LH,{key:n.title,headerLink:n,linkColor:e}):null))}function LH(o){let{headerLink:t,linkColor:e}=o,n=q.useInteractiveState({hoverDelay:250}),r=q.useInteractiveState(),i=a=>le.createElement(vf,{ref:a.ref,style:[g.Padding.mediumHorizontal,e?{color:e}:null],title:t.title,contentRef:t.to,...a.events});return t.links&&t.links.length>0?le.createElement(ha,{opened:n.hovered||r.hovered,wrapper:li,anchor:({ref:a})=>i({ref:a,events:n.events})},le.createElement(vn,{kind:"menu",preferredAlignment:"start"},le.createElement(Ua.View,{...r.events},le.createElement(Tb,null,t.links.map((a,c,l)=>le.createElement(DH,{key:c,link:a,isLast:c===l.length-1})))))):i({})}function DH(o){let{link:t,isLast:e}=o,n=$e(t.to);return le.createElement(Eb,{kind:"link",title:t.title,isLast:e,onPress:r=>{r.nativeEvent.metaKey||r.nativeEvent.ctrlKey||(r.preventDefault(),n.open())}})}function NH(o){let{space:t}=o,[e,n]=le.useState(!1),[,{headerLinksMobile:r}]=P(BH),i=e?v.ChevronDown:v.ChevronRight;return!t.headerLinks||t.headerLinks.length===0?null:le.createElement(Ua.View,{style:[jc.headerLinksMobile,r,S.justifyContentCenter,g.Padding.medium]},le.createElement(Ua.View,{style:[jc.headerLinksMobileButton]},le.createElement(B,{size:"large",rightIcon:i,alignItems:"start",onPress:()=>n(a=>!a),style:[g.Padding.noneHorizontal]},"Links")),e?le.createElement(Ua.View,null,t.headerLinks.map((a,c,l)=>a.title?le.createElement(OA,{space:t,link:a,isLast:c===l.length-1}):null)):null)}function OA(o){let{link:t,space:e,isLast:n}=o,[r,i]=le.useState(!1),a="links"in t?t.links||[]:[],c=r?v.ChevronDown:v.ChevronRight,l=Mi(e);return le.createElement(Ua.View,{style:[S.directionColumn]},le.createElement(Ua.View,{style:[S.directionRow,S.alignCenter]},le.createElement(vf,{style:[g.Padding.smallTop,n?null:g.Padding.smallBottom],kind:l==="bold"?"bold":"default",title:t.title,contentRef:t.to}),a.length>0?le.createElement(B,{size:"large",kind:"link",rightIcon:c,alignItems:"start",onPress:()=>i(u=>!u),style:[g.Padding.noneHorizontal]}):null),r?le.createElement(Ua.View,{style:[g.Margin.smallLeft,g.Margin.smallBottom]},a.map((u,d,p)=>le.createElement(OA,{key:d,space:e,link:u,isLast:d===p.length-1}))):null)}var AH={none:F.create({spaceHeader:o=>({borderBottomWidth:1,borderBottomColor:o.colors.border.mid,zIndex:1})}),default:F.create({spaceHeader:{zIndex:1,position:"sticky",top:0}}),defaultWithBorder:F.create({spaceHeader:o=>({borderBottomWidth:1,borderBottomColor:o.colors.border.mid,zIndex:1,position:"sticky",top:0})})},BH=F.create({headerLinksMobile:o=>({backgroundColor:o.colors.background.main,borderBottomWidth:1,borderBottomColor:o.colors.border.main})}),jc=Ua.StyleSheet.create({searchWrapper:{marginLeft:"auto"},searchBarContainer:{maxWidth:225},autoWidth:{width:"auto"},tocDesktop:{width:_H},headerLinks:{paddingHorizontal:PH-g.medium},headerLinksMobile:{minHeight:R.M},headerLinksMobileButton:{marginRight:"auto"},mobileHeight:{height:RH},desktopHeight:{height:IH}});s();var zo=y(C());s();var Mr=y(C()),Bb=y(z());s();var na=y(C()),Zc=y(z());function PA(o){let{space:t,revision:e,page:n,analyticsContext:r}=o,i=QO(),[,a]=P(A),c=ae(),[{result:l,error:u}]=Lu([VO(t.key,n.id,i)]);if(u)return null;let d=p=>{p!==l?.rating&&(ee({...r,type:"public_content_page_feedback_post",rating:p}),$b(f=>{qO(f,{space:t.key,page:n.id,revision:e.id,visitorId:i,rating:p,previousRating:l?.rating})}))};return na.createElement(Zc.View,{style:[S.directionRow,S.alignCenter]},na.createElement(Zc.View,null,na.createElement(Zc.Text,{style:[a.GroupTitle,a.textMuted]},c("was_it_helpful"))),na.createElement(Zc.View,{style:[S.directionRow,S.alignCenter]},na.createElement(Jk,{tooltip:c("poor_content"),active:l?.rating==="bad",rating:"bad",onPress:d}),na.createElement(Jk,{tooltip:c("ok_content"),active:l?.rating==="ok",rating:"ok",onPress:d}),na.createElement(Jk,{tooltip:c("excellent_content"),active:l?.rating==="good",rating:"good",onPress:d})))}function Jk(o){let{active:t,tooltip:e,rating:n,onPress:r}=o;return na.createElement(ui,{tooltip:e},(i,a)=>na.createElement(Zc.TouchableOpacity,{ref:a,onPress:()=>r(n),style:[g.Margin.smallLeft],accessibilityLabel:e,...i.events},na.createElement(E2,{active:t,interactive:!0,rating:n,size:R.BUTTON_S})))}s();var ra=y(C()),sp=y(z()),_A=y(tR());var Qk=40,WH=q.createInteractiveComponent(a1);function cp(o){return ra.createElement(sl,null,ra.createElement(FH,{...o}))}function FH(o){let{space:t,floating:e}=o,[n,r]=P(zH),[,i]=P(A),a=ae(),c=new URLSearchParams({utm_source:"content",utm_medium:"trademark",utm_campaign:t.key}),l=`https://${ca.homepage.domain}/?${c.toString()}`,u=()=>{ee(Rt(t,{type:"public_content_click_trademark"}))};return ra.createElement(sp.View,{style:e&&r.floatingWrapper},e?ra.createElement(_A.default,{colors:[`${n.colors.background.main}00`,n.colors.background.main],style:r.floatingTopGradient}):null,ra.createElement(sp.View,{style:e&&[g.Padding.mediumHorizontal,g.Padding.mediumBottom,r.floatingBackground]},ra.createElement(q.TouchableOpacity,{style:[S.directionRow,S.alignCenter,...e?[r.trademarkFloating,g.Padding.smallVertical,g.Padding.mediumHorizontal]:[r.tradeMarkDefault]],activeStyle:i.primary,onPress:u,href:l,target:"_blank"},ra.createElement(WH,{size:Qk,style:i.textMuted,activeStyle:i.primary}),ra.createElement(sp.View,{style:[S.flex1,g.Padding.mediumLeft]},ra.createElement(q.Text.Child,{style:[i.Label,i.textMuted],activeStyle:i.primary},a("powered_by",ra.createElement(sp.Text,{style:i.Bold},"GitBook")))))))}var zH=F.create({floatingWrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},floatingTopGradient:{height:g.medium},floatingBackground:o=>({backgroundColor:o.colors.background.main}),tradeMarkDefault:o=>({backgroundColor:"transparent"}),trademarkFloating:o=>({backgroundColor:o.colors.background.standout,borderRadius:o.radiuses.xlarge})});function IA(o){let{space:t,revision:e,page:n,analyticsContext:r}=o,[,i]=P(A),[,a]=P(VH),c=ae(),l=Op(n.edits),u=Wu(n),d=!!l,p=t.hasPublicFeedback,f=!t.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!p)return null;let m=Mr.createElement(Qy,null,Mr.createElement(Mr.Suspense,{fallback:null},Mr.createElement(PA,{space:t,revision:e,page:n,analyticsContext:r})));return Mr.createElement(Bb.View,{style:[g.Padding.largeTop,a.footer]},Mr.createElement(X.View,{tabletStyle:S.directionColumn,desktopStyle:S.directionRow,style:[S.alignCenter,S.justifySpaceBetween]},d?Mr.createElement(X.View,{tabletStyle:g.Margin.mediumBottom,style:f?[]:[S.flex1]},Mr.createElement(Bb.Text,{style:[i.textMuted,i.Label]},c("last_modified",Mr.createElement(Q1,{value:new Date(l.updatedAt),onlyDate:!1})))):null,f?Mr.createElement(cp,{space:t,floating:!1}):null,p?Mr.createElement(X.View,{tabletStyle:f?"hidden":"visible",desktopStyle:"visible"},m):null),f&&p?Mr.createElement(X.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[S.directionRow,S.flex1,S.justifyContentCenter,g.Margin.largeTop]},m):null)}var VH=F.create({footer:o=>({borderTopColor:o.colors.border.mid,borderTopWidth:1})});s();var ia=y(C()),lp=y(z());var qH=q.createInteractiveComponent(Br),GH={[Ae]:null,[Fe]:g.Margin.smallLeft,[_o]:null},RA=ia.memo(function(t){let{sections:e,activeSection:n}=t,[,r]=P(A),[,i]=P(TA),a=ae();return ia.createElement(lp.View,{style:[i.pageOutline]},ia.createElement(lp.View,{style:[S.directionRow,S.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},ia.createElement(lp.Text,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(c=>c.type===null||c.type===Je?null:ia.createElement(HH,{key:c.key,section:c,active:n===c.key})))});function HH(o){let{section:t,active:e}=o,[,n]=P(A),[,r]=P(TA),{navigateToHash:i}=Se();return ia.createElement(q.TouchableOpacity,{style:[S.directionRow,g.Padding.largeHorizontal,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(t.anchor)}},t.tag?ia.createElement(yr,{backgroundColor:wl[t.tag]||K.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,S.alignSelfCenter]},ia.createElement(lp.Text,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},t.tag)):null,ia.createElement(qH.Child,{style:[n.Label,n.textMid,t.type&&GH[t.type],...e?[n.primary,n.Medium]:[]],hoverStyle:n.primary},t.title))}var TA=F.create({pageOutline:o=>({maxWidth:Yo.MAX_PAGE_OUTLINE_WIDTH}),sectionItem:{marginTop:g.xsmall,marginBottom:g.xsmall,marginLeft:-1,borderLeftWidth:3,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:o=>({borderLeftColor:o.colors.primary.main}),sectionTag:{borderRadius:R.XXS,height:R.XXS,paddingHorizontal:g.small,justifyContent:"center"}});s();var Jc=y(C());function EA(o){let{space:t,page:e}=o,[{color:n},r]=Jc.useContext(oa),i=ae(),{headerDisabled:a}=cn(t),{tableOfContents:c}=Oi(e),l=!c&&a,u=[l?{key:"pageRead.switchTheme",icon:n==="light"?v.ThemeDark:v.ThemeLight,title:i(n==="light"?"switch_to_dark_theme":"switch_to_light_theme"),trigger:r}:null].filter(ue),[d,p]=Rv(o,u);return Jc.createElement(Jc.Fragment,null,d,l&&Jc.createElement(wA,{kind:"grey",size:"large",title:"Search",rounded:!0}),Jc.createElement(Ig,{palette:p,icon:v.MoreVertical,kind:"grey",size:"large",title:"Page actions",rounded:!0,testID:"pageToolbar.paletteButton"}))}s();var up=y(C());s();var aa=y(C()),qb=y(z());s();var KH=750,XH=g.xxlarge,UH=KH+2*XH,ex=300,YH=220;function MA(o=0){return o+ex+UH+YH}s();var Sf=y(C()),Wb=y(z());s();var ln=y(C()),bf=y(z());function tx(o){return ln.createElement(ln.Suspense,{fallback:ln.createElement(LA,{...o})},ln.createElement($H,{...o}))}function $H(o){let{treePage:t}=o,{page:e}=t,n=$e(e.type==="link"?e.target:void 0);return ln.createElement(LA,{...o,contentRef:n})}function LA(o){let{revision:t,treePage:e,parent:n,currentPage:r,contentRef:i,isLastPage:a}=o,{page:c}=e,{getNavigationHref:l,navigateToPage:u}=hc(),d=r?r.id:null,p=d===c.id,f=!!d&&QP(t,c.id,d),[m,h]=ln.useState(f),[,b]=P(jH),w=k=>{k.isDefaultPrevented()||k.nativeEvent.metaKey||k.nativeEvent.ctrlKey||(k.preventDefault(),c.type==="document"?u(t,c.id):c.type==="link"&&i?.open())};return ln.useEffect(()=>{f&&h(!0)},[f]),ln.createElement(bf.View,{style:[c.type==="group"&&g.Margin.mediumVertical]},ln.createElement(fA,{isLast:a,kind:c.type==="group"?"group":!n||n.type==="group"?"primary":"secondary",icon:c.emoji?ft(Eo,{code:c.emoji}):void 0,rightIcon:c.type==="link"?i?i.secondaryIcon:Ce:void 0,active:p,expanded:m,onPress:c.type==="group"?void 0:w,href:(()=>c.type==="link"?i?.href:l(t,c.id))(),onChevronPress:e.pages.length>0&&c.type==="document"?k=>{k.preventDefault(),h(x=>!x)}:void 0},c.title),(m||c.type==="group")&&e.pages.length>0?ln.createElement(bf.View,{style:[b.tocItemChildren,...c.type==="group"?[g.Margin.noneLeft]:[g.Margin.smallLeft,g.Margin.xsmallTop,g.Margin.smallBottom]]},e.pages.map((k,x)=>ln.createElement(bf.View,{style:c.type==="group"?null:g.Margin.smallLeft,key:k.renderKey},ln.createElement(tx,{...o,treePage:k,isLastPage:x===e.pages.length-1,parent:c}))),c.type==="group"?null:ln.createElement(bf.View,{style:b.tocItemChildrenLine})):null)}var jH=F.create({tocItemChildren:{position:"relative"},tocItemChildrenLine:o=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:o.colors.border.main})});function Fb(o){let{showingTrademark:t,revision:e}=o,n=Sf.useMemo(()=>CS(e.pages,e.rootPages),[e]);return Sf.createElement(Wb.ScrollView,{style:S.flex1,contentContainerStyle:[g.Padding.mediumVertical,t?ZH.scrollviewWithTrademark:null]},n.map((r,i)=>Sf.createElement(tx,{key:r.renderKey,...o,treePage:r,isLastPage:i===n.length-1})))}var ZH=Wb.StyleSheet.create({scrollviewWithTrademark:{paddingBottom:g.medium+Qk+2*g.medium}});s();var Bn=y(C()),zb=y(z());function Vb(o){let{space:t,collection:e,collectionSpaces:n,currentPage:r,revision:i}=o,[,a]=P(DA),{headerBackgroundColor:c,headerLogoURL:l,headerDisabled:u}=cn(t),d=n&&e?.publishingType==="variants"?Bn.createElement(ap,{key:"variants-picker",currentVariant:t,collection:e,variants:n,revision:i,currentPage:r}):null;return Bn.createElement(Bn.Fragment,null,u?Bn.createElement(Bn.Fragment,null,Bn.createElement(JH,{key:"space-header",space:t,collection:e,headerBackgroundColor:c,headerLogoURL:l,variantsSwitcher:d}),Bn.createElement(X.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[a.searchBarSection,S.directionRow,S.justifySpaceBetween,S.alignCenter,g.Margin.mediumRight]},Bn.createElement(zb.View,{style:[S.flex1,S.directionRow,g.Margin.mediumVertical]},Bn.createElement(Ab,{key:"search-bar",headerBackgroundColor:c})),t.themeModeTogglable?Bn.createElement(zb.View,{style:[g.Margin.mediumLeft]},Bn.createElement(ru,{content:t,mode:"button"})):null)):null)}function JH(o){let{space:t,collection:e,headerBackgroundColor:n,headerLogoURL:r,variantsSwitcher:i}=o,[,a]=P(DA);return Bn.createElement(X.View,{style:[a.spaceTitleWrapper,S.directionRow,S.justifyContentCenter,S.alignCenter],mobileStyle:"hidden",desktopStyle:"visible"},Bn.createElement(Rb,{space:t,collection:e,headerBackgroundColor:n,headerLogoURL:r,desktopStyle:S.flex1}),Bn.createElement(zb.View,{style:[S.alignSelfCenter,g.Margin.smallHorizontal]},i))}var DA=F.create({searchBarSection:o=>({borderColor:o.colors.border.mid,borderBottomWidth:1}),selectedTab:o=>({borderLeftColor:o.colors.primary.main,borderLeftWidth:2}),hoverTab:o=>({backgroundColor:o.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:R.BUTTON_M,lineHeight:R.BUTTON_M,borderRadius:0,paddingHorizontal:g.medium},mainBadge:{fontFamily:s1,fontSize:ag.xxsmall,lineHeight:R.BUTTON_M,...cg.Bold,textTransform:"uppercase",letterSpacing:1},spaceTitleWrapper:o=>({height:R.L}),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:QH}=Yo;function NA(o){let{space:t}=o,e=ae(),{headerDisabled:n}=cn(t),[,r]=P(eK[n?"none":"default"]),{desktopSidebarWidth:i}=aa.useContext(Vi),a=aa.useMemo(()=>({[MA(i)]:"visible"}),[i]),c=!t.hideTrademark;return aa.createElement(X.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:a,style:[r.tocDesktopWrapper,S.directionRow,S.justifyContentEnd]},aa.createElement(pe,{tag:"nav",accessibilityLabel:e("table_of_contents"),style:[tK.tocDesktop,S.directionColumn]},aa.createElement(qb.View,{style:[S.flex1,g.Padding.largeLeft]},aa.createElement(Vb,{...o}),aa.createElement(Fb,{...o,showingTrademark:c})),c?aa.createElement(cp,{floating:!0,space:t}):null))}var eK={none:F.create({tocDesktopWrapper:o=>({position:"sticky",top:0,height:"100vh",overflowY:"auto",alignSelf:"flex-start",backgroundColor:o.colors.background.main,borderRightColor:o.colors.border.mid,borderRightWidth:1})}),default:F.create({tocDesktopWrapper:o=>({position:"sticky",top:g.xxlarge,height:`calc(100vh - ${QH}px)`,overflowY:"auto",alignSelf:"flex-start",backgroundColor:o.colors.background.main,borderRightColor:o.colors.border.mid,borderRightWidth:1})})},tK=qb.StyleSheet.create({tocDesktop:{width:ex}});s();var Bt=y(C()),Ri=y(z());var oK=X.createResponsiveComponent(Ri.Animated.View),nK=X.createResponsiveComponent(Ri.Animated.createAnimatedComponent(Ri.TouchableOpacity));function BA(o){let{currentPage:t,space:e,collection:n,collectionSpaces:r,revision:i}=o,a=ae(),c=Bp(Vn(rm),Bt.useState(!1)),[,l]=P(A),{sidebarMobileLeft:u,showOverlay:d}=oP(c),[p,f]=P(WA);Bt.useEffect(()=>{c.close()},[t?.id]);let m=!e.hideTrademark,h=r&&n?.publishingType==="variants"?Bt.createElement(ap,{key:"variants-picker",currentVariant:e,collection:n,variants:r,revision:i,currentPage:t}):null,b=!!e.themeModeTogglable,w=b?Bt.createElement(Ri.View,{style:[g.Margin.mediumRight]},Bt.createElement(ru,{content:e,mode:"button"})):null;return Bt.createElement(hr,null,Bt.createElement(oK,{style:[f.sidebar,{left:u}],mobileStyle:"visible",desktopStyle:"hidden"},Bt.createElement(pe,{tag:"nav",accessibilityLabel:a("table_of_contents"),style:[S.directionColumn,S.flex1]},Bt.createElement(Ri.View,{style:S.flex1},Bt.createElement(rK,{key:"mobile-closing-bar",switcher:h??w}),b&&h?Bt.createElement(Ri.View,{style:[S.directionRow,S.justifySpaceBetween,S.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal,f.mobileChangeAppearance]},Bt.createElement(Ri.Text,{style:[l.Label,l.text]},a("theme_change_appearance")),Bt.createElement(ru,{content:e})):null,Bt.createElement(Vb,{...o}),Bt.createElement(Ri.View,{style:[g.Padding.mediumLeft,S.flex1,f.sidebarWrapper]},Bt.createElement(Fb,{...o,showingTrademark:m}))),m?Bt.createElement(cp,{floating:!0,space:e}):null)),Bt.createElement(nK,{style:[f.screenOverlay,{backgroundColor:u.interpolate({inputRange:[-_g.MOBILE_WIDTH,0],outputRange:[p.colors.backdrop.transparent,p.colors.backdrop.background]})}],mobileStyle:d?"visible":"hidden",desktopStyle:"hidden",onPress:c.closeMobile}))}function rK(o){let[,t]=P(WA),e=Bp(Vn(rm),Bt.useState(!1));return Bt.createElement(X.View,{style:[t.mobileClosingBar,g.Padding.smallHorizontal,S.justifySpaceBetween,S.alignCenter,S.directionRow],mobileStyle:"visible",desktopStyle:"hidden"},Bt.createElement(B,{icon:v.X,size:"large",kind:"default",onPress:()=>e.closeMobile(),style:[S.alignSelfCenter,g.Padding.smallHorizontal],accessibilityLabel:"Close"}),o.switcher)}var AA=10,WA=F.create({sidebar:o=>({backgroundColor:o.colors.background.main,width:_g.MOBILE_WIDTH,maxWidth:"100%",height:"100%",flexDirection:"row",position:"fixed",top:0,bottom:0,zIndex:AA}),sidebarWrapper:o=>({borderRightWidth:1,borderRightColor:o.colors.border.mid}),sidebarCloseButton:{position:"absolute",width:R.BUTTON_M,height:R.BUTTON_M,top:(R.M-R.BUTTON_M)/2,left:_g.MOBILE_WIDTH+R.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:AA-1},mobileClosingBar:o=>({height:R.L,borderBottomWidth:1,borderBottomColor:o.colors.border.mid,backgroundColor:o.colors.background.main}),mobileChangeAppearance:o=>({borderBottomWidth:1,borderColor:o.colors.border.mid})});function FA(o){return up.createElement(up.Fragment,null,up.createElement(NA,{...o}),up.createElement(BA,{...o}))}var{PUBLIC_DESKTOP_HEADER_HEIGHT:iK}=Yo;function zA(o){let{space:t,revision:e,screen:n,analyticsContext:r,collection:i,collectionSpaces:a,assetHostname:c,currentPage:l}=o,u=ae(),[d,p]=P(aK);JR(t);let{headerDisabled:f}=cn(t),m=Oi(l),h=RI();Wi(k=>{k.writeAsync([{type:"meta",name:"description",content:l&&l.description?l.description:""},{type:"meta",name:"og:description",content:l&&l.description?l.description:""},{type:"meta",name:"og:image",content:t.socialPreviewURL?zi(t.socialPreviewURL,{height:640,width:1280,fit:"contain"}):cK(t,e,l)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),t.visibility==="in-collection"?(k.setTitle(l?l.title:u("page_not_found"),i?.publishedTitle||i?.title||ss),k.writeAsync([{type:"meta",name:"robots",content:i?.visibility!=="public"?"noindex, nofollow":"index"}])):(k.setTitle(l?l.title:u("page_not_found"),t.publishedTitle||t.title||ss),k.writeAsync([{type:"meta",name:"robots",content:t.visibility!=="public"?"noindex, nofollow":"index"}]))}),Eu(l?og(t,l,{screen:"space",visibility:t.visibility,pageLayout:Wu(l),diffMode:!1}):Rt(t,{screen:"space_page_notfound",visibility:t.visibility}),[t.key,l?.id]),qR(t,l?.id??null);let b=!!m.tableOfContents,w=!!m.outline;if(!l&&n.page){let[k]=Lg([$O(t.key,n.page)]);if(k&&e.pages[k.page])return zo.default.createElement(OT,{to:eo(e,k.page)})}return zo.default.createElement(zo.default.Fragment,null,zo.default.createElement(lK,{space:i||t,assetHostname:c}),zo.default.createElement(X.View,{style:[S.flex1,p.spacePageContainerBg],mobileStyle:S.directionColumn,desktopStyle:S.directionRow},zo.default.createElement(Nb,null,b?zo.default.createElement(FA,{space:t,revision:e,currentPage:l?.type==="document"?l:null,analyticsContext:r,collection:i,collectionSpaces:a}):null,zo.default.createElement(yr,{style:[p.spacePageBody],backgroundColor:d.colors.background.main},zo.default.createElement(zo.default.Suspense,{fallback:zo.default.createElement(Iv,{withPageOutline:l?.layout!=="landing"})},l&&l.type==="document"?zo.default.createElement(Pv,{screen:n,key:sK(n,e,l),space:t,changeRequest:void 0,revision:e,page:l,scrollRef:h,readOnly:!0,withComments:!1,withToC:b,analyticsContext:r,outline:w?RA:void 0,toolbar:EA,footer:zo.default.createElement(IA,{space:t,revision:e,page:l,analyticsContext:r}),sideColumnStickyTop:g.large+(f?0:iK)}):zo.default.createElement(oL,{statusCode:404},zo.default.createElement(Lp,{title:u("page_not_found"),action:zo.default.createElement(hP,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:t.key,page:""}}},u("back_to_home"))},u("page_not_found_long"))))))))}var aK=F.create({spacePageContainerBg:o=>({backgroundColor:o.colors.background.main}),spacePageBody:{flex:1}});function sK(o,t,e){let n=o.space;return n+=`/${o.changeRequest||"main"}`,n+=`/${t.conflicts?"conflicts":"normal"}`,n+=`/${e.id}`,o.diff&&(n+="/diff"),o.revision&&(n+="/revision"),n}function cK(o,t,e){let n=e&&t.rootPages[0]!==e.id?`/page/${e.id}`:"",{primaryColor:r,headerLogoURL:i}=Ph(o),a=Mi(o),c=`color=${encodeURIComponent(r||"")}&logo=${encodeURIComponent(Ys(i||o.iconURL||""))}&theme=${encodeURIComponent(a||"")}`;return`${xf()}/share/space/thumbnail/${o.key}${n}.png?${c}`}function lK(o){let{space:t,assetHostname:e}=o,n=KO(t,"public-content"),[r]=P(),[i,a]=zo.default.useState(n.iconURL||(n.emoji?`${e}${GO(n.emoji)}`:null));return zo.default.useEffect(()=>{if(i)return;let c=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=c,l.height=c,u.fillStyle=r.colors.background.main,u.fillRect(0,0,c,c);let d=.7;u.fillStyle=r.colors.text.main,u.font=`400 ${c*d}px gitbook-content-font`,u.textAlign="center",u.textBaseline="middle",u.fillText(t.title.slice(0,1),c/2,c/2),a(l.toDataURL("image/png"))},[t.title,a]),Wi(c=>{c.writeAsync([{type:"link",rel:"icon",href:i?Ys(i):`${e}/public/images/icon-512.png`},{type:"link",rel:"apple-touch-icon",href:i?Ys(i):`${e}/public/images/icon-512.png`}])}),null}s();var Ie=y(C()),sr=y(z());var uK=X.createResponsiveComponent(pe),VA=200,dK=4*(VA+g.small);function qA(o){let{space:t,collection:e}=o,[,n]=P(A),[,r]=P(fK),i=Ie.useMemo(()=>t?.footer||e?.footer,[t,e]);return Ie.createElement(Ie.Fragment,null,i?Ie.createElement(uK,{tag:"footer",style:[S.alignCenter,r.footer]},Ie.createElement(X.View,{desktopStyle:[Ya.desktopContainer]},Ie.createElement(X.View,{desktopStyle:S.directionRow,mobileStyle:S.directionColumn},i?.logoURL?Ie.createElement(X.View,{style:[S.directionRow,S.alignStart,g.Padding.xlargeTop,i?.copyright?null:g.Padding.xlargeBottom],desktopStyle:g.Margin.xxlargeHorizontal,mobileStyle:g.Margin.largeHorizontal},Ie.createElement(X.View,{desktopStyle:"visible",mobileStyle:"hidden"},Ie.createElement(Ho,{source:{uri:i?.logoURL},style:Ya.footerImageDesktop,loading:"lazy"})),Ie.createElement(X.View,{desktopStyle:"hidden",mobileStyle:"visible"},Ie.createElement(sr.View,{style:g.Margin.largeLeft},Ie.createElement(Ho,{source:{uri:i?.logoURL},style:Ya.footerImageMobile,loading:"lazy"})))):null,i?.linkGroups?Ie.createElement(X.View,{style:[g.Padding.xlargeTop,i.logoURL?S.alignStart:S.alignCenter,S.flex1,i?.copyright?null:g.Padding.xlargeBottom],mobileStyle:S.alignStart,tabletStyle:g.Padding.largeLeft},Ie.createElement(X.View,{mobileStyle:"hidden",tabletStyle:"hidden",desktopStyle:i.linkGroups.length<3&&!i.logoURL?"visible":"hidden"},Ie.createElement(pK,{linkGroups:i.linkGroups})),Ie.createElement(X.View,{mobileStyle:"visible",tabletStyle:"visible",desktopStyle:i.linkGroups.length>=3||i.logoURL?"visible":"hidden"},Ie.createElement(mK,{linkGroups:i.linkGroups}))):null),i?.copyright?Ie.createElement(X.View,{style:[S.flex1,g.Padding.xlargeVertical]},Ie.createElement(sr.Text,{style:[Ya.copyright,n.textMuted]},i?.copyright)):null)):null)}function pK(o){let{linkGroups:t}=o,[,e]=P(A),n=[],r=t?.map(({title:i})=>i);return t?.forEach(i=>{i?.links?.forEach((a,c)=>{if(n[c]===void 0)return n[c]=[a];n[c].push(a)})}),Ie.createElement(sr.View,{style:[S.flex1,S.justifyContentStart,S.directionRow]},Ie.createElement(sr.View,{style:Ya.linkGroupColumnDesktop},Ie.createElement(sr.View,{style:[S.flex1]},r?.map((i,a)=>Ie.createElement(sr.View,{key:i,style:[S.alignStart,a>0?g.Margin.smallTop:null]},Ie.createElement(sr.Text,{style:[e.text,e.Heading3]},i))))),n.map((i,a)=>Ie.createElement(sr.View,{key:a,style:Ya.linkGroupColumnDesktop},Ie.createElement(GA,{links:i,renderMode:"horizontal"}))))}function mK(o){let{linkGroups:t}=o,[,e]=P(A);return Ie.createElement(X.View,{style:[S.flex1,S.justifyContentStart,S.directionRow],desktopStyle:[Ya.linkGroupColumnsDesktop,S.directionRow,S.wrap,S.flexShrink1],mobileStyle:S.directionColumn},t.map((n,r)=>Ie.createElement(X.View,{key:r,desktopStyle:[Ya.linkGroupColumnDesktop,g.Margin.xlargeTop],mobileStyle:[Ya.linkGroupColumnMobile,g.Margin.xlargeTop,g.Margin.largeLeft]},Ie.createElement(sr.View,{style:S.alignStart},Ie.createElement(sr.Text,{style:[e.text,e.Heading3]},n.title)),Ie.createElement(GA,{links:n.links,renderMode:"vertical"}))))}function GA(o){let{links:t,renderMode:e}=o,[,n]=P(A);return Ie.createElement(X.View,{style:[S.alignStart,S.flex1,S.directionColumn],desktopStyle:e==="vertical"?g.Margin.largeTop:null,mobileStyle:g.Margin.smallTop},(t||[]).map((r,i)=>{let a=i===t.length-1;return r.title?Ie.createElement(Ie.Suspense,{fallback:null,key:r.title},Ie.createElement(sr.View,{style:[Ya.referenceLink,e==="horizontal"&&i>0?g.Margin.smallTop:null]},Ie.createElement(vf,{title:r.title,contentRef:r.to,style:[n.textMuted,n.Medium,e==="horizontal"?null:[g.Padding.smallTop,a?null:g.Padding.smallBottom]]}))):null}))}var fK=F.create({footer:o=>({backgroundColor:o.colors.background.mid})}),Ya=sr.StyleSheet.create({linkGroupColumnsDesktop:{maxWidth:dK,marginTop:-g.xlarge},linkGroupColumnDesktop:{width:VA,marginLeft:g.small,paddingRight:g.xlarge},linkGroupColumnMobile:{width:"auto"},desktopContainer:{maxWidth:1280,width:"100%"},copyright:{textAlign:"center"},mobileHeight:{height:"auto"},referenceLink:{maxWidth:"100%"},footerImageDesktop:{maxHeight:150,maxWidth:150,objectFit:"contain"},footerImageMobile:{maxHeight:30,maxWidth:30,objectFit:"contain"}});s();var jo=y(C());s();var Oo=y(C());s();var wf=y(C());function HA(o){let{query:t,space:e,onUpdateQuery:n,onSubmitAIQuery:r,allowEnterToOpen:i}=o,a=wf.useCallback(()=>{n("")},[n]);return t.query?wf.createElement(aA,{target:{space:e},query:t,onAnswerLoaded:a,onSubmitQuery:r}):wf.createElement(cA,{target:{space:e},onSubmitAIQuery:r,allowEnterToOpen:i})}s();var ox=y(C());s();var Hs=y(C());function KA(o){let{space:t,onUpdateQuery:e,onSubmitAIQuery:n}=o,r=ae(),i=Z2(),a=Pb(),c=Ob(t.hasAISearch?{space:t}:null),l=Hs.useCallback(f=>{switch(f.type){case"recent-search":return{icon:v.Search.CSS,title:f.query,action:r("search")};case"recent-question":return{icon:v.AILens.CSS,title:f.question,action:r("search_ask")};case"recommended-question":return{icon:v.AILens.CSS,title:f.question,action:r("search_ask")};default:De(f)}},[r]),u=Hs.useCallback(f=>{switch(f){case"recent-search":return{title:r("search_blankslate_recent_searches")};case"recent-question":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),d=(f,m)=>{switch(f.type){case"recent-search":{e(f.query),ee(Rt(t,{type:"search_pick_suggestion_recent_search",suggestionIndex:m}));break}case"recent-question":{n(f.question),ee(Rt(t,{type:"ai_search_pick_suggestion_recent_search",suggestionIndex:m}));break}case"recommended-question":ee(Rt(t,{type:"search_pick_suggestion_question"})),n(f.question);break;default:De(f)}},p=Hs.useMemo(()=>{let f=t.hasAISearch?a.map(h=>({type:"recent-question",question:h})):[],m=i.filter(h=>!a.includes(h)).map(h=>({type:"recent-search",query:h}));return[...f,...m,...c]},[i,a,c,t.hasAISearch]);return p.length===0?Hs.createElement(va,null,r("search_blankslate")):Hs.createElement(Y,{style:[M.flex.flex1,M.flex.column]},Hs.createElement(oc,{data:p,getKey:gK,renderItem:l,renderGroup:u,groupItem:hK,getGroupKey:yK,onOpen:d,style:[M.padding.mediumHorizontal,M.padding.mediumVertical]}))}function gK(o){switch(o.type){case"recent-search":return`recent-search:${o.query}`;case"recent-question":return`recent-question:${o.question}`;case"recommended-question":return`recommended-question:${o.question}`;default:De(o)}}function hK(o){return o.type}function yK(o){return o}s();var Ks=y(C());function XA(o){let{space:t}=o,e=Ks.useDeferredValue(o.query),n=ae(),{navigate:r}=Se(),i=WP({query:e,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:t.key}]}),a=Ks.useCallback(u=>{switch(u.type){case"page":return{title:u.title,icon:v.Page.CSS,subtitle:u.ancestors.filter(d=>d.type!=="group"&&d.id!==u.page.id).map(d=>d.title).join(" \u203A "),action:n("search_goto_page")};case"section":return{title:u.title,body:u.body,icon:v.Hash.CSS,nested:!0,action:n("search_goto_section")};default:throw new Error("Unexpected item type")}},[n]),c=Ks.useCallback(u=>{if(u)return{title:u.page.title}},[]),l=Ks.useCallback((u,d)=>{if(!(u.type!=="page"&&u.type!=="section"))switch(ee(Rt(t,{type:"public_content_search_open_result",resultType:u.type,resultIndex:d})),u.type){case"page":r({screen:{type:"space",space:u.space.key,page:u.path,hash:void 0,query:void 0}});break;case"section":r({screen:{type:"space",space:u.space.key,page:u.path,hash:u.anchor,query:void 0}});break;default:De(u)}},[]);return i.length===0?Ks.createElement(va,null,n("search_blankslate_query",e)):Ks.createElement(oc,{data:i,getKey:vK,renderItem:a,renderGroup:c,groupItem:SK,getGroupKey:bK,onOpen:l,style:[M.padding.mediumHorizontal,M.padding.mediumVertical]})}function vK(o){return o.key}function bK(o){return o?o.page.id:""}function SK(o){return o.groups.find(t=>t.type==="page")}function UA(o){let{space:t,query:e,onUpdateQuery:n,onSubmitAIQuery:r}=o;return J2(e),eA(e,{space:t}),e?ox.createElement(XA,{space:t,query:e}):ox.createElement(KA,{space:t,onUpdateQuery:n,onSubmitAIQuery:r})}function YA(o){let{space:t}=o,[e,{open:n,close:r,setQuery:i}]=yP();return Fr({[ze.SEARCH_OPEN]:()=>{n()},"/":()=>{n()}},["all"],[]),Oo.createElement(k1,null,typeof e=="string"?Oo.createElement(wK,{space:t,query:e,setQuery:i,close:r}):null)}function wK(o){let{space:t,query:e,setQuery:n,close:r}=o,i=ae(),a=Oo.useRef(null),[c,l]=uA(),[u,d]=$s("search",[!!t.hasAISearch]);Eu({screen:"search",screenTab:u},[u]);let p=Oo.useCallback(h=>{n(h),a.current?.focus()},[n,a]),f=Oo.useCallback(h=>{t.hasAISearch&&(d("lens"),n(h),l(h),a.current?.focus(),ee(Rt(t,{type:"ai_search_submit",query:h})))},[!t.hasAISearch,d,n,l,a]),m=Oo.useCallback(h=>{d(h),l(h==="search"?"":e)},[d,l]);return Oo.useEffect(()=>{a.current?.focus()},[u]),Oo.createElement(aP,{ref:a,inputIcon:u==="search"?v.Search.CSS:v.AILens.CSS,rightButton:t.hasAISearch?Oo.createElement(Y,{style:[M.flex.row,M.flex.alignCenter]},u==="lens"&&e&&e!==c.query?Oo.createElement(Y,{style:[M.margin.mediumRight,M.flex.row,M.flex.alignCenter]},Oo.createElement(Y,{style:M.margin.xsmallRight},Oo.createElement(gn,{style:[M.text.caption,M.textColor.muted]},"Enter")),Oo.createElement(v.ArrowEnter.CSS,{style:[M.icons.xsmall,M.textColor.muted]})):null,Oo.createElement(yR,{activeTab:u,tabs:[{key:"search",label:i("search")},{key:"lens",label:"Lens"}],onPress:m})):null,query:e,onQueryChange:n,onSubmitQuery:f,onClose:r,queryPlaceholder:i(u==="search"?"search_placeholder":"search_placeholder_ask")},u==="search"||!t.hasAISearch?Oo.createElement(UA,{query:e,space:t,onUpdateQuery:p,onSubmitAIQuery:f}):Oo.createElement(HA,{query:c,space:t,onUpdateQuery:p,onSubmitAIQuery:f,allowEnterToOpen:e.length===0}))}s();var Gb=y(C());var dp=new Map;typeof window<"u"&&(window.GitBook=window.GitBook||{addEventListener:(o,t)=>{dp.has(o)||dp.set(o,[]),dp.get(o).push(t)},removeEventListener:(o,t)=>{if(!dp.has(o))return;let e=dp.get(o),n=e.indexOf(t);n!==-1&&e.splice(n,1)}});function $A(o,...t){let e=dp.get(o);e&&e.forEach(n=>{n(...t)})}function jA(o){if(Gb.useContext(Ko).mode!=="public-content")throw new Error("useInjectIntegrationsScripts can only be used in public-content mode");Gb.useEffect(()=>($A("load"),()=>{$A("unload")}),[o.key])}function Hb(o){let{space:t,assetHostname:e,collection:n,collectionSpaces:r,usesCookies:i}=o,{locale:a}=jo.useContext(Ko),{screen:c}=Sa(),l=ye(),u=GR(t.key,c),d=c.type==="space"&&typeof c.changeRequest=="string";if(d&&!u)throw new Ti.NotFound("Change request not found");let p=c.type==="space"&&c.revision,f=d&&u?u.revisionCurrent:p&&c.revision||t.revision,m=Dr(l.store.getRevision(t.key,f));if(!m)throw d?new Ti.NotFound("Change request not found"):c.type==="space"&&c.revision?new Ti.NotFound("Revision not found"):new Error("Expected revision");UR(t),jA(t);let h=jo.useMemo(()=>Rt(t,{}),[t.key,t.organization,t.collection]);if(c.type!=="space"||c.space!==t.key)throw new Error("screen should be the space we render");jo.useEffect(()=>{if(t.searchKey)return SP(t.searchKey)},[t.searchKey]),Wi(x=>{x.write({type:"font",font:t.font||"Inter",fontFamilyName:"gitbook-content-font"}),(c.revision||c.changeRequest||c.sideSheet)&&x.write({type:"meta",name:"robots",content:"noindex"}),x.setLang(a)}),pA(t.privacyPolicyURL,dw(t)||i);let[b,w]=LP(m,c.page),k={space:t.key,...w?{page:w.id}:{},...u?{changeRequest:u.key}:{revision:m.id}};return jo.createElement(jo.Fragment,null,b?jo.createElement(Tg,{to:{screen:b}}):null,jo.createElement(CT,{value:k},jo.createElement(xA,{space:t,revision:m,collection:n,currentPage:w,collectionSpaces:r}),jo.createElement(zA,{space:t,revision:m,screen:c,analyticsContext:h,collection:n,collectionSpaces:r,assetHostname:e,currentPage:w}),jo.createElement(qA,{space:t,collection:n}),jo.createElement(YA,{space:t}),jo.createElement(I2,null),jo.createElement(xT,{content:t,contentRef:Bi(t.key)})))}s();var nx=y(C());s();function pp(o){return o?o.endsWith("/")?o:`${o}/`:""}function ZA(o,t){return e=>{let n=`/${pp(o.basePath)}`;switch(e.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"root":case"join":case"account_verification":case"integrations":case"import":case"template":case"welcome":case"contentkit_builder":throw new Error(`Cannot navigate to ${e.type} on public content`);case"home":{if(e.organization){let i=Du.read({type:"organization",organization:e.organization});n=Tp(i);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let i=zO(e.user);n=Tp(i);break}case"collection":{let i=Du.read({type:"collection",collection:e.collection});n=Tp(i);break}case"space":{let i=Du.read({type:"space",space:e.space});i.hostname===o.hostname&&(!o.basePath||i.pathname.startsWith(o.basePath))||t?(o.shareLink&&(n+=pp(o.shareLink)),i.pathname!==o.basePath&&(o.basePath?n+=pp(Bx(i.pathname,pp(o.basePath))):n+=pp(i.pathname))):n=Tp(i),n+=CK(e);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:De(e)}let r;if(typeof e.query=="string"){let i=new URLSearchParams;i.set("q",e.query),r=`?${i.toString()}`}return{pathname:n,hash:e.hash,search:r}}}function CK(o){let t="";return o.revision&&(t+=`~/revisions/${o.revision}/`),o.changeRequest&&(t+=`~/changes/${o.changeRequest}/`),t+=`${o.page[0]==="/"?o.page.slice(1):o.page}`,o.sideSheet&&(t=`${pp(t)}~/${o.sideSheet.type}${"tab"in o.sideSheet?`/${o.sideSheet.tab}`:""}`),t}s();function JA(o,t,e,n=[]){return r=>{let{spaceKey:i,pathname:a}=Gx({currentSpaceKey:t,collectionSpaces:n,collection:e,pathname:r.pathname,paths:o}),c={type:"space",space:i,page:""};kK(c,MO(a)),r.hash&&(c.hash=r.hash.replace(/^#/,""));let u=new URLSearchParams(r.search).get("q");return typeof u=="string"&&(c.query=u),c}}function kK(o,t){lS(t,[{path:`/~/revisions/:revision/:page${Yf}`,onMatch:e=>{Object.assign(o,{page:e.params.page,revision:e.params.revision}),mp(o,e,t)}},{path:"/~/revisions/:revision",onMatch:e=>{Object.assign(o,{revision:e.params.revision,page:""}),mp(o,e,t)}},{path:`/~/changes/:changeRequest/:page${Yf}`,onMatch:e=>{Object.assign(o,{changeRequest:e.params.changeRequest,revision:void 0,page:e.params.page}),mp(o,e,t)}},{path:"/~/changes/:changeRequest",onMatch:e=>{Object.assign(o,{changeRequest:e.params.changeRequest,revision:void 0,page:""}),mp(o,e,t)}},{path:`/:page${Yf}`,onMatch:e=>{Object.assign(o,{page:e.params.page,diff:!1}),mp(o,e,t)}},{path:"/",onMatch:e=>{Object.assign(o,{diff:!1,page:""}),mp(o,e,t)}}])}function mp(o,t,e){lS(e,[{path:"/~/share/pdf",onMatch:n=>{Object.assign(o,{sideSheet:{type:"share",tab:"pdf"}})}}],{prefix:t.path})}function Kb(o,t,e,n,r){let i=LR(),a=(0,nx.useMemo)(()=>JA(o,e,n,r),[o.hostname,o.basePath,o.shareLink,e,n,r]),c={hostname:o.hostname,pathname:o.basePath},l=(0,nx.useMemo)(()=>ZA({hostname:c.hostname,basePath:c.pathname,shareLink:o.shareLink},t),[o.hostname,o.basePath,o.shareLink]);return{forceHardNavigation:!i,getNavigationScreenFromLocation:a,getLocationForNavigationScreen:l}}function QA(o){let{space:t,ssrRequestPath:e,ssrRouterContext:n,basePath:r,hostname:i,customToken:a,shareLink:c,assetHostname:l,preview:u=!1,usesCookies:d=!1}=o,p=Kb({hostname:i,basePath:r,shareLink:c},u,t.key),{primaryColor:f}=cn(t);return ti.createElement(Wp,{mode:"public-content",preview:u,locale:t.language},ti.createElement(ti.Suspense,{fallback:ti.createElement(To,{size:"large"})},ti.createElement(sl,{primaryColor:f},ti.createElement(gf,null,ti.createElement(_b,{ssrRequestPath:e,ssrRouterContext:n},ti.createElement(Rg,{persist:!1,...p},ti.createElement(Oh,null,a&&typeof window>"u"?ti.createElement(To,{size:"large"}):ti.createElement(Hb,{space:t,assetHostname:l,usesCookies:d}))))))))}s();var un=y(C());function e9(o){let{collection:t,basePath:e,hostname:n,customToken:r,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:c,shareLink:l,assetHostname:u,preview:d=!1,usesCookies:p=!1}=o,f=Kb({hostname:n,basePath:e,shareLink:l},d,void 0,t,i),{primaryColor:m}=cn(t);if(!d&&t.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return un.createElement(Wp,{mode:"public-content",preview:d,locale:t.language},un.createElement(sl,{primaryColor:m},un.createElement(gf,null,un.createElement(_b,{ssrRequestPath:a,ssrRouterContext:c},un.createElement(Rg,{persist:!1,...f},un.createElement(un.Suspense,{fallback:un.createElement(To,{size:"large"})},un.createElement(Oh,null,r&&typeof window>"u"?un.createElement(To,{size:"large"}):un.createElement(xK,{collection:t,collectionSpaces:i,assetHostname:u,usesCookies:p}))))))))}function xK(o){let{screen:t}=Sa();if(t.type!=="space")throw new Error("screen should be a space");let[e]=wa([Bi(t.space)]);if(!e)throw new Error("the space should exist");let{primaryColor:n}=cn(e);return un.createElement(Wp,{locale:e.language},un.createElement(sl,{primaryColor:n},un.createElement(gf,null,un.createElement(Hb,{...o,space:e}))))}s();var cr=y(C()),r9=y(z());s();var rx=y(C());async function OK(o){let t=await nc(),{data:e}=await t.hive.generateSpaceHiveReadAccessToken(o);return Object.values(e.contents)}function t9(o){return o.client?rx.createElement(FS,{client:o.client},o.children):rx.createElement(FS,{endpoint:FP(),fetchContentAuthToken:OK,store:o.store},o.children)}s();var iu=y(C());var ix=it("preview:child");function o9(o,t){let[e,n]=iu.useState(o),[r,i]=iu.useState(void 0);return PK(e.footer),iu.useEffect(()=>{t&&(window.addEventListener("message",a=>{if(a.data.source!=="gitbook-preview-parent"||(ix.info("receive message",a.origin,a.data),a.origin!==xf()&&a.origin!=="https://web.archive.org/web/20231004051033/http://127.0.0.1:5001"))return;let c=Px(a.data.payload),l=a.data.previewID;ix.debug("update content with",c),n(c),i(l),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),ix.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[t]),[e,r]}function PK(o){let t=iu.useRef(o);ku(()=>{o&&o!==t.current&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"}),t.current=o},[o])}s();var n9=y(C());function ax(){n9.useEffect(()=>{typeof window>"u"},[])}function sx(o){let t="collection"in o?o.collection:o.space,[e,n]=o9(t,!!o.preview),r=o.hive&&o.hive.client?{client:o.hive.client}:{store:o.hive?.contentStore};return ax(),cr.createElement(px,null,cr.createElement(vA,{content:e,isPreview:!!o.preview},cr.createElement(t9,{...r},cr.createElement(_K,{...o,content:e,previewID:n}))))}function _K(o){let{content:t,previewID:e}=o;ax();let[n]=cr.useContext(oa);return cr.createElement(si,{theme:n},cr.createElement(p1,{theme:n},cr.createElement(dM,null,cr.createElement(hR,null,cr.createElement(y1,{enabled:!0},"collection"in o?cr.createElement(e9,{...o,collection:t}):cr.createElement(QA,{...o,space:t})),e?cr.createElement(r9.View,{testID:e}):null))))}s();function cx(o){let t=new URLSearchParams(window.location.search),e=window.location.hash;if(t.has("jwt_token")){t.delete("jwt_token");let i=t.toString();window.history.replaceState({},"",`${window.location.pathname}${i?`?${i}`:""}${e||""}`)}let{dsn:n,tracesSampling:r}={...ca.sentry,...ca.sentry.publicContent};bx({dsn:n,release:vx,projectId:ca.firebase.projectId,tracesSampling:r}),window.location.hostname!=="127.0.0.1"&&DO(o.hostname),SR({customToken:o.customToken,waitUserReady:!1})}s();function i9(o){o?.firestore&&ms.fromJS(o.firestore),o?.head&&i1.cache.fromJS(o.head),o?.contentURLs&&Du.fromJS(o.contentURLs),o?.contentRefs&&Hi.fromJS(o.contentRefs),o?.screenToContentRefs&&Th.fromJS(o.screenToContentRefs),o?.swaggers&&Pl.fromJS(o.swaggers),o?.api&&sP.fromJS(o.api)}s();var a9=it("browser-compatibility");function s9(){let o=["webcache.googleusercontent.com","translate.googleusercontent.com","translate.google.com"];return!window.location.hostname||o.includes(window.location.hostname)?(a9.warning("The application is served over an unsupported hostname and has been made static."),!1):IK()?!0:(a9.warning("Your browser is missing required features, the application has been made static."),!1)}function IK(){try{if("\u212B".normalize("NFKD")!=="A\u030A")return!1}catch{return!1}return!(!window.Intl||![].flat)}s();function c9(o){document.readyState==="interactive"||document.readyState==="complete"?o():document.addEventListener("DOMContentLoaded",()=>{o()})}s();var l9=y(y9());function lx(o){return new Ei("ssr.deserializeFromHTML").wrapSync(()=>{let e=l9.default.decompress(o);return e?JSON.parse(e):null})}s9()&&c9(()=>{RK()});async function RK(){let o=window.__GITBOOK_INITIAL_PROPS__,t=lx(o);cx(t),window.__GITBOOK_LAZY_MODULES__&&await F1(window.__GITBOOK_LAZY_MODULES__);let e=window.__GITBOOK_INITIAL_STATE__,n=lx(e);n?(i9(n),ux.AppRegistry.registerComponent("PublicContentApplication",()=>sx),ux.AppRegistry.runApplication("PublicContentApplication",{hydrate:!0,rootTag:document.querySelector(".gitbook-root"),initialProps:t})):console.error("Invalid state received from server, content won't be interactive")}
/*! Bundled license information:

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

rangefix/rangefix.js:
  (*!
   * RangeFix v0.2.9
   * https://github.com/edg2s/rangefix
   *
   * Copyright 2014-17 Ed Sanders.
   * Released under the MIT license
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/public-XMWWDYLE.min.js.map


}
/*
     FILE ARCHIVED ON 05:10:33 Oct 04, 2023 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 22:10:35 Sep 14, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.647
  exclusion.robots: 0.023
  exclusion.robots.policy: 0.01
  esindex: 0.012
  cdx.remote: 17.974
  LoadShardBlock: 293.242 (3)
  PetaboxLoader3.datanode: 240.608 (4)
  load_resource: 196.492
  PetaboxLoader3.resolve: 45.105
*/